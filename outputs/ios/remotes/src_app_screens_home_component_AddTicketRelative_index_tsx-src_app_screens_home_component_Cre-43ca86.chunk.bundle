(self.webpackChunkerequestApp=self.webpackChunkerequestApp||[]).push([["src_app_screens_home_component_AddTicketRelative_index_tsx-src_app_screens_home_component_Cre-43ca86"],{89142:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(41132)),l=a(n(85715)),r=n(87841),o=a(n(24541)),u=a(n(32055)),d=n(21527),s=a(n(61086)),c=n(46317),f=n(7005),v=n(41995),m=n(60596),g=n(35708),p=n(20880),h=n(2884),y=n(32207),S=n(47671);t.default=function(e){var t=e.dataCard,n=e.select,a=e.onSelect,x=e.account,j=e.isView,b=e.isRadioSelect,w=e.isSelect,C=void 0!==w&&w,I=(0,h.useTranslation)().t,D=(0,d.useState)(!1),k=(0,l.default)(D,2),P=k[0],T=k[1];(0,d.useEffect)((function(){j||null==n||n.forEach((function(e){e.id===t.id&&T(!0)}))}),[]);var M=function(e){if(b)e?null==a||a([t]):null==a||a([]);else if(T(e),e)null==a||a([].concat((0,i.default)(n),[t]));else{var l=n.filter((function(e){return e.id!==t.id}));null==a||a(l)}},z=function(e,t,n){return(0,S.jsx)(r.View,{style:{backgroundColor:t,paddingHorizontal:(0,v.SizeDP)(10),paddingVertical:(0,v.SizeDP)(6),borderRadius:(0,v.SizeDP)(16),alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(o.default,{style:{color:e},children:I(`TK.${n}`)})})};return(0,S.jsxs)(r.View,{style:s.default.ctnMain,children:[!j&&(0,S.jsx)(S.Fragment,{children:b?(0,S.jsx)(y.Radio,{style:{marginRight:6},checked:C,onChange:function(){return M(!C)}}):(0,S.jsx)(u.default,{checked:P,onChange:function(){return M(!P)}})}),(0,S.jsx)(f.SafeAreaView,{edges:["right"],style:{flex:1},children:(0,S.jsxs)(r.View,{style:[s.default.ctnCard,j&&{marginHorizontal:(0,v.SizeDP)(16)}],children:[(0,S.jsxs)(r.View,{style:[s.default.ctnHeader],children:[(0,S.jsxs)(r.View,{style:[s.default.ctnRow,{flex:1}],children:[(0,S.jsx)(r.View,{style:s.default.ctnImage,children:(0,S.jsx)(r.Image,{width:(0,v.SizeDP)(40),height:(0,v.SizeDP)(40),style:{borderRadius:(0,v.SizeDP)(20)},source:{uri:null!=x&&x.imageUrl?null==x?void 0:x.imageUrl:"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}})}),(0,S.jsxs)(r.View,{style:{rowGap:(0,v.SizeDP)(6),flex:1},children:[(0,S.jsx)(o.default,{style:s.default.name,children:null==t?void 0:t.createdBy}),(0,S.jsxs)(o.default,{style:s.default.group,children:[I("CM.serviceName"),": ",null==t?void 0:t.serviceName]})]})]}),function(){switch(null==t?void 0:t.priority){case m.Propity.high:return(0,S.jsx)(c.Iconhigh,{width:(0,v.SizeDP)(16),height:(0,v.SizeDP)(16)});case m.Propity.medium:return(0,S.jsx)(c.Iconmedium,{width:(0,v.SizeDP)(16),height:(0,v.SizeDP)(16)});case m.Propity.low:return(0,S.jsx)(c.Iconlow,{width:(0,v.SizeDP)(16),height:(0,v.SizeDP)(16)})}}()]}),(0,S.jsx)(y.Divider,{}),(0,S.jsxs)(r.View,{style:[s.default.ctnTitle],children:[(0,S.jsxs)(r.View,{style:[s.default.ctnRow,{alignItems:"flex-start"}],children:[(0,S.jsx)(o.default,{style:s.default.name,children:I("CM.titleCard")}),(0,S.jsx)(o.default,{style:s.default.handleNewGroup,children:null==t?void 0:t.title})]}),(0,S.jsxs)(r.View,{style:s.default.ctnRow,children:[(0,S.jsx)(o.default,{style:s.default.name,children:I("CM.createDateCard")}),(0,S.jsx)(o.default,{style:s.default.handleNewGroup,children:g.DateUtils.convertDateToDDMMYYYY_H_M(null==t?void 0:t.createdDate)})]}),(0,S.jsxs)(r.View,{style:s.default.ctnRow,children:[(0,S.jsx)(o.default,{style:s.default.name,children:I("CM.statusCard")}),function(){switch(null==t?void 0:t.ticketStatus){case m.Status.completed:return z(p.Color.completed,p.Color.completed01,m.Status.completed);case m.Status.draft:return z(p.Color.draft,p.Color.draft01,m.Status.draft);case m.Status.voided:return z(p.Color.voided,p.Color.voided01,m.Status.voided);case m.Status.rejected:return z(p.Color.rejected,p.Color.rejected01,m.Status.rejected);case m.Status.processing:return z(p.Color.processing,p.Color.processing01,m.Status.processing);case m.Status.overdue:return z(p.Color.rejected,p.Color.rejected01,m.Status.overdue)}}()]})]})]})})]})}},61086:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(41995)),l=n(20880);function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}t.default=a.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},ctnCard:{backgroundColor:l.Color.White,overflow:"hidden",borderRadius:(0,i.SizeDP)(10),marginVertical:(0,i.SizeDP)(12),shadowColor:l.Color.Black,shadowOffset:{width:2,height:2},shadowOpacity:.2,shadowRadius:4,elevation:4},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:(0,i.SizeDP)(16),paddingVertical:(0,i.SizeDP)(12)},ctnTitle:{paddingHorizontal:(0,i.SizeDP)(16),rowGap:(0,i.SizeDP)(16),paddingVertical:(0,i.SizeDP)(16)},ctnRow:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",columnGap:16},ctnImage:{width:(0,i.SizeDP)(40),height:(0,i.SizeDP)(40),backgroundColor:"red",borderRadius:(0,i.SizeDP)(20),marginRight:(0,i.SizeDP)(12)},name:{fontFamily:l.Font.InterMedium500,color:l.Color.TextPrimary},group:{color:l.Color.Text,fontSize:i.default.FontTiny,flex:1},handleNewGroup:{color:l.Color.Text,fontSize:i.default.FontTiny,textAlign:"right",flex:1}})},64213:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),l=a(n(94516)),r=a(n(4653)),o=n(47671);t.default=function(e){var t=e.onPressLeft,n=e.onPressRight,a=e.containerStyle,u=e.btnStyleLeft,d=e.btnStyleRight,s=e.labelStyleLeft,c=e.labelStyleRight,f=e.labelLeft,v=void 0===f?"left":f,m=e.labelRight,g=void 0===m?"right":m;return(0,o.jsxs)(i.View,{style:[a,r.default.ctnGroup],children:[(0,o.jsx)(l.default,{style:[r.default.btn,r.default.btnLeft,u],label:v,styleLabel:[s,r.default.labelStyleLeft],onPress:t}),(0,o.jsx)(l.default,{style:[r.default.btn,d],label:g,styleLabel:[c],onPress:n})]})}},4653:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(87841),i=n(41995),l=n(20880);t.default=a.StyleSheet.create({ctnGroup:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,i.SizeDP)(12),backgroundColor:l.Color.White},btn:{flex:1},btnLeft:{backgroundColor:l.Color.BtnDisable},labelStyleLeft:{color:l.Color.Text}})},87288:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a(n(21527));var i=n(87841),l=a(n(93580)),r=a(n(24541)),o=n(20880),u=n(47671);t.default=function(e){var t=e.style,n=e.message,a=e.isVisible;return(0,u.jsx)(i.Modal,{visible:a,transparent:!0,style:t,children:(0,u.jsxs)(i.View,{style:l.default.ctnContainer,children:[(0,u.jsx)(i.ActivityIndicator,{size:"large",color:o.Color.White}),(0,u.jsx)(r.default,{children:n})]})})}},93580:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(87841),i=n(20880);t.default=a.StyleSheet.create({ctnContainer:{flex:1,backgroundColor:i.Color.TxtCheckbox,alignItems:"center",justifyContent:"center"}})},58943:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(21527)),l=n(55166),r=n(14740),o=a(n(71773)),u=a(n(66474)),d=n(47671),s=i.default.lazy((function(){return l.Federated.importModule("eBLDTApp","./ScanScreen")}));t.default=function(e){var t=e.onScannedImage,n=((0,r.useRoute)(),(0,r.useNavigation)());return(0,d.jsx)(u.default,{name:"",navigation:n,children:(0,d.jsx)(i.default.Suspense,{fallback:(0,d.jsx)(o.default,{app:""}),children:(0,d.jsx)(s,{onScannedImage:t})})})}},829:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(41132)),l=a(n(29293)),r=a(n(85715)),o=n(7005),u=a(n(43184)),d=a(n(27747)),s=n(41995),c=a(n(29846)),f=n(46317),v=a(n(69290)),m=n(21527),g=n(87841),p=a(n(24541)),h=a(n(65963)),y=n(98884),S=n(14740),x=n(2543),j=a(n(94516)),b=a(n(64213)),w=n(12638),C=a(n(89142)),I=n(32207),D=n(2884),k=n(11671),P=a(n(33254)),T=n(20880),M=n(47671);t.default=function(e){var t=e.onGoBack,n=e.paramsSelectTicket,a=e.codeChannel,z=e.checkSabeco,O=void 0!==z&&z,F=e.configFilter,_=e.inheritanceModeler,V=e.modelerId,R=e.onClose,H=(0,D.useTranslation)().t,B=(null==_?void 0:_.modelerIds)||[],N=(0,S.useNavigation)(),L=(0,m.useState)(!1),E=(0,r.default)(L,2),A=E[0],W=E[1],Y=(0,m.useState)([]),G=(0,r.default)(Y,2),J=G[0],$=G[1],K=(0,m.useState)([]),U=(0,r.default)(K,2),q=U[0],X=U[1],Q=(0,m.useState)([]),Z=(0,r.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,m.useState)([]),ae=(0,r.default)(ne,2),ie=ae[0],le=ae[1],re=(0,m.useState)(0),oe=(0,r.default)(re,2),ue=oe[0],de=oe[1],se=(0,m.useState)([]),ce=(0,r.default)(se,2),fe=ce[0],ve=ce[1],me=(0,m.useState)(n),ge=(0,r.default)(me,2),pe=ge[0],he=ge[1],ye=(0,m.useState)(0),Se=(0,r.default)(ye,2),xe=Se[0],je=Se[1],be=(0,m.useState)(!1),we=(0,r.default)(be,2),Ce=we[0],Ie=we[1],De=(0,m.useState)(""),ke=(0,r.default)(De,2),Pe=ke[0],Te=ke[1],Me=(0,m.useState)(""),ze=(0,r.default)(Me,2),Oe=ze[0],Fe=ze[1],_e=(0,m.useState)({}),Ve=(0,r.default)(_e,2),Re=Ve[0],He=Ve[1],Be=(0,w.useAppSelector)((function(e){return e.account})).dataAccount,Ne=(0,w.useAppSelector)((function(e){return e.common.accessToken})),Le=(0,k.useTicketServices)(),Ee=(0,x.debounce)((function(e){Fe(e)}),500),Ae=(0,m.useMemo)((function(){return!!F&&!!(0,x.get)(F,"dataFilter.priority")}),[F]),We=(0,m.useMemo)((function(){return!!F&&!!(0,x.get)(F,"dataFilter.ticketStatus")}),[F]),Ye=(0,m.useMemo)((function(){return!F}),[F]),Ge=(0,m.useMemo)((function(){return!!F&&!!(0,x.get)(F,"dataFilter.startDate")}),[F]),Je=(0,m.useMemo)((function(){return!!F&&!!(0,x.get)(F,"dataFilter.endDate")}),[F]);(0,m.useEffect)((function(){if(F){var e=(0,x.get)(F,"dataFilter.priority"),t=(0,x.get)(F,"dataFilter.ticketStatus"),n=(0,x.get)(F,"dataFilter.endDate"),a=(0,x.get)(F,"dataFilter.startDate");if(e){var i=null==e?void 0:e.map((function(e){return new I.IndexPath(null==y.dataPrioritySelect?void 0:y.dataPrioritySelect.findIndex((function(t){return t.value===e})))}));le(i)}if(t){var l=null==t?void 0:t.map((function(e){return new I.IndexPath(null==y.dataStatus?void 0:y.dataStatus.findIndex((function(t){return t.value===e})))}));X(l)}a&&He(Object.assign({},Re,{startDate:new Date(a)})),n&&He(Object.assign({},Re,{endDate:new Date(n)}))}}),[]),(0,m.useEffect)((function(){return Ee(Pe),function(){Ee.cancel()}}),[Pe]),(0,m.useEffect)((function(){(0,l.default)((function*(){yield Xe(xe,Oe)}))()}),[xe,Oe]),(0,S.useFocusEffect)((0,m.useCallback)((function(){(0,l.default)((function*(){je(0),yield Qe()}))()}),[]));var $e,Ke,Ue,qe=($e=(0,l.default)((function*(){je(0),yield Xe(0,Oe)})),function(){return $e.apply(this,arguments)}),Xe=(Ke=(0,l.default)((function*(e,t){try{var n,l,r,o,u={textSearch:O?a:t,ticketStatus:null!=(n=q.map((function(e){return y.dataStatus[e.row].value})))?n:[],service:null!=(l=null==J?void 0:J.map((function(e){var t;return null==ee||null==(t=ee[null==e?void 0:e.row])?void 0:t.value})))?l:[],priority:null!=(r=null==ie?void 0:ie.map((function(e){var t;return null==y.dataPrioritySelect||null==(t=y.dataPrioritySelect[null==e?void 0:e.row])?void 0:t.value})))?r:[],startDate:null==Re?void 0:Re.startDate,endDate:null==Re?void 0:Re.endDate,searchForSabeco:!!O,modelerId:V};if(F){var d,s,c=(0,x.get)(F,"dataFilter.priority"),f=(0,x.get)(F,"dataFilter.ticketStatus"),v=(0,x.get)(F,"dataFilter.endDate"),m=(0,x.get)(F,"dataFilter.startDate");u=Object.assign({},null==F?void 0:F.dataFilter,{priority:c||(null!=(d=null==ie?void 0:ie.map((function(e){var t;return null==y.dataPrioritySelect||null==(t=y.dataPrioritySelect[null==e?void 0:e.row])?void 0:t.value})))?d:[]),ticketStatus:f||(null!=(s=q.map((function(e){return y.dataStatus[e.row].value})))?s:[]),startDate:m||(null==Re?void 0:Re.startDate),endDate:v||(null==Re?void 0:Re.endDate),textSearch:O?a:t,modelerId:V})}var g=yield Le.getTicketList(e,20,"createdDate,desc",Ne,u);ve(0===e?null==g?void 0:g.content:[].concat((0,i.default)(fe),(0,i.default)(null==g?void 0:g.content))),de(null==g||null==(o=g.page)?void 0:o.totalRecords)}catch(e){}finally{Ie(!1),W(!1)}})),function(e,t){return Ke.apply(this,arguments)}),Qe=(Ue=(0,l.default)((function*(){try{var e=(yield Le.getServiceMenu(0,1e4,void 0,Ne,!0)).content.map((function(e){return{label:e.serviceName,value:e.id}}));te(e)}catch(e){}})),function(){return Ue.apply(this,arguments)});return(0,M.jsx)(g.TouchableWithoutFeedback,{onPress:function(){return g.Keyboard.dismiss()},children:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(u.default,{style:{backgroundColor:"#fff"},contentStyle:{backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:T.Color.borderColor},titleStyle:{color:"#000810"},fillIconBackLeft:"#000810",title:H("HM.addRelativeTicket"),onPressIconLeft:R}),(0,M.jsxs)(o.SafeAreaView,{style:c.default.ctnArea,edges:["bottom"],children:[(0,M.jsxs)(g.View,{style:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingVertical:10,flex:1},children:[(0,M.jsx)(d.default,{inputContainerStyle:{backgroundColor:"#fff"},viewIconLeft:(0,M.jsx)(f.IcSearch,{width:16,height:16}),viewIconRight:(0,M.jsx)(f.IconFilter,{width:16,height:16}),value:O?a:Pe,onIconPress:function(){return W(!0)},onChangeText:Te,label:H("HM.searchTicket")}),(0,M.jsx)(g.FlatList,{data:fe,refreshing:Ce,onRefresh:function(){0!==xe&&Ie(!0),je(0)},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,contentContainerStyle:{paddingRight:(0,s.SizeDP)(2)},onEndReached:function(){fe.length<ue&&je(xe+1)},onEndReachedThreshold:.5,renderItem:function(e){var t,n=e.item;return(0,M.jsx)(C.default,{dataCard:n,onSelect:he,select:pe,account:Be,isRadioSelect:null==B?void 0:B.length,isSelect:(null==B?void 0:B.length)&&(null==pe||null==(t=pe[0])?void 0:t.id)===n.id})}})]}),(0,M.jsx)(g.View,{style:{backgroundColor:"#fff",paddingHorizontal:16},children:(0,M.jsx)(b.default,{containerStyle:{backgroundColor:"#fff",paddingTop:6},labelLeft:H("CM.labelCancel"),labelRight:`${H("CM.save")} (${pe.length}) ${H("HM.ticket")}`,onPressLeft:function(){return N.goBack()},onPressRight:function(){t(pe,V),R()}})})]}),(0,M.jsx)(v.default,{isVisible:A,title:H("CM.filter"),onClose:function(){return W(!1)},renderContent:(0,M.jsx)(M.Fragment,{children:!(0,x.isEmpty)(ee)&&(0,M.jsxs)(o.SafeAreaView,{style:{maxHeight:2*s.ScreenHeight/3},children:[(0,M.jsxs)(g.ScrollView,{showsVerticalScrollIndicator:!1,children:[Ye&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(p.default,{style:{marginVertical:4},children:H("HM.groupService")}),(0,M.jsx)(h.default,{onSelect:$,valueSelect:J,placeholder:H("HM.groupServiceSelect"),multiple:!0,listData:ee})]}),(0,M.jsx)(p.default,{style:{marginVertical:4},children:H("HM.priority")}),(0,M.jsx)(h.default,{onSelect:le,valueSelect:ie,placeholder:H("HM.priotitySelect"),multiple:!0,isi18n:!0,listData:y.dataPrioritySelect,disabled:Ae}),(0,M.jsx)(p.default,{style:{marginVertical:4},children:H("HM.statusTicket")}),(0,M.jsx)(h.default,{onSelect:X,valueSelect:q,placeholder:H("HM.select"),multiple:!0,isi18n:!0,listData:y.dataStatus,disabled:We}),(0,M.jsx)(p.default,{style:{paddingVertical:(0,s.SizeDP)(10)},children:H("HM.createDate")}),(0,M.jsxs)(g.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[(0,M.jsx)(P.default,{value:Re.startDate,onChangeDate:function(e){return He(Object.assign({},Re,{startDate:e?new Date(e):void 0}))},disabled:Ge}),(0,M.jsx)(I.Icon,{name:"arrow-forward-outline",width:20,height:20}),(0,M.jsx)(P.default,{value:Re.endDate,onChangeDate:function(e){return He(Object.assign({},Re,{endDate:e?new Date(e):void 0}))},disabled:Je})]}),(0,M.jsx)(g.View,{style:c.default.bottom})]}),(0,M.jsx)(g.View,{style:{},children:(0,M.jsx)(j.default,{label:H("CM.save"),style:{marginTop:(0,s.SizeDP)(20)},onPress:qe})})]})})})]})})}},82894:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(41132)),l=a(n(29293)),r=a(n(85715)),o=n(7005),u=a(n(43184)),d=a(n(27747)),s=n(41995),c=a(n(29846)),f=n(46317),v=a(n(69290)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var r=i?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(a,l,r):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(21527)),g=n(87841),p=a(n(24541)),h=a(n(65963)),y=n(98884),S=n(14740),x=n(2543),j=a(n(94516)),b=a(n(64213)),w=n(12638),C=a(n(89142)),I=n(32207),D=n(2884),k=n(11671),P=a(n(33254)),T=n(47671);function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}t.default=function(e){var t=e.route,n=(0,D.useTranslation)().t,a=null==t?void 0:t.params,M=a.onGoBack,z=a.paramsSelectTicket,O=a.codeChannel,F=a.checkSabeco,_=void 0!==F&&F,V=a.configFilter,R=a.inheritanceModeler,H=a.modelerId,B=(null==R?void 0:R.modelerIds)||[],N=(0,S.useNavigation)(),L=(0,m.useState)(!1),E=(0,r.default)(L,2),A=E[0],W=E[1],Y=(0,m.useState)([]),G=(0,r.default)(Y,2),J=G[0],$=G[1],K=(0,m.useState)([]),U=(0,r.default)(K,2),q=U[0],X=U[1],Q=(0,m.useState)([]),Z=(0,r.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,m.useState)([]),ae=(0,r.default)(ne,2),ie=ae[0],le=ae[1],re=(0,m.useState)(0),oe=(0,r.default)(re,2),ue=oe[0],de=oe[1],se=(0,m.useState)([]),ce=(0,r.default)(se,2),fe=ce[0],ve=ce[1],me=(0,m.useState)(z),ge=(0,r.default)(me,2),pe=ge[0],he=ge[1],ye=(0,m.useState)(0),Se=(0,r.default)(ye,2),xe=Se[0],je=Se[1],be=(0,m.useState)(!1),we=(0,r.default)(be,2),Ce=we[0],Ie=we[1],De=(0,m.useState)(""),ke=(0,r.default)(De,2),Pe=ke[0],Te=ke[1],Me=(0,m.useState)(""),ze=(0,r.default)(Me,2),Oe=ze[0],Fe=ze[1],_e=(0,m.useState)({}),Ve=(0,r.default)(_e,2),Re=Ve[0],He=Ve[1],Be=(0,w.useAppSelector)((function(e){return e.account})).dataAccount,Ne=(0,w.useAppSelector)((function(e){return e.common.accessToken})),Le=(0,k.useTicketServices)(),Ee=(0,x.debounce)((function(e){Fe(e)}),500),Ae=(0,m.useMemo)((function(){return!!V&&!!(0,x.get)(V,"dataFilter.priority")}),[V]),We=(0,m.useMemo)((function(){return!!V&&!!(0,x.get)(V,"dataFilter.ticketStatus")}),[V]),Ye=(0,m.useMemo)((function(){return!V}),[V]),Ge=(0,m.useMemo)((function(){return!!V&&!!(0,x.get)(V,"dataFilter.startDate")}),[V]),Je=(0,m.useMemo)((function(){return!!V&&!!(0,x.get)(V,"dataFilter.endDate")}),[V]);(0,m.useEffect)((function(){if(V){var e=(0,x.get)(V,"dataFilter.priority"),t=(0,x.get)(V,"dataFilter.ticketStatus"),n=(0,x.get)(V,"dataFilter.endDate"),a=(0,x.get)(V,"dataFilter.startDate");if(e){var i=null==e?void 0:e.map((function(e){return new I.IndexPath(null==y.dataPrioritySelect?void 0:y.dataPrioritySelect.findIndex((function(t){return t.value===e})))}));le(i)}if(t){var l=null==t?void 0:t.map((function(e){return new I.IndexPath(null==y.dataStatus?void 0:y.dataStatus.findIndex((function(t){return t.value===e})))}));X(l)}a&&He(Object.assign({},Re,{startDate:new Date(a)})),n&&He(Object.assign({},Re,{endDate:new Date(n)}))}}),[]),(0,m.useEffect)((function(){return Ee(Pe),function(){Ee.cancel()}}),[Pe]),(0,m.useEffect)((function(){(0,l.default)((function*(){yield Xe(xe,Oe)}))()}),[xe,Oe]),(0,S.useFocusEffect)((0,m.useCallback)((function(){(0,l.default)((function*(){je(0),yield Qe()}))()}),[]));var $e,Ke,Ue,qe=($e=(0,l.default)((function*(){je(0),yield Xe(0,Oe)})),function(){return $e.apply(this,arguments)}),Xe=(Ke=(0,l.default)((function*(e,t){try{var n,a,l,r,o={textSearch:_?O:t,ticketStatus:null!=(n=q.map((function(e){return y.dataStatus[e.row].value})))?n:[],service:null!=(a=null==J?void 0:J.map((function(e){var t;return null==ee||null==(t=ee[null==e?void 0:e.row])?void 0:t.value})))?a:[],priority:null!=(l=null==ie?void 0:ie.map((function(e){var t;return null==y.dataPrioritySelect||null==(t=y.dataPrioritySelect[null==e?void 0:e.row])?void 0:t.value})))?l:[],startDate:null==Re?void 0:Re.startDate,endDate:null==Re?void 0:Re.endDate,searchForSabeco:!!_,modelerId:H};if(V){var u,d,s=(0,x.get)(V,"dataFilter.priority"),c=(0,x.get)(V,"dataFilter.ticketStatus"),f=(0,x.get)(V,"dataFilter.endDate"),v=(0,x.get)(V,"dataFilter.startDate");o=Object.assign({},null==V?void 0:V.dataFilter,{priority:s||(null!=(u=null==ie?void 0:ie.map((function(e){var t;return null==y.dataPrioritySelect||null==(t=y.dataPrioritySelect[null==e?void 0:e.row])?void 0:t.value})))?u:[]),ticketStatus:c||(null!=(d=q.map((function(e){return y.dataStatus[e.row].value})))?d:[]),startDate:v||(null==Re?void 0:Re.startDate),endDate:f||(null==Re?void 0:Re.endDate),textSearch:_?O:t,modelerId:H})}var m=yield Le.getTicketList(e,20,"createdDate,desc",Ne,o);ve(0===e?null==m?void 0:m.content:[].concat((0,i.default)(fe),(0,i.default)(null==m?void 0:m.content))),de(null==m||null==(r=m.page)?void 0:r.totalRecords)}catch(e){}finally{Ie(!1),W(!1)}})),function(e,t){return Ke.apply(this,arguments)}),Qe=(Ue=(0,l.default)((function*(){try{var e=(yield Le.getServiceMenu(0,1e4,void 0,Ne,!0)).content.map((function(e){return{label:e.serviceName,value:e.id}}));te(e)}catch(e){}})),function(){return Ue.apply(this,arguments)});return(0,T.jsx)(g.TouchableWithoutFeedback,{onPress:function(){return g.Keyboard.dismiss()},children:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(u.default,{title:n("HM.addRelativeTicket")}),(0,T.jsxs)(o.SafeAreaView,{style:c.default.ctnArea,edges:["bottom"],children:[(0,T.jsxs)(g.View,{style:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingVertical:10,flex:1},children:[(0,T.jsx)(d.default,{inputContainerStyle:{backgroundColor:"#fff"},viewIconLeft:(0,T.jsx)(f.IcSearch,{width:16,height:16}),viewIconRight:(0,T.jsx)(f.IconFilter,{width:16,height:16}),value:_?O:Pe,onIconPress:function(){return W(!0)},onChangeText:Te,label:n("HM.searchTicket")}),(0,T.jsx)(g.FlatList,{data:fe,refreshing:Ce,onRefresh:function(){0!==xe&&Ie(!0),je(0)},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,contentContainerStyle:{paddingRight:(0,s.SizeDP)(2)},onEndReached:function(){fe.length<ue&&je(xe+1)},onEndReachedThreshold:.5,renderItem:function(e){var t,n=e.item;return(0,T.jsx)(C.default,{dataCard:n,onSelect:he,select:pe,account:Be,isRadioSelect:null==B?void 0:B.length,isSelect:(null==B?void 0:B.length)&&(null==pe||null==(t=pe[0])?void 0:t.id)===n.id})}})]}),(0,T.jsx)(g.View,{style:{backgroundColor:"#fff",paddingHorizontal:16},children:(0,T.jsx)(b.default,{containerStyle:{backgroundColor:"#fff",paddingTop:6},labelLeft:n("CM.labelCancel"),labelRight:`${n("CM.save")} (${pe.length}) ${n("HM.ticket")}`,onPressLeft:function(){return N.goBack()},onPressRight:function(){null!=pe&&pe.length&&(M(pe,O,H),N.goBack())}})})]}),(0,T.jsx)(v.default,{isVisible:A,title:n("CM.filter"),onClose:function(){return W(!1)},renderContent:(0,T.jsx)(T.Fragment,{children:!(0,x.isEmpty)(ee)&&(0,T.jsxs)(o.SafeAreaView,{style:{maxHeight:2*s.ScreenHeight/3},children:[(0,T.jsxs)(g.ScrollView,{showsVerticalScrollIndicator:!1,children:[Ye&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(p.default,{style:{marginVertical:4},children:n("HM.groupService")}),(0,T.jsx)(h.default,{onSelect:$,valueSelect:J,placeholder:n("HM.groupServiceSelect"),multiple:!0,listData:ee})]}),(0,T.jsx)(p.default,{style:{marginVertical:4},children:n("HM.priority")}),(0,T.jsx)(h.default,{onSelect:le,valueSelect:ie,placeholder:n("HM.priotitySelect"),multiple:!0,isi18n:!0,listData:y.dataPrioritySelect,disabled:Ae}),(0,T.jsx)(p.default,{style:{marginVertical:4},children:n("HM.statusTicket")}),(0,T.jsx)(h.default,{onSelect:X,valueSelect:q,placeholder:n("HM.select"),multiple:!0,isi18n:!0,listData:y.dataStatus,disabled:We}),(0,T.jsx)(p.default,{style:{paddingVertical:(0,s.SizeDP)(10)},children:n("HM.createDate")}),(0,T.jsxs)(g.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[(0,T.jsx)(P.default,{value:Re.startDate,onChangeDate:function(e){return He(Object.assign({},Re,{startDate:e?new Date(e):void 0}))},disabled:Ge}),(0,T.jsx)(I.Icon,{name:"arrow-forward-outline",width:20,height:20}),(0,T.jsx)(P.default,{value:Re.endDate,onChangeDate:function(e){return He(Object.assign({},Re,{endDate:e?new Date(e):void 0}))},disabled:Je})]}),(0,T.jsx)(g.View,{style:c.default.bottom})]}),(0,T.jsx)(g.View,{style:{},children:(0,T.jsx)(j.default,{label:n("CM.save"),style:{marginTop:(0,s.SizeDP)(20)},onPress:qe})})]})})})]})})}},29846:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(87841),i=n(41995);t.default=a.StyleSheet.create({ctnArea:{flex:1,backgroundColor:"#fff"},bottom:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",columnGap:(0,i.SizeDP)(10),flex:1},calender:{backgroundColor:"#fff",flex:1,alignItems:"center",justifyContent:"flex-start"}})},94655:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(85715)),l=n(87841),r=n(46317),o=a(n(85739)),u=a(n(24541));n(41995);var d=n(20880),s=n(60596),c=n(21527),f=n(35708),v=n(2884),m=a(n(45001)),g=n(47671);t.default=function(e){var t=e.dataCard,n=e.onSelect,a=e.select,p=e.account,h=e.isShowTrash,y=(0,v.useTranslation)().t,S=(0,c.useState)(!1),x=(0,i.default)(S,2),j=x[0],b=x[1],w=function(e,t,n){return(0,g.jsxs)(l.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)(l.View,{style:{backgroundColor:t,paddingHorizontal:10,paddingVertical:6,borderRadius:8,alignItems:"center",justifyContent:"center",marginTop:6},children:(0,g.jsx)(u.default,{style:{color:e},children:y(`TK.${n}`)})}),(0,g.jsx)(l.View,{style:{flex:1}})]})};return(0,g.jsxs)(l.View,{style:o.default.ctnMain,children:[(0,g.jsxs)(l.View,{style:{rowGap:6},children:[(0,g.jsx)(u.default,{style:{fontFamily:d.Font.InterSemiBold600,fontSize:16},children:null==t?void 0:t.title}),(0,g.jsxs)(l.View,{style:o.default.ctnInfo,children:[(0,g.jsx)(u.default,{children:f.DateUtils.convertDateToDDMMYYYY_H_M(null==t?void 0:t.createdDate)}),null!=p&&p.avatar?(0,g.jsxs)(l.View,{style:o.default.ctnImage,children:[(0,g.jsx)(l.Image,{width:24,height:24,style:{borderRadius:12},source:{uri:d.String.PREFIX_IMG_BASE64+(null==p?void 0:p.avatar)}}),(0,g.jsx)(u.default,{numberOfLines:1,style:{width:150},children:null==t?void 0:t.createdBy})]}):(0,g.jsxs)(l.View,{style:o.default.ctnImage,children:[(0,g.jsx)(l.Image,{width:24,height:24,style:{borderRadius:12},source:{uri:d.String.DEFAULT_IMAGE}}),(0,g.jsx)(u.default,{style:{},children:null==t?void 0:t.createdBy})]})]}),function(){switch(null==t?void 0:t.ticketStatus){case s.Status.completed:return w(d.Color.completed,d.Color.completed01,s.Status.completed);case s.Status.draft:return w(d.Color.draft,d.Color.draft01,s.Status.draft);case s.Status.voided:return w(d.Color.voided,d.Color.voided01,s.Status.voided);case s.Status.rejected:return w(d.Color.rejected,d.Color.rejected01,s.Status.rejected);case s.Status.processing:return w(d.Color.processing,d.Color.processing01,s.Status.processing);case s.Status.overdue:return w(d.Color.rejected,d.Color.rejected01,s.Status.overdue)}}()]}),h&&(0,g.jsx)(l.TouchableOpacity,{hitSlop:15,onPress:function(){return b(!0)},children:(0,g.jsx)(r.IconTrash,{width:20,height:20})}),(0,g.jsx)(m.default,{title:y("TK.delete_relate"),content:y("TK.delete_relate_confirm"),type:"cancel",labelCancel:y("CM.labelCancel"),labelConfirm:y("CM.confirm"),isVisible:j,onClose:function(){return b(!1)},onConfirm:function(){var e=a.filter((function(e){return e.id!==t.id}));n(e)}})]})}},85739:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(41995)),l=n(20880);function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}t.default=a.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:(0,i.SizeDP)(16),backgroundColor:l.Color.White,borderBottomWidth:(0,i.SizeDP)(1),borderBottomColor:l.Color.borderColor},ctnImage:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:8,marginTop:8},subText:{fontSize:i.default.FontTiny},ctnInfo:{}})},9353:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.findLegalFromListOrganization=t.dataTiket=t.dataProrityDummy=t.convertToISO=t.FIELD_FORM_TYPE_INHERIT=void 0,t.getListComponentOfTemplate=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=n;return t.forEach((function(t){a.push(t),null!=t&&t.components&&e((0,l.default)(t.components),a)})),a};var i=a(n(85715)),l=a(n(41132)),r=n(46317),o=n(60596),u=n(47671);t.dataProrityDummy=[{id:1,key:"TK.high",value:o.Propity.high,icon:(0,u.jsx)(r.Iconhigh,{width:12,height:12})},{id:2,key:"TK.medium",value:o.Propity.medium,icon:(0,u.jsx)(r.Iconmedium,{width:12,height:12})},{id:3,key:"TK.low",value:o.Propity.low,icon:(0,u.jsx)(r.Iconlow,{width:12,height:12})}],t.dataTiket=[{id:1,key:"HM.information",value:"information",icon:(0,u.jsx)(r.IconPerson,{width:20,height:20})}];t.FIELD_FORM_TYPE_INHERIT=["textField","textArea","number","password","email","phone_number","radio_button","check_box","dropdown","datepicker","upload_file","upload_img","hyperlink","table","table_advance","signature","rich_text"],t.convertToISO=function(e,t){if("string"!=typeof e||"string"!=typeof t)return null;var n=e,a="00:00:00";if(t.includes("HH")){var l=e.split(" "),r=(0,i.default)(l,2);n=r[0],a=r[1]}var o,u,d,s=n.split(/[\/\-\.]/).map(Number),c=(a||"00:00:00").split(":").map(Number),f=(0,i.default)(c,3),v=f[0],m=f[1],g=f[2];switch(t){case"DD/MM/YYYY":case"DD/MM/YYYY HH:mm:ss":var p=(0,i.default)(s,3);d=p[0],u=p[1],o=p[2];break;case"MM/DD/YYYY":case"MM/DD/YYYY HH:mm:ss":var h=(0,i.default)(s,3);u=h[0],d=h[1],o=h[2];break;case"YYYY/MM/DD":var y=(0,i.default)(s,3);o=y[0],u=y[1],d=y[2];break;case"YYYY/DD/MM HH:mm:ss":var S=(0,i.default)(s,3);o=S[0],d=S[1],u=S[2];break;default:return console.error("Unsupported format"),null}return[d,u,o,v,m,g].some(isNaN)?null:new Date(Date.UTC(o,u-1,d,v,m,g)).toISOString()},t.findLegalFromListOrganization=function e(t,n){var a=null==t?void 0:t.find((function(e){return"LEGAL"===e.type&&e.orgIn===n}));if(a)return a;var i,l=null==n?void 0:n.split("/");return l&&(null==l?void 0:l.length)<=3?null==t?void 0:t.find((function(e){return e.orgIn===n})):e(t,null==l||null==(i=l.slice(0,-1))?void 0:i.join("/"))}},37377:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(41132)),l=a(n(43693)),r=a(n(29293)),o=a(n(85715)),u=n(87841),d=a(n(43184)),s=a(n(33865)),c=n(46317),f=n(41995),v=a(n(93238)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=L(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var r=i?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(a,l,r):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(21527)),g=n(7005),p=n(20880),h=a(n(85555)),y=a(n(69290)),S=n(14740),x=n(2543),j=n(12638),b=a(n(24541)),w=a(n(45001)),C=a(n(27747)),I=a(n(87288)),D=a(n(94655)),k=n(2884),P=n(32207),T=n(11671),M=n(40851),z=n(88e3),O=a(n(77389)),F=a(n(76644)),_=n(58526),V=a(n(22702)),R=n(9353),H=a(n(58943)),B=n(85653),N=n(47671);function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(L=function(e){return e?n:t})(e)}t.default=function(){var e,t,n,a,L=(0,k.useTranslation)().t,E=(0,S.useRoute)(),A=(null==E||null==(e=E.params)?void 0:e.actionTicketFrom)||"eRequest",W=(null==E||null==(t=E.params)?void 0:t.relatedTicket)||"",Y=(0,m.useRef)(null),G=(0,S.useNavigation)(),J=null!=(n=null==E||null==(a=E.params)?void 0:a.action)?n:"create",$=(0,m.useState)(R.dataProrityDummy[2]),K=(0,o.default)($,2),U=K[0],q=K[1],X=(0,m.useState)(),Q=(0,o.default)(X,2),Z=Q[0],ee=Q[1],te=(0,m.useState)([]),ne=(0,o.default)(te,2),ae=ne[0],ie=ne[1],le=(0,m.useState)([]),re=(0,o.default)(le,2),oe=re[0],ue=re[1],de=(0,m.useState)([]),se=(0,o.default)(de,2),ce=se[0],fe=se[1],ve=(0,m.useState)({status:"processing",isSaveDraftButSubmit:!1}),me=(0,o.default)(ve,2),ge=me[0],pe=me[1],he=(0,m.useState)([]),ye=(0,o.default)(he,2),Se=ye[0],xe=ye[1],je=(0,m.useState)(),be=(0,o.default)(je,2),we=be[0],Ce=be[1],Ie=(0,m.useState)(""),De=(0,o.default)(Ie,2),ke=De[0],Pe=De[1],Te=(0,m.useState)(""),Me=(0,o.default)(Te,2),ze=Me[0],Oe=Me[1],Fe=(0,m.useState)(!1),_e=(0,o.default)(Fe,2),Ve=_e[0],Re=_e[1],He=(0,m.useState)(!1),Be=(0,o.default)(He,2),Ne=Be[0],Le=Be[1],Ee=(0,m.useState)(!1),Ae=(0,o.default)(Ee,2),We=(Ae[0],Ae[1]),Ye=(0,m.useState)(!1),Ge=(0,o.default)(Ye,2),Je=(Ge[0],Ge[1]),$e=(0,m.useState)(!1),Ke=(0,o.default)($e,2),Ue=Ke[0],qe=Ke[1],Xe=(0,m.useState)(!1),Qe=(0,o.default)(Xe,2),Ze=Qe[0],et=Qe[1],tt=(0,m.useState)(),nt=(0,o.default)(tt,2),at=nt[0],it=nt[1],lt=(0,m.useState)(""),rt=(0,o.default)(lt,2),ot=rt[0],ut=rt[1],dt=(0,m.useState)(!1),st=(0,o.default)(dt,2),ct=st[0],ft=st[1],vt=(0,m.useState)(null),mt=(0,o.default)(vt,2),gt=mt[0],pt=mt[1],ht=(0,m.useState)(!1),yt=(0,o.default)(ht,2),St=yt[0],xt=yt[1],jt=(0,m.useState)([]),bt=(0,o.default)(jt,2),wt=bt[0],Ct=bt[1],It=(0,m.useState)(!1),Dt=(0,o.default)(It,2),kt=Dt[0],Pt=Dt[1],Tt=(0,m.useState)(0),Mt=(0,o.default)(Tt,2),zt=Mt[0],Ot=Mt[1],Ft=(0,m.useState)(!1),_t=(0,o.default)(Ft,2),Vt=_t[0],Rt=_t[1],Ht=(0,m.useState)(null),Bt=(0,o.default)(Ht,2),Nt=Bt[0],Lt=Bt[1],Et=(0,m.useState)(!1),At=(0,o.default)(Et,2),Wt=At[0],Yt=At[1],Gt=(0,T.useTicketServices)(),Jt=(0,M.useReviewServices)(),$t=(0,B.useOriginServices)(),Kt=((0,u.useWindowDimensions)().width,(0,j.useAppSelector)((function(e){return e.account.dataAccount}))),Ut=(0,j.useAppSelector)((function(e){return e.common.accessToken}));(0,S.useFocusEffect)((0,m.useCallback)((function(){var e,t,n,a,i;null!=E&&null!=(e=E.params)&&e.codeChannel&&pt(null==E||null==(n=E.params)?void 0:n.codeChannel);null!=E&&null!=(t=E.params)&&t.modelerId?xt(!0):(null==E||null==(a=E.params)||null==(i=a.paramsSelectTicket)?void 0:i.length)>=0&&Le(!0)}),[null==E?void 0:E.params]));var qt,Xt=(qt=(0,r.default)((function*(e){try{var t=yield Gt.getTicketById(W,Ut);G.setParams(Object.assign({},null==E?void 0:E.params,{paramsSelectTicket:[t]})),yield Cn([t],e)}catch(e){}})),function(e){return qt.apply(this,arguments)});(0,m.useEffect)((function(){var e=u.Keyboard.addListener("android"===u.Platform.OS?"keyboardDidShow":"keyboardWillShow",(function(e){Ot(e.endCoordinates.height)})),t=u.Keyboard.addListener("android"===u.Platform.OS?"keyboardDidHide":"keyboardWillHide",(function(e){Ot(0)}));return function(){e.remove(),t.remove()}}),[]),(0,m.useEffect)((function(){(0,r.default)((function*(){try{var e,t,n,a;if(Pe(""),null!=E&&null!=(e=E.params)&&null!=(t=e.dataTicket)&&t.modelerId&&(yield sn()),null!=E&&null!=(n=E.params)&&null!=(a=n.dataTicket)&&a.id&&"create"!==J){var i=yield hn();if(i){var l;it(i),Pe(null==i?void 0:i.title);var r=R.dataProrityDummy.find((function(e){return(null==e?void 0:e.value)===i.priority}));r&&q(r);var o=null==(l=i.formData)?void 0:l.find((function(e){return!e.userTaskId}));o&&o.formData&&Ce(o.version);var u=i.listRelativeTicket;u.length>0&&G.setParams(Object.assign({},null==E?void 0:E.params,{paramsSelectTicket:u}))}}}catch(e){}}))()}),[]);var Qt,Zt,en,tn,nn,an,ln,rn,on,un,dn,sn=(Qt=(0,r.default)((function*(){try{var e,t,n,a,i,l,r=yield Promise.all([Gt.getModeler(null==E||null==(e=E.params)||null==(t=e.dataTicket)?void 0:t.modelerId,Ut),Gt.getImplementByModelerId(null==E||null==(n=E.params)||null==(a=n.dataTicket)?void 0:a.modelerId),Gt.getAclProcessByModelerId(null==E||null==(i=E.params)||null==(l=i.dataTicket)?void 0:l.modelerId)]),o=r[0];ee(o),Ce(o.formVersion);var u=yield Gt.getFormByVersion(o.formVersion);if(u){var d=u.jsonForm;"string"!=typeof d&&(d=JSON.stringify(d)),d.includes("#18032025#")&&(ft(!0),Pe("OIA_Kênh_Tên điểm bán")),mn(d)}var s=r[2].data.content,c=r[1].data;ue(c),ie(s);var f=o.followerId?o.followerId.split(",").map(Number):[],v=o.managerId?o.managerId.split(",").map(Number):[],m=Array.from(new Set(f.concat(v).filter((function(e){return!c.some((function(t){return+(null==t?void 0:t.executorId)===e}))})))),g=[];o.documentId&&g.push(Gt.getListDataVariableConfig(o.documentId)),m.length>0&&g.push(Jt.findUserByOrgIn(0,1e4,"",null,m));var p,h=yield Promise.all(g),y=[];o.documentId&&!m.length?p=h[0].variables.filter((function(e){return e.apply&&e.resourceId===o.formId})):!o.documentId&&m.length?y=m.map((function(e){return h[0].data.find((function(t){return t.resourceId===e}))})):(p=h[0].variables.filter((function(e){return e.apply&&e.resourceId===o.formId})),y=m.map((function(e){return h[1].data.find((function(t){return t.resourceId===e}))}))),xe(p),fe(y)}catch(e){}})),function(){return Qt.apply(this,arguments)}),cn=(Zt=(0,r.default)((function*(e){try{return(yield Jt.findUserByOrgIn(0,10,"",e)).data}catch(e){throw console.error(e),e}})),function(e){return Zt.apply(this,arguments)}),fn=(en=(0,r.default)((function*(e){var t,n,a,i,l,r,o,u,d,s,c,f={orgIn:null==Kt||null==(t=Kt.orgIn)?void 0:t.split("/").slice(0,3).join("/")},v=yield Jt.getDataOrgByOrgin(f);if(s=(0,R.findLegalFromListOrganization)(v,null==Kt?void 0:Kt.orgIn),"my"===e)return{myOrganizationName:null==(c=s)?void 0:c.name,superiorOrganizationName:"",myOrganization:s};var m="all"===e?null==(n=s)||null==(a=n.orgIn)||null==(i=a.split("/"))?void 0:i.slice(0,-1):null==Kt||null==(l=Kt.orgIn)||null==(r=l.split("/"))?void 0:r.slice(0,-1);return d=m&&(null==m?void 0:m.length)<=3?null==v?void 0:v.find((function(e){return e.orgIn===(null==m?void 0:m.join("/"))})):(0,R.findLegalFromListOrganization)(v,null==m?void 0:m.join("/")),{myOrganizationName:null==(o=s)?void 0:o.name,superiorOrganizationName:null==(u=d)?void 0:u.name}})),function(e){return en.apply(this,arguments)}),vn=(tn=(0,r.default)((function*(e){return yield $t.getOrigin(e)})),nn=(0,r.default)((function*(e){if(e&&e.length&&(e.includes("#accountname#")||e.includes("#emailCreateBy#")||e.includes("#organizationCreateBy#")||e.includes("#organizationSupervising#")||e.includes("#keyValueModeler#")||e.includes("#myOrganization#")||e.includes("#superiorOrganization#")||e.includes("#addressSubsidiaries#")||e.includes("#taxCodeSubsidiaries#"))){var t,n,a=null,i=null,l=null,r=null,o=null,u=null;if(e.includes("#organizationCreateBy#")){var d,s=yield cn((null==Kt?void 0:Kt.orgIn)||"");s&&(a=null==(d=s[0])?void 0:d.orgName)}if(e.includes("#organizationSupervising#")){var c,f=null==Kt||null==(c=Kt.orgIn)?void 0:c.split("/"),v=f&&(null==f?void 0:f.length)>3?null==f?void 0:f.slice(0,-1).join("/"):null==Kt?void 0:Kt.orgIn;if(v){var m,g=yield cn(v);g&&(i=null==(m=g[0])?void 0:m.orgName)}}if(e.includes("#myOrganization#")||e.includes("#superiorOrganization#")){var p=e.includes("#myOrganization#")&&e.includes("#superiorOrganization#")?"all":e.includes("#myOrganization#")&&!e.includes("#superiorOrganization#")?"my":"superior",h=yield fn(p);h&&(l=null==h?void 0:h.myOrganizationName,r=null==h?void 0:h.superiorOrganizationName)}if(e.includes("#addressSubsidiaries#")||e.includes("#taxCodeSubsidiaries#")){var y=(yield fn("my")).myOrganization;y&&(o=null==y?void 0:y.address,u=null==y?void 0:y.taxCode)}var S=JSON.parse(e);S=(S=(0,R.getListComponentOfTemplate)(S||[]).filter((function(e){return R.FIELD_FORM_TYPE_INHERIT.includes(e.type)}))).map((function(e){return"datepicker"==e.type&&e.value&&(e.value=(0,R.convertToISO)(e.value,e.validate.formatDate)),"#organizationCreateBy#"==e.code?Object.assign({},e,{value:a}):"#organizationSupervising#"==e.code?Object.assign({},e,{value:i}):"#myOrganization#"==e.code?Object.assign({},e,{value:l}):"#superiorOrganization#"==e.code?Object.assign({},e,{value:r}):"#addressSubsidiaries#"==e.code?Object.assign({},e,{value:o}):"#taxCodeSubsidiaries#"==e.code?Object.assign({},e,{value:u}):"#accountname#"==e.code?Object.assign({},e,{value:Kt.firstName+" "+Kt.lastName}):"#emailCreateBy#"==e.code?Object.assign({},e,{value:""+Kt.email}):"#keyValueModeler#"==e.code?Object.assign({},e,{value:null==Z?void 0:Z.keyValue}):Object.assign({},e)}));var x=["#accountname#","#emailCreateBy#","#organizationCreateBy#","#organizationSupervising#","#myOrganization#","#superiorOrganization#","#addressSubsidiaries#","#taxCodeSubsidiaries#","#keyValueModeler#"];return S=null==(t=S)||null==(n=t.filter((function(e){return e.value})))?void 0:n.filter((function(e){return null==x?void 0:x.includes(e.code)}))}})),function(e){return nn.apply(this,arguments)}),mn=function(e){e&&e.length&&e.includes('"type": "textField_ticketName"')&&Pt(!0)},gn=(an=(0,r.default)((function*(e){var t=JSON.parse(e.nativeEvent.data);if("e-from"===(null==t?void 0:t.result))if("create"!==J){if(at){var n,a=null==(n=at.formData)?void 0:n.find((function(e){return!e.userTaskId}));if(a&&a.formData){var i,r=`window.postMessage('${JSON.stringify({type:"postFormEdit",data:null==(i=a.formData)?void 0:i.filter((function(e){return e.value}))}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;setTimeout((function(){var e;null==Y||null==(e=Y.current)||e.injectJavaScript(r)}),300)}}}else if("ajustment"===J||"replace"===J)W&&Z&&Xt(null==Z?void 0:Z.id);else{var o;Lt("init");var u=`window.postMessage('${JSON.stringify({result:"saveDraft"})}', '*');`;null==Y||null==(o=Y.current)||o.injectJavaScript(u)}if("result"==(null==t?void 0:t.result)){if("init"===Nt){var d=t.data,s=yield vn(JSON.stringify(d));if(s){var c=`window.postMessage('${JSON.stringify({type:"postFormEdit",data:s}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;setTimeout((function(){var e;null==Y||null==(e=Y.current)||e.injectJavaScript(c)}),500)}return}if("saveDraft"===Nt){var f=null==t?void 0:t.data;if(f&&kt&&ct){var v,m,g=null!=(v=f.find((function(e){return"#codeChannel#"==e.code})))&&v.value?null==(m=f.find((function(e){return"#codeChannel#"==e.code})))?void 0:m.value:null;pt(g)}"confirm"===ot?qe(!0):Le(!0)}else if("submit"===Nt){var h,y,S;et(!0);var x=null==E||null==(h=E.params)?void 0:h.dataTicket,j=null!=E&&null!=(y=E.params)&&y.paramsSelectTicket?null==E||null==(S=E.params)?void 0:S.paramsSelectTicket.map((function(e){return{id:e.id}})):[];if(x&&Z){var b,w,C,I,D,k=pn(Z),P={aclTicketDTOS:k,followerId:Z.followerId,formData:[{eformId:Z.formId,formData:null==t||null==(b=t.data)?void 0:b.map((function(e){return Object.assign({},e,{dataType:yn(e),typeForm:e.type,value:e.value})})),version:we}],jsonXml:Z.jsonXml,listRelativeTicket:j,priority:U.value,ticketStatus:ge.status,title:ke,workFlowId:"create"!==J?x.workFlowId:x.id,modelerId:null==E||null==(w=E.params)||null==(C=w.dataTicket)?void 0:C.modelerId};at&&(P=Object.assign({},P,{formData:[Object.assign({},null==at||null==(I=at.formData)?void 0:I.find((function(e){return!e.userTaskId})),{eformId:Z.formId,formData:null==t||null==(D=t.data)?void 0:D.map((function(e){return Object.assign({},e,{dataType:yn(e),typeForm:e.type,value:e.value})})),version:we})]}));try{if("edit"===J){var T,M,z=Object.assign({},at,P,{aclTicketDTOS:k,ticketStatus:ge.status,title:ke,listRelativeTicket:j,modelerId:null==E||null==(T=E.params)||null==(M=T.dataTicket)?void 0:M.modelerId}),F=yield Gt.updateTicket(z);if(F&&"draft"===ge.status)return"eBLDT"===A?G.navigate("MyReceiptScreen",{isReload:!0}):G.navigate(_.TabName.MyTicket),void O.default.show({type:"success",text1:L("CM.noti"),text2:L("NT.notification.creae_draft_success")});F&&G.navigate(p.NavigationName.CreateTicketSuccess,{ticketId:null==F?void 0:F.id})}else{var V=yield Gt.createTicket(P,Ut);if(V&&"draft"===ge.status)return G.navigate(_.TabName.MyTicket),void O.default.show({type:"success",text1:L("CM.noti"),text2:L("NT.notification.creae_draft_success")});if(null!=Z&&Z.documentId){var R=null==t?void 0:t.data.filter((function(e){return Se.some((function(t){return t.fieldId==e.formId}))}));if((null==R?void 0:R.length)>0){var H=R.map((function(e){var t=Se.find((function(t){return t.fieldId===e.formId}));return Object.assign({},e,{code:null==t?void 0:t.code})})),B=[{dataJson:H.reduce((function(e,t){return e=Object.assign({},e,(0,l.default)({},t.code,t.value))}),{})}];try{return void((yield Gt.saveDataVariableEwriter(B,Z.documentId))?G.navigate(p.NavigationName.CreateTicketSuccess,{ticketId:null==V?void 0:V.id}):O.default.show({type:"error",text1:L("CM.noti"),text2:L("NT.notification.save_info_into_ewriter_failed")}))}catch(e){}}}V&&G.navigate(p.NavigationName.CreateTicketSuccess,{ticketId:null==V?void 0:V.id})}}catch(e){console.log(e)}finally{Pe(""),et(!1)}}}}if("eForm_OCR_ping"===(null==t?void 0:t.type)&&Rt(!0),"eForm_post_ticketNames"===(null==t?void 0:t.type)){var N=(null==t?void 0:t.data).find((function(e){return null==e?void 0:e.display}));N&&Pe(null==N?void 0:N.value)}})),function(e){return an.apply(this,arguments)}),pn=function(e){var t=ce.map((function(t){var n={id:t.resourceId,email:t.email};return{userTaskId:null,resourceName:ke,resourceType:"t",sharedType:"p",personalStr:JSON.stringify(n),type:"internal",perm:JSON.stringify(["v-d","v-i"]),custId:t.custId,orgIn:t.orgIn,createdBy:e.createdBy,typePerson:"aclRelate"}})),n=oe.map((function(e){var t={id:+(null==e?void 0:e.executorId),email:null==e?void 0:e.email};return{userTaskId:e.userTaskId,resourceName:ke,resourceType:"t",sharedType:e.executorId?"p":null,personalStr:e.executorId?JSON.stringify(t):null,type:"internal",perm:JSON.stringify(["v-d","v-i","e"]),custId:e.executorId?null==e?void 0:e.custId:null,orgIn:e.executorId?null==e?void 0:e.orgIn:null,createdBy:e.createdBy,typePerson:"implement"}})),a=ae.map((function(e){return{userTaskId:e.userTaskId,resourceName:ke,resourceType:"t",sharedType:e.sharedType,personalStr:JSON.stringify(e.personal),type:e.type,perm:e.perm,custId:e.custId,orgIn:e.orgIn,createdBy:e.createdBy,typePerson:"shareAcl"}}));return[].concat((0,i.default)(t),(0,i.default)(n),(0,i.default)(a))},hn=(ln=(0,r.default)((function*(){try{var e,t;return yield Gt.getTicketById(null==E||null==(e=E.params)||null==(t=e.dataTicket)?void 0:t.id,Ut)}catch(e){console.log(e)}})),function(){return ln.apply(this,arguments)}),yn=function(e){return["textField","textArea","password","email","phone_number","radio_button","upload_file","upload_img","hyperlink","datepicker","signature"].includes(e.type)?"String":"number"===e.type?"Number":["check_box","dropdown"].includes(e.type)?"dropdown"===e.type&&e.validate.mutilChoose||"check_box"===e.type?"List":"String":null},Sn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];pe({status:e,isSaveDraftButSubmit:t}),(0,x.isEmpty)(ke)||"edit"===J||"multi"===J||ct||kt?kt?xn("confirm"):qe(!0):jn(e,t)},xn=function(e){var t;ut(e),Lt("saveDraft");var n=`window.postMessage('${JSON.stringify({result:"saveDraft"})}', '*');`;null==Y||null==(t=Y.current)||t.injectJavaScript(n)},jn=function(e){var t;Lt(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||"processing"===e?"submit":"saveDraft");var n=`window.postMessage('${JSON.stringify({result:"processing"===e?"submit":"saveDraft"})}', '*');`;null==Y||null==(t=Y.current)||t.injectJavaScript(n),Je(!1)},bn=function(){var e,t,n,a;(Le(!1),null!=Z&&null!=(e=Z.inheritanceModeler)&&null!=(t=e.modelerIds)&&t.length)?xt(!0):G.navigate(p.NavigationName.AddTicketRelativeS,{paramsSelectTicket:null!=E&&null!=(n=E.params)&&n.paramsSelectTicket?null==E||null==(a=E.params)?void 0:a.paramsSelectTicket:[],codeChannel:gt,checkSabeco:ct,configFilter:null==Z?void 0:Z.configFilter,inheritanceModeler:null==Z?void 0:Z.inheritanceModeler,onGoBack:function(e,t){G.setParams({paramsSelectTicket:e,codeChannel:t})}})},wn=(rn=(0,r.default)((function*(){G.setParams({paramsSelectTicket:wt}),xt(!1),yield Cn(wt,null==Z?void 0:Z.id)})),function(){return rn.apply(this,arguments)}),Cn=(on=(0,r.default)((function*(e,t){var n=yield Gt.getValueFormByTicketRelative({modelerId:t,listRelativeTicket:null==e?void 0:e.map((function(e){return e.id}))});if(n){var a=n.filter((function(e){return e.value})),i=`window.postMessage('${JSON.stringify({type:"postFormEdit",data:a}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;setTimeout((function(){var e;null==Y||null==(e=Y.current)||e.injectJavaScript(i)}),300)}})),function(e,t){return on.apply(this,arguments)});return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(u.TouchableWithoutFeedback,{onPress:function(){return u.Keyboard.dismiss()},children:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(u.StatusBar,{translucent:!0,barStyle:"dark-content",backgroundColor:p.Color.Transparent}),(0,N.jsx)(d.default,{style:s.default.ctnHeader,contentStyle:s.default.ctnHeader,titleStyle:{color:p.Color.TextPrimary},alignment:"start",title:function(){var e,t;if("eRequest"!==A)return`${null==E||null==(e=E.params)||null==(t=e.dataTicket)?void 0:t.flowName}`;switch(J){case"create":return L("HM.addSearch");case"multi":return L("HM.muiTicket");case"edit":return L("HM.editTicket");default:return""}}(),fillIconBackLeft:"",renderContentRight:function(){return(0,N.jsxs)(u.View,{style:s.default.ctnRenderRightHeader,children:[(0,N.jsx)(h.default,{listDropdown:R.dataProrityDummy,onChangeItem:q,dropDownStyle:{right:(0,f.SizeDP)(50)},renderShowData:(0,N.jsxs)(u.View,{style:s.default.renderShow,children:[U.icon,(0,N.jsx)(c.IconArrowGrey,{fill:"#fff",width:(0,f.SizeDP)(12),height:(0,f.SizeDP)(12)})]})}),(0,N.jsx)(u.View,{children:(0,N.jsx)(h.default,{listDropdown:R.dataTiket,onChangeItem:function(e){return function(e){"information"===e.value?Re(!0):"relative"===e.value&&(Le(!0),xn("relative"))}(e)},containerStyle:{width:(0,f.SizeDP)(12)}})})]})}}),(0,N.jsx)(P.Divider,{}),(0,N.jsx)(u.View,{style:[{flex:1,backgroundColor:p.Color.BgBlur},"android"===u.Platform.OS&&{paddingBottom:zt>0?zt-100:0}],children:!(0,x.isEmpty)(we)&&(0,N.jsx)(v.default,{nestedScrollEnabled:!0,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,startInLoadingState:!0,injectedJavaScript:p.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,sharedCookiesEnabled:!0,thirdPartyCookiesEnabled:!0,domStorageEnabled:!0,javaScriptEnabled:!0,ref:Y,onMessage:gn,source:{uri:(0,z.getConfig)().BASE_URL_FORM+we},webviewDebuggingEnabled:!0,onLoadEnd:function(){return Yt(!0)}})}),(0,N.jsx)(P.Divider,{}),Wt&&(0,N.jsx)(g.SafeAreaView,{edges:["bottom","left","right"],style:s.default.ctnBtn,children:(0,N.jsxs)(u.View,{style:s.default.ctnFooter,children:[(0,N.jsxs)(u.View,{style:[s.default.footerLeft,"eRequest"!==A&&{flex:.4}],children:[(0,N.jsxs)(u.TouchableOpacity,{onPress:function(){Le(!0),xn("relative")},style:s.default.ctnItem,children:[(0,N.jsx)(P.Icon,{fill:"rgba(0, 32, 77, .7)",name:"swap-outline",width:24,height:24}),(0,N.jsx)(b.default,{style:s.default.txtItem,children:L("HM.relative")})]}),"eRequest"===A&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(u.View,{style:s.default.ctnDivider}),(0,N.jsxs)(u.TouchableOpacity,{onPress:function(){return Sn("draft",!0)},style:s.default.ctnItem,children:[(0,N.jsx)(P.Icon,{fill:"rgba(0, 32, 77, .7)",name:"save-outline",width:24,height:24}),(0,N.jsx)(b.default,{style:s.default.txtItem,children:L("TK.save_draft")})]})]})]}),(0,N.jsx)(u.TouchableOpacity,{onPress:function(){return Sn("processing")},style:[s.default.footerRight,"eRequest"!==A&&{flex:.6}],children:(0,N.jsx)(b.default,{style:{color:p.Color.White},children:L("HM.sendServices")})})]})}),(0,N.jsx)(y.default,{isVisible:Ve,onClose:function(){return Re(!1)},title:L("HM.infoPerson"),renderContent:(0,N.jsx)(N.Fragment,{children:!(0,x.isEmpty)(Kt)&&(0,N.jsxs)(u.View,{style:s.default.ctnTicketPerson,children:[(0,N.jsxs)(u.View,{style:s.default.ctnUser,children:[(0,N.jsx)(u.Image,{width:(0,f.SizeDP)(50),height:(0,f.SizeDP)(50),borderRadius:(0,f.SizeDP)(25),source:{uri:Kt.imageUrl||p.String.DEFAULT_IMAGE}}),(0,N.jsx)(b.default,{children:Kt.firstName+" "+Kt.lastName})]}),(0,N.jsxs)(u.View,{style:s.default.ctnSub,children:[(0,N.jsx)(c.IconMail,{width:(0,f.SizeDP)(24),height:(0,f.SizeDP)(24)}),(0,N.jsx)(b.default,{children:""+Kt.email})]}),(0,N.jsxs)(u.View,{style:s.default.ctnSub,children:[(0,N.jsx)(c.IconTree,{width:(0,f.SizeDP)(24),height:(0,f.SizeDP)(24)}),(0,N.jsx)(b.default,{children:""+Kt.acNameOrg})]}),(0,N.jsxs)(u.View,{style:s.default.ctnSub,children:[(0,N.jsx)(c.IconPhone,{width:(0,f.SizeDP)(24),height:(0,f.SizeDP)(24)}),(0,N.jsx)(b.default,{children:""+Kt.phone})]})]})})}),(0,N.jsx)(F.default,{isVisible:Ne,children:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.default,{style:{backgroundColor:"#fff"},contentStyle:{backgroundColor:"#fff"},titleStyle:{color:"#000810"},fillIconBackLeft:"#000810",title:L("HM.relatedTicket"),onPressIconLeft:function(){return Le(!1)},renderContentRight:W?void 0:function(){return(0,N.jsx)(u.TouchableOpacity,{onPress:bn,children:(0,N.jsx)(b.default,{style:s.default.txtRight,children:L("CM.add")})})}}),(0,N.jsx)(P.Divider,{}),(0,x.isEmpty)(null==E||null==(un=E.params)?void 0:un.paramsSelectTicket)?(0,N.jsxs)(u.View,{style:s.default.ctnArea,children:[(0,N.jsx)(c.IconEmpty,{width:(0,f.SizeDP)(218),height:(0,f.SizeDP)(149)}),(0,N.jsx)(b.default,{style:s.default.textTitle,children:L("HM.relativeTicketEmpty")}),(0,N.jsx)(b.default,{style:s.default.textDes,children:L("HM.desRelativeTicket")})]}):(0,N.jsx)(u.FlatList,{style:{paddingHorizontal:16},data:null==E||null==(dn=E.params)?void 0:dn.paramsSelectTicket,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,renderItem:function(e){var t,n,a,i=e.item;return(0,N.jsx)(D.default,{dataCard:i,account:Kt,select:null==E||null==(t=E.params)?void 0:t.paramsSelectTicket,onSelect:function(e){return G.setParams({paramsSelectTicket:e})},isShowTrash:!(null!=Z&&null!=(n=Z.inheritanceModeler)&&null!=(a=n.modelerIds)&&a.length)})}})]})}),(0,N.jsx)(w.default,{isVisible:Ue,onClose:function(){return function(e){switch(e){case"noti":Je(!1),qe(!0);break;case"cancel":We(!1);break;case"info":qe(!1),!ct&&Pe(""),Oe("")}}("info")},title:L("HM.serviceName"),content:L("HM.contentFill"),type:"info",labelCancel:L("CM.labelCancel"),labelConfirm:"processing"===ge.status?L("HM.sendServices"):L("CM.save"),styleBtnRight:{backgroundColor:p.Color.BgPrimary},onConfirm:function(){(0,x.isEmpty)(ke.trim())?Oe(L("HM.notEmpty")):(jn(ge.status,ge.isSaveDraftButSubmit),qe(!1),Je(!0),Oe(""))},renderContent:function(){return(0,N.jsx)(u.View,{style:{width:"100%",marginVertical:(0,f.SizeDP)(6)},children:(0,N.jsx)(C.default,{isDisabled:kt,label:L("HM.enterName"),value:ke,onChangeText:Pe,errorMessage:ze,multiline:!0,maxLength:255})})}}),(0,N.jsx)(I.default,{isVisible:Ze})]})}),(0,N.jsx)(F.default,{isVisible:St,children:(0,N.jsx)(V.default,{onClose:function(){return xt(!1)},modeler:Z,setListTicketRelativeSelect:Ct,listTicketRelativeSelect:wt,handleSetParamsConfig:wn})}),(0,N.jsx)(F.default,{isVisible:Vt,children:(0,N.jsx)(H.default,{onScannedImage:function(e){if((0,x.isEmpty)(e))O.default.show({type:"error",text1:L("CM.noti"),text2:"Không lấy được thông tin dữ liệu scan"});else{var t,n=JSON.stringify({type:1===e.length?"native_post_scan_OCR":"native_post_scan_OCR_mutiples",dataFile:{name:1===e.length?`img_scan_${Date.now()}.png`:"",mimeType:"image/png",base64:1===e.length?e[0]:e}}),a=`window.postMessage('${"ios"===u.Platform.OS?n:n.replace(/(\r\n|\n|\r|\s)/gm,"").replace(/\\/g,"\\\\")}', '*');`;null==Y||null==(t=Y.current)||t.injectJavaScript(a)}Rt(!1)}})})]})}},33865:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(87841),i=n(20880),l=n(41995);t.default=a.StyleSheet.create({ctnHeader:{backgroundColor:i.Color.White},ctnTitle:{color:i.Color.colorText,fontSize:i.FontSize.FontLarge,fontFamily:i.Font.InterSemiBold600},ctnWebview:{marginHorizontal:(0,l.SizeDP)(18),marginVertical:(0,l.SizeDP)(18),borderRadius:(0,l.SizeDP)(17)},ctnRenderRightHeader:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,l.SizeDP)(10)},renderShow:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,l.SizeDP)(2),borderRadius:(0,l.SizeDP)(4),borderWidth:(0,l.SizeDP)(1),borderColor:i.Color.borderPrority,paddingVertical:(0,l.SizeDP)(4),paddingHorizontal:(0,l.SizeDP)(4)},ctnTicketPerson:{alignItems:"flex-start",rowGap:(0,l.SizeDP)(20)},ctnUser:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,l.SizeDP)(10),paddingHorizontal:(0,l.SizeDP)(10)},ctnSub:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,l.SizeDP)(10),marginLeft:(0,l.SizeDP)(40)},textTitle:{fontFamily:i.Font.InterSemiBold600,fontSize:i.FontSize.FontBase,color:i.Color.TextPrimary,marginTop:(0,l.SizeDP)(20)},textDes:{fontFamily:i.Font.InterRegular400,fontSize:i.FontSize.FontSmall,color:i.Color.Text07,textAlign:"center",marginVertical:(0,l.SizeDP)(8)},ctnArea:{backgroundColor:i.Color.White,alignItems:"center",justifyContent:"center",padding:(0,l.SizeDP)(16)},txtRight:{color:i.Color.add,fontFamily:i.Font.InterMedium500,fontSize:i.FontSize.FontSmall},ctnBtn:{backgroundColor:i.Color.White},btnLeft:{backgroundColor:"#f2f5f8"},labelStyleLeft:{color:i.Color.Text},btnCancel:{borderWidth:1,borderColor:"#e14337",backgroundColor:"#fff"},textCancel:{color:"#e14337"},textSizeSmall:{fontSize:13},ctnFooter:{flexDirection:"row",alignItems:"center",justifyContent:"center"},footerLeft:{flex:.6,flexDirection:"row",alignItems:"center"},ctnItem:{flex:1,alignItems:"center",justifyContent:"center"},txtItem:{fontSize:10},footerRight:{backgroundColor:i.Color.BgPrimary,flex:.4,paddingVertical:16,alignItems:"center",justifyContent:"center"},ctnDivider:{height:25,width:2,backgroundColor:i.Color.borderColor}})},77134:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),l=a(n(43184)),r=n(46317),o=a(n(2198)),u=n(7005),d=a(n(24541)),s=a(n(94516)),c=n(14740),f=n(20880),v=n(41995),m=n(2884),g=n(60596),p=n(12638),h=(a(n(21527)),n(58526)),y=n(47671);t.default=function(){var e,t,n=(0,c.useRoute)(),a=(0,c.useNavigation)(),S=(null==n||null==(e=n.params)?void 0:e.actionTicketFrom)||"eRequest",x=(null==n||null==(t=n.params)?void 0:t.ticketId)||"",j=(0,p.useAppSelector)((function(e){return e.account})).dataAccount,b=(0,m.useTranslation)().t,w=function(){"eBLDT"===S?a.navigate("MyReceiptScreen",{isReload:!0}):"eQDTHA"===S?a.navigate("DashboardEQDTHA"):a.navigate(h.TabName.Home)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.StatusBar,{translucent:!0,barStyle:"dark-content",backgroundColor:f.Color.Transparent}),(0,y.jsx)(l.default,{style:o.default.ctnHeader,contentStyle:o.default.ctnHeader,titleStyle:{color:f.Color.TextPrimary},title:b("HM.addSearch"),onPressIconLeft:w}),(0,y.jsxs)(u.SafeAreaView,{edges:["bottom","left","right"],style:o.default.ctnArea,children:[(0,y.jsxs)(i.View,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[(0,y.jsx)(r.IconEmpty,{width:(0,v.SizeDP)(331),height:(0,v.SizeDP)(217)}),(0,y.jsx)(d.default,{style:o.default.textTitle,children:b("HM.createSuccess")}),"eBLDT"!==S&&(0,y.jsx)(i.TouchableOpacity,{onPress:function(){x&&a.navigate(f.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:x,email:j.email,status:g.Status.processing,selectTabBottom:1})},children:(0,y.jsx)(d.default,{style:o.default.textDetail,children:b("CM.viewDetail")})})]}),(0,y.jsx)(s.default,{style:{width:"60%",marginTop:(0,v.SizeDP)(16)},label:b("HM.home"),onPress:w})]})]})}},2198:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(87841),i=n(20880),l=n(41995);t.default=a.StyleSheet.create({ctnHeader:{backgroundColor:i.Color.White},ctnTitle:{color:i.Color.colorText,fontSize:i.FontSize.FontLarge,fontFamily:i.Font.InterSemiBold600},ctnArea:{backgroundColor:i.Color.White,alignItems:"center",justifyContent:"center",flex:1,paddingHorizontal:(0,l.SizeDP)(16)},textTitle:{fontFamily:i.Font.InterSemiBold600,fontSize:i.FontSize.FontBase,color:i.Color.TextPrimary,marginTop:(0,l.SizeDP)(20)},textDes:{fontFamily:i.Font.InterRegular400,fontSize:i.FontSize.FontSmall,color:i.Color.Text07,textAlign:"center",marginVertical:(0,l.SizeDP)(8)},textDetail:{fontFamily:i.Font.InterMedium500,fontSize:i.FontSize.FontSmall,color:i.Color.BgInfo,marginBottom:50,marginTop:20}})},22702:function(e,t,n){var a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(29293)),l=a(n(41132)),r=a(n(85715)),o=n(87841),u=n(20880),d=a(n(43184)),s=n(32207),c=a(n(24541)),f=n(21527),v=a(n(76644)),m=a(n(829)),g=a(n(94516)),p=n(11671),h=n(47671);t.default=function(e){var t,n,a=e.onClose,y=e.modeler,S=e.setListTicketRelativeSelect,x=e.listTicketRelativeSelect,j=e.handleSetParamsConfig,b=(0,f.useState)(!1),w=(0,r.default)(b,2),C=w[0],I=w[1],D=(0,f.useState)(""),k=(0,r.default)(D,2),P=k[0],T=k[1],M=(0,f.useState)(!1),z=(0,r.default)(M,2),O=z[0],F=z[1],_=(0,f.useState)([]),V=(0,r.default)(_,2),R=V[0],H=V[1],B=(0,p.useTicketServices)();(0,f.useEffect)((function(){L()}),[]);var N,L=(N=(0,i.default)((function*(){try{var e;F(!0);var t,n,a=(null==y||null==(e=y.inheritanceModeler)?void 0:e.modelerIds)||[],i=yield Promise.all(a.map((function(e){return B.getModeler(e)})));H(i?null==i?void 0:i.map((function(e){return{id:e.id,name:e.name}})):(null==y||null==(t=y.inheritanceModeler)||null==(n=t.modelerIds)?void 0:n.map((function(e){return{id:e,name:e}})))||[])}catch(e){}finally{F(!1)}})),function(){return N.apply(this,arguments)});return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.default,{style:{backgroundColor:"#fff"},contentStyle:{backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:u.Color.borderColor},titleStyle:{color:"#000810"},fillIconBackLeft:"#000810",title:"",onPressIconLeft:a}),(0,h.jsx)(o.View,{style:{marginHorizontal:16,marginTop:16,backgroundColor:"#fff"},children:(0,h.jsx)(c.default,{style:{fontFamily:u.Font.InterSemiBold600,fontSize:14},children:`Để hoàn thành việc chọn giao dịch liên quan, vui lòng chọn dịch vụ trong mỗi quy trình dưới đây.\nSố lượng giao dịch đã chọn ${(null==x?void 0:x.length)||0}/${null==y||null==(t=y.inheritanceModeler)||null==(n=t.modelerIds)?void 0:n.length}`})}),O&&(0,h.jsx)(o.ActivityIndicator,{size:"large",color:u.Color.BgPrimary}),!O&&(0,h.jsx)(s.List,{data:R,renderItem:function(e){var t=e.item;return(0,h.jsx)(s.ListItem,{onPress:function(){return e=t.id,T(e),void I(!0);var e},title:t.name,accessoryLeft:null!=x&&x.find((function(e){return e.modelerId===t.id}))?(0,h.jsx)(s.Icon,{name:"checkmark-circle-2-outline",width:24,height:24}):void 0,accessoryRight:(0,h.jsx)(s.Icon,{name:"arrow-ios-forward-outline",width:24,height:24})})}}),(0,h.jsx)(g.default,{style:{marginHorizontal:16},label:"Xác nhận",onPress:j}),(0,h.jsx)(v.default,{isVisible:C,children:(0,h.jsx)(m.default,{configFilter:null==y?void 0:y.configFilter,inheritanceModeler:null==y?void 0:y.inheritanceModeler,onClose:function(){return I(!1)},modelerId:P,onGoBack:function(e,t){if(null==x?void 0:x.find((function(e){return e.modelerId===t}))){var n=null==x?void 0:x.filter((function(e){return e.modelerId!==t}));S([].concat((0,l.default)(n),(0,l.default)(e)))}else S([].concat((0,l.default)(x),(0,l.default)(e)))},paramsSelectTicket:null!=x&&x.find((function(e){return e.modelerId===P}))?[null==x?void 0:x.find((function(e){return e.modelerId===P}))]:[]})})]})})}}}]);//# sourceMappingURL=src_app_screens_home_component_AddTicketRelative_index_tsx-src_app_screens_home_component_Cre-43ca86.chunk.bundle.map?platform=ios/* RCSSB */eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJoYXNoIjoiZGJlYzJiY2Q2OGI2YzZkYzQ5NjkzYTMyMzAzZTVhNWQ2MmU3OTkyMjNjOTMwMDkwMDRlNDE5MjNmMDc4M2NlOSIsImlhdCI6MTc1NjIxNDI2M30.oy5mQdEUvpDv_T-mP0tCqPefFOvgdZuprD-1hJbfq-t9WVvsXfOWKQBnFqSK_-P9d_TomIUqXA6q-AjwhMVrC5ZNAKZK_MV13LIjwCcIFedhHT6cs8iyzaET093q-ge81WfKLWOGIxWdSKsgh-DbTZfxx2AS7Jw5fiVdcqPVh4alMiRV0WJV2jvL4vG2EtCfJfMeefZy2gvLYFSTSvcd7kPdP-yKbm6egJlfcKHnitkX7y1LKIpA_PfN-qaO86af-vyDIa8cs-OzLpuxodBpalZHIg1DeQWarrhF6PEL8nkv307OSEfprJUpj9NNr-3XLdQL6_G_ze7l121l1YV9bf7S7QHgqtj2I7Y9EGBcCBfaLLHY4LOw9R9qVCvyEbDz1MG8z-pQbJvVSYeQBLxYyxGnT8VwpQ_Ii04j0AOCDPPa1wyUE9mvIyuIHbNOnTOEy8EA3a1_lbUT5XLJ0gZGBwgR2-H5Fy6PA9JoGUalllBUHr8uS-NfF3g3pARYK23SgB-x61R7y86krSsmRg3IIzd0c2rb_TsJVZieZB-_tqfwd1aS3te-4Kew8kzSI4tdDKGpd5dMXa8BtvWY4IcrYD1WrJMky75jE5ZQFZ_SYl418DCCYWHynT56IQ8rwZYubvLVl512liTVqYKZuYxES5FYrzG2wnoBUYjChltMMy4                                                                                                                                                                                                                                                                                                                                                                                                                                         