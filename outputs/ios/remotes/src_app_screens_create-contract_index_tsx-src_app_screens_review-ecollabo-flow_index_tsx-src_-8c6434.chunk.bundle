(self.webpackChunkerequestApp=self.webpackChunkerequestApp||[]).push([["src_app_screens_create-contract_index_tsx-src_app_screens_review-ecollabo-flow_index_tsx-src_-8c6434"],{25764:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),l=i(n(24541)),a=i(n(2927)),o=n(47671);t.default=function(e){var t=e.itemChat,n=e.handleSendChat;return(0,o.jsxs)(r.View,{style:{marginBottom:10,backgroundColor:-1===t.userId?"#e6eaf0":"#6f2ced",borderRadius:8,paddingHorizontal:16,paddingVertical:12,maxWidth:"75%",alignSelf:-1===t.userId?"flex-start":"flex-end",justifyContent:"center"},children:[-1===t.userId&&(0,o.jsx)(a.default,{children:t.message}),-1!==t.userId&&-2!==t.userId&&(0,o.jsx)(l.default,{style:[-1!==t.userId&&{color:"#fff"}],children:t.message}),-2===t.userId&&(0,o.jsx)(r.Pressable,{onPress:function(){return null==n?void 0:n(t.message)},children:(0,o.jsx)(l.default,{style:{color:"#fff"},children:t.message})})]})}},92565:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.listQuestion=t.IAIResponseClass=void 0;var r=i(n(34579)),l=i(n(17383));t.listQuestion=["Tóm tắt thông tin lưu ý của giao dịch","Các thông tin cần lưu ý khi thực hiện công việc này là gì ?","Có deadline cần chú ý cho công việc này không ?"],t.IAIResponseClass=(0,r.default)((function e(t){(0,l.default)(this,e),this.id=Date.now()+Math.floor(1e4*Math.random()),this.conversationId="",this.message="",this.reply=null,this.sequence=null,this.pushNotify=null,this.status=null,this.userId=0,this.custId=0,this.orgIn="",this.createdDate=(new Date).toISOString(),this.createdBy="",this.lastModifiedDate=null,this.lastModifiedBy=null,this.feedback=!1,this.voteValue=null,this.idResponseAi=null,Object.assign(this,t)}))},87957:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatMessage=function(e){var t=e.onClose,n=e.userTaskId,i=e.ticketId,j=(0,o.useState)(""),w=(0,a.default)(j,2),b=w[0],I=w[1],T=(0,o.useState)(""),C=(0,a.default)(T,2),D=C[0],k=C[1],P=(0,o.useState)([]),_=(0,a.default)(P,2),F=_[0],M=_[1],E=(0,o.useState)(!1),O=(0,a.default)(E,2),R=O[0],V=O[1],A=(0,o.useState)(!1),z=(0,a.default)(A,2),B=z[0],L=z[1],N=(0,o.useState)(0),U=(0,a.default)(N,2),W=U[0],H=U[1],$=(0,o.useState)(0),G=(0,a.default)($,2),Y=G[0],q=G[1],K=(0,p.useAIStore)(),J=K.listAIResponse,X=K.addListAIResponse,Q=K.setListAIResponse,Z=K.getListAIResponse,ee=(0,v.useAppSelector)((function(e){return e.account})).dataAccount,te=(0,y.useAIServices)(),ne=(0,o.useRef)(null);(0,o.useEffect)((function(){ie(0)}),[]),(0,o.useEffect)((function(){J.length>0&&ne.current&&setTimeout((function(){var e;null==(e=ne.current)||e.scrollToEnd({animated:!0})}),1e3)}),[J,ne.current]);var ie=(oe=(0,l.default)((function*(e){try{var t,l={ticketId:i,userTaskId:n,page:e,size:S},a=yield te.getMessage(l);a&&(null==a?void 0:a.data.length)>0?(Q(0===e?a.data:[].concat((0,r.default)(Z()),(0,r.default)(a.data))),k(null==(t=a.data[0])?void 0:t.conversationId),q(Math.ceil((null==a?void 0:a.totalData)/S))):M(h.listQuestion.map((function(e){return new h.IAIResponseClass({message:e,userId:-2,createdBy:ee.email,orgIn:ee.orgIn,custId:ee.custId})})))}catch(e){}finally{L(!1)}})),function(e){return oe.apply(this,arguments)}),re=(ae=(0,l.default)((function*(e){if(e.trim()){le(e),V(!0);try{var t,r={question:e,conversationId:D,ticketId:i,userTaskId:n},l=yield te.sendMessage(r);l&&(k(l.conversationId),X(l),null==(t=ne.current)||t.scrollToEnd({animated:!0}))}catch(e){}finally{I(""),c.Keyboard.dismiss(),V(!1)}}})),function(e){return ae.apply(this,arguments)}),le=function(e){var t=new h.IAIResponseClass({message:e,userId:ee.id,createdBy:ee.email,orgIn:ee.orgIn,custId:ee.custId});X(t),c.Keyboard.dismiss()};var ae;var oe;return(0,x.jsx)(c.KeyboardAvoidingView,{keyboardVerticalOffset:60,behavior:"ios"===c.Platform.OS?"padding":"height",style:{flex:1},children:(0,x.jsx)(c.TouchableWithoutFeedback,{onPress:c.Keyboard.dismiss,children:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.default,{style:{backgroundColor:"#fff"},contentStyle:{backgroundColor:"#fff"},titleStyle:{color:"#000810"},fillIconBackLeft:"#000810",onPressIconLeft:function(){Q([]),null==t||t()},title:"Trợ lý số Kyta Intelligent"}),(0,x.jsx)(s.Divider,{}),(0,x.jsx)(c.View,{style:g.default.body,children:J.length>0?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.FlatList,{ref:ne,showsVerticalScrollIndicator:!1,style:{flex:1},data:J,keyExtractor:function(e){return""+e.id},renderItem:function(e){var t=e.item;return(0,x.jsx)(m.default,{itemChat:t})},onEndReachedThreshold:.5,onRefresh:function(){L(!0),H(0),ie(0)},refreshing:B,onEndReached:function(){W<Y&&(H(W+1),ie(W+1))}}),R&&(0,x.jsx)(s.Spinner,{})]}):(0,x.jsx)(c.FlatList,{showsVerticalScrollIndicator:!1,style:{flex:1},data:F,keyExtractor:function(e){return""+e.id},renderItem:function(e){var t=e.item;return(0,x.jsx)(m.default,{itemChat:t,handleSendChat:re})}})}),(0,x.jsxs)(c.View,{style:g.default.footer,children:[(0,x.jsx)(d.default,{value:b,onChangeText:I,placeholder:"Đặt câu hỏi cho AI",onFocus:function(){setTimeout((function(){var e;null==(e=ne.current)||e.scrollToIndex({index:Z().length-1,animated:!0})}),100)}}),(0,x.jsx)(c.TouchableOpacity,{onPress:function(){return re(b)},hitSlop:15,children:(0,x.jsx)(f.IconSend,{width:24,height:24})})]})]})})})};var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),u=i(n(43184)),s=n(32207),d=i(n(54813)),c=n(87841),f=n(46317),p=n(48435),y=n(33139),m=i(n(25764)),h=n(92565),v=n(12638),g=i(n(70989)),x=n(47671);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}var S=50},70989:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({footer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:16,paddingVertical:8,columnGap:8},body:{flex:1,paddingHorizontal:16,paddingTop:16}})},48435:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.useAIStore=void 0;var r=i(n(41132)),l=n(42341),a={listAIResponse:[]};t.useAIStore=(0,l.create)((function(e,t){return Object.assign({},a,{setListAIResponse:function(t){e({listAIResponse:t})},addListAIResponse:function(n){var i=[].concat((0,r.default)(t().listAIResponse),[n]);e({listAIResponse:i})},getListAIResponse:function(){return t().listAIResponse}})}))},39284:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.ticketId,n=e.userTaskId,i=(0,o.useSharedValue)(0),m=(0,o.useSharedValue)(0),h=(0,d.useSafeAreaInsets)(),S=(0,a.useWindowDimensions)().height,w=(0,l.useState)(!1),b=(0,r.default)(w,2),I=b[0],T=b[1],C=u.Gesture.Pan().onChange((k=function(e){i.value+=e.changeY},k.__closure={offsetY:i},k.__workletHash=8757107868020,k.__initData=g,k)).onFinalize(function(){var e=function(e){i.value=(0,o.withDecay)({velocity:e.velocityY,rubberBandEffect:!0,deceleration:.1,velocityFactor:.5,rubberBandFactor:1,reduceMotion:o.ReduceMotion.System,clamp:[-m.value/2+v/2+h.top,Math.min(m.value/2,i.value+h.top)]})};return e.__closure={offsetY:i,withDecay:o.withDecay,ReduceMotion:o.ReduceMotion,height:m,SIZE:v,insets:h},e.__workletHash=4915333147964,e.__initData=x,e}()),D=(0,o.useAnimatedStyle)(function(){var e=function(){return{transform:[{translateY:i.value}]}};return e.__closure={offsetY:i},e.__workletHash=0x92f05087bec,e.__initData=j,e}());var k;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.GestureHandlerRootView,{style:[s.default.container,{bottom:S/4}],children:(0,y.jsx)(a.View,{onLayout:function(e){m.value=e.nativeEvent.layout.height},style:s.default.wrapper,children:(0,y.jsx)(u.GestureDetector,{gesture:C,children:(0,y.jsx)(o.default.View,{style:[s.default.box,D],children:(0,y.jsx)(a.Pressable,{onPress:function(){return T(!0)},children:(0,y.jsx)(c.default,{style:{color:"#fff",fontSize:12},children:"AI Chat"})})})})})}),(0,y.jsx)(f.default,{isVisible:I,children:(0,y.jsx)(p.ChatMessage,{ticketId:t,userTaskId:n,onClose:function(){return T(!1)}})})]})};var r=i(n(85715)),l=h(n(21527)),a=n(87841),o=h(n(69644)),u=n(64516),s=i(n(14920)),d=n(7005),c=i(n(24541)),f=i(n(76644)),p=n(87957),y=n(47671);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}var v=30,g={code:"function anonymous(event){const{offsetY}=this.__closure;offsetY.value+=event.changeY;}"},x={code:"function anonymous(event){const{offsetY,withDecay,ReduceMotion,height,SIZE,insets}=this.__closure;offsetY.value=withDecay({velocity:event.velocityY,rubberBandEffect:true,deceleration:0.1,velocityFactor:0.5,rubberBandFactor:1,reduceMotion:ReduceMotion.System,clamp:[-height.value/2+SIZE/2+insets.top,Math.min(height.value/2,offsetY.value+insets.top)]});}"},j={code:"function anonymous(){const{offsetY}=this.__closure;return{transform:[{translateY:offsetY.value}]};}"}},14920:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({container:{position:"absolute",right:0},wrapper:{alignItems:"flex-end",justifyContent:"flex-end"},box:{backgroundColor:"#2f45ff",alignItems:"center",justifyContent:"center",borderTopLeftRadius:15,borderBottomLeftRadius:15,padding:8}})},32055:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(21527));var r=n(87841),l=i(n(35395)),a=i(n(24541)),o=n(32207),u=n(20880),s=n(47671);t.default=function(e){var t=e.checked,n=e.label,i=e.onChange,d=e.style,c=e.labelStyle;return(0,s.jsxs)(r.View,{style:[l.default.ctnContainer,d],children:[(0,s.jsx)(r.TouchableOpacity,{onPress:i,children:(0,s.jsx)(o.Icon,{name:t?"checkmark-square-2":"square-outline",fill:u.Color.BgPrimary,width:24,height:24})}),(0,s.jsx)(r.TouchableOpacity,{activeOpacity:1,onPress:i,children:(0,s.jsx)(a.default,{style:[l.default.txtLabel,c],children:n})})]})}},35395:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),l=n(41995);t.default=i.StyleSheet.create({ctnContainer:{flexDirection:"row",alignItems:"center"},txtLabel:{fontSize:r.FontSize.FontSmall,fontFamily:r.Font.InterMedium500,color:r.Color.TxtCheckbox,marginStart:(0,l.SizeDP)(8)}})},31263:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(7983));t.default={TakePhoto:function(e){var t=e||{},n=t.width,i=void 0===n?500:n,l=t.height,a=void 0===l?500:l,o=t.cropping,u=void 0!==o&&o,s=t.includeBase64Enabled,d=t.freeStyleCropEnabled,c=t.cropperCircleOverlayEnabled,f=t.useFrontCameraEnabled;return new Promise((function(e,t){r.default.openCamera({width:i,height:a,cropping:u||!1,includeBase64:s||!1,freeStyleCropEnabled:d||!1,cropperCircleOverlay:c||!1,useFrontCamera:f||!1}).then((function(t){e(t)})).catch((function(e){t(e)}))}))},ChoosePhoto:function(e){var t=e||{},n=t.width,i=void 0===n?500:n,l=t.height,a=void 0===l?500:l,o=t.cropping,u=void 0!==o&&o,s=t.multipleEnabled,d=t.includeBase64Enabled,c=t.cropperCircleOverlayEnabled,f=t.freeStyleCropEnabled;return new Promise((function(e,t){r.default.openPicker({width:i,height:a,cropping:u||!1,multiple:s||!1,includeBase64:d||!1,cropperCircleOverlay:c||!1,freeStyleCropEnabled:f||!1,mediaType:"photo"}).then((function(t){e(t)})).catch((function(e){t(e)}))}))}}},75463:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.OverflowMenuCM=void 0;var r=i(n(85715)),l=n(21527),a=n(32207),o=n(2884),u=n(87841),s=i(n(24541)),d=n(47671);t.OverflowMenuCM=function(e){var t=e.listData,n=void 0===t?[]:t,i=e.selectedIndex,c=void 0===i?void 0:i,f=e.selectedTitle,p=void 0===f?"Toggle Menu":f,y=e.setSelectedIndex,m=e.renderSelected,h=(0,o.useTranslation)().t,v=(0,l.useState)(!1),g=(0,r.default)(v,2),x=g[0],j=g[1];return(0,d.jsx)(a.OverflowMenu,{anchor:function(){return m?(0,d.jsx)(u.TouchableOpacity,{onPress:function(){return j(!0)},children:m}):(0,d.jsx)(u.TouchableOpacity,{onPress:function(){return j(!0)},children:(0,d.jsx)(s.default,{children:p})})},visible:x,selectedIndex:c,onSelect:function(e){y(e),j(!1)},onBackdropPress:function(){return j(!1)},children:n.map((function(e){return(0,d.jsx)(a.MenuItem,{title:h(e.value),accessoryLeft:null==e?void 0:e.icon},e.id)}))})}},81924:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),l=n(87841),a=i(n(24541)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),u=i(n(83128)),s=n(41995),d=n(46317),c=n(47671);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}t.default=function(e){var t=e.collectionSize,n=e.pageSize,i=e.currentPage,f=e.onPageChange,p=(0,o.useState)(Array.from(Array(Math.ceil(t/n))).map((function(e,t){return t+1}))),y=(0,r.default)(p,2),m=y[0],h=y[1];(0,o.useEffect)((function(){h(Array.from(Array(Math.ceil(t/n))).map((function(e,t){return t+1})))}),[t]);var v=function(){for(var e=[],t=Math.max(1,i-1),n=Math.min(m.length,i+1),r=t;r<=n;r++)r>m.length||(0===r&&(r+=1),e.push(r));return e},g=function(e){f(e),v()};return(0,c.jsxs)(l.View,{style:u.default.ctnMain,children:[(0,c.jsx)(l.TouchableOpacity,{onPress:function(){var e=i-1;e<=0||e>=1&&g(e)},style:[u.default.ctnText,{transform:[{rotate:"90deg"}]}],hitSlop:(0,s.SizeDP)(15),children:(0,c.jsx)(d.IconArrowGrey,{width:(0,s.SizeDP)(16),height:(0,s.SizeDP)(16)})}),m.length>5?(0,c.jsxs)(c.Fragment,{children:[i>2&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.TouchableOpacity,{hitSlop:(0,s.SizeDP)(15),onPress:function(){return g(1)},style:[u.default.ctnText,1===i&&u.default.ctnSelect],children:(0,c.jsx)(a.default,{children:"1"})}),i>3&&(0,c.jsx)(a.default,{children:"..."})]}),v().map((function(e){return(0,c.jsx)(l.TouchableOpacity,{hitSlop:(0,s.SizeDP)(15),onPress:function(){return g(e)},style:[u.default.ctnText,i===e&&u.default.ctnSelect],children:(0,c.jsx)(a.default,{children:e})},e)})),i<m.length-1&&(0,c.jsxs)(c.Fragment,{children:[i<m.length-2&&(0,c.jsx)(a.default,{children:"..."}),(0,c.jsx)(l.TouchableOpacity,{hitSlop:(0,s.SizeDP)(15),style:[u.default.ctnText,i===m.length&&u.default.ctnSelect],onPress:function(){return g(m.length)},children:(0,c.jsx)(a.default,{children:m.length})})]})]}):(0,c.jsx)(c.Fragment,{children:v().map((function(e){return(0,c.jsx)(l.TouchableOpacity,{hitSlop:(0,s.SizeDP)(15),onPress:function(){return g(e)},style:[u.default.ctnText,i===e&&u.default.ctnSelect],children:(0,c.jsx)(a.default,{children:e})},e)}))}),(0,c.jsx)(l.TouchableOpacity,{onPress:function(){var e=i+1;e>m.length||e<=m.length&&g(e)},style:[u.default.ctnText,{transform:[{rotate:"-90deg"}]}],hitSlop:(0,s.SizeDP)(15),children:(0,c.jsx)(d.IconArrowGrey,{width:(0,s.SizeDP)(16),height:(0,s.SizeDP)(16)})})]})}},83128:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995);t.default=i.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"center"},ctnText:{alignItems:"center",justifyContent:"center",padding:(0,r.SizeDP)(4),borderRadius:(0,r.SizeDP)(10),marginHorizontal:(0,r.SizeDP)(5),minWidth:(0,r.SizeDP)(30)},ctnSelect:{backgroundColor:"#f2ecfd",color:"#6f2ced"}})},71773:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(21527));var r=n(87841),l=n(45335),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(41995)),o=i(n(58498)),u=n(47671);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var d=r.StyleSheet.create({container:{flex:1,justifyContent:"center"},icon:{textAlign:"center"},text:{padding:(0,a.SizeDP)(16),fontSize:a.default.FontBigger,color:l.MD3Colors.primary20,textAlign:"center"},progress:{marginVertical:(0,a.SizeDP)(16),marginHorizontal:(0,a.SizeDP)(32)}});t.default=function(e){var t=e.app;return(0,u.jsx)(r.ImageBackground,{source:{uri:"https://res.cloudinary.com/de0sqyhr9/image/upload/v1745662431/background_3x_z7dvqo.png"},style:d.container,children:(0,u.jsxs)(r.View,{style:{alignItems:"center",justifyContent:"center",flex:1},children:[(0,u.jsx)(l.Text,{allowFontScaling:!1,style:d.text,children:t}),(0,u.jsx)(o.default,{style:{width:"100%",height:"90%"},source:{uri:"https://res.cloudinary.com/de0sqyhr9/image/upload/v1745663546/logo_mmwu8t.gif"},resizeMode:o.default.resizeMode.contain})]})})}},75672:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),a=n(87841),o=i(n(14892)),u=n(2884),s=i(n(24541)),d=n(47671);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}t.default=function(e){var t=e.tableHeaders,n=e.tableData,i=e.stickyColumnLeftIndex,c=void 0===i?0:i,f=(e.stickyColumnRightIndex,e.stickyLeft),p=(e.stickyRight,e.isPaging,(0,u.useTranslation)().t),y=(0,a.useWindowDimensions)().width,m=(0,l.useState)(0),h=(0,r.default)(m,2),v=h[0],g=h[1];return(0,d.jsx)(a.View,{style:o.default.container,children:(0,d.jsxs)(a.View,{style:o.default.tableBody,children:[f&&c&&t.slice(-c).reverse().map((function(e,t){return(0,d.jsxs)(a.View,{onLayout:function(e){g(e.nativeEvent.layout.width)},style:[o.default.stickyColumnScroll,{right:t*v},1===c&&o.default.box],children:[(0,d.jsx)(a.View,{style:[o.default.stickyHeader,"action"===e&&{alignItems:"center"}],children:(0,d.jsx)(s.default,{style:o.default.headerText,children:p(`TK.${e}`)})}),null==n?void 0:n.map((function(t,n){return(0,d.jsx)(a.View,{style:[o.default.stickyColumn,"action"===e&&{alignItems:"center"}],children:"object"!=typeof t[e]?(0,d.jsx)(s.default,{style:o.default.cellText,children:t[e]}):t[e]},n)}))]},e)})),(0,d.jsx)(a.ScrollView,{horizontal:!0,children:(0,d.jsx)(a.View,{style:[o.default.row,!f&&{marginRight:0}],children:t.slice(0,t.length-c).map((function(e,i){return(0,d.jsxs)(a.View,{children:[(0,d.jsx)(a.View,{style:[o.default.stickyHeader,"action"===e&&{alignItems:"center"},{minWidth:"STT"===e?30:(y-30)/(t.length-c-1)}],children:(0,d.jsx)(s.default,{style:o.default.headerText,children:p(`TK.${e}`)})}),null==n?void 0:n.map((function(n,i){return(0,d.jsx)(a.View,{style:[o.default.stickyColumn,"action"===e&&{alignItems:"center"},{minWidth:"STT"===e?30:(y-30)/(t.length-c-1)}],children:"object"!=typeof n[e]?(0,d.jsx)(s.default,{style:o.default.cellText,children:n[e]}):n[e]},i)}))]},i)}))})})]})})}},14892:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),l=n(41995);t.default=i.StyleSheet.create({container:{flex:1},tableBody:{flexDirection:"row",flex:1},stickyColumnScroll:{position:"absolute",right:0,zIndex:10,minWidth:(0,l.SizeDP)(100),flex:1},stickyHeader:{minWidth:(0,l.SizeDP)(100),padding:(0,l.SizeDP)(10),justifyContent:"center",alignItems:"flex-start",backgroundColor:"#F2ECFD",borderTopWidth:1,borderBottomWidth:1,borderColor:"#00358014"},stickyColumn:{minWidth:(0,l.SizeDP)(100),flex:1,justifyContent:"center",alignItems:"flex-start",backgroundColor:"#fff",padding:(0,l.SizeDP)(10),minHeight:(0,l.SizeDP)(50)},headerRow:{flexDirection:"row",marginRight:(0,l.SizeDP)(100)},headerCell:{minWidth:(0,l.SizeDP)(100),padding:(0,l.SizeDP)(10),justifyContent:"center",alignItems:"flex-start",backgroundColor:"#F2ECFD",borderTopWidth:1,borderBottomWidth:1,borderColor:"#00358014"},headerText:{fontSize:r.FontSize.FontTiny,fontFamily:r.Font.InterMedium500,color:"#00204DB2"},row:{flexDirection:"row",marginRight:(0,l.SizeDP)(100)},cell:{minWidth:(0,l.SizeDP)(100),padding:(0,l.SizeDP)(10),justifyContent:"center",alignItems:"flex-start"},cellText:{textAlign:"left",fontSize:r.FontSize.FontTiny,fontFamily:r.Font.InterRegular400,color:"#00204DCC"},box:{shadowColor:"#2D3239",shadowOffset:{width:-1,height:0},shadowOpacity:.1,shadowRadius:6,elevation:3}})},55529:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=n(7005),o=i(n(93238)),u=n(20880),s=n(87841),d=i(n(94516)),c=i(n(48049)),f=n(21527),p=n(12638),y=i(n(24541)),m=n(41995),h=i(n(77389)),v=n(40851),g=n(2884),x=n(88e3),j=i(n(43184)),S=n(75463),w=n(32207),b=n(47671);t.default=function(e){var t=e.versionId,n=e.isShowNoti,i=void 0!==n&&n,I=e.data,T=e.readOnly,C=e.isOnlyView,D=e.viewFromDoc,k=void 0!==D&&D,P=e.onClose,_=e.handleSubmit,F=e.nameHeader,M=e.envelopeEnvNo,E=(0,g.useTranslation)().t,O=(0,f.useRef)(null),R=(0,p.useAppSelector)((function(e){return e.common})).accessToken,V=(0,f.useState)(),A=(0,l.default)(V,2),z=A[0],B=A[1],L=(0,f.useState)([]),N=(0,l.default)(L,2),U=N[0],W=N[1],H=(0,f.useState)(!0),$=(0,l.default)(H,2),G=$[0],Y=$[1],q=(0,f.useState)(),K=(0,l.default)(q,2),J=K[0],X=K[1],Q=(0,f.useState)(!1),Z=(0,l.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,f.useState)(!1),ie=(0,l.default)(ne,2),re=ie[0],le=ie[1],ae=(0,f.useState)(!1),oe=(0,l.default)(ae,2),ue=oe[0],se=oe[1],de=(0,f.useState)(),ce=(0,l.default)(de,2),fe=ce[0],pe=ce[1],ye=(0,v.useReviewServices)();(0,f.useEffect)((function(){i&&s.Alert.alert(E("CM.noti"),E("CM.pleaseFillForm"))}),[]);var me,he,ve,ge=(me=(0,r.default)((function*(e){var t={userTaskId:I._userTaskId,ticketId:I._ticketId,version:e},n=yield ye.getFormVersionByTicketAndUserTaskId(t,R);if(n&&null===e){var i=Array.from(Array(Math.ceil(n.versionUserTask))).map((function(e,t){return t+1})).map((function(e,t){return{id:e,key:`${E("CM.version")} `+e,value:`${E("CM.version")} `+e}}));W(i),B(i[i.length-1])}return n})),function(e){return me.apply(this,arguments)}),xe=(he=(0,r.default)((function*(e){if(!k){var n=e.nativeEvent.data;if(n&&"string"==typeof n){var i=JSON.parse(n);if("e-from"===(null==i?void 0:i.result))Se(null);else if("result"===(null==i?void 0:i.result))try{"save"===fe?le(!0):se(!0);var r={formData:null==i?void 0:i.data.map((function(e){return Object.assign({},e,{dataType:je(e),typeForm:e.type,value:e.value})})),ticketId:I._ticketId,userTaskId:I._userTaskId,version:t,eformId:I.formId};(yield ye.updateFormData(r,R))?(h.default.show({type:"success",text1:E("CM.noti"),text2:E("CM.fillFormSuccess")}),ee||_&&_(),P()):h.default.show({type:"error",text1:E("CM.noti"),text2:E("CM.fillFormFailure")})}catch(e){}finally{le(!1),se(!1)}}}})),function(e){return he.apply(this,arguments)}),je=function(e){return["textField","textArea","password","email","phone_number","radio_button","upload_file","upload_img","hyperlink","datepicker","signature"].includes(e.type)?"String":"number"===e.type?"Number":["check_box","dropdown"].includes(e.type)?"dropdown"===e.type&&e.validate.mutilChoose||"check_box"===e.type?"List":"String":null},Se=(ve=(0,r.default)((function*(e){var t=yield ge(e);if(t){var n,i,r=null==t?void 0:t.formData;r&&M&&r.forEach((function(e){"eContractEnvelopEnvNo"===e.code&&(e.value=M)})),r=null==(n=r)?void 0:n.filter((function(e){return e.value}));var l=`window.postMessage('${JSON.stringify({type:"postFormEdit",isReadonly:T,data:r}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;null==O||null==(i=O.current)||i.injectJavaScript(l)}})),function(e){return ve.apply(this,arguments)});return(0,b.jsxs)(a.SafeAreaView,{edges:["bottom","top"],style:{flex:1,backgroundColor:"#fff"},children:[(0,b.jsx)(j.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:F,onPressIconLeft:P}),(0,b.jsx)(w.Divider,{}),U.length>0&&!C&&!T&&(0,b.jsxs)(s.View,{style:{padding:16,alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:(0,m.SizeDP)(16)},children:[(0,b.jsx)(y.default,{children:E("CM.selectVersion")}),(0,b.jsx)(S.OverflowMenuCM,{selectedIndex:J,listData:U,setSelectedIndex:function(e){var t;e&&(X(e),B(U[null==e?void 0:e.row]),Se(null==(t=U[null==e?void 0:e.row])?void 0:t.id))},selectedTitle:(0,b.jsx)(s.View,{style:c.default.version,children:(0,b.jsx)(y.default,{children:null==z?void 0:z.value})})})]}),(0,b.jsx)(o.default,{nestedScrollEnabled:!0,ref:O,onMessage:xe,startInLoadingState:!0,injectedJavaScript:u.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,domStorageEnabled:!0,javaScriptEnabled:!0,thirdPartyCookiesEnabled:!0,source:{uri:(0,x.getConfig)().BASE_URL_FORM+t},onLoadEnd:function(){return Y(!1)},webviewDebuggingEnabled:!0}),(0,b.jsxs)(s.View,{style:c.default.ctnFooter,children:[!C&&!T&&(0,b.jsx)(d.default,{disabled:G,style:{flex:1,backgroundColor:"#f2ecfd"},styleLabel:{color:"#6d1fad"},label:E("CM.save"),loading:re,onPress:function(){var e;te(!0),pe("save");var t=`window.postMessage('${JSON.stringify({result:"submit"})}', '*');`;null==O||null==(e=O.current)||e.injectJavaScript(t)}}),!C&&!T&&(0,b.jsx)(d.default,{label:E("CM.confirm"),style:{flex:1},styleLabel:{color:"#fff"},loading:ue,onPress:function(){var e;te(!1),pe("submit");var t=`window.postMessage('${JSON.stringify({result:"submit"})}', '*');`;null==O||null==(e=O.current)||e.injectJavaScript(t)}})]})]})}},48049:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995);t.default=i.StyleSheet.create({ctnFooter:{flexDirection:"row",paddingHorizontal:(0,r.SizeDP)(16),columnGap:(0,r.SizeDP)(16),marginTop:(0,r.SizeDP)(8)},version:{borderWidth:(0,r.SizeDP)(1),borderColor:"rgba(0, 53, 128, .35)",borderRadius:(0,r.SizeDP)(8),paddingHorizontal:(0,r.SizeDP)(8),paddingVertical:(0,r.SizeDP)(5)}})},3614:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(55166),l=i(n(21527)),a=i(n(71773)),o=n(47671),u=l.default.lazy((function(){return r.Federated.importModule("eContract","./createContract")}));t.default=function(){return(0,o.jsx)(l.default.Suspense,{fallback:(0,o.jsx)(a.default,{app:"Create contract screen"}),children:(0,o.jsx)(u,{})})}},43952:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=n(87841),u=i(n(65963)),s=i(n(24541)),d=n(87071),c=n(91530),f=n(21527),p=n(32207),y=n(11671),m=i(n(76644)),h=i(n(43184)),v=n(26878),g=i(n(27747)),x=i(n(94516)),j=i(n(50852)),S=n(2884),w=n(46317),b=n(47671);t.default=function(e){var t,n,i,I=e.dataResource,T=e.dataUser,C=e.setListDataUpdate,D=e.toogleReload,k=(0,S.useTranslation)().t,P=(0,f.useState)(new p.IndexPath(d.optionPermisson.findIndex((function(e){return e.value===I.perm})))),_=(0,a.default)(P,2),F=_[0],M=_[1],E=(0,f.useState)(!1),O=(0,a.default)(E,2),R=O[0],V=O[1],A=(0,f.useState)(!1),z=(0,a.default)(A,2),B=z[0],L=z[1],N=(0,f.useState)(""),U=(0,a.default)(N,2),W=U[0],H=U[1],$=function(){return V(!R)},G=function(){return L(!B)},Y=(0,y.useTicketServices)(),q=(t=(0,l.default)((function*(){(yield Y.deleteAclsById(I.id))&&D(),G()})),function(){return t.apply(this,arguments)}),K=(n=(0,l.default)((function*(e){var t=(I.permType!==c.PermType.orgin?d.optionPermisson:d.optionPermisson.filter((function(e){return e.value!==c.OptionPermisson.permission})))[e.row];if(t.value!==c.OptionPermisson.delete){if(t.value===c.OptionPermisson.permission)return H(""),void $();M(e);var n={assignee:I.assignee,assigneeId:I.assigneeId,perm:t.value,permType:I.permType,name:I.name,avatar:I.avatar};C((function(e){var t=e.find((function(e){return e.assigneeId===I.assigneeId}));return t?e.map((function(e){return e.assigneeId===I.assigneeId?n:e})):[].concat((0,r.default)(e),[n])}))}else G()})),function(e){return n.apply(this,arguments)}),J=function(){var e,t;return null!=I&&null!=(e=I.name)&&e.trim()?null==I||null==(t=I.name)?void 0:t.trim():T?(null==T?void 0:T.firstName)+" "+(null==T?void 0:T.lastName):void 0},X=(i=(0,l.default)((function*(){var e=d.optionPermisson[F.row],t={resourceId:I.resourceId},n={aclForm:{assignee:I.assignee,assigneeId:I.assigneeId,perm:e.value,permType:I.permType,name:I.name},description:W};(yield Y.pushlishFile(t,n))&&($(),M(new p.IndexPath(d.optionPermisson.findIndex((function(e){return e.value===I.perm})))))})),function(){return i.apply(this,arguments)});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(o.View,{style:j.default.ctnMain,children:[(0,b.jsxs)(o.View,{style:j.default.ctnBody,children:[I.permType!==c.PermType.orgin?(0,b.jsx)(o.Image,{width:32,height:32,borderRadius:16,source:{uri:I.avatar||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}):(0,b.jsx)(o.View,{style:j.default.ctnIcon,children:(0,b.jsx)(p.Icon,{fill:"#fff",width:26,height:26,name:"people"})}),(0,b.jsxs)(o.View,{style:{flex:1},children:[I.permType!==c.PermType.orgin&&(0,b.jsx)(o.View,{children:(0,b.jsx)(s.default,{style:j.default.ctnName,children:J()})}),(0,b.jsx)(o.View,{children:(0,b.jsx)(s.default,{style:j.default.ctnAssignee,children:I.assignee})})]})]}),(0,b.jsx)(o.View,{style:{flex:.7},children:I.perm===c.OptionPermisson.owner?(0,b.jsx)(o.View,{style:j.default.ctnOwner,children:(0,b.jsx)(s.default,{style:j.default.textOwner,children:k("RV.owner")})}):(0,b.jsx)(u.default,{isi18n:!0,size:"medium",onSelect:K,valueSelect:F,listData:I.permType!==c.PermType.orgin?d.optionPermisson:d.optionPermisson.filter((function(e){return e.value!==c.OptionPermisson.permission}))})}),(0,b.jsx)(m.default,{isVisible:R,children:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:k("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:function(){M(new p.IndexPath(d.optionPermisson.findIndex((function(e){return e.value===I.perm})))),$()}}),(0,b.jsx)(p.Divider,{}),(0,b.jsxs)(v.KeyboardAwareScrollView,{style:{padding:16,rowGap:10},children:[(0,b.jsxs)(o.View,{style:[{marginBottom:16},j.default.ctnBody],children:[I.permType!==c.PermType.orgin?(0,b.jsx)(o.Image,{width:32,height:32,borderRadius:16,source:{uri:I.avatar||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}):(0,b.jsx)(o.View,{style:j.default.ctnIcon,children:(0,b.jsx)(p.Icon,{fill:"#fff",width:26,height:26,name:"people"})}),(0,b.jsxs)(o.View,{style:{flex:1},children:[I.permType!==c.PermType.orgin&&(0,b.jsx)(o.View,{children:(0,b.jsx)(s.default,{style:j.default.ctnName,children:J()})}),(0,b.jsx)(o.View,{children:(0,b.jsx)(s.default,{style:j.default.ctnAssignee,children:I.assignee})})]})]}),(0,b.jsx)(g.default,{value:W,onChangeText:H,label:k("RV.fillNote"),maxLength:100,multiline:!0})]}),(0,b.jsxs)(o.View,{style:j.default.ctnDes,children:[(0,b.jsx)(p.Icon,{fill:"#6F2CED",name:"alert-circle",width:16,height:16}),(0,b.jsx)(s.default,{style:j.default.textDes,children:k("RV.noteDes")})]}),(0,b.jsx)(o.View,{style:{paddingHorizontal:16},children:(0,b.jsx)(x.default,{label:k("RV.sendInvent"),onPress:X})})]})})]}),(0,b.jsx)(m.default,{isVisible:B,animationType:"fade",backdropStyle:{backgroundColor:"#000810B2"},children:(0,b.jsx)(o.View,{style:j.default.ctnModal,children:(0,b.jsxs)(o.View,{style:j.default.ctnBodyModal,children:[(0,b.jsx)(o.View,{style:{alignItems:"center",justifyContent:"center"},children:(0,b.jsx)(w.IconCancel,{width:56,height:56})}),(0,b.jsx)(s.default,{style:j.default.textTitle,children:k("RV.confirmDeletePer")}),(0,b.jsx)(s.default,{style:j.default.textDesModal,children:k("RV.comfirmDelPerDes")}),(0,b.jsxs)(o.View,{style:j.default.viewBtn,children:[(0,b.jsx)(x.default,{label:k("CM.labelCancel"),onPress:G,style:[j.default.btn,j.default.btnLeft],styleLabel:j.default.labelStyleLeft}),(0,b.jsx)(x.default,{label:k("CM.confirm"),onPress:q,style:[j.default.btn]})]})]})})})]})}},50852:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnMain:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginVertical:10,backgroundColor:"#fff",columnGap:10},ctnBody:{flexDirection:"row",alignItems:"center",columnGap:8,flex:1},ctnIcon:{width:32,height:32,borderRadius:16,backgroundColor:"#08c",alignItems:"center",justifyContent:"center"},ctnName:{flex:1,fontSize:14,color:"#00204DF2",fontFamily:r.Font.InterRegular400,justifyContent:"center",alignItems:"center"},ctnAssignee:{flex:1,fontSize:12,justifyContent:"center",alignItems:"center",color:"#00204DB2",fontFamily:r.Font.InterRegular400},ctnOwner:{backgroundColor:"#EDF2FD",padding:8,borderRadius:4},textOwner:{color:"#366AE2",fontFamily:r.Font.InterRegular400,fontSize:12,textAlign:"center"},ctnDes:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8,backgroundColor:"#F2ECFD",padding:4,borderRadius:8,marginHorizontal:16,marginBottom:16},textDes:{color:"#6F2CED",flex:1},btn:{flex:1},btnLeft:{backgroundColor:r.Color.BtnDisable},labelStyleLeft:{color:r.Color.Text},txtTitle:{fontSize:r.FontSize.FontBase,fontFamily:r.Font.InterSemiBold600,color:r.Color.Text,textAlign:"center"},txtContent:{textAlign:"center",fontFamily:r.Font.InterRegular400,color:r.Color.Text07},viewBtn:{marginTop:16,flexDirection:"row",gap:16,alignItems:"center",justifyContent:"center"},ctnModal:{alignItems:"center",justifyContent:"center",flex:1},ctnBodyModal:{backgroundColor:"#fff",width:"90%",borderRadius:8,padding:10},textTitle:{color:"#00204D",fontSize:18,fontFamily:r.Font.InterSemiBold600,paddingVertical:8,textAlign:"center"},textDesModal:{color:"#00204DE5",fontSize:12,fontFamily:r.Font.InterRegular400,textAlign:"center"}})},33904:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),u=n(87841),s=n(32207),d=n(45335),c=i(n(43184)),f=i(n(66771)),p=n(40851),y=i(n(47876)),m=n(35708),h=i(n(54813)),v=i(n(24541)),g=n(87071),x=n(91530),j=n(2884),S=n(47671);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}t.default=function(e){var t=e.toogleFunc,n=e.toogleReload,i=e.fileId,w=(0,j.useTranslation)().t,b=(0,o.useState)(""),I=(0,a.default)(b,2),T=I[0],C=I[1],D=(0,o.useState)(""),k=(0,a.default)(D,2),P=k[0],_=k[1],F=(0,o.useState)([]),M=(0,a.default)(F,2),E=M[0],O=M[1],R=(0,o.useState)(0),V=(0,a.default)(R,2),A=V[0],z=V[1],B=(0,o.useState)(0),L=(0,a.default)(B,2),N=L[0],U=L[1],W=(0,o.useState)(!1),H=(0,a.default)(W,2),$=H[0],G=H[1],Y=(0,o.useState)([]),q=(0,a.default)(Y,2),K=q[0],J=q[1],X=(0,f.default)(T,500),Q=(0,o.useState)(!1),Z=(0,a.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,o.useState)(g.typeLimit[0]),ie=(0,a.default)(ne,2),re=ie[0],le=ie[1],ae=(0,p.useReviewServices)();(0,o.useEffect)((function(){X?de(0,X):J([])}),[X]);var oe,ue,se,de=(oe=(0,l.default)((function*(e,t){try{var n={page:e,size:10},i={q:t.trim().toLowerCase(),terms:{status:0}},l=yield ae.getUserInfoModel(n,i);l&&(J(0===e?l.data:[].concat((0,r.default)(K),(0,r.default)(l.data))),U(l.totalRecords))}catch(e){}finally{G(!1)}})),function(e,t){return oe.apply(this,arguments)}),ce=(ue=(0,l.default)((function*(){G(!0),z(0),de(0,X)})),function(){return ue.apply(this,arguments)}),fe=(0,o.useCallback)((function(e){O((function(t){return t.some((function(t){return t.id===e.id}))?t.filter((function(t){return t.id!==e.id})):[].concat((0,r.default)(t),[e])}))}),[]),pe=(0,o.useCallback)((function(e){O((function(t){return t.filter((function(t){return t.id!==e}))}))}),[]),ye=(0,o.useCallback)((function(e){if(m.RegexUtils.FORMAT_EMAIL.test(e)){_("");var t={id:`new-${Date.now()}`,email:e,isAdd:!0};O((function(e){return[].concat((0,r.default)(e),[t])})),C("")}else _("CM.validEmail")}),[]),me=(0,o.useCallback)((function(){T&&!K.some((function(e){return e.email===T}))&&ye(T)}),[T,ye]),he=(se=(0,l.default)((function*(){if(0!==E.length){var e=E.map((function(e){var t,n;return{assignee:e.email,assigneeId:null!=e&&null!=(t=e.id)&&t.includes("new")?null:e.resourceId,perm:re.value,permType:null!=e&&null!=(n=e.id)&&n.includes("new")?3:2}})),r={resourceId:i};(yield ae.updatePermissionOrg(r,e))&&(n(),t())}else t()})),function(){return se.apply(this,arguments)}),ve=function(){te(!ee)},ge=function(){switch(re.value){case x.OptionPermisson.editor:return{bg:"#ef5da81a",color:"#ef5da8"};case x.OptionPermisson.reviewer:return{bg:"#f7931e1a",color:"#f7931e"};case x.OptionPermisson.viewer:return{bg:"#1382fd1a",color:"#1382fd"}}};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(c.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:w("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:t}),(0,S.jsx)(d.Divider,{}),(0,S.jsxs)(u.View,{style:y.default.container,children:[(0,S.jsxs)(u.View,{style:y.default.ctnListEmailSelect,children:[(0,S.jsx)(u.View,{style:{flex:1}}),(0,S.jsx)(s.OverflowMenu,{anchor:function(){var e,t,n;return(0,S.jsxs)(u.TouchableOpacity,{style:[{backgroundColor:null==(e=ge())?void 0:e.bg},y.default.ctnOverflow],onPress:ve,children:[(0,S.jsx)(v.default,{style:{color:null==(t=ge())?void 0:t.color},children:w(re.label)}),(0,S.jsx)(s.Icon,{name:ee?"arrow-up":"arrow-down",width:16,height:16,fill:null==(n=ge())?void 0:n.color})]})},visible:ee,onBackdropPress:ve,children:g.typeLimit.map((function(e){return(0,S.jsx)(s.MenuItem,{title:function(t){return(0,S.jsx)(v.default,Object.assign({},t,{children:w(e.label)}))},onPress:function(){return le(e),void ve()}},e.value)}))})]}),(0,S.jsx)(h.default,{placeholder:w("RV.fillEmail"),value:T,onChangeText:C,onSubmitEditing:me,style:y.default.input,captionText:w(P),onBlur:function(e){return ye(T)}}),(0,S.jsx)(u.View,{style:y.default.chipContainer,children:(0,S.jsx)(u.FlatList,{horizontal:!0,data:E,renderItem:function(e){var t=e.item;return(0,S.jsx)(s.ListItem,{style:y.default.ctnItem,title:`${t.email}`,accessoryRight:function(){return(0,S.jsx)(u.Pressable,{onPress:function(){return pe(t.id)},children:(0,S.jsx)(s.Icon,{name:"close",width:16,height:16})})}},t.id)}})}),T.length>0&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(u.FlatList,{style:{flex:1},onRefresh:ce,refreshing:$,onEndReached:function(){K.length<N&&(de(A+1,X),z(A+1))},onEndReachedThreshold:.5,data:K,renderItem:function(e){var t=e.item;return(0,S.jsx)(s.Card,{style:y.default.card,children:(0,S.jsxs)(u.View,{style:y.default.cardContent,children:[(0,S.jsx)(u.View,{children:(0,S.jsx)(s.Text,{category:"s1",children:t.email})}),(0,S.jsx)(s.CheckBox,{checked:E.some((function(e){return e.id===t.id})),onChange:function(){return fe(t)}})]})})},keyExtractor:function(e){return e.id},ListEmptyComponent:function(){return(0,S.jsx)(s.Text,{style:y.default.noResults,children:w("CM.emptyData")})}})})]}),(0,S.jsx)(u.View,{style:y.default.ctnFooter,children:(0,S.jsx)(s.Button,{onPress:he,style:y.default.addButton,children:w("CM.confirm")})})]})}},47876:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({container:{flex:1,padding:16},input:{marginBottom:16},card:{marginBottom:8},cardContent:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},noResults:{textAlign:"center",marginTop:16},chipContainer:{marginVertical:10},chip:{margin:4},addButton:{marginTop:16,flex:1,backgroundColor:r.Color.BgPrimary},ctnFooter:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:8,paddingHorizontal:16},ctnListEmailSelect:{alignItems:"center",justifyContent:"space-between",flexDirection:"row",marginBottom:8},ctnOverflow:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingHorizontal:5,columnGap:3,paddingVertical:6,borderRadius:6},ctnItem:{borderWidth:1,borderColor:r.Color.borderColor,borderRadius:8,marginRight:8}})},6710:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=n(87841),u=i(n(43184)),s=n(40851),d=n(12638),c=n(21527),f=n(32207),p=i(n(81745)),y=i(n(24541)),m=n(87071),h=n(91530),v=i(n(94516)),g=i(n(77389)),x=n(2884),j=n(47671);t.default=function(e){var t=e.toogleFunc,n=e.toogleReload,i=e.fileId,S=(0,x.useTranslation)().t,w=(0,d.useAppSelector)((function(e){return e.account})).dataAccount,b=(0,c.useState)([]),I=(0,a.default)(b,2),T=I[0],C=I[1],D=(0,c.useState)([]),k=(0,a.default)(D,2),P=k[0],_=k[1],F=(0,s.useReviewServices)(),M=(0,c.useState)(!1),E=(0,a.default)(M,2),O=E[0],R=E[1],V=(0,c.useState)(m.typeLimit[0]),A=(0,a.default)(V,2),z=A[0],B=A[1],L=(0,c.useState)(new Set),N=(0,a.default)(L,2),U=N[0],W=N[1],H=(0,c.useState)(new Set),$=(0,a.default)(H,2),G=$[0],Y=$[1],q=function(){R(!O)};(0,c.useEffect)((function(){Q()}),[]);var K,J,X=function(){switch(z.value){case h.OptionPermisson.editor:return{bg:"#ef5da81a",color:"#ef5da8"};case h.OptionPermisson.reviewer:return{bg:"#f7931e1a",color:"#f7931e"};case h.OptionPermisson.viewer:return{bg:"#1382fd1a",color:"#1382fd"}}},Q=(K=(0,l.default)((function*(){var e,t=null==w||null==(e=w.orgIn)?void 0:e.split("/").slice(0,3).join("/"),n={orgIn:null!=t?t:"/1833/5390"},i=yield F.getDataOrgByOrgin(n);_(i);var r=Z(i,null);C(r)})),function(){return K.apply(this,arguments)}),Z=function e(t,n){var i=t.filter((function(e){return e.parentId===n&&!e.blocked})),l=[];return i&&i.length?(i.forEach((function(n){var i={item:n,children:[]};i.children=e(t,n.id),l=[].concat((0,r.default)(l),[i])})),l):[]},ee=function e(t,n,i){for(var r of t){if(r.children&&r.children.some((function(e){return e.item.id===n.item.id}))){r.children.every((function(e){return i.has(e.item.id)}))?i.add(r.item.id):i.delete(r.item.id),e(T,r,i);break}r.children&&e(r.children,n,i)}},te=function e(t){var n=[t.item.id];return t.children&&t.children.forEach((function(t){n=[].concat((0,r.default)(n),(0,r.default)(e(t)))})),n},ne=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=U.has(t.item.id),r=t.children&&t.children.length>0,l=G.has(t.item.id),a=function(e){if(!e.children)return!1;var t=te(e),n=t.filter((function(e){return U.has(e)}));return n.length>0&&n.length<t.length}(t);return(0,j.jsxs)(o.View,{style:{marginLeft:0===n?0:40,marginBottom:10},children:[(0,j.jsxs)(o.View,{style:p.default.nodeContainer,children:[r&&(0,j.jsx)(o.TouchableOpacity,{onPress:function(){return e=t.item.id,(n=new Set(G)).has(e)?n.delete(e):n.add(e),void Y(n);var e,n},children:(0,j.jsx)(f.Icon,{name:l?"chevron-down-outline":"chevron-right-outline",fill:"#8F9BB3",style:p.default.icon})}),(0,j.jsx)(f.CheckBox,{checked:i,indeterminate:a,onChange:function(e){return function(e,t){var n=new Set(U),i=te(e);t?i.forEach((function(e){return n.add(e)})):i.forEach((function(e){return n.delete(e)})),ee(T,e,n),W(n)}(t,e)},style:p.default.checkbox,children:t.item.name})]}),r&&l&&(0,j.jsx)(o.View,{style:{marginTop:10},children:t.children.map((function(t){return e(t,n+1)}))})]},t.item.id)},ie=T.flatMap((function(e){return te(e)})),re=(J=(0,l.default)((function*(){var e=P.filter((function(e){return Array.from(U).includes(e.id)})).map((function(e){return{assignee:e.name,assigneeId:e.id,perm:z.value,permType:1}})),r={resourceId:i};(yield F.updatePermissionOrg(r,e))&&(g.default.show({type:"success",text1:S("CM.info"),text2:S("CM.permissionUpdatedSuccessfully")}),n(),null==t||t())})),function(){return J.apply(this,arguments)});return(0,j.jsxs)(f.Layout,{style:{flex:1},children:[(0,j.jsx)(u.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:S("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:t}),(0,j.jsx)(f.Divider,{}),(0,j.jsxs)(o.View,{style:{padding:10,flex:1},children:[(0,j.jsxs)(o.View,{style:p.default.ctnCheckBox,children:[(0,j.jsx)(f.CheckBox,{checked:U.size===ie.length,indeterminate:U.size>0&&U.size<ie.length,onChange:function(e){var t=T.flatMap((function(e){return te(e)}));W(e?new Set(t):new Set)},children:S("CM.all")}),(0,j.jsx)(f.OverflowMenu,{anchor:function(){var e,t,n;return(0,j.jsxs)(o.TouchableOpacity,{style:[{backgroundColor:null==(e=X())?void 0:e.bg},p.default.ctnOverflow],onPress:q,children:[(0,j.jsx)(y.default,{style:{color:null==(t=X())?void 0:t.color},children:S(z.label)}),(0,j.jsx)(f.Icon,{name:O?"arrow-up":"arrow-down",width:16,height:16,fill:null==(n=X())?void 0:n.color})]})},visible:O,onBackdropPress:q,children:m.typeLimit.map((function(e){return(0,j.jsx)(f.MenuItem,{title:function(t){return(0,j.jsx)(y.default,Object.assign({},t,{children:S(e.label)}))},onPress:function(){return B(e),void q()}},e.value)}))})]}),(0,j.jsx)(o.ScrollView,{style:{},children:T.map((function(e){return ne(e)}))})]}),(0,j.jsx)(o.View,{style:{padding:16},children:(0,j.jsx)(v.default,{label:S("CM.confirm"),onPress:re})})]})}},81745:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({container:{padding:16},nodeContainer:{flexDirection:"row",alignItems:"center"},icon:{width:24,height:24,marginRight:8},checkbox:{flex:1},ctnOverflow:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:5,columnGap:3,paddingVertical:6,borderRadius:6},ctnCheckBox:{alignItems:"center",justifyContent:"space-between",flexDirection:"row",marginBottom:16}})},91530:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PermType=t.PERMISSION=t.OptionPermisson=t.LimitPermission=void 0;t.PERMISSION=function(e){return e[e.everyone=1]="everyone",e[e.limit=2]="limit",e}({}),t.LimitPermission=function(e){return e.viewer="p_v",e.editor="p_e",e.reviewer="p_c",e}({}),t.OptionPermisson=function(e){return e.viewer="v",e.editor="e",e.reviewer="c",e.permission="r",e.delete="delete",e.owner="o",e}({}),t.PermType=function(e){return e[e.personOwner=0]="personOwner",e[e.orgin=1]="orgin",e[e.personInOrg=2]="personInOrg",e[e.personOutOrg=3]="personOutOrg",e}({})},87071:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.typeLimitPermisson=t.typeLimit=t.permissionArr=t.optionPermisson=void 0;var i=n(91530);t.permissionArr=[{label:i.PERMISSION.everyone,value:"RV.collaboration.everyone"},{label:i.PERMISSION.limit,value:"RV.collaboration.appointment"}],t.typeLimit=[{value:i.OptionPermisson.viewer,label:"RV.collaboration.viewer"},{value:i.OptionPermisson.editor,label:"RV.collaboration.editor"},{value:i.OptionPermisson.reviewer,label:"RV.collaboration.reviewer"}],t.typeLimitPermisson=[{value:i.LimitPermission.viewer,label:"RV.collaboration.viewer"},{value:i.LimitPermission.editor,label:"RV.collaboration.editor"},{value:i.LimitPermission.reviewer,label:"RV.collaboration.reviewer"}],t.optionPermisson=[{value:i.OptionPermisson.viewer,label:"RV.collaboration.viewer"},{value:i.OptionPermisson.editor,label:"RV.collaboration.editor"},{value:i.OptionPermisson.reviewer,label:"RV.collaboration.reviewer"},{value:i.OptionPermisson.permission,label:"RV.collaboration.permission"},{value:i.OptionPermisson.delete,label:"RV.collaboration.delete"}]},56677:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43693)),l=i(n(29293)),a=i(n(85715)),o=n(87841),u=i(n(43184)),s=n(32207),d=i(n(65963)),c=i(n(24541)),f=n(46317),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),y=n(87071),m=n(91530),h=i(n(43952)),v=n(40851),g=n(11671),x=i(n(76644)),j=i(n(33904)),S=i(n(6710)),w=i(n(55773)),b=i(n(73732)),I=n(2884),T=n(88e3),C=n(45335),D=n(47671);function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}t.default=function(e){var t,n=e.toogleFunc,i=e.dataDetailFile,k=(0,I.useTranslation)().t,P=(0,p.useState)(!1),_=(0,a.default)(P,2),F=_[0],M=_[1],E=(0,p.useState)(!1),O=(0,a.default)(E,2),R=O[0],V=O[1],A=(0,p.useState)(!1),z=(0,a.default)(A,2),B=z[0],L=z[1],N=(0,p.useState)(!1),U=(0,a.default)(N,2),W=U[0],H=U[1],$=(0,p.useState)(!1),G=(0,a.default)($,2),Y=G[0],q=G[1],K=(0,p.useState)({permission:m.PERMISSION.limit,limit:"v",limitPermission:m.LimitPermission.viewer,selectOption:"v",selectOptionOrg:"v"}),J=(0,a.default)(K,2),X=J[0],Q=J[1],Z=(0,p.useState)([]),ee=(0,a.default)(Z,2),te=ee[0],ne=ee[1],ie=(0,p.useState)(new s.IndexPath(y.typeLimitPermisson.findIndex((function(e){return e.value===X.limitPermission})))),re=(0,a.default)(ie,2),le=re[0],ae=re[1],oe=(0,p.useState)([]),ue=(0,a.default)(oe,2),se=ue[0],de=ue[1],ce=(0,p.useState)([]),fe=(0,a.default)(ce,2),pe=fe[0],ye=fe[1],me=(0,p.useState)(),he=(0,a.default)(me,2),ve=he[0],ge=he[1],xe=(0,v.useReviewServices)(),je=(0,g.useTicketServices)(),Se=function(){M(!F)},we=function(){H(!W)},be=function(){q(!Y)},Ie=function(){return L(!B)};(0,p.useEffect)((function(){Fe()}),[R]),(0,p.useEffect)((function(){_e()}),[]);var Te,Ce,De,ke,Pe,_e=(Te=(0,l.default)((function*(){var e={resourceId:i.fileId},t=yield je.getDefaultPublic(e);ge(t),t&&(Q((function(e){return Object.assign({},e,{permission:m.PERMISSION.everyone,limitPermission:t.perm})})),ae(new s.IndexPath(y.typeLimitPermisson.findIndex((function(e){return e.value===t.perm})))))})),function(){return Te.apply(this,arguments)}),Fe=(Ce=(0,l.default)((function*(){var e={resourceId:i.fileId},t=yield xe.getResourceById(e);if(t){var n=t.filter((function(e){return e.permType!==m.PermType.orgin})).map((function(e){return e.assignee})),r=yield je.getMultiLoginAccount(n);ye(r),de(t)}})),function(){return Ce.apply(this,arguments)}),Me=(De=(0,l.default)((function*(){var e={resourceId:i.fileId};te.length>0&&(yield xe.updatePermissionOrg(e,te)),ve||X.permission!==m.PERMISSION.limit?(ve&&X.limitPermission===ve.perm||(X.permission===m.PERMISSION.limit?yield Ee():yield Oe()),n()):n()})),function(){return De.apply(this,arguments)}),Ee=(ke=(0,l.default)((function*(){var e={resourceId:i.fileId};yield je.limitLink(e)})),function(){return ke.apply(this,arguments)}),Oe=(Pe=(0,l.default)((function*(){var e={resourceId:i.fileId,perm:X.limitPermission};yield je.publicLink(e)})),function(){return Pe.apply(this,arguments)}),Re=(0,p.useCallback)((function(){if(X.permission===m.PERMISSION.limit)return k("RV.limit");if(X.permission===m.PERMISSION.everyone)switch(X.limitPermission){case m.LimitPermission.viewer:return k("RV.viewer");case m.LimitPermission.editor:return k("RV.editor");case m.LimitPermission.reviewer:return k("RV.reviewer");default:return""}}),[X]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(o.View,{style:w.default.ctnMain,children:[(0,D.jsx)(u.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:k("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:n}),(0,D.jsx)(s.Divider,{}),(0,D.jsxs)(o.View,{style:w.default.ctnBody,children:[(0,D.jsxs)(o.View,{style:w.default.ctnGroup1,children:[(0,D.jsxs)(o.View,{style:w.default.container,children:[(0,D.jsx)(c.default,{style:w.default.title,children:k("CM.orgIn")}),(0,D.jsxs)(o.Pressable,{onPress:be,style:w.default.ctnSelect,children:[(0,D.jsx)(c.default,{children:k("CM.orgIn")}),(0,D.jsx)(s.Icon,{width:16,height:16,name:"arrow-right",fill:"#00358059"})]})]}),(0,D.jsxs)(o.View,{style:w.default.container,children:[(0,D.jsx)(c.default,{style:w.default.title,children:"Email"}),(0,D.jsxs)(o.Pressable,{onPress:we,style:w.default.ctnSelect,children:[(0,D.jsx)(c.default,{children:k("CM.emailShare")}),(0,D.jsx)(s.Icon,{width:16,height:16,name:"arrow-right",fill:"#00358059"})]})]})]}),(0,D.jsxs)(o.View,{style:w.default.ctnWrapper,children:[(0,D.jsx)(c.default,{style:w.default.title,children:k("RV.userAccess")}),(0,D.jsx)(o.View,{style:w.default.ctnGroup2,children:(0,D.jsx)(s.List,{style:{backgroundColor:"#fff"},data:se,renderItem:function(e){var t=e.item;return(0,D.jsx)(h.default,{toogleReload:function(){return V(!R)},setListDataUpdate:ne,dataUser:null==pe?void 0:pe.find((function(e){return e.email===t.assignee})),dataResource:t})}})})]}),(0,D.jsxs)(o.View,{style:w.default.ctnWrapper,children:[(0,D.jsx)(c.default,{style:w.default.title,children:k("RV.generalAccess")}),(0,D.jsxs)(o.View,{style:w.default.ctnImage,children:[X.permission===m.PERMISSION.limit?(0,D.jsx)(o.View,{style:w.default.ctnImagePer,children:(0,D.jsx)(f.Iconkey,{width:13,height:16})}):(0,D.jsx)(o.View,{style:w.default.ctnImagePer,children:(0,D.jsx)(s.Icon,{name:"globe",fill:"#39ac6c",width:20,height:20})}),(0,D.jsxs)(o.View,{style:w.default.ctnDes,children:[(0,D.jsxs)(o.View,{style:w.default.ctnDesPer,children:[(0,D.jsx)(c.default,{style:w.default.title,children:k(null==(t=y.permissionArr.find((function(e){return e.label===X.permission})))?void 0:t.value)}),(0,D.jsx)(s.OverflowMenu,{anchor:function(){return(0,D.jsx)(o.TouchableOpacity,{hitSlop:15,onPress:Se,children:(0,D.jsx)(s.Icon,{name:"arrow-down",width:16,height:16,fill:"#00204DB2"})})},visible:F,onBackdropPress:Se,children:y.permissionArr.map((function(e){return(0,D.jsx)(s.MenuItem,{title:k(e.value),onPress:function(){return t="permission",n=e.label,Q((function(e){return Object.assign({},e,(0,r.default)({},t,n))})),void Se();var t,n}},e.value)}))})]}),(0,D.jsx)(c.default,{style:w.default.textLabel,children:Re()}),X.permission===m.PERMISSION.everyone&&(0,D.jsx)(d.default,{isi18n:!0,size:"medium",onSelect:function(e){ae(e),Q((function(t){return Object.assign({},t,{limitPermission:y.typeLimitPermisson[e.row].value})}))},valueSelect:le,listData:y.typeLimitPermisson})]})]})]})]}),(0,D.jsxs)(o.View,{style:{},children:[(0,D.jsx)(s.Divider,{}),(0,D.jsxs)(o.View,{style:w.default.ctnCopy,children:[(0,D.jsxs)(o.Pressable,{onPress:function(){b.default.setString(`${(0,T.getConfig)().BASE_URL_ECOLLABO}/negoti-doc/${i.fileId}`),Ie()},style:w.default.ctnPress,children:[(0,D.jsx)(s.Icon,{fill:"#366AE2",width:16,height:16,name:"link"}),(0,D.jsx)(c.default,{style:w.default.textCopy,children:k("RV.shareCopy")})]}),(0,D.jsx)(s.Button,{onPress:Me,size:"small",children:(0,D.jsx)(c.default,{children:k("CM.confirm")})})]})]})]}),(0,D.jsx)(x.default,{isVisible:W,children:(0,D.jsx)(j.default,{fileId:i.fileId,toogleReload:function(){return V(!R)},toogleFunc:we})}),(0,D.jsx)(x.default,{isVisible:Y,children:(0,D.jsx)(S.default,{toogleReload:function(){return V(!R)},fileId:i.fileId,toogleFunc:be})}),(0,D.jsx)(C.Snackbar,{visible:B,onDismiss:Ie,duration:1e3,children:k("RV.copyLink")})]})}},55773:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnMain:{flex:1,backgroundColor:"#fff"},ctnBody:{flex:1},ctnGroup1:{padding:10,rowGap:8},container:{rowGap:10},title:{fontSize:14,color:"#00204DF2",fontFamily:r.Font.InterMedium500},ctnSelect:{borderWidth:.5,borderColor:"#00358059",borderRadius:8,paddingHorizontal:16,paddingVertical:10,flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnGroup2:{borderWidth:1,borderColor:"#00358026",borderRadius:8,maxHeight:300,padding:10},ctnWrapper:{rowGap:10,padding:10},ctnImage:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:16},ctnDes:{flex:1,rowGap:10},ctnImagePer:{width:32,height:32,backgroundColor:"#F2F5F8",borderRadius:16,alignItems:"center",justifyContent:"center"},ctnDesPer:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:4},textLabel:{fontSize:12,color:"#00204DB2",fontFamily:r.Font.InterRegular400},ctnCopy:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:16,marginTop:10},ctnPress:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:4},textCopy:{fontSize:14,color:"#366AE2",fontFamily:r.Font.InterRegular400}})},21758:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=n(14740),u=n(32207),s=n(21527),d=n(2884),c=n(46317),f=n(12638),p=i(n(43184)),y=i(n(76644)),m=i(n(46542)),h=n(7005),v=n(26878),g=n(87841),x=i(n(24541)),j=i(n(94196)),S=n(35708),w=n(60596),b=i(n(94516)),I=n(40851),T=i(n(77389)),C=n(97427),D=n(31004),k=i(n(78662)),P=i(n(64898)),_=i(n(8491)),F=i(n(27163)),M=n(11671),E=n(47671);t.default=function(){var e,t=(0,d.useTranslation)().t,n=(0,f.useAppDispatch)(),i=(0,o.useRoute)(),O=(0,s.useRef)(null),R=null==i||null==(e=i.params)?void 0:e.dataUserTask,V=(0,o.useNavigation)(),A=(0,s.useState)(!1),z=(0,a.default)(A,2),B=z[0],L=z[1],N=(0,s.useState)(!1),U=(0,a.default)(N,2),W=U[0],H=U[1],$=(0,s.useState)(!0),G=(0,a.default)($,2),Y=G[0],q=G[1],K=(0,s.useState)(""),J=(0,a.default)(K,2),X=J[0],Q=(J[1],(0,s.useState)("")),Z=(0,a.default)(Q,2),ee=(Z[0],Z[1]),te=(0,s.useState)(!0),ne=(0,a.default)(te,2),ie=(ne[0],ne[1]),re=(0,s.useState)(!1),le=(0,a.default)(re,2),ae=le[0],oe=le[1],ue=(0,f.useAppSelector)((function(e){return e.ticket})),se=ue.dataTicketRedux,de=ue.recipientDetaiImpl,ce=ue.formData,fe=ue.modeler,pe=(0,s.useState)([]),ye=(0,a.default)(pe,2),me=ye[0],he=ye[1],ve=(0,s.useState)([]),ge=(0,a.default)(ve,2),xe=ge[0],je=ge[1],Se=(0,s.useState)(null==de?void 0:de.find((function(e){return e.userTaskId===(null==R?void 0:R._userTaskId)}))),we=(0,a.default)(Se,1)[0],be=(0,s.useState)(null),Ie=(0,a.default)(be,2),Te=Ie[0],Ce=Ie[1],De=((0,f.useAppSelector)((function(e){return e.account})).dataAccount,(0,f.useAppSelector)((function(e){return e.common})).accessToken),ke=(0,I.useReviewServices)(),Pe=(0,D.useReviewEcontractServices)(),_e=(0,M.useTicketServices)();(0,s.useEffect)((function(){Be(),ze()}),[]);var Fe,Me,Ee,Oe,Re,Ve,Ae=(0,s.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:(null==Te?void 0:Te.personalName)||"---",email:se.createdBy||"---",avatarUrl:null==Te?void 0:Te.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==se?void 0:se.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==se?void 0:se.jsonXml)&&JSON.parse(null==se?void 0:se.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:S.DateUtils.convertDateToDDMMYYYY_H_M(null==se?void 0:se.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==ce?void 0:ce.formName,funcViewFrom:function(){return oe(!0)}}},{key:"RV.status",type:"status",value:{status:se.ticketStatus===w.Status.voided?w.Status.voided:(null==we?void 0:we.recipientStatus)||w.Status.processing}}]}),[se,ce,fe]),ze=(Fe=(0,l.default)((function*(){try{var e=yield _e.getMultiLoginAccount([se.createdBy]);e&&e.length>0&&Ce(e[0]),console.log("user",e)}catch(e){}})),function(){return Fe.apply(this,arguments)}),Be=(Me=(0,l.default)((function*(){try{var e=yield ke.getListFileReview(se.id,R._userTaskId,De);if(e){je(e);var t=yield Promise.all(e.map((function(e){return Pe.getDetailCollabora(e.eCollaboDocumentId||e.ecollaboDocumentId)})));he(t.map((function(t){var n;return Object.assign({},t,{sourceSystem:null!=(n=e.find((function(e){return e.eCollaboDocumentId===t.fileId||e.ecollaboDocumentId===t.fileId})))&&n.attrs?"Từ eRequest":t.sourceSystem})})))}}catch(e){}})),function(){return Me.apply(this,arguments)}),Le=(Ee=(0,l.default)((function*(){var e;if(!X)return ie(!0),ee(t("CM.empty")),void(null==O||null==(e=O.current)||e.focus());ee("");var i=Object.assign({},null==we?void 0:we.recipient,{reason:X});(yield ke.actionTicket(null==we?void 0:we.id,null==we?void 0:we.ticketId,null==we?void 0:we.userTaskId,i,De,"reject"))?(T.default.show({type:"success",text1:t("CM.noti"),text2:t("CM.rejectSucesss")}),n(C.ticketActions.setDataTicket(Object.assign({},se,{ticketStatus:w.Status.rejected}))),V.goBack()):T.default.show({type:"error",text1:t("CM.noti"),text2:t("CM.rejectFailed")})})),Oe=(0,l.default)((function*(){})),Re=(0,l.default)((function*(){try{var e=yield _.default.pick({type:[_.default.types.doc,_.default.types.docx,_.default.types.xls,_.default.types.xlsx]});if(e){var t="ios"===g.Platform.OS?null==e?void 0:e[0].uri.replace("file://",""):null==e?void 0:e[0].uri,n={name:e[0].name,uri:t,type:e[0].type},i=new FormData;i.append("file",n);var l=yield Pe.uploadFiles(se.id,R._userTaskId,i);if(l){je((function(e){return[l].concat((0,r.default)(e))}));var a=yield Pe.getDetailCollabora(l.eCollaboDocumentId||l.ecollaboDocumentId),o=Object.assign({},a,{sourceSystem:null!=l&&l.attrs?"Từ eRequest":a.sourceSystem});he([o].concat((0,r.default)(me)))}}}catch(e){}})),function(){return Re.apply(this,arguments)}),Ne=(Ve=(0,l.default)((function*(e){var n=xe.find((function(t){return t.eCollaboDocumentId===e||t.ecollaboDocumentId===e}));(yield Pe.deleteFile(n.id))?(T.default.show({type:"success",text1:t("CM.info"),text2:t("CM.fileDeletedSuccessfully")}),he(me.filter((function(t){return t.fileId!==e}))),je(xe.filter((function(t){return t.eCollaboDocumentId!==e||t.ecollaboDocumentId!==e})))):T.default.show({type:"error",text1:t("CM.info"),text2:t("CM.fileDeleteFailed")})})),function(e){return Ve.apply(this,arguments)});return(0,E.jsxs)(h.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,E.jsx)(p.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:t("CL.titleHeader"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,E.jsx)(u.TopNavigationAction,{onPress:function(){return L(!0)},icon:(0,E.jsx)(c.IconWorkflow,{width:20,height:20})})}}),(0,E.jsxs)(v.KeyboardAwareScrollView,{style:{flex:1},children:[(0,E.jsx)(g.View,{style:k.default.ctnBody,children:(0,E.jsxs)(g.View,{style:k.default.ctnSubBody,children:[(0,E.jsxs)(g.Pressable,{style:k.default.ctnHeader,onPress:function(){return H(!W)},children:[(0,E.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:W?"arrow-circle-down":"arrow-circle-right"}),(0,E.jsx)(x.default,{style:k.default.textTitle,children:t("CM.infoCommon")})]}),W&&(0,E.jsx)(g.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,E.jsx)(j.default,{dataInfo:Ae})})]})}),(0,E.jsx)(g.View,{style:[k.default.ctnBody,{paddingBottom:16}],children:(0,E.jsxs)(g.View,{style:k.default.ctnSubBody,children:[(0,E.jsxs)(g.Pressable,{style:k.default.ctnHeader,onPress:function(){return q(!Y)},children:[(0,E.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:Y?"arrow-circle-down":"arrow-circle-right"}),(0,E.jsx)(x.default,{style:k.default.textTitle,children:t("CL.listFile")})]}),Y&&"task-success"!==R._status&&!(se.ticketStatus===w.Status.voided||se.ticketStatus===w.Status.rejected)&&(0,E.jsxs)(g.View,{style:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",marginRight:10},children:[(0,E.jsx)(g.View,{style:{flex:1}}),(0,E.jsxs)(g.Pressable,{style:k.default.ctnUpload,onPress:Le,children:[(0,E.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:"cloud-upload"}),(0,E.jsx)(x.default,{style:k.default.textUpload,children:t("CL.addFile")})]})]}),Y&&(0,E.jsx)(g.View,{style:{paddingRight:10,paddingBottom:10},children:me&&(0,E.jsx)(u.List,{scrollEnabled:!1,data:me,keyExtractor:function(e){return e.fileId},renderItem:function(e){var t=e.item;return(0,E.jsx)(P.default,{typeReview:"eCollabo",deleteFile:Ne,dataFlow:R,data:t})}})})]})})]}),(0,E.jsxs)(g.View,{style:k.default.ctnDes,children:[(0,E.jsx)(u.Icon,{fill:"#6F2CED",name:"alert-circle",width:16,height:16}),(0,E.jsx)(x.default,{style:k.default.styleTextDes,children:t("CL.des")})]}),(0,E.jsx)(y.default,{isVisible:B,children:(0,E.jsx)(m.default,{onClose:function(){return L(!1)}})}),(0,E.jsx)(y.default,{isVisible:ae,children:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(g.View,{style:{flex:1},children:(0,E.jsx)(F.default,{})}),(0,E.jsx)(b.default,{style:{backgroundColor:"#f2ecfd",marginHorizontal:16},styleLabel:{color:"#6d1fad"},label:t("CM.back"),onPress:function(){return oe(!1)}})]})})]})}},78662:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),l=n(41995);t.default=i.StyleSheet.create({ctnMain:{padding:(0,l.SizeDP)(16),backgroundColor:"#F8FAFE",flex:1},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,l.SizeDP)(16),marginBottom:(0,l.SizeDP)(24)},txtTitle:{fontFamily:r.Font.InterSemiBold600,fontSize:r.FontSize.FontTiny,color:r.Color.colorText,flex:.5},txtValue:{fontFamily:r.Font.InterRegular400,fontSize:r.FontSize.FontTiny,color:"#00204DE5",flex:1},ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:r.Font.InterMedium500},redDot:{color:"#E14337"},ctnFooter:{flexDirection:"row",paddingHorizontal:16,columnGap:16,marginTop:8},ctnUpload:{borderRadius:8,paddingVertical:6,flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},textUpload:{color:"#6F2CED",fontSize:12,textDecorationLine:"underline",textDecorationColor:"#6F2CED"},ctnTextNote:{paddingHorizontal:10,paddingBottom:10,rowGap:4},ctnDes:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8,backgroundColor:"#F2ECFD",marginHorizontal:16,padding:4,borderRadius:8},styleTextDes:{color:"#6F2CED",flex:1}})},77664:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(43693)),a=i(n(29293)),o=i(n(85715)),u=n(14740),s=n(32207),d=n(21527),c=n(2884),f=n(46317),p=n(12638),y=i(n(43184)),m=i(n(76644)),h=i(n(46542)),v=n(7005),g=n(26878),x=i(n(73264)),j=n(87841),S=i(n(8404)),w=i(n(24541)),b=i(n(94196)),I=n(35708),T=n(60596),C=i(n(94516)),D=n(2543),k=i(n(52275)),P=i(n(27747)),_=n(40851),F=i(n(77389)),M=n(97427),E=n(31004),O=n(99845),R=i(n(27163)),V=i(n(55529)),A=n(11671),z=n(47671);t.default=function(){var e,t,n=(0,c.useTranslation)().t,i=(0,p.useAppDispatch)(),B=(0,u.useRoute)(),L=null==B||null==(e=B.params)?void 0:e.dataUserTask,N=(null==B||null==(t=B.params)?void 0:t.isFinish)||!1,U=(0,u.useNavigation)(),W=(0,d.useState)(!1),H=(0,o.default)(W,2),$=H[0],G=H[1],Y=(0,d.useState)(!1),q=(0,o.default)(Y,2),K=q[0],J=q[1],X=(0,d.useState)(!1),Q=(0,o.default)(X,2),Z=Q[0],ee=Q[1],te=(0,d.useState)({}),ne=(0,o.default)(te,2),ie=ne[0],re=ne[1],le=(0,d.useState)(!1),ae=(0,o.default)(le,2),oe=ae[0],ue=ae[1],se=(0,d.useState)(""),de=(0,o.default)(se,2),ce=de[0],fe=de[1],pe=(0,d.useState)(""),ye=(0,o.default)(pe,2),me=ye[0],he=ye[1],ve=(0,d.useState)(!0),ge=(0,o.default)(ve,2),xe=ge[0],je=ge[1],Se=(0,d.useState)(!0),we=(0,o.default)(Se,2),be=we[0],Ie=we[1],Te=(0,d.useState)(!1),Ce=(0,o.default)(Te,2),De=Ce[0],ke=Ce[1],Pe=(0,d.useState)(),_e=(0,o.default)(Pe,2),Fe=_e[0],Me=_e[1],Ee=(0,d.useState)(),Oe=(0,o.default)(Ee,2),Re=Oe[0],Ve=Oe[1],Ae=(0,d.useState)([]),ze=(0,o.default)(Ae,2),Be=(ze[0],ze[1]),Le=(0,d.useState)(),Ne=(0,o.default)(Le,2),Ue=Ne[0],We=Ne[1],He=(0,d.useState)({isRemindEnv:!1,overdueDate:new Date,remindStartDate:new Date,remindFrequency:"daily",remindContent:null}),$e=(0,o.default)(He,2),Ge=$e[0],Ye=$e[1],qe=(0,d.useState)(!1),Ke=(0,o.default)(qe,2),Je=(Ke[0],Ke[1]),Xe=(0,d.useState)([]),Qe=(0,o.default)(Xe,2),Ze=Qe[0],et=Qe[1],tt=(0,d.useState)([]),nt=(0,o.default)(tt,2),it=nt[0],rt=nt[1],lt=(0,d.useState)({}),at=(0,o.default)(lt,2),ot=at[0],ut=at[1],st=(0,d.useState)([]),dt=(0,o.default)(st,2),ct=(dt[0],dt[1]),ft=(0,d.useState)(),pt=(0,o.default)(ft,2),yt=pt[0],mt=pt[1],ht=(0,d.useState)(""),vt=(0,o.default)(ht,2),gt=vt[0],xt=vt[1],jt=(0,d.useState)({isError:"ecollabo"!==L.documentResource,errorViewMessage:"ecollabo"===L.documentResource?"":"RV.econtract.title"}),St=(0,o.default)(jt,2),wt=St[0],bt=St[1],It=(0,p.useAppSelector)((function(e){return e.ticket})),Tt=It.dataTicketRedux,Ct=It.recipientDetaiImpl,Dt=It.formData,kt=It.modeler,Pt=It.statusPartyRaw,_t=(0,d.useState)(null),Ft=(0,o.default)(_t,2),Mt=Ft[0],Et=Ft[1],Ot=(0,d.useState)(null==Ct?void 0:Ct.find((function(e){return e.userTaskId===(null==L?void 0:L.userTaskId)}))),Rt=(0,o.default)(Ot,1)[0],Vt=((0,p.useAppSelector)((function(e){return e.account})).dataAccount,(0,p.useAppSelector)((function(e){return e.common})).accessToken),At=(0,_.useReviewServices)(),zt=(0,A.useTicketServices)(),Bt=(0,E.useReviewEcontractServices)(),Lt=(0,d.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:(null==Mt?void 0:Mt.personalName)||"---",email:Tt.createdBy||"---",avatarUrl:null==Mt?void 0:Mt.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==Tt?void 0:Tt.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==Tt?void 0:Tt.jsonXml)&&JSON.parse(null==Tt?void 0:Tt.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:I.DateUtils.convertDateToDDMMYYYY_H_M(null==Tt?void 0:Tt.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==Dt?void 0:Dt.formName,funcViewFrom:function(){ke(!0)}}},{key:"RV.status",type:"status",value:{status:Tt.ticketStatus===T.Status.voided?T.Status.voided:(null==Rt?void 0:Rt.recipientStatus)||T.Status.processing}}]}),[Tt,Dt,kt,Mt]);(0,d.useEffect)((function(){Kt(),Jt(),Xt()}),[]);var Nt,Ut,Wt,Ht,$t,Gt,Yt,qt,Kt=(Nt=(0,a.default)((function*(){try{var e=yield Bt.getDataFormFill({versionId:Rt.versionFormId});e&&Me(e)}catch(e){}})),function(){return Nt.apply(this,arguments)}),Jt=(Ut=(0,a.default)((function*(){var e=yield Bt.getTicketModelerFlowStatusRaw(Tt.id);e&&mt(e)})),function(){return Ut.apply(this,arguments)}),Xt=(Wt=(0,a.default)((function*(){try{var e=yield zt.getMultiLoginAccount([Tt.createdBy]);e&&e.length>0&&Et(e[0])}catch(e){}})),function(){return Wt.apply(this,arguments)}),Qt=(Ht=(0,a.default)((function*(){if(!ce)return je(!0),void he("CM.empty");he("");var e=Object.assign({},null==Rt?void 0:Rt.recipient,{reason:ce});(yield At.actionTicket(null==Rt?void 0:Rt.id,null==Rt?void 0:Rt.ticketId,null==Rt?void 0:Rt.userTaskId,e,Vt,"reject"))?(F.default.show({type:"success",text1:n("CM.noti"),text2:n("CM.rejectSucesss")}),i(M.ticketActions.setDataTicket(Object.assign({},Tt,{ticketStatus:T.Status.rejected}))),U.goBack()):F.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.rejectFailed")})})),function(){return Ht.apply(this,arguments)}),Zt=($t=(0,a.default)((function*(){return!it.find((function(e){return!e.value.trim()&&e.required}))||(it.filter((function(e){return!e.value.trim()&&e.required})).forEach((function(e){re((function(t){return Object.assign({},t,(0,l.default)({},e.id,"CM.empty"))}))})),!1)})),function(){return $t.apply(this,arguments)}),en=(Gt=(0,a.default)((function*(e){try{if(!e){if(it.find((function(e){return!e.value.trim()&&e.required})))return void it.filter((function(e){return!e.value.trim()&&e.required})).forEach((function(e){re((function(t){return Object.assign({},t,(0,l.default)({},e.id,"CM.empty"))}))}));if(null!=Fe&&Fe.versionId)return void ue(!0)}J(!0);var t={id:"",refId:null,selector:"",lookup:Tt.id,attrs:{},payload:"",body:null},i=yield Bt.getAllFileInNotion(Tt.id,null==L?void 0:L.userTaskId);if("ewriter"===L.documentResource){if(!on(null==Re?void 0:Re.template))return void F.default.show({type:"error",text1:n("CM.noti"),text2:n("RV.econtract.alert.error.otp_with_ekyc")});var r=yield nn(i);t.payload=JSON.stringify(r),t.selector="flow_start_kyta_create_econtract_temp_n_determine"}if("ecollabo"===L.documentResource||"eclm"===L.documentResource||"eform"===L.documentResource){var a=tn(i);t.payload=JSON.stringify(a),t.selector="flow_start_kyta_create_econtract_auto_determine"}if("eclm"===L.documentResource)return void j.Alert.alert(n("CM.noti","Chưa phát triển cho eClm"));if("eform"===L.documentResource)return void j.Alert.alert(n("CM.noti","Chưa phát triển cho eform"));var o=yield Bt.createContract(t),u=an(o);u&&(F.default.show({type:u.alertType,text1:n("CM.noti"),text2:n(`RV.${u.message}`)}),"success"===u.alertType&&U.goBack())}catch(e){}finally{J(!1)}})),function(e){return Gt.apply(this,arguments)}),tn=function(e){var t={refId:Tt.id,isDossier:!1,files:[],docTypeCode:null,headerFields:[],parties:null,owner:null==yt?void 0:yt.createdBy,recipientDetailsId:null==L?void 0:L.recipientDetailsId,userTaskId:null==L?void 0:L.userTaskId,ticketId:Tt.id,userTaskVersion:null,remind:Ge.isRemindEnv?{expiredTime:I.DateUtils.convertDateToDDMMYYYY(Ge.overdueDate),remindBefore:I.DateUtils.convertDateToDDMMYYYY(Ge.remindStartDate),remindEvery:"daily"===Ge.remindFrequency?"1":"0",remindMessage:Ge.remindContent}:null},n=O.headerFieldsColla;return n.forEach((function(e){if("envSubmittedFrom"!==e.id){var t;if(it.find((function(t){return t.id==e.id})))e.value=null==(t=it.find((function(t){return t.id==e.id})))?void 0:t.value;"refId"===e.id&&(e.value=Tt.id)}})),t.headerFields=n.map((function(e){return{id:e.id,name:e.name,type:e.type,value:e.value}})),t.files=(0,r.default)(e.map((function(e,t){return{name:e.fileName,id:e.id,order:e.order,resource:e.resource}}))),t},nn=(Yt=(0,a.default)((function*(e){var t,n,i,l,a=yield ln(),o={refId:Tt.id,templateId:Ue.templateEcontractId,customData:[],inputData:{datas:[[]]},owner:"",recipientDetailsId:null==L?void 0:L.recipientDetailsId,userTaskId:null==L?void 0:L.userTaskId,ticketId:Tt.id,userTaskVersion:null,remind:Ge.isRemindEnv?{expiredTime:I.DateUtils.convertDateToDDMMYYYY(Ge.overdueDate),remindBefore:I.DateUtils.convertDateToDDMMYYYY(Ge.remindStartDate),remindEvery:"daily"===Ge.remindFrequency?"1":"0",remindMessage:Ge.remindContent}:null,files:(0,r.default)(e),envelopeId:gt},u=null==Re||null==(t=Re.lotData)?void 0:t.datas[0];if(u.forEach((function(e){var t;"envSubmittedFrom"!==e.id&&(it.find((function(t){return t.id==e.id}))&&(e.value=null==(t=it.find((function(t){return t.id==e.id})))?void 0:t.value),"refId"===e.id&&(e.value=Tt.id))})),a){var s=rn(a);o.customData=s}return Ze.forEach((function(e){O.listTypeUserAction.forEach((function(t){e.recipient[t].forEach((function(e){u.forEach((function(t){if(t.id===e.id)if("r"===t.type)t.value=e.name;else if("m"===t.type)t.value=e.email;else if("phone"===t.type)t.value=e.phone;else if("fca"===t.type.toLowerCase())if(a&&a.recipientId&&a.back.content&&a.back.contentContentType&&a.front.content&&a.front.contentContentType)a&&(!a.back.content||!a.back.contentContentType||!a.front.content||a.front.contentContentType);else{t.type="fca_pre";var n=JSON.parse(t.value);n.type&&"fca"===n.type.toLowerCase()&&(n.type="fca_pre"),t.value=JSON.stringify(n)}}))}))}))})),(o=Object.assign({},o,{inputData:{datas:[(0,D.cloneDeep)(u)]}})).inputData.datas[0].forEach((function(e){"dueDays"===e.id&&(e.value=null==Re?void 0:Re.template.dueInDays)})),o.owner=null==Re||null==(n=Re.template)||null==(i=n.requester)||null==(l=i.contact)?void 0:l.email,o.customData.length>0?o.customData.forEach((function(e){o.inputData.datas.length>0&&(o.inputData.datas[0]=JSON.parse(JSON.stringify(o.inputData.datas[0].filter((function(t){return t.id!==e.recipientId||t.id===e.recipientId&&"fca_pre"!==t.type})))))})):o.inputData.datas[0]=JSON.parse(JSON.stringify(o.inputData.datas[0].filter((function(e){return"fca_pre"!==e.type&&"fca"!==e.type})))),o})),function(e){return Yt.apply(this,arguments)}),rn=function(e){var t=[];return Object.keys(ot).length>0&&Ze.forEach((function(n){O.listTypeUserAction.forEach((function(i){n.recipient[i].forEach((function(n){var i=ot[n.id];i.email=n.email,i.personalName=n.name,i.telephoneNumber=n.phone,e&&n.id===e.recipientId&&(i.photoBackSideIDCard&&i.photoBackSideIDCardContentType&&i.photoFrontSideIDCard&&i.photoFrontSideIDCardContentType&&(i.type="fca"),i.photoBackSideIDCard=e.back.content,i.photoBackSideIDCardContentType=e.back.contentContentType,i.photoFrontSideIDCard=e.front.content,i.photoFrontSideIDCardContentType=e.front.contentContentType,i.address=e.ekycRepository.attrs.address,i.commune=e.ekycRepository.attrs.commune,i.country=e.ekycRepository.attrs.country,i.location=e.ekycRepository.attrs.location,i.personalID=e.ekycRepository.attrs.personalID,i.provideAddress=e.ekycRepository.attrs.provideAddress,i.stateOrProvince=e.ekycRepository.attrs.stateOrProvince,i.refId=e.ekycRepository.attrs.refId,i.personalName=e.ekycRepository.attrs.personalName,i.ekycContent=e.ekycRepository.ekycContent,i.provideDate=I.DateUtils.convertDateToDDMMYYYY(e.ekycRepository.attrs.provideDate)),t.push(i)}))}))})),t},ln=(qt=(0,a.default)((function*(){var e,t="";if(null!=Pt&&Pt.party&&(null==Pt||null==(e=Pt.party)||e.recipients.forEach((function(e){"eID"===e.role&&(t=e.id)}))),!t)return null;var n={ticketId:Tt.id,userTaskId:t},i=yield At.getHistoryEkycDetail(n);if(!i)return null;var r=i.ekycRepositoryId,l=yield At.getEkycRepoById(r),a=yield Bt.getEkycRepositoryDetailIdCard(l.id,{ekycRepositoryId:r,id:l.id,recipientId:l.id});return a&&a.back&&a.front?{recipientId:l.personalId,ekycRepository:a.ekycRepository,front:{content:a.front.content,contentContentType:a.front.name},back:{content:a.back.content,contentContentType:a.back.name}}:null})),function(){return qt.apply(this,arguments)}),an=function(e){var t={message:"",alertType:""};return"-1"===e||-1===e||"13"===e||13===e?(t.message="econtract.alert.error.13-error",t.alertType="error"):"2"===e||2===e?(t.message="econtract.alert.error.2-ekyc",t.alertType="error"):"3"===e||3===e?(t.message="econtract.alert.error.3-error",t.alertType="error"):"4"===e||4===e?(t.message="econtract.alert.error.4-ewriter-file",t.alertType="error"):"5"===e||5===e?(t.message="econtract.alert.error.5-error",t.alertType="error"):"6"===e||6===e?(t.message="econtract.alert.error.6-no-sign-control",t.alertType="error"):"7"===e||7===e?(t.message="econtract.alert.error.7-digital-sign-amount-invalid",t.alertType="error"):"8"===e||8===e?(t.message="econtract.alert.error.8-field-role-invalid",t.alertType="error"):"9"===e||9===e?(t.message="econtract.alert.error.9-error",t.alertType="error"):"10"===e||10===e?(t.message="econtract.alert.error.10-error",t.alertType="error"):"12"===e||12===e?(t.message="econtract.alert.error.12-filename-not-found",t.alertType="error"):"14"===e||14===e?(t.message="econtract.alert.error.14-rcp-no-sign-control",t.alertType="error"):(t.message="econtract.alert.success.create",t.alertType="success"),t},on=function(e){if(e){for(var t=0;t<e.parties.length;t++)for(var n=0;n<e.parties[t].recipients.length;n++){var i=e.parties[t].recipients[n].signTypes;if(i&&i.includes("sign_fca.otp")){if(i.includes("sign_ekyc"))continue;return!1}}return!0}return!0};return(0,z.jsxs)(v.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,z.jsx)(y.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:n("RV.econtract.infoContract"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,z.jsx)(s.TopNavigationAction,{onPress:function(){return G(!0)},icon:(0,z.jsx)(f.IconWorkflow,{width:20,height:20})})}}),(0,z.jsxs)(g.KeyboardAwareScrollView,{style:{flex:1},children:[(0,z.jsx)(j.View,{style:S.default.ctnBody,children:(0,z.jsxs)(j.View,{style:S.default.ctnSubBody,children:[(0,z.jsxs)(j.Pressable,{style:S.default.ctnHeader,onPress:function(){return ee(!Z)},children:[(0,z.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:Z?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(w.default,{style:S.default.textTitle,children:n("CM.infoCommon")})]}),Z&&(0,z.jsx)(j.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,z.jsx)(b.default,{dataInfo:Lt})})]})}),N?(0,z.jsx)(x.default,{envelopeId:L.envelopeId}):(0,z.jsxs)(z.Fragment,{children:[Fe&&(0,z.jsx)(j.View,{style:S.default.ctnBody,children:(0,z.jsxs)(j.View,{style:[S.default.ctnSubBody],children:[(0,z.jsxs)(j.Pressable,{style:S.default.ctnHeader,onPress:function(){return Ie(!be)},children:[(0,z.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:be?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(w.default,{style:S.default.textTitle,children:n("RV.econtract.formNeedAction")})]}),be&&(0,z.jsxs)(j.View,{style:S.default.ctnFormName,children:[(0,z.jsxs)(w.default,{style:S.default.textTitle,children:[n("RV.econtract.fillForm")," "]}),(0,z.jsx)(j.TouchableOpacity,{onPress:(0,a.default)((function*(){ue(yield Zt())})),children:(0,z.jsx)(w.default,{style:S.default.formName,children:null==Fe?void 0:Fe.formName})})]})]})}),(0,z.jsx)(j.View,{style:S.default.ctnBody,children:(0,z.jsx)(k.default,{error:ie,setError:re,dataEcontractFlow:L,setTemplateStructure:Ve,setMergeFileList:Be,setEWriterDocInfoWriter:We,setEnvRemind:Ye,envRemind:Ge,setIsDTFlow:Je,setDataPartyForm:et,dataPartyForm:Ze,listFormEnvData:it,setListFormEnvData:rt,setListCaOtpRecipientForm:ut,setIsErrorView:bt,isErrorView:wt,setDocumentList:ct,setGenerateEnvelopeId:xt})}),(0,z.jsx)(j.View,{style:S.default.ctnBody,children:(0,z.jsxs)(j.View,{style:[S.default.ctnSubBody,{marginBottom:16}],children:[(0,z.jsxs)(j.Pressable,{style:S.default.ctnHeader,onPress:function(){return je(!xe)},children:[(0,z.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:xe?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(w.default,{style:S.default.textTitle,children:n("CM.note")})]}),xe&&(0,z.jsx)(j.View,{style:S.default.ctnNote,children:(0,z.jsx)(P.default,{isRequired:!0,label:n("CM.fillNote"),value:ce,onChangeText:function(e){fe(e),he("")},multiline:!0,maxLength:400,errorMessage:n(me)})})]})})]})]}),!N&&((null==Rt?void 0:Rt.recipientStatus)===T.Status.processing||null===(null==Rt?void 0:Rt.recipientStatus))&&!wt.isError&&(0,z.jsx)(j.View,{style:S.default.ctnFooter,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(j.TouchableOpacity,{onPress:Qt,children:(0,z.jsx)(f.IconRejectReview,{width:36,height:36})}),(0,z.jsx)(C.default,{disabled:!(0,D.isEmpty)(ie),style:{flex:1},label:n("CM.confirm"),onPress:function(){return en(!1)},loading:K})]})}),(0,z.jsx)(m.default,{isVisible:$,children:(0,z.jsx)(h.default,{onClose:function(){return G(!1)}})}),(0,z.jsx)(m.default,{isVisible:oe,children:(0,z.jsx)(V.default,{versionId:null==Fe?void 0:Fe.versionId,readOnly:!1,data:{_userTaskId:null==L?void 0:L.userTaskId,_ticketId:null==Tt?void 0:Tt.id,formId:null==Fe?void 0:Fe.formId},isShowNoti:!0,handleSubmit:function(){return en(!0)},onClose:function(){return ue(!1)},nameHeader:null==Fe?void 0:Fe.formName,envelopeEnvNo:gt})}),(0,z.jsx)(m.default,{isVisible:De,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(j.View,{style:{flex:1},children:(0,z.jsx)(R.default,{})}),(0,z.jsx)(C.default,{style:{backgroundColor:"#f2ecfd",marginHorizontal:16},styleLabel:{color:"#6d1fad"},label:n("CM.back"),onPress:function(){return ke(!1)}})]})})]})}},31075:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ROOT_FOLDER_ID=void 0;var r=i(n(29293)),l=i(n(85715)),a=n(87841),o=i(n(43184)),u=n(20880),s=i(n(93238)),d=n(21527),c=n(32207),f=i(n(69290)),p=n(87414),y=n(84093),m=n(45335),h=n(2884),v=n(47671),g=t.ROOT_FOLDER_ID="000010000000000000";t.default=function(e){var t=e.url,n=e.toogleViewFile,i=e.isView,x=e.fileId,j=e.changeDataFile,S=e.fileName,w=(0,h.useTranslation)().t,b=(0,d.useState)(!1),I=(0,l.default)(b,2),T=I[0],C=I[1],D=(0,d.useState)(),k=(0,l.default)(D,2),P=k[0],_=k[1],F=(0,d.useState)(0),M=(0,l.default)(F,2),E=M[0],O=M[1],R=(0,d.useState)(i),V=(0,l.default)(R,2),A=V[0],z=V[1],B=(0,d.useState)(""),L=(0,l.default)(B,2),N=L[0],U=L[1],W=(0,d.useState)(!1),H=(0,l.default)(W,2),$=H[0],G=H[1],Y=function(){return G(!$)},q=(0,y.useReviewCollaboServices)(),K=function(){C(!T)};(0,d.useEffect)((function(){Q()}),[]);var J,X,Q=(J=(0,r.default)((function*(){var e=yield q.getFileById(x);e&&_(e)})),function(){return J.apply(this,arguments)}),Z=(X=(0,r.default)((function*(e){var t=Object.assign({},P,{status:e,versionId:e===p.FILE_ITEM_STATUS.DONE?null:null==P?void 0:P.versionId,fileParentId:(null==P?void 0:P.fileParentId)===g?"":null==P?void 0:P.fileParentId});(yield q.changeStatusFile(t))?(Y(),U("CL.changeStatusDone"),j((function(t){return Object.assign({},t,{status:e})})),z(e),O(E+1)):U("CL.changeStatusStop")})),function(e){return X.apply(this,arguments)}),ee=function(e){e===p.FILE_ITEM_STATUS.DONE?Z(p.FILE_ITEM_STATUS.DONE):e===p.FILE_ITEM_STATUS.STOP&&Z(p.FILE_ITEM_STATUS.STOP),K()};return(0,v.jsxs)(a.View,{style:{flex:1},children:[(0,v.jsx)(o.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:S,contentStyle:{backgroundColor:"#fff"},onPressIconLeft:n,renderContentRight:A===p.FILE_ITEM_STATUS.EDITING?function(){return(0,v.jsx)(c.TopNavigationAction,{icon:(0,v.jsx)(c.Icon,{name:"more-vertical"}),onPress:K})}:void 0}),(0,v.jsx)(c.Divider,{}),(0,v.jsx)(a.View,{style:{backgroundColor:"#fff",flex:1},children:(0,v.jsx)(s.default,{javaScriptEnabled:!0,injectedJavaScript:u.String.SCRIPT_SCALE_WEBVIEW,source:{uri:t}},E)}),(0,v.jsx)(f.default,{title:w("CL.changeStatus"),isVisible:T,onClose:K,renderContent:(0,v.jsxs)(a.View,{children:[(0,v.jsx)(c.MenuItem,{onPress:function(){return ee(p.FILE_ITEM_STATUS.DONE)},title:w("CL.done")}),(0,v.jsx)(c.MenuItem,{onPress:function(){return ee(p.FILE_ITEM_STATUS.STOP)},title:w("CL.stop")})]})}),(0,v.jsx)(m.Snackbar,{visible:$,duration:1e3,onDismiss:Y,children:w(N)})]})}},64898:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=n(87841),o=n(87414),u=i(n(24541)),s=n(32207),d=n(46317),c=i(n(76644)),f=n(21527),p=n(31004),y=i(n(91642)),m=i(n(31075)),h=n(2884),v=i(n(56677)),g=n(12638),x=n(60596),j=n(47671);t.default=function(e){var t,n,i,S=e.data,w=e.dataFlow,b=e.deleteFile,I=e.typeReview,T=(0,h.useTranslation)().t,C=(0,f.useState)(!1),D=(0,l.default)(C,2),k=D[0],P=D[1],_=(0,f.useState)(!1),F=(0,l.default)(_,2),M=F[0],E=F[1],O=(0,f.useState)(""),R=(0,l.default)(O,2),V=R[0],A=R[1],z=(0,f.useState)(S),B=(0,l.default)(z,2),L=B[0],N=B[1],U=(0,p.useReviewEcontractServices)(),W=(0,g.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,H=function(){P(!k)},$=function(){E(!M)},G=function(e){switch(e){case o.FILE_ITEM_STATUS.DRAFT:return{backgroundColor:"rgb(255, 243, 235)",color:"rgb(252, 107, 3)"};case o.FILE_ITEM_STATUS.EDITING:return{backgroundColor:"#efeffd",color:"#5d5fef"};case o.FILE_ITEM_STATUS.DONE:return{backgroundColor:"#06a87726",color:"#39ac6d"};case o.FILE_ITEM_STATUS.SIGN:return{backgroundColor:"#ef5da81a",color:"#943cdd"};case o.FILE_ITEM_STATUS.REQUEST_EDIT:return{backgroundColor:"#f6eefc",color:"#943cdd"};case o.FILE_ITEM_STATUS.STOP:return{backgroundColor:"#fceeed",color:"#e14337"};default:return{backgroundColor:"rgb(255, 243, 235)",color:"rgb(252, 107, 3)"}}},Y=(t=(0,r.default)((function*(e){var t=yield U.getLinkIframeEcollabo(e);t&&(A(t.iframe),H())})),function(e){return t.apply(this,arguments)});return(0,j.jsxs)(a.View,{style:y.default.ctnMain,children:[(0,j.jsx)(a.View,{style:y.default.ctnLeft,children:(0,j.jsx)(d.IconDocx,{width:32,height:32})}),(0,j.jsxs)(a.View,{style:y.default.ctnRight,children:[(0,j.jsx)(a.TouchableOpacity,{onPress:function(){return Y(L.fileId)},children:(0,j.jsx)(u.default,{style:y.default.fileName,children:null==L?void 0:L.fileName})}),(0,j.jsxs)(a.View,{style:y.default.ctnBody,children:[(0,j.jsx)(u.default,{style:y.default.srcSys,children:(null==L?void 0:L.sourceSystem)||"Từ eRequest"}),(0,j.jsx)(u.default,{children:"•"}),(0,j.jsx)(u.default,{style:y.default.srcSys,children:(i=null==L?void 0:L.fileSize,i&&i>=1024?Math.floor(i/1024)+" KB":i&&i<1024?i+" MB":"---")})]}),(0,j.jsxs)(a.View,{style:y.default.ctnAction,children:[(0,j.jsx)(a.View,{style:[y.default.ctnStatus,{backgroundColor:G(null==L?void 0:L.status).backgroundColor}],children:(0,j.jsx)(u.default,{style:[{textAlign:"center",color:G(null==L?void 0:L.status).color},y.default.srcSys],children:(n=null==L?void 0:L.status,T("RV.status-collabo."+Object.keys(o.FILE_ITEM_STATUS)[n]))})}),(0,j.jsx)(a.View,{style:y.default.action})]}),W.ticketStatus!==x.Status.voided&&W.ticketStatus!==x.Status.rejected&&(0,j.jsxs)(a.View,{style:y.default.action,children:["eCollabo"===I&&"task-success"!=(null==w?void 0:w._status)&&(0,j.jsx)(a.TouchableOpacity,{hitSlop:10,onPress:$,children:(0,j.jsx)(s.Icon,{fill:"#00204DB2",width:16,height:16,name:"share-outline"})}),(0,j.jsx)(a.TouchableOpacity,{hitSlop:10,onPress:function(){return Y(L.fileId)},children:(0,j.jsx)(s.Icon,{fill:"#00204DB2",width:16,height:16,name:L.status===o.FILE_ITEM_STATUS.EDITING?"edit-2-outline":"eye-outline"})}),L.sourceSystem.includes("eRequest")&&L.status!=o.FILE_ITEM_STATUS.DONE&&(0,j.jsx)(a.TouchableOpacity,{hitSlop:10,onPress:function(){return null==b?void 0:b(L.fileId)},children:(0,j.jsx)(s.Icon,{fill:"#00204DB2",width:16,height:16,name:"trash"})})]}),(0,j.jsx)(s.Divider,{})]}),k&&(0,j.jsx)(c.default,{isVisible:k,children:(0,j.jsx)(m.default,{changeDataFile:N,isView:L.status,url:V,toogleViewFile:H,fileId:L.fileId,fileName:null==L?void 0:L.fileName})}),(0,j.jsx)(c.default,{isVisible:M,children:(0,j.jsx)(v.default,{dataDetailFile:L,toogleFunc:$})})]})}},91642:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",paddingVertical:8},ctnLeft:{width:80,alignItems:"center",justifyContent:"center"},ctnRight:{flex:1,rowGap:8},fileName:{fontSize:14,color:"#00204DF2",fontFamily:r.Font.InterRegular400},ctnBody:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:4},srcSys:{fontSize:12,color:"#00204DF2",fontFamily:r.Font.InterRegular400},ctnAction:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnStatus:{borderRadius:4,backgroundColor:"#E8F7EF",paddingHorizontal:8,paddingVertical:4},action:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",columnGap:16}})},67831:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),l=i(n(24541)),a=i(n(91278)),o=i(n(42467)),u=n(99845),s=n(2884),d=n(47671);t.default=function(e){var t=e.party,n=e.index,i=e.error,c=e.setError,f=(0,s.useTranslation)().t;return(0,d.jsxs)(r.View,{children:[(0,d.jsx)(r.View,{style:o.default.ctnMain,children:(0,d.jsxs)(l.default,{style:o.default.text,children:[f("RV.econtract.join")," ",n]})}),(0,d.jsx)(r.View,{style:o.default.ctnRecipient,children:u.listTypeUserAction.map((function(e){return t.recipient[e].map((function(t,n){return(0,d.jsx)(a.default,{error:i,setError:c,recipient:t,type:e},n)}))}))})]})}},42467:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnMain:{backgroundColor:"#F2ECFD",borderRadius:8,paddingHorizontal:12,paddingVertical:10,marginHorizontal:10},text:{color:"#6F2CED",fontSize:16,fontFamily:r.Font.InterSemiBold600},ctnRecipient:{paddingHorizontal:12,marginBottom:16}})},91278:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43693)),l=i(n(85715)),a=n(87841),o=i(n(54813)),u=i(n(24541)),s=i(n(65963)),d=n(99845),c=n(21527),f=n(32207),p=i(n(54582)),y=n(35708),m=n(2884),h=n(47671);t.default=function(e){var t=e.recipient,n=e.type,i=e.error,v=e.setError,g=(0,m.useTranslation)().t,x=(0,c.useState)(t.notifyType.map((function(e){return new f.IndexPath(d.notifyType.findIndex((function(t){return t.value===e})))}))),j=(0,l.default)(x,2),S=j[0],w=j[1],b=(0,c.useState)((0,r.default)((0,r.default)((0,r.default)({},`name_${t.id}`,!0),`email_${t.id}`,!0),`phone_${t.id}`,!1)),I=(0,l.default)(b,2),T=I[0],C=I[1];(0,c.useEffect)((function(){var e=i;0===S.length?(e[`notifyType_${t.id}`]="CM.empty",t.notifyType=[]):(delete e[`notifyType_${t.id}`],t.notifyType=S.map((function(e){return d.notifyType[e.row].value})),2===S.length?C((0,r.default)((0,r.default)((0,r.default)({},`name_${t.id}`,!0),`email_${t.id}`,!0),`phone_${t.id}`,!0)):0===S[0].row?(C((0,r.default)((0,r.default)((0,r.default)({},`name_${t.id}`,!0),`email_${t.id}`,!1),`phone_${t.id}`,!0)),t.phone?y.RegexUtils.REGEX_PHONE_NUMBER_9.test(t.phone)||v((function(e){return Object.assign({},e,(0,r.default)({},`phone_${t.id}`,"CM.validPhone"))})):v((function(e){return Object.assign({},e,(0,r.default)({},`phone_${t.id}`,"CM.empty"))}))):1===S[0].row&&(C((0,r.default)((0,r.default)((0,r.default)({},`name_${t.id}`,!0),`email_${t.id}`,!0),`phone_${t.id}`,!1)),t.email?y.RegexUtils.FORMAT_EMAIL.test(t.email)||v((function(e){return Object.assign({},e,(0,r.default)({},`email_${t.id}`,"CM.validEmail"))})):v((function(e){return Object.assign({},e,(0,r.default)({},`email_${t.id}`,"CM.empty"))})))),v((function(t){return Object.assign({},t,e)}))}),[S]);var D=function(e,n,i){t[e]=i,i.trim()?"email"!==e||y.RegexUtils.FORMAT_EMAIL.test(i)?"phone"!==e||y.RegexUtils.REGEX_PHONE_NUMBER_9.test(i)?v((function(t){var i=Object.assign({},t);return delete i[`${e}_${n}`],i})):v((function(t){return Object.assign({},t,(0,r.default)({},`${e}_${n}`,"CM.validPhone"))})):v((function(t){return Object.assign({},t,(0,r.default)({},`${e}_${n}`,"CM.validEmail"))})):v((function(t){var i=Object.assign({},t);return T[`${e}_${n}`]?i[`${e}_${n}`]="CM.empty":delete i[`${e}_${n}`],i}))};return(0,h.jsxs)(a.View,{children:[(0,h.jsx)(u.default,{style:p.default.text,children:g(`RV.econtract.${n}`)}),(0,h.jsx)(o.default,{isRequired:T[`name_${t.id}`],label:g("RV.econtract.name"),value:t.name,captionText:g(i[`name_${t.id}`]),status:i[`name_${t.id}`]?"danger":"basic",onChangeText:function(e){return D("name",t.id,e)}}),(0,h.jsx)(o.default,{isRequired:T[`email_${t.id}`],label:"Email",keyBoardType:"email-address",value:t.email,captionText:g(i[`email_${t.id}`]),status:i[`email_${t.id}`]?"danger":"basic",onChangeText:function(e){return D("email",t.id,e)}}),(0,h.jsx)(o.default,{isRequired:T[`phone_${t.id}`],label:g("RV.econtract.phone"),value:t.phone,keyBoardType:"numeric",captionText:g(i[`phone_${t.id}`]),status:i[`phone_${t.id}`]?"danger":"basic",onChangeText:function(e){return D("phone",t.id,e)}}),(0,h.jsx)(s.default,{valueSelect:S,onSelect:w,label:g("RV.econtract.notify-type"),isRequired:!0,multiple:!0,size:"medium",caption:g(i[`notifyType_${t.id}`]),status:i[`notifyType_${t.id}`]?"danger":"basic",listData:d.notifyType})]})}},54582:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({text:{fontSize:15,fontFamily:r.Font.InterMedium500,color:"#00204D",textDecorationLine:"underline",paddingVertical:6}})},99845:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.notifyType=t.listTypeUserAction=t.listRemind=t.headerFieldsColla=void 0;t.listRemind=[{label:"Nhắc hằng ngày",value:"daily"},{label:"Nhắc một lần",value:"onetime"}],t.notifyType=[{label:"Thông báo qua sms",value:"sms"},{label:"Thông báo qua email",value:"email"}],t.listTypeUserAction=["reviewer","signer","stamper"],t.headerFieldsColla=[{id:"envName",name:"Tên tài liệu",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"String",required:!0},{id:"envNo",name:"Số tài liệu",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"String",required:!1},{id:"envDate",name:"Ngày ký",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"Date",required:!1},{id:"envSubmittedFrom",name:" Được gửi từ :  ",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"String",required:!1}]},52275:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43693)),l=i(n(41132)),a=i(n(29293)),o=i(n(85715)),u=n(21527),s=n(12638),d=n(31004),c=n(87841),f=i(n(54813)),p=n(32207),y=i(n(24541)),m=i(n(23599)),h=i(n(33254)),v=i(n(65963)),g=n(99845),x=i(n(27747)),j=i(n(67831)),S=n(2884),w=i(n(64898)),b=n(40851),I=n(47671),T=["000010eViX8cWwWn5reR","000010Nmi1KfN5azzXD4","000010ayipEI5eN61LrV","0000101JigKI6w6GvQ5G"];t.default=function(e){var t=e.dataEcontractFlow,n=e.error,i=e.setError,C=e.setTemplateStructure,D=(e.setMergeFileList,e.setEWriterDocInfoWriter),k=e.setEnvRemind,P=e.envRemind,_=e.setIsDTFlow,F=e.dataPartyForm,M=e.setDataPartyForm,E=e.listFormEnvData,O=e.setListFormEnvData,R=e.setListCaOtpRecipientForm,V=e.setIsErrorView,A=e.isErrorView,z=e.setDocumentList,B=e.setGenerateEnvelopeId,L=(0,S.useTranslation)().t,N=(0,u.useState)(!0),U=(0,o.default)(N,2),W=U[0],H=U[1],$=(0,u.useState)(!0),G=(0,o.default)($,2),Y=G[0],q=G[1],K=(0,u.useState)(!0),J=(0,o.default)(K,2),X=J[0],Q=J[1],Z=(0,u.useState)(),ee=(0,o.default)(Z,2),te=(ee[0],ee[1]),ne=(0,u.useState)([]),ie=(0,o.default)(ne,2),re=ie[0],le=ie[1],ae=(0,u.useState)(),oe=(0,o.default)(ae,2),ue=oe[0],se=oe[1],de=(0,u.useState)(!1),ce=(0,o.default)(de,2),fe=ce[0],pe=ce[1],ye=(0,s.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,me=(0,u.useState)(new p.IndexPath(0)),he=(0,o.default)(me,2),ve=he[0],ge=he[1],xe=(0,u.useState)(),je=(0,o.default)(xe,2),Se=je[0],we=je[1],be=(0,u.useState)(),Ie=(0,o.default)(be,2),Te=Ie[0],Ce=Ie[1],De=[],ke=(0,s.useAppSelector)((function(e){return e.common})).accessToken,Pe=(0,s.useAppSelector)((function(e){return e.account})).dataAccount,_e=(0,d.useReviewEcontractServices)(),Fe=(0,b.useReviewServices)();(0,u.useEffect)((function(){Ke()}),[]),(0,u.useEffect)((function(){k((function(e){return Object.assign({},e,{remindFrequency:g.listRemind[ve.row].value})}))}),[ve]);Me=(0,a.default)((function*(){var e=yield Fe.getFormByUserTaskIdAndTicketId(ye.id,t.userTaskId);e&&(we(e.versionFormId),Ce(e))}));var Me,Ee,Oe,Re,Ve,Ae,ze,Be,Le,Ne,Ue,We,He,$e,Ge,Ye,qe,Ke=(Ee=(0,a.default)((function*(){try{q(!0),null!=t&&t.userTaskId&&(ye.id,yield Qe(),"ewriter"===t.documentResource?yield Ze():"ecollabo"===t.documentResource?yield st():("eclm"===t.documentResource||"eform"===t.documentResource)&&dt())}catch(e){}finally{q(!1)}})),function(){return Ee.apply(this,arguments)}),Je=(Oe=(0,a.default)((function*(){try{return yield _e.getExecutorByTicketIdAndUsertaskId(ye.id,"sid-CF5A88D7-5159-4644-9606-2FFB36DDC0E5")}catch(e){return null}})),function(){return Oe.apply(this,arguments)}),Xe=(Re=(0,a.default)((function*(){try{var e={userTaskId:null,ticketId:ye.id,version:null};return yield Fe.getFormVersionByTicketAndUserTaskId(e,ke)}catch(e){return null}})),function(){return Re.apply(this,arguments)}),Qe=(Ve=(0,a.default)((function*(){var e=yield _e.getAllFileInNotion(ye.id,null==t?void 0:t.userTaskId);e&&(De=e)})),function(){return Ve.apply(this,arguments)}),Ze=(Ae=(0,a.default)((function*(){var e=yield ut();if(e){var t=ye.modelerId;if(t&&T.includes(t)){var n=(yield _e.getTicketForms(ye.id)).find((function(e){return!e.userTaskId}));if(n&&n.formData){var i=n.formData,r=i.find((function(e){return"contract"===e.label})),l=i.find((function(e){return"category"===e.label}));r&&l&&(yield et(e,r.value,l.value))}}else yield nt()}})),function(){return Ae.apply(this,arguments)}),et=(ze=(0,a.default)((function*(e,t,n){if(_(!0),e.length>1)try{var i=tt(t,n),r=De.find((function(e){return(e.fileName&&e.fileName.split(".")[0])===i}));if(r&&r.id){var l={Id:r.id},a=yield _e.getEcontractDocInfo(l);a&&a.templateEcontractId&&(yield it(a))}}catch(e){}})),function(e,t,n){return ze.apply(this,arguments)}),tt=function(e,t){var n=e.split(" ").join("");return"Troubleshoot"===t?`KPSC_${n}`:`BDĐK_${n}`},nt=(Be=(0,a.default)((function*(){var e,t=(e=De).reduce((function(e,t){return+t.order<+e.order?t:e}),e[0]);if(t&&t.id){var n={Id:t.id},i=yield _e.getEcontractDocInfo(n);i&&i.templateEcontractId&&(yield it(i))}})),function(){return Be.apply(this,arguments)}),it=(Le=(0,a.default)((function*(e){D(e);var t={templateid:e.templateEcontractId},n=yield _e.getStructureOfData(t,ke);if(n){var i,r;C(n),n.template&&se(null==n||null==(r=n.template)?void 0:r.docTypeCode);var l=null==n||null==(i=n.lotData)?void 0:i.datas[0];O(l.filter((function(e){return"envSubmittedFrom"!==e.id&&"header_fields"===e.type}))),V({isError:!1,errorViewMessage:""}),l&&l.filter((function(e){return"header_fields"!==e.type})).length>0&&(yield rt(n))}})),function(e){return Le.apply(this,arguments)}),rt=(Ne=(0,a.default)((function*(e){var t,n=[],i=null==e||null==(t=e.lotData)?void 0:t.datas[0],r=i.filter((function(e){return"p"===e.type}));n.push.apply(n,(0,l.default)(r.map((function(e){return{id:e.id,recipient:{reviewer:[],signer:[],stamper:[]}}})))),n.map((function(t){i.filter((function(e){return"r"===e.type&&e.id.includes(t.id)})).forEach((function(r){var l,a;lt(e.template,r.id);var o=ot(e.template,r.id);null==n||null==(l=n.find((function(e){return e.id===t.id})))||null==(a=l.recipient)||a[o].push(at(r.id,i))}))}));var a=yield Je(),o=yield Xe();if(a&&n.forEach((function(e){var t,n;"p_001"===e.id&&(null==e||null==(t=e.recipient)||null==(n=t.signer)||n.forEach((function(e){var t,n,i,r,l,o;"p_001_r_001"===e.id&&(e.name=null==a||null==(t=a.recipient)||null==(n=t.contact)?void 0:n.name,e.phone=null==a||null==(i=a.recipient)||null==(r=i.contact)?void 0:r.phone,e.email=null==a||null==(l=a.recipient)||null==(o=l.contact)?void 0:o.email)})))})),o){var u=o.formData,s=u.find((function(e){return"partyOutletName"===e.code})),d=u.find((function(e){return"partyOutletPhone"===e.code}));n.forEach((function(e){var t,n;"p_002"===e.id&&(null==e||null==(t=e.recipient)||null==(n=t.signer)||n.forEach((function(e){"p_002_r_001"===e.id&&(s&&(e.name=s.value),d&&(e.phone=d.value))})))}))}M(n)})),function(e){return Ne.apply(this,arguments)}),lt=function(e,t){e.parties.forEach((function(e){e.recipients.forEach((function(e){e.id===t&&e.signTypes&&e.signTypes.find((function(e){return"sign_fca.otp"===e}))&&R((function(n){return Object.assign({},n,(0,r.default)({},t,{recipientId:t,email:e.contact.email,telephoneNumber:e.contact.phone,contactId:e.contact.id,personalName:e.contact.name,location:null,stateOrProvince:null,country:null,personalID:null,passportID:null,type:"fca_pre",photoIDCard:null,photoIDCardContentType:null,photoFrontSideIDCard:null,photoFrontSideIDCardContentType:null,photoBackSideIDCard:"",photoBackSideIDCardContentType:null,statusCode:null,resourceType:null,provideAddress:null,provideDate:null,commune:null,address:null,refId:null}))}))}))}))},at=function(e,t){var n=t.filter((function(t){return t.id===e})),i=n.find((function(e){return"r"===e.type})),r=n.find((function(e){return"m"===e.type})),l=n.find((function(e){return"phone"===e.type})),a=n.find((function(e){return"contact_recipient"===e.type}));return{id:e,name:i?i.value:null,phone:l?l.value:null,email:r?r.value:null,contactRecipient:a?a.value:null,notifyType:["email"]}},ot=function(e,t){var n="";return e&&e.parties.forEach((function(e){e.recipients.forEach((function(e){e.id===t&&(n=e.role)}))})),n},ut=(Ue=(0,a.default)((function*(){try{return yield _e.getEWriterDocByUserTaskIdAndTicketId(null==t?void 0:t.userTaskId,ye.id)}catch(e){}})),function(){return Ue.apply(this,arguments)}),st=(We=(0,a.default)((function*(){yield ct(),O(g.headerFieldsColla.filter((function(e){return"envSubmittedFrom"!==e.id})))})),function(){return We.apply(this,arguments)}),dt=function(){O(g.headerFieldsColla.filter((function(e){return"envSubmittedFrom"!==e.id})))},ct=(He=(0,a.default)((function*(){var e=yield _e.getListCollaboDocs(ye.id,null==t?void 0:t.userTaskId);if(e){z(e);var n=yield Promise.all(e.map((function(e){return _e.getDetailCollabora(e.fileId)})));le(n)}})),function(){return He.apply(this,arguments)}),ft=($e=(0,a.default)((function*(){try{var e=yield _e.getRecipientDetail(null==t?void 0:t.userTaskId,ye.id);e&&te(e)}catch(e){}})),function(e,t,n){O(E.map((function(t){return t.id!==e?t:Object.assign({},t,{value:n})}))),t&&(n.trim()?i((function(t){var n=Object.assign({},t);return delete n[e],n})):i((function(t){return Object.assign({},t,(0,r.default)({},e,"CM.empty"))})))}),pt=function(e,t){k((function(n){return Object.assign({},n,(0,r.default)({},e,t))})),"isRemindEnv"!==e||!1!==t?"remindContent"!==e&&i(t?function(t){var n=Object.assign({},t);return delete n[e],n}:function(t){return Object.assign({},t,(0,r.default)({},e,"CM.empty"))}):i((function(e){var t=Object.assign({},e);return delete t.overdueDate,delete t.remindStartDate,delete t.remindFrequency,delete t.remindContent,t}))},yt=(Ge=(0,a.default)((function*(){if(ue&&!fe){var e,n={id:"",refId:ye.id,selector:"after_flow_start_kyta_create_env_no",lookup:ye.id,attrs:{},payload:JSON.stringify({refId:ye.id,docTypeCode:ue,owner:Pe.email?Pe.email:null==t?void 0:t.owner,recipientDetailsId:null==t?void 0:t.recipientDetailsId,userTaskId:null==t?void 0:t.userTaskId,ticketId:ye.id,userTaskVersion:null}),body:null},i=yield _e.generateEnvNo(n);i&&"0"===i.code&&(B(null==i||null==(e=i.response)?void 0:e.envelopeId),pe(!0),O(E.map((function(e){var t,n;return"envNo"===e.id?Object.assign({},e,{value:null==i||null==(t=i.response)||null==(n=t.envNo)?void 0:n.value}):e}))),yield mt())}})),function(){return Ge.apply(this,arguments)}),mt=(Ye=(0,a.default)((function*(){var e={userTaskId:null==t?void 0:t.userTaskId,ticketId:ye.id,version:null},n=yield Fe.getFormVersionByTicketAndUserTaskId(e,ke);if(n){var i=JSON.parse(n);yield ht(i)}})),function(){return Ye.apply(this,arguments)}),ht=(qe=(0,a.default)((function*(e){if(e){e.forEach((function(e){var t;"eContractEnvelopEnvNo"===e.code&&(e.value=null==(t=E.find((function(e){return"envNo"===e.id})))?void 0:t.value)}));var n={formData:e,ticketId:ye.id,userTaskId:null==t?void 0:t.userTaskId,version:Se,eformId:null==Te?void 0:Te.formId};yield Fe.updateFormData(n,ke)}})),function(e){return qe.apply(this,arguments)});return Y?(0,I.jsx)(c.View,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,I.jsx)(p.Spinner,{size:"large"})}):(0,I.jsx)(c.View,{style:{backgroundColor:"#fff"},children:A.isError?(0,I.jsx)(y.default,{style:m.default.textError,children:L(A.errorViewMessage)}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(c.View,{children:(0,I.jsxs)(c.Pressable,{style:[m.default.ctnHeader],onPress:function(){return H(!W)},children:[(0,I.jsx)(p.Icon,{fill:"#6F2CED",width:16,height:16,name:W?"arrow-circle-down":"arrow-circle-right"}),(0,I.jsxs)(y.default,{style:m.default.textTitle,children:[L("RV.econtract.infoContract")," ",(0,I.jsx)(y.default,{style:m.default.redDot,children:"*"})]})]})}),(0,I.jsxs)(c.View,{style:{paddingHorizontal:10},children:[E&&W&&E.map((function(e,t){return(0,I.jsxs)(I.Fragment,{children:["Date"!==e.dataType&&(0,I.jsx)(u.Fragment,{children:(0,I.jsx)(f.default,{disabled:"envNo"===e.id&&fe,label:e.name,value:e.value,onChangeText:function(t){return ft(e.id,e.required,t)},isRequired:e.required,captionText:L(n[e.id]),status:n[e.id]?"danger":"basic",placeholder:"Nhập "+e.name.toLowerCase(),accessoryRightIcon:"envNo"===e.id?(0,I.jsx)(c.Pressable,{onPress:yt,children:(0,I.jsx)(y.default,{style:m.default.capSo,children:L("CM.generateEnvNo")})}):void 0})},t),"Date"===e.dataType&&(0,I.jsx)(u.Fragment,{children:(0,I.jsx)(h.default,{isRequired:e.required,label:e.name,value:e.value,captionText:L(n[e.id]),status:n[e.id]?"danger":"basic",onChangeDate:function(t){return ft(e.id,e.required,t)}})},t)]})})),W&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(p.CheckBox,{style:{paddingVertical:8},checked:P.isRemindEnv,onChange:function(e){return pt("isRemindEnv",e)},children:function(e){return(0,I.jsx)(y.default,Object.assign({},e,{children:L("RV.econtract.remind")}))}}),P.isRemindEnv&&(0,I.jsxs)(c.View,{style:{rowGap:4},children:[(0,I.jsx)(h.default,{isRequired:!0,label:L("RV.econtract.overdueDate"),value:P.overdueDate,captionText:L(n.overdueDate),status:n.overdueDate?"danger":"basic",onChangeDate:function(e){return pt("overdueDate",e)}}),(0,I.jsx)(h.default,{isRequired:!0,label:L("RV.econtract.remindStartDate"),value:P.remindStartDate,captionText:L(n.remindStartDate),status:n.remindStartDate?"danger":"basic",onChangeDate:function(e){return pt("remindStartDate",e)}}),(0,I.jsx)(v.default,{onSelect:ge,valueSelect:ve,placeholder:L("RV.econtract.remindFrequency"),label:L("RV.econtract.notiType"),isRequired:!0,size:"medium",listData:g.listRemind,caption:L(n.remindFrequency),status:n.remindFrequency?"danger":"primary"}),(0,I.jsxs)(c.View,{style:{paddingVertical:6,rowGap:4},children:[(0,I.jsx)(y.default,{style:m.default.textRemind,children:L("CM.remind")}),(0,I.jsx)(x.default,{isRequired:!0,label:L("CM.fillRemind"),value:P.remindContent,onChangeText:function(e){return pt("remindContent",e)},multiline:!0,maxLength:400})]})]})]})]}),(0,I.jsx)(c.View,{children:(0,I.jsxs)(c.Pressable,{style:[m.default.ctnHeader],onPress:function(){return Q(!X)},children:[(0,I.jsx)(p.Icon,{fill:"#6F2CED",width:16,height:16,name:X?"arrow-circle-down":"arrow-circle-right"}),"ewriter"===t.documentResource?(0,I.jsxs)(y.default,{style:m.default.textTitle,children:[L("RV.econtract.listEwriter")," ",(0,I.jsx)(y.default,{style:m.default.redDot,children:"*"})]}):(0,I.jsx)(y.default,{style:m.default.textTitle,children:L("RV.econtract.listEcollabo")})]})}),X&&(0,I.jsx)(I.Fragment,{children:"ewriter"===t.documentResource?(0,I.jsx)(I.Fragment,{children:F&&F.map((function(e,t){return(0,I.jsx)(j.default,{error:n,setError:i,party:e,index:t+1})}))}):(0,I.jsxs)(c.View,{style:{padding:10},children:[(0,I.jsx)(y.default,{children:L("RV.econtract.listEcontract")}),re&&(0,I.jsx)(p.List,{scrollEnabled:!1,data:re,renderItem:function(e){var t=e.item;return(0,I.jsx)(w.default,{typeReview:"eContract",data:t})}})]})})]})})}},87414:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FILE_ITEM_STATUS=void 0;t.FILE_ITEM_STATUS={DRAFT:0,EDITING:1,DONE:2,SIGN:3,REQUEST_EDIT:4,STOP:5}},23599:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),l=n(41995);t.default=i.StyleSheet.create({ctnBody:{backgroundColor:"#fff",padding:(0,l.SizeDP)(10),borderRadius:8},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,l.SizeDP)(16),marginBottom:(0,l.SizeDP)(24)},txtTitle:{fontFamily:r.Font.InterSemiBold600,fontSize:r.FontSize.FontTiny,color:r.Color.colorText,flex:.5},txtValue:{fontFamily:r.Font.InterRegular400,fontSize:r.FontSize.FontTiny,color:"#00204DE5",flex:1},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10,backgroundColor:"#FFFFFF",borderRadius:8},textTitle:{color:"#00204D",fontSize:14,fontFamily:r.Font.InterMedium500},redDot:{color:"#E14337"},textError:{fontSize:16,color:"#000",textAlign:"center",padding:16,fontFamily:r.Font.InterSemiBold600},textRemind:{fontSize:12,fontFamily:r.Font.InterMedium500,color:"#00204DF2"},capSo:{color:"#00f",fontSize:14,fontFamily:r.Font.InterMedium500}})},8404:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),l=n(41995);t.default=i.StyleSheet.create({ctnMain:{padding:(0,l.SizeDP)(16),backgroundColor:"#F8FAFE",flex:1},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,l.SizeDP)(16),marginBottom:(0,l.SizeDP)(24)},txtTitle:{fontFamily:r.Font.InterSemiBold600,fontSize:r.FontSize.FontTiny,color:r.Color.colorText,flex:.5},txtValue:{fontFamily:r.Font.InterRegular400,fontSize:r.FontSize.FontTiny,color:"#00204DE5",flex:1},ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:r.Font.InterMedium500},redDot:{color:"#E14337"},ctnFooter:{flexDirection:"row",paddingHorizontal:16,columnGap:16,marginTop:8},ctnNote:{paddingHorizontal:10,paddingBottom:10,rowGap:4},formName:{fontSize:14,color:"#366ae2",textDecorationLine:"underline",fontFamily:r.Font.InterRegular400},ctnFormName:{paddingHorizontal:10,paddingBottom:10,rowGap:4}})},73264:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=n(14740),o=n(12638),u=n(21527),s=n(87841),d=i(n(24541)),c=n(35708),f=n(20880),p=i(n(32055)),y=n(31004),m=i(n(63204)),h=n(2884),v=n(32207),g=n(47671);t.default=function(e){var t=e.envelopeId,n=(0,h.useTranslation)().t,i=(0,a.useNavigation)(),x=(0,o.useAppSelector)((function(e){return e.common})).accessToken,j=(0,u.useState)(),S=(0,l.default)(j,2),w=S[0],b=S[1],I=(0,u.useState)([]),T=(0,l.default)(I,2),C=T[0],D=T[1],k=(0,u.useState)(""),P=(0,l.default)(k,2),_=P[0],F=P[1],M=(0,u.useState)(!0),E=(0,l.default)(M,2),O=E[0],R=E[1],V=(0,y.useReviewEcontractServices)();(0,u.useEffect)((function(){z()}),[]);var A,z=(A=(0,r.default)((function*(){try{var e={id:"",refId:null,selector:"flow_processing_kyta_erequest_view_contract",lookup:t,attrs:{},payload:JSON.stringify({envelopeId:t}),body:null},n=yield V.getEnvelopeById(e,x);if(n&&"0"===n.code){var i,r,l=null==(i=JSON.parse(null==n?void 0:n.result))?void 0:i.envelope,a=null==(r=JSON.parse(null==n?void 0:n.result))?void 0:r.webviewInfo;if(a&&F(a.iframeUrl),l){var o,u;b(l);var s=null==l||null==(o=l.header)||null==(u=o.fields)?void 0:u.filter((function(e){return"envSubmittedFrom"!==e.id}));D(s)}}}catch(e){}})),function(){return A.apply(this,arguments)}),B=function(e){var t,r,l;return"envName"===e.id?(0,g.jsx)(s.TouchableOpacity,{style:{flex:1},onPress:function(){return i.navigate(f.NavigationName.ViewFileScreenEcontract,{iframeUrl:_})},children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.default,{style:[m.default.txtValue,{color:"#4583FF",fontWeight:"bold",textDecorationLine:"underline",fontSize:f.FontSize.FontSmall}],children:null!=(r=null==e?void 0:e.value)?r:"---"}),(0,g.jsx)(d.default,{style:{fontSize:f.FontSize.FontTinier,fontStyle:"italic"},children:n("RV.econtract.clickDetail")})]})}):"Date"===e.type||"envDate"===e.id?(0,g.jsx)(d.default,{style:m.default.txtValue,children:null!=(l=c.DateUtils.convertDateToDDMMYYYY_H_M(e.value))?l:"---"}):"Boolean"===e.type?(0,g.jsx)(p.default,{onChange:function(){},checked:"true"===e.value}):(0,g.jsx)(d.default,{style:m.default.txtValue,children:null!=(t=e.value)?t:"---"})};return(0,g.jsxs)(s.View,{style:m.default.ctnMain,children:[(0,g.jsx)(s.View,{children:(0,g.jsxs)(s.Pressable,{style:[m.default.ctnHeader],onPress:function(){return R(!O)},children:[(0,g.jsx)(v.Icon,{fill:"#6F2CED",width:16,height:16,name:O?"arrow-circle-down":"arrow-circle-right"}),(0,g.jsxs)(d.default,{style:m.default.textTitle,children:[n("RV.econtract.infoContract")," ",(0,g.jsx)(d.default,{style:m.default.redDot,children:"*"})]})]})}),O&&(0,g.jsxs)(s.View,{style:m.default.ctnBody,children:[C&&C.map((function(e){return(0,g.jsxs)(s.View,{style:m.default.ctnWrapperItem,children:[(0,g.jsxs)(d.default,{style:m.default.txtTitle,children:[e.name,":"]}),(0,g.jsx)(d.default,{style:m.default.txtValue,children:B(e)})]},e.id)})),(0,g.jsxs)(s.View,{style:m.default.ctnWrapperItem,children:[(0,g.jsxs)(d.default,{style:m.default.txtTitle,children:[n("TK.status"),":"]}),(0,g.jsx)(d.default,{style:m.default.txtValue,children:n(`TK.${null==w?void 0:w.status}`)})]}),"draft"===(null==w?void 0:w.status)&&(0,g.jsx)(s.TouchableOpacity,{onPress:function(){return s.Alert.alert(n("NT.notification.inprocess_noti"))},children:(0,g.jsxs)(d.default,{style:{textAlign:"center"},children:[n("RV.econtract.click")," ",(0,g.jsx)(d.default,{style:m.default.texthere,children:n("RV.econtract.here")})," ",n("RV.econtract.footer")]})})]})]})}},63204:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(i,l,o):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(41995)),l=n(20880);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{padding:(0,r.SizeDP)(16),backgroundColor:"#F8FAFE"},ctnBody:{backgroundColor:"#fff",padding:(0,r.SizeDP)(10),borderRadius:8},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,r.SizeDP)(16),marginBottom:(0,r.SizeDP)(24)},txtTitle:{fontFamily:l.Font.InterSemiBold600,fontSize:r.default.FontTiny,color:l.Color.colorText,flex:.5},txtValue:{fontFamily:l.Font.InterRegular400,fontSize:r.default.FontTiny,color:"#00204DE5",flex:1},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10,backgroundColor:"#FFFFFF",borderRadius:8},textTitle:{color:"#00204D",fontSize:14,fontFamily:l.Font.InterMedium500},redDot:{color:"#E14337"},texthere:{color:"#00f",textDecorationLine:"underline"}})},33542:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(93238)),a=n(20880),o=n(21527),u=n(40851),s=n(12638),d=n(88e3),c=n(47671);t.default=function(e){var t,n,i,f=e.versionForm,p=e.userTaskId,y=e.ticketId,m=(0,o.useRef)(null),h=(0,s.useAppSelector)((function(e){return e.common})).accessToken,v=(0,u.useReviewServices)(),g=(t=(0,r.default)((function*(){var e={userTaskId:p,ticketId:y};return yield v.getFormVersionByTicketAndUserTaskId(e,h)})),function(){return t.apply(this,arguments)}),x=(n=(0,r.default)((function*(e){"e-from"===JSON.parse(e.nativeEvent.data).result&&j()})),function(e){return n.apply(this,arguments)}),j=(i=(0,r.default)((function*(){var e=yield g();if(e){var t=null==e?void 0:e.formData,n=`window.postMessage('${JSON.stringify({type:"postFormEdit",isReadonly:!0,data:t}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;setTimeout((function(){var e;null==m||null==(e=m.current)||e.injectJavaScript(n)}),800)}})),function(){return i.apply(this,arguments)});return(0,c.jsx)(l.default,{style:{height:500},startInLoadingState:!0,scrollEnabled:!0,nestedScrollEnabled:!0,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,injectedJavaScript:a.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,ref:m,onMessage:x,source:{uri:(0,d.getConfig)().BASE_URL_FORM+f}})}},23392:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=n(87841),o=n(40851),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),s=i(n(84148)),d=n(32207),c=i(n(24541)),f=n(20880),p=n(35708),y=i(n(83032)),m=i(n(86933)),h=n(2884),v=n(47671);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}t.default=function(e){var t=e.userTaskId,n=e.ticketId,i=(0,h.useTranslation)().t,p=(0,u.useState)(!1),y=(0,l.default)(p,2),m=y[0],g=y[1],S=(0,u.useState)(!1),w=(0,l.default)(S,2),b=w[0],I=w[1],T=(0,u.useState)(!0),C=(0,l.default)(T,2),D=C[0],k=C[1],P=(0,u.useState)(!0),_=(0,l.default)(P,2),F=_[0],M=_[1],E=(0,u.useState)([]),O=(0,l.default)(E,2),R=O[0],V=O[1],A=(0,u.useState)([]),z=(0,l.default)(A,2),B=z[0],L=z[1],N=(0,u.useState)([]),U=(0,l.default)(N,2),W=U[0],H=U[1],$=(0,u.useState)([]),G=(0,l.default)($,2),Y=G[0],q=G[1],K=(0,u.useState)([]),J=(0,l.default)(K,2),X=J[0],Q=J[1],Z=(0,u.useState)(),ee=(0,l.default)(Z,2),te=ee[0],ne=ee[1],ie=(0,u.useState)(""),re=(0,l.default)(ie,2),le=re[0],ae=re[1],oe=(0,u.useState)(""),ue=(0,l.default)(oe,2),se=ue[0],de=ue[1],ce=(0,u.useState)(""),fe=(0,l.default)(ce,2),pe=fe[0],ye=fe[1],me=(0,u.useState)(!1),he=(0,l.default)(me,2),ve=he[0],ge=he[1],xe=(0,u.useState)(!1),je=(0,l.default)(xe,2),Se=je[0],we=je[1],be=(0,o.useReviewServices)();(0,u.useEffect)((function(){Fe()}),[]),(0,u.useEffect)((function(){le&&te&&X.length>0&&De(le)}),[le,te,X]),(0,u.useEffect)((function(){se&&te&&X.length>0&&ke(se)}),[se,te,X]);var Ie,Te,Ce,De=(Ie=(0,r.default)((function*(e){try{g(!0);var t=yield Promise.all(X.filter((function(t){return t.includes(e)})).filter((function(e){return e.includes("backSide")||e.includes("frontSide")||e.includes("passport")})).map((function(e){return be.getDataEkycByType(Object.assign({},te,{order:e.split("_")[2],type:e.split("_")[0]+"_"+e.split("_")[1]}))})));t&&L(t)}catch(e){console.log("Error get data id card by trans id",e)}finally{g(!1)}})),function(e){return Ie.apply(this,arguments)}),ke=(Te=(0,r.default)((function*(e){try{I(!0);var t=yield Promise.all(X.filter((function(t){return null==t?void 0:t.includes(e)})).filter((function(e){return!e.includes("backSide")&&!e.includes("frontSide")&&!e.includes("passport")})).map((function(e){return be.getDataEkycByType(Object.assign({},te,{order:e.split("_")[2],type:e.split("_")[0]+"_"+e.split("_")[1]}))})));t&&V(t)}catch(e){console.log("Error get data ekyc by trans id",e)}finally{I(!1)}})),function(e){return Te.apply(this,arguments)}),Pe=function(){ge(!ve)},_e=function(){we(!Se)},Fe=(Ce=(0,r.default)((function*(){try{var e={userTaskId:t,tickerId:n},r=yield be.getHistoryEkycDetail(e);if(r){ye(r.ekycRepositoryId);var l=yield be.getEkycRepoById(r.ekycRepositoryId);if(l){var o={ekycRepositoryId:r.ekycRepositoryId,id:l.resourceId,recipientId:l.personalId};ne(o);var u=yield be.getAllTypesOfEkyc(o);if(u){Q(u);var s=u.filter((function(e){return e.includes("backSide")||e.includes("frontSide")||e.includes("passport")})).map((function(e){return e.split("_")[1]})).sort((function(e,t){return e-t})),d=Array.from(new Set(s)).sort((function(e,t){return t.localeCompare(e)}));H(d),ae(d[0]);var c=u.filter((function(e){return!e.includes("backSide")&&!e.includes("frontSide")&&!e.includes("passport")})).map((function(e){return e.split("_")[1]})).sort((function(e,t){return e-t})),f=Array.from(new Set(c)).sort((function(e,t){return t.localeCompare(e)}));q(f),de(f[0])}}else a.Alert.alert(i("CM.noti"),i("RV.eid.no-ekyc"))}}catch(e){}})),function(){return Ce.apply(this,arguments)}),Me=function(e){return B.find((function(t){return null==t?void 0:t[0].type.includes(e)}))};return(0,v.jsxs)(a.View,{children:[(0,v.jsx)(a.View,{style:s.default.ctnBody,children:(0,v.jsxs)(a.View,{style:s.default.ctnSubBody,children:[(0,v.jsxs)(a.View,{style:s.default.ctnOpen,children:[(0,v.jsxs)(a.Pressable,{style:s.default.ctnHeader,onPress:function(){return k(!D)},children:[(0,v.jsx)(d.Icon,{fill:"#6F2CED",width:16,height:16,name:D?"arrow-circle-down":"arrow-circle-right"}),(0,v.jsx)(c.default,{style:s.default.textTitle,children:i("RV.eid.imageId")})]}),(0,v.jsx)(a.View,{style:{},children:(0,v.jsx)(d.OverflowMenu,{anchor:function(){return(0,v.jsx)(a.TouchableOpacity,{onPress:Pe,children:(0,v.jsx)(d.Icon,{width:20,height:20,name:"more-vertical"})})},visible:ve,onBackdropPress:Pe,children:W.map((function(e,t){return(0,v.jsx)(d.MenuItem,{title:i("CM.step")+" "+(W.length-t),accessoryRight:e===le?(0,v.jsx)(d.Icon,{fill:f.Color.BgPrimary,name:"checkmark-outline"}):void 0,onPress:function(){ae(e),Pe()}},e)}))})})]}),D&&(0,v.jsx)(v.Fragment,{children:m?(0,v.jsx)(a.View,{style:s.default.ctnLoading,children:(0,v.jsx)(d.Spinner,{})}):(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(a.View,{style:{paddingHorizontal:10,paddingBottom:10},children:[Me("frontSide")&&(0,v.jsx)(x,{data:Me("frontSide"),title:i("RV.eid.frontSide")}),Me("backSide")&&(0,v.jsx)(x,{data:Me("backSide"),title:i("RV.eid.backSide")}),Me("passport")&&(0,v.jsx)(x,{data:Me("passport"),title:i("RV.eid.passport")})]})})})]})}),(0,v.jsx)(a.View,{style:s.default.ctnBody,children:(0,v.jsxs)(a.View,{style:s.default.ctnSubBody,children:[(0,v.jsxs)(a.View,{style:s.default.ctnOpen,children:[(0,v.jsxs)(a.Pressable,{style:s.default.ctnHeader,onPress:function(){return M(!F)},children:[(0,v.jsx)(d.Icon,{fill:"#6F2CED",width:16,height:16,name:F?"arrow-circle-down":"arrow-circle-right"}),(0,v.jsx)(c.default,{style:s.default.textTitle,children:i("RV.eid.ekycInfo")})]}),(0,v.jsx)(d.OverflowMenu,{anchor:function(){return(0,v.jsx)(a.TouchableOpacity,{onPress:_e,children:(0,v.jsx)(d.Icon,{width:20,height:20,name:"more-vertical"})})},visible:Se,onBackdropPress:_e,children:Y.map((function(e,t){return(0,v.jsx)(d.MenuItem,{title:i("CM.step")+" "+(Y.length-t),accessoryRight:e===se?(0,v.jsx)(d.Icon,{fill:f.Color.BgPrimary,name:"checkmark-outline"}):void 0,onPress:function(){de(e),_e()}},e)}))})]}),F&&(0,v.jsx)(v.Fragment,{children:b?(0,v.jsx)(a.View,{style:s.default.ctnLoading,children:(0,v.jsx)(d.Spinner,{})}):(0,v.jsx)(a.View,{style:{paddingHorizontal:10,paddingBottom:10},children:pe&&se&&(0,v.jsx)(j,{uriVideo:R.filter((function(e){return null==e?void 0:e[0].type.includes("videoEkyc")})).sort((function(e,t){return e[0].order-t[0].order})).map((function(e){return e[0].content})),listData:R.filter((function(e){return!(null!=e&&e[0].type.includes("videoEkyc"))})),ekycRepoId:pe,selectEkycTime:se})})})]})})]})};var x=function(e){var t=e.title,n=e.data,i=(0,h.useTranslation)().t;return(0,v.jsxs)(a.View,{style:s.default.ctnIdCard,children:[(0,v.jsx)(c.default,{style:s.default.textTitleImage,children:t}),(0,v.jsxs)(c.default,{children:[i("RV.eid.uploadTime")," ",p.DateUtils.convertDateToDDMMYYYY_H_M(null==n?void 0:n[0].createdDate)]}),(0,v.jsxs)(a.View,{style:s.default.ctnViewImage,children:[(0,v.jsx)(a.View,{style:{borderRadius:6,overflow:"hidden"},children:(0,v.jsx)(a.Image,{style:{minHeight:100},resizeMode:"contain",source:{uri:f.String.PREFIX_IMG_BASE64+(null==n?void 0:n[0].content)}})}),(0,v.jsx)(c.default,{style:s.default.textImage,children:null==n?void 0:n[0].name})]})]})},j=function(e){var t=e.listData,n=e.uriVideo,i=(e.ekycRepoId,e.selectEkycTime,(0,h.useTranslation)().t),o=(0,u.useState)(null),p=(0,l.default)(o,2),g=p[0],x=p[1],j=(0,u.useState)(!1),S=(0,l.default)(j,2),w=S[0],b=S[1];return(0,u.useEffect)((function(){function e(){return(e=(0,r.default)((function*(){if(n.length>0)try{var e=`temp_video_${Date.now()}.mp4`,t=`${m.default.DocumentDirectoryPath}/${e}`;for(var i of n)yield m.default.appendFile(t,i,"base64");x(`file://${t}`)}catch(e){console.error("Error creating video file:",e)}}))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){try{if(g){var e=g.replace("file://","");m.default.unlink(e).then((function(){return console.log("Temporary file deleted")})).catch((function(e){return console.error("Error deleting temporary file:",e)}))}}catch(e){}}}),[n]),(0,v.jsxs)(a.View,{children:[(0,v.jsx)(c.default,{style:[s.default.textTitleImage,{marginBottom:4}],children:i("RV.eid.videoEkyc")}),(0,v.jsx)(a.View,{style:s.default.ctnVideo,children:g&&(0,v.jsx)(v.Fragment,{children:w?(0,v.jsx)(d.Icon,{width:50,height:50,name:"alert-triangle-outline"}):(0,v.jsx)(y.default,{style:s.default.video,controls:!0,resizeMode:"contain",onError:function(e){console.log(e),b(!0)},source:{uri:g}})})}),(0,v.jsx)(c.default,{style:[s.default.textTitleImage,{marginBottom:4}],children:i("RV.eid.imageEkyc")}),(0,v.jsx)(a.FlatList,{horizontal:!0,contentContainerStyle:{gap:10},data:t,renderItem:function(e){var t=e.item;return(0,v.jsx)(a.Image,{width:85,height:85,source:{uri:f.String.PREFIX_IMG_BASE64+(null==t?void 0:t[0].content)}})}})]})}},84148:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:r.Font.InterMedium500},redDot:{color:"#E14337"},ctnViewImage:{borderWidth:.54,borderColor:"#00358059",borderStyle:"dashed",padding:10,borderRadius:6,rowGap:8},textImage:{fontSize:8,color:"#00204D",fontFamily:r.Font.InterSemiBold600,textAlign:"center"},textKb:{fontSize:7,color:"#00204DB2",fontFamily:r.Font.InterRegular400,textAlign:"center"},textTitleImage:{fontSize:14,color:"#00204D",fontFamily:r.Font.InterSemiBold600},ctnOpen:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnLoading:{alignItems:"center",justifyContent:"center",paddingBottom:10},ctnIdCard:{rowGap:6,marginBottom:6},ctnVideo:{marginBottom:10,width:"100%",height:200},video:{height:200,flex:1}})},94196:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),l=i(n(24541)),a=i(n(60680)),o=n(2884),u=n(20880),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),d=n(47671);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}t.default=function(e){var t=e.dataInfo,n=(0,o.useTranslation)().t,i=function(e){var t;return(0,d.jsxs)(r.View,{style:{flex:1,flexDirection:"row"},children:[(0,d.jsx)(r.View,{style:a.default.ctnStatus,children:(0,d.jsx)(l.default,{style:[a.default.txtValue,{color:"#EF5DA8"}],children:n(`TK.${null==e||null==(t=e.value)?void 0:t.status}`)})}),(0,d.jsx)(r.View,{style:{flex:1}})]})};return(0,d.jsx)(r.View,{style:{flex:1},children:t&&t.map((function(e){var t,o,c,f,p,y;return(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)(r.View,{style:[a.default.ctnWrapperItem,"status"===(null==e?void 0:e.type)&&{justifyContent:"flex-start",columnGap:0}],children:[(0,d.jsxs)(l.default,{style:a.default.txtTitle,children:[n(`${e.key}`),":"]}),"normal"===e.type&&(0,d.jsx)(r.View,{style:a.default.ctnNormal,children:e.value.onlyIcon?e.value.onlyIcon:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.default,{style:a.default.txtValue,children:(null==e||null==(t=e.value)?void 0:t.name)||"---"}),e.value.withIcon&&e.value.withIcon]})}),"avatar"===e.type&&(0,d.jsxs)(r.View,{style:a.default.ctnView,children:[(0,d.jsx)(r.Image,{width:24,height:24,borderRadius:12,source:{uri:null!=e&&null!=(o=e.value)&&o.avatarUrl?null==e||null==(c=e.value)?void 0:c.avatarUrl:"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,d.jsxs)(r.View,{style:{flex:1},children:[(0,d.jsx)(l.default,{style:a.default.txtValue,children:(null==e||null==(f=e.value)?void 0:f.name)||"---"}),(0,d.jsx)(l.default,{style:a.default.txtValue,children:(null==e||null==(p=e.value)?void 0:p.email)||"---"})]})]}),"status"===e.type&&(0,d.jsx)(d.Fragment,{children:i(e)}),"form"===e.type&&(0,d.jsx)(r.TouchableOpacity,{style:{flex:1},onPress:e.value.funcViewFrom,children:e.value?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.default,{style:[a.default.txtValue,a.default.formName],children:(null==(y=e.value)?void 0:y.name)||"---"}),(0,d.jsx)(l.default,{style:{fontSize:u.FontSize.FontTinier,fontStyle:"italic"},children:n("RV.fromViewDetail")})]}):(0,d.jsx)(l.default,{style:a.default.txtValue,children:"---"})})]})},e.key)}))})}},60680:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:16,marginTop:16},txtTitle:{fontFamily:r.Font.InterSemiBold600,fontSize:r.FontSize.FontTiny,color:r.Color.colorText,flex:.7,lineHeight:20},txtValue:{fontFamily:r.Font.InterRegular400,fontSize:r.FontSize.FontTiny,color:"#00204DE5",flex:1,lineHeight:16},ctnView:{flexDirection:"row",columnGap:6,alignItems:"center",justifyContent:"flex-start",flex:1},ctnStatus:{paddingHorizontal:8,paddingVertical:4,borderRadius:4,backgroundColor:"#EF5DA81A"},formName:{color:"#4583FF",fontWeight:"bold",textDecorationLine:"underline",fontSize:r.FontSize.FontSmall},ctnNormal:{flexDirection:"row",alignItems:"center",flex:1}})},46542:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=n(87841),u=i(n(24541)),s=n(2884),d=i(n(71606)),c=i(n(43184)),f=n(32207),p=n(46317),y=n(12638),m=n(60596),h=n(11671),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),g=n(20880),x=n(35708),j=i(n(94196)),S=n(47671);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}t.default=function(e){var t=e.onClose,n=(0,s.useTranslation)().t,i=(0,v.useState)([]),w=(0,a.default)(i,2),b=(w[0],w[1]),I=(0,v.useState)(!1),T=(0,a.default)(I,2),C=T[0],D=T[1],k=(0,v.useState)({}),P=(0,a.default)(k,2),_=P[0],F=P[1],M=(0,v.useState)([]),E=(0,a.default)(M,2),O=(E[0],E[1]),R=(0,v.useState)([]),V=(0,a.default)(R,2),A=V[0],z=V[1],B=(0,v.useState)(!1),L=(0,a.default)(B,2),N=L[0],U=L[1],W=(0,v.useState)({}),H=(0,a.default)(W,2),$=H[0],G=H[1],Y=(0,y.useAppSelector)((function(e){return e.ticket})),q=Y.dataListRecipientsSLA,K=Y.dataTicketRedux,J=Y.recipientDetaiImpl,X=(0,y.useAppSelector)((function(e){return e.common})).accessToken,Q=(0,y.useAppSelector)((function(e){return e.account})).dataAccount,Z=(0,h.useTicketServices)(),ee=function(){return U(!N)};(0,v.useEffect)((function(){re()}),[]);var te,ne,ie,re=(te=(0,l.default)((function*(){var e=null==q?void 0:q.filter((function(e,t,n){return t===n.findIndex((function(t){return t.recipientId===e.recipientId}))})),t=null==e?void 0:e.map((function(e){return{notionName:e.notionName?e.notionName:"User task",recipientId:e.recipientId,status:e.status,startDate:e.startDate,finishDate:e.finishDate,role:e.role,delayTime:e.delayTime,estimateDate:e.estimateDate,totalTime:e.totalTime,statusSla:se(e),totalTimeExpect:e.totalTimeExpect}})),n=yield oe();if(n){var i=J.map((function(e){var t=n.find((function(t){return t.email===e.recipient.contact.email}));return t?Object.assign({},e,{avatar:t.imageUrl,firstName:t.firstName,lastName:t.lastName,personalName:t.personalName}):e}));t=t.map((function(e){var t=i.filter((function(t){return t.userTaskId===e.recipientId&&t.recipientStatus}))[0],n=i.filter((function(t){return t.userTaskId===e.recipientId&&"active"===t.status}));return Object.assign({},e,{executor:t,executorList:n})})),z(t)}var r=yield ue();r&&t.forEach((function(e){G((function(t){var n=Object.assign({},t);return n[null==e?void 0:e.recipientId]=le(null==e?void 0:e.executorList,e.recipientId,r),n}))}))})),function(){return te.apply(this,arguments)}),le=function(e,t,n){var i=J.some((function(e){return e.recipient.contact.email===Q.email&&e.userTaskId===t})),r=e.some((function(e){return e.recipient.contact.email===Q.email}));return!(n.some((function(e){return e.personal.email===Q.email&&(e.userTaskId===t||!e.userTaskId)}))||i||r)},ae=function(e){return"eID"===e?n("RV.notionName.eID"):"eContract"===e?n("RV.notionName.eContract"):e||n("RV.notionName.userTask")},oe=(ne=(0,l.default)((function*(){try{var e=J.map((function(e){return e.recipient.contact.email}));if(e){var t=yield Z.getMultiLoginAccount(Array.from(new Set(e)),X);if(t)return b(t),t}}catch(e){}})),function(){return ne.apply(this,arguments)}),ue=(ie=(0,l.default)((function*(){var e=J.map((function(e){return e.userTaskId})),t={resourceId:K.id,email:Q.email||"",userTaskIds:(0,r.default)(new Set(e)),orgIn:Q.orgIn||""},n=yield Z.getAclTicketByListUserTask(t);if(n)return O(n),n})),function(){return ie.apply(this,arguments)}),se=function(e){var t,n;return K.ticketStatus===m.Status.voided&&e.status==m.Status.processing?"stopped":K.ticketStatus===m.Status.rejected?"rejected":(e.finishDate&&e.estimateDate&&(t=new Date(e.finishDate),n=new Date(e.estimateDate)),"accepted"==e.status&&e.delayTime?"done_late":"accepted"==e.status&&e.estimateDate?"done_onTime":"accepted"==e.status&&e.finishDate&&e.estimateDate&&t<n?"done_before":e.status)},de=function(){var e,t,n,i,r,l;if(null!=_&&_.executor)return{key:"RV.userAction",type:"avatar",value:{name:(null==(e=_.executor)?void 0:e.personalName)||"---",email:(null==(t=_.executor)||null==(n=t.recipient)||null==(i=n.contact)?void 0:i.email)||"---",avatarUrl:null==(r=_.executor)?void 0:r.avatar}};if(_.executorList){var a;if((null==_||null==(a=_.executorList)?void 0:a.length)>1)return{key:"RV.userAction",type:"normal",value:{onlyIcon:(l=null==_?void 0:_.executorList,(0,S.jsx)(o.Pressable,{style:d.default.ctnListUser,children:null==l?void 0:l.map((function(e,t){return(0,S.jsx)(S.Fragment,{children:t<=1?(0,S.jsx)(o.Image,{style:{position:"absolute",left:20*t},width:28,height:28,borderRadius:14,source:{uri:(null==e?void 0:e.avatar)||g.String.DEFAULT_IMAGE}},t):(0,S.jsx)(o.View,{style:d.default.ctnAdd,children:(0,S.jsx)(u.default,{children:"+"+((null==l?void 0:l.length)-2)})},t)})}))}))}};var s,c,f=null==_?void 0:_.executorList[0];return{key:"RV.userAction",type:"avatar",value:{name:(null==f?void 0:f.personalName)||"---",email:(null==f||null==(s=f.recipient)||null==(c=s.contact)?void 0:c.email)||"---",avatarUrl:null==f?void 0:f.avatar}}}},ce=(0,v.useMemo)((function(){return[de(),{key:"HM.statusTicket",type:"status",value:{status:null==_?void 0:_.statusSla}},{key:"RV.startDate",type:"normal",value:{name:x.DateUtils.convertDateToDDMMYYYY_H_M(null==_?void 0:_.startDate)}},{key:"RV.totalTimeExpect",type:"normal",value:{name:null==_?void 0:_.totalTimeExpect}},{key:"RV.estimateDate",type:"normal",value:{name:x.DateUtils.convertDateToDDMMYYYY_H_M(null==_?void 0:_.estimateDate)}},{key:"RV.finishDate",type:"normal",value:{name:x.DateUtils.convertDateToDDMMYYYY_H_M(null==_?void 0:_.finishDate)}}]}),[_]),fe=function(e){return e===m.Status.rejected?{fill:"#e14437",icon:"close-circle",bgColor:"#fdeded",borderColor:"#e14437"}:e===m.Status.processing?{fill:"#FC6B03",icon:"alert-triangle",bgColor:"#FFF3EB",borderColor:"#e14437"}:{fill:"#39AC6D",icon:"checkmark-circle-2",bgColor:"#E8F7EF",borderColor:"#fff"}};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(c.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:n("RV.listStep"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:t}),(0,S.jsx)(o.FlatList,{style:{backgroundColor:"#F8FAFE"},data:A,renderItem:function(e){var t,i,r=e.item,l=e.index;return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(o.View,{style:d.default.ctnItem,children:[(0,S.jsxs)(o.View,{style:d.default.ctnIcon,children:[(0,S.jsx)(f.Icon,{fill:fe(r.status).fill,name:fe(r.status).icon,width:24,height:24}),(0,S.jsx)(o.View,{style:[d.default.tabHoz,q.length-1===l&&{backgroundColor:"#F8FAFE"}]})]}),(0,S.jsxs)(o.View,{style:{flex:1},children:[(0,S.jsxs)(o.View,{style:[d.default.ctnBody,{borderColor:fe(r.status).borderColor,opacity:$[r.recipientId]?.5:1}],children:[(0,S.jsx)(u.default,{style:d.default.textNotion,children:ae(r.notionName)}),$[r.recipientId]&&(0,S.jsx)(u.default,{style:d.default.textNote,children:n("RV.author")}),(0,S.jsxs)(o.View,{style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,S.jsxs)(o.View,{style:d.default.ctnEmail,children:[r.executor&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(f.Avatar,{size:"small",source:{uri:(null==(t=r.executor)?void 0:t.avatar)||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,S.jsx)(u.default,{style:d.default.textEmail,children:null==(i=r.executor)?void 0:i.recipient.contact.email})]}),!r.executor&&r.executorList&&(0,S.jsxs)(o.Pressable,{onPress:function(){ee(),F(r)},style:{position:"relative",flexDirection:"row",alignItems:"center"},children:[r.executorList.map((function(e,t){return(0,S.jsx)(S.Fragment,{children:t<=1&&(0,S.jsx)(f.Avatar,{style:{position:"absolute",left:20*t},size:"small",source:{uri:(null==e?void 0:e.avatar)||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}},t)})})),r.executorList.length>2&&(0,S.jsx)(o.View,{style:d.default.ctnMoreAvatar,children:(0,S.jsx)(u.default,{children:"+"+(r.executorList.length-2)})})]})]}),(0,S.jsx)(o.TouchableOpacity,{onPress:function(){$[r.recipientId]||(F(r),D(!0))},style:[d.default.ctnIconClick,{backgroundColor:fe(r.status).bgColor}],children:r.status!==m.Status.processing?(0,S.jsx)(p.IconPersonTime,{width:15,height:15}):(0,S.jsx)(p.IconPersonTimeWait,{width:15,height:15})})]})]}),r.status===m.Status.processing&&(0,S.jsx)(u.default,{style:d.default.textNote,children:n("RV.descriptionProcessing")})]})]})})}}),(0,S.jsx)(f.Modal,{animationType:"fade",backdropStyle:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onBackdropPress:function(){return D(!1)},visible:C,style:{width:"90%"},children:(0,S.jsx)(f.Card,{style:{},header:(0,S.jsx)(u.default,{style:d.default.txtTitle,children:ae(null==_?void 0:_.notionName)}),disabled:!0,children:(0,S.jsx)(j.default,{dataInfo:ce})})}),(0,S.jsx)(f.Modal,{animationType:"fade",backdropStyle:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onBackdropPress:ee,visible:N,style:{width:"90%"},children:(0,S.jsx)(f.Card,{style:{},header:(0,S.jsx)(u.default,{style:d.default.txtTitle,children:"List user"}),disabled:!0,children:(0,S.jsx)(o.FlatList,{data:_.executorList,renderItem:function(e){var t,n,i=e.item;return(0,S.jsxs)(o.View,{style:d.default.ctnView,children:[(0,S.jsx)(o.Image,{width:24,height:24,borderRadius:12,source:{uri:i.avatar||g.String.DEFAULT_IMAGE}}),(0,S.jsx)(o.View,{style:{flex:1},children:(0,S.jsx)(u.default,{style:d.default.txtValue,children:(null==i||null==(t=i.recipient)||null==(n=t.contact)?void 0:n.email)||"---"})})]})}})})})]})}},71606:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({tabHoz:{width:2,height:40,backgroundColor:"rgba(0, 53, 128, 0.15)"},ctnItem:{paddingHorizontal:16,paddingVertical:8,flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:16},ctnAction:{width:24,height:24,backgroundColor:"blue",borderRadius:12,justifyContent:"center",alignItems:"center"},ctnIcon:{alignItems:"center",justifyContent:"center",rowGap:8},ctnBody:{backgroundColor:"#fff",paddingHorizontal:12,paddingVertical:10,flex:1,borderRadius:8,rowGap:10,borderWidth:1},textNotion:{fontSize:13,fontFamily:r.Font.InterSemiBold600,color:"#00204D"},textNote:{fontSize:11,fontFamily:r.Font.InterRegular400,color:"#E14337",marginTop:3,fontStyle:"italic"},ctnIconClick:{width:24,height:24,borderRadius:12,alignItems:"center",justifyContent:"center"},textEmail:{fontSize:12,fontFamily:r.Font.InterRegular400,color:"#00204DF2"},ctnEmail:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:4},ctnListUser:{flexDirection:"row",position:"relative"},ctnAdd:{position:"absolute",left:40,width:28,height:28,borderRadius:14,backgroundColor:"#F4F4F4",justifyContent:"center",alignItems:"center"},txtValue:{fontFamily:r.Font.InterRegular400,fontSize:r.FontSize.FontTiny,color:"#00204DE5",flex:1,lineHeight:16},ctnView:{flexDirection:"row",columnGap:6,alignItems:"center",justifyContent:"flex-start",flex:1,marginBottom:16},ctnMoreAvatar:{position:"absolute",left:40,width:35,height:35,borderRadius:25,alignItems:"center",justifyContent:"center",backgroundColor:"#f3f5f8"},txtTitle:{fontSize:16,color:"#00204D",fontFamily:r.Font.InterSemiBold600}})},72060:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.listNoti=void 0;t.listNoti=[{label:"QR Code",value:"qr"},{label:"Email",value:"email"},{label:"SMS",value:"sms"}]},166:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43693)),l=i(n(29293)),a=i(n(85715)),o=n(7005),u=i(n(43184)),s=n(32207),d=n(46317),c=n(87841),f=i(n(24541)),p=i(n(12398)),y=i(n(94516)),m=n(2884),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=L(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),v=i(n(54813)),g=n(26878),x=i(n(65963)),j=n(72060),S=i(n(94196)),w=i(n(27747)),b=n(2543),I=i(n(76644)),T=i(n(46542)),C=n(12638),D=n(35708),k=n(40851),P=n(14740),_=i(n(77389)),F=i(n(194)),M=n(60596),E=n(97427),O=i(n(33542)),R=i(n(23392)),V=i(n(27163)),A=n(88e3),z=n(11671),B=n(47671);function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(L=function(e){return e?n:t})(e)}var N=function(e){return e.name="name",e.phone="phone",e.email="email",e.notiType="notiType",e}(N||{});t.default=function(){var e,t,n=(0,m.useTranslation)().t,i=(0,P.useRoute)(),L=(0,C.useAppDispatch)(),U=null!=(e=null==i||null==(t=i.params)?void 0:t.dataUserTask)?e:{},W=(0,P.useNavigation)(),H=(0,h.useState)(!1),$=(0,a.default)(H,2),G=$[0],Y=$[1],q=(0,h.useState)(!0),K=(0,a.default)(q,2),J=K[0],X=K[1],Q=(0,h.useState)([new s.IndexPath(0)]),Z=(0,a.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,h.useState)({}),ie=(0,a.default)(ne,2),re=ie[0],le=ie[1],ae=(0,h.useState)({}),oe=(0,a.default)(ae,2),ue=oe[0],se=oe[1],de=(0,h.useState)(!1),ce=(0,a.default)(de,2),fe=ce[0],pe=ce[1],ye=(0,h.useState)(!1),me=(0,a.default)(ye,2),he=me[0],ve=me[1],ge=(0,h.useState)(""),xe=(0,a.default)(ge,2),je=xe[0],Se=xe[1],we=(0,h.useState)(""),be=(0,a.default)(we,2),Ie=be[0],Te=be[1],Ce=(0,h.useState)(!1),De=(0,a.default)(Ce,2),ke=De[0],Pe=De[1],_e=(0,h.useState)(!0),Fe=(0,a.default)(_e,2),Me=Fe[0],Ee=Fe[1],Oe=(0,h.useState)(""),Re=(0,a.default)(Oe,2),Ve=Re[0],Ae=Re[1],ze=(0,h.useState)(null),Be=(0,a.default)(ze,2),Le=Be[0],Ne=Be[1],Ue=(0,C.useAppSelector)((function(e){return e.ticket})),We=Ue.dataTicketRedux,He=Ue.recipientDetaiImpl,$e=Ue.formData,Ge=Ue.modeler,Ye=(0,h.useState)(null==He?void 0:He.find((function(e){return e.userTaskId===(null==U?void 0:U._userTaskId)}))),qe=(0,a.default)(Ye,1)[0],Ke=((0,C.useAppSelector)((function(e){return e.account})).dataAccount,(0,C.useAppSelector)((function(e){return e.common})).accessToken),Je=(0,k.useReviewServices)(),Xe=(0,z.useTicketServices)(),Qe=(0,h.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:(null==Le?void 0:Le.personalName)||"---",email:We.createdBy||"---",avatarUrl:null==Le?void 0:Le.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==We?void 0:We.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==We?void 0:We.jsonXml)&&JSON.parse(null==We?void 0:We.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:D.DateUtils.convertDateToDDMMYYYY_H_M(null==We?void 0:We.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==$e?void 0:$e.formName,funcViewFrom:function(){return ve(!0)}}},{key:"RV.status",type:"status",value:{status:We.ticketStatus===M.Status.voided?M.Status.voided:(null==qe?void 0:qe.recipientStatus)||M.Status.processing}}]}),[We,$e,Ge,Le]);(0,h.useEffect)((function(){tt()}),[]),(0,h.useEffect)((function(){var e=re;0===ee.length?e[`${N.notiType}`]="CM.empty":delete e[`${N.notiType}`],le((function(t){return Object.assign({},t,e)}))}),[ee]);var Ze,et,tt=(Ze=(0,l.default)((function*(){try{var e=yield Xe.getMultiLoginAccount([We.createdBy]);e&&e.length>0&&Ne(e[0]),console.log("user",e)}catch(e){}})),function(){return Ze.apply(this,arguments)}),nt=function(e,t){null!=t&&t.trim()?e!==N.email||D.RegexUtils.FORMAT_EMAIL.test(t)?e!==N.phone||D.RegexUtils.REGEX_PHONE_NUMBER_9.test(t)?le((function(t){var n=Object.assign({},t);return delete n[e],n})):le((function(t){return Object.assign({},t,(0,r.default)({},e,"CM.validPhone"))})):le((function(t){return Object.assign({},t,(0,r.default)({},e,"CM.validEmail"))})):le((function(t){return Object.assign({},t,(0,r.default)({},e,"CM.empty"))})),se((function(n){var i,l,a,o=Object.assign({},n,(0,r.default)({},e,t));return(0,b.isEmpty)(re)&&null!=(i=o[N.email])&&i.trim()&&null!=(l=o[N.phone])&&l.trim()&&null!=(a=o[N.name])&&a.trim()?pe(!0):pe(!1),o}))},it=(et=(0,l.default)((function*(e){try{if("reject"===e){if(!je)return Ee(!0),void Te("CM.empty");Te("");var t=Object.assign({},null==qe?void 0:qe.recipient,{reason:je});(yield Je.actionTicket(null==qe?void 0:qe.id,null==qe?void 0:qe.ticketId,null==qe?void 0:qe.userTaskId,t,Ke,"reject"))?(_.default.show({type:"success",text1:n("CM.noti"),text2:n("CM.rejectSucesss")}),L(E.ticketActions.setDataTicket(Object.assign({},We,{ticketStatus:M.Status.rejected}))),W.goBack()):_.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.rejectFailed")})}else{var i={name:null==Ge?void 0:Ge.mailTemplate},r=ee.map((function(e){return j.listNoti[e.row].value})).join(","),l={ticketId:We.id,userTaskId:null==U?void 0:U._userTaskId,recipientDetailsId:null==U?void 0:U._recipientDetailsId,fullName:ue[N.name],phoneNumber:ue[N.phone],email:ue[N.email],notifyType:r},a=yield Je.createPersonalEkyc({personalName:ue[N.name],telephoneNumber:ue[N.phone],email:ue[N.email],messageType:r,resourceType:"internal",recipientDetailId:null==U?void 0:U._recipientDetailsId,identifierType:"2",ticketId:We.id,userTaskId:null==U?void 0:U._userTaskId,usesContent:{},syncToPartner:"0",versionId:null==Ge?void 0:Ge.formVersion,formId:null==$e?void 0:$e.formId},i);a&&((yield Je.createInformationOCR(l))?(_.default.show({type:"success",text1:n("CM.noti"),text2:n("RV.eid.submitSuccess")}),Ae(a.urlSuffix)):_.default.show({type:"error",text1:n("CM.noti"),text2:n("RV.eid.submitError")}))}}catch(t){"reject"===e?_.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.rejectFailed")}):_.default.show({type:"error",text1:n("CM.noti"),text2:n("RV.eid.submitError")})}})),function(e){return et.apply(this,arguments)}),rt=function(){return null!==(null==qe?void 0:qe.recipientStatus)&&(null==qe?void 0:qe.recipientStatus)!==M.Status.processing},lt=function(){return(null==qe?void 0:qe.recipientStatus)===M.Status.completed||(null==qe?void 0:qe.recipientStatus)===M.Status.accepted};return(0,B.jsxs)(o.SafeAreaView,{style:{flex:1,backgroundColor:"#fff"},edges:["bottom"],children:[(0,B.jsx)(u.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:n("RV.eid.idPerson"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,B.jsx)(s.TopNavigationAction,{onPress:function(){return Pe(!0)},icon:(0,B.jsx)(d.IconWorkflow,{width:20,height:20})})}}),(0,B.jsxs)(g.KeyboardAwareScrollView,{children:[(0,B.jsx)(c.View,{style:p.default.ctnBody,children:(0,B.jsxs)(c.View,{style:p.default.ctnSubBody,children:[(0,B.jsxs)(c.Pressable,{style:p.default.ctnHeader,onPress:function(){return Y(!G)},children:[(0,B.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:G?"arrow-circle-down":"arrow-circle-right"}),(0,B.jsx)(f.default,{style:p.default.textTitle,children:n("CM.infoCommon")})]}),G&&(0,B.jsx)(c.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,B.jsx)(S.default,{dataInfo:Qe})})]})}),(0,B.jsx)(c.View,{style:p.default.ctnBody,children:(0,B.jsxs)(c.View,{style:[p.default.ctnSubBody,rt()&&{marginBottom:16}],children:[(0,B.jsxs)(c.Pressable,{style:[p.default.ctnHeader],onPress:function(){return X(!J)},children:[(0,B.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:J?"arrow-circle-down":"arrow-circle-right"}),(0,B.jsxs)(f.default,{style:p.default.textTitle,children:[n("RV.eid.infoPerson")," ",(0,B.jsx)(f.default,{style:p.default.redDot,children:"*"})]})]}),J&&(0,B.jsxs)(c.View,{style:p.default.ctnInput,children:[!rt()&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(v.default,{isRequired:!0,label:n("RV.eid.name"),placeholder:n("RV.eid.fillName"),value:ue[`${N.name}`],onChangeText:function(e){return nt(N.name,e)},captionText:n(re[`${N.name}`]),status:re[`${N.name}`]?"danger":"basic",type:N.name}),(0,B.jsx)(v.default,{isRequired:!0,label:n("RV.eid.phone"),placeholder:n("RV.eid.fillPhone"),value:ue[`${N.phone}`],onChangeText:function(e){return nt(N.phone,e)},captionText:n(re[N.phone]),status:re[`${N.phone}`]?"danger":"basic",type:N.phone,keyBoardType:"numeric"}),(0,B.jsx)(v.default,{isRequired:!0,label:"Email",placeholder:n("RV.eid.fillEmail"),value:ue[`${N.email}`],onChangeText:function(e){return nt(N.email,e)},captionText:n(re[`${N.email}`]),status:re[`${N.email}`]?"danger":"basic",type:N.email}),(0,B.jsx)(x.default,{onSelect:te,valueSelect:ee,placeholder:n("RV.eid.fill-notify-type"),label:n("RV.eid.notify-type"),isRequired:!0,size:"medium",listData:j.listNoti,multiple:!0,caption:n(re[`${N.notiType}`]),status:re[`${N.notiType}`]?"danger":"primary"}),Ve&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(f.default,{style:p.default.title,children:n("RV.eid.qr")}),(0,B.jsx)(c.View,{style:p.default.ctnQr,children:(0,B.jsx)(F.default,{onError:function(e){return console.log(e)},value:(0,A.getConfig)().BASE_URL_EKYC+Ve})})]})]}),lt()&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(s.Divider,{style:{height:3}}),(0,B.jsx)(O.default,{ticketId:We.id,userTaskId:null==qe?void 0:qe.userTaskId,versionForm:null==qe?void 0:qe.versionFormId})]})]})]})}),lt()&&(0,B.jsx)(R.default,{ticketId:We.id,userTaskId:null==qe?void 0:qe.userTaskId}),!rt()&&(0,B.jsx)(c.View,{style:p.default.ctnBody,children:(0,B.jsxs)(c.View,{style:[p.default.ctnSubBody,{marginBottom:16}],children:[(0,B.jsxs)(c.Pressable,{style:p.default.ctnHeader,onPress:function(){return Ee(!Me)},children:[(0,B.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:Me?"arrow-circle-down":"arrow-circle-right"}),(0,B.jsx)(f.default,{style:p.default.textTitle,children:n("CM.note")})]}),Me&&(0,B.jsx)(c.View,{style:{paddingHorizontal:10,paddingBottom:10,rowGap:4},children:(0,B.jsx)(w.default,{isRequired:!0,label:n("CM.fillNote"),value:je,onChangeText:function(e){Se(e),Te("")},multiline:!0,maxLength:400,errorMessage:n(Ie)})})]})})]}),(0,B.jsx)(c.View,{style:p.default.ctnFooter,children:!rt()&&We.ticketStatus!==M.Status.voided&&We.ticketStatus!==M.Status.rejected&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(c.TouchableOpacity,{onPress:function(){return it("reject")},children:(0,B.jsx)(d.IconRejectReview,{width:36,height:36})}),(0,B.jsx)(y.default,{disabled:!(0,b.isEmpty)(re)||!fe,style:{flex:1},label:n("CM.confirm"),onPress:function(){return it("finish")}})]})}),(0,B.jsx)(I.default,{isVisible:ke,children:(0,B.jsx)(T.default,{onClose:function(){return Pe(!1)}})}),(0,B.jsx)(I.default,{isVisible:he,children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(c.View,{style:{flex:1},children:(0,B.jsx)(V.default,{})}),(0,B.jsx)(y.default,{style:{backgroundColor:"#f2ecfd",marginHorizontal:16},styleLabel:{color:"#6d1fad"},label:n("CM.back"),onPress:function(){return ve(!1)}})]})})]})}},12398:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:r.Font.InterMedium500},redDot:{color:"#E14337"},ctnFooter:{flexDirection:"row",paddingHorizontal:16,columnGap:16,marginTop:8},ctnInput:{gap:10,padding:10},title:{fontSize:12,fontFamily:r.Font.InterMedium500,color:"#00204DF2"},ctnQr:{alignItems:"center",justifyContent:"center"}})},92552:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=n(7005),u=i(n(43184)),s=n(87841),d=i(n(94516)),c=n(46317),f=i(n(89052)),p=n(21527),y=n(41995),m=n(14740),h=n(12638),v=n(19867),g=n(2884),x=n(40851),j=n(32207),S=i(n(76644)),w=i(n(46542)),b=n(35708),I=n(60596),T=n(26878),C=i(n(24541)),D=i(n(94196)),k=i(n(27163)),P=i(n(27747)),_=n(31004),F=i(n(77389)),M=n(97427),E=i(n(93183)),O=i(n(85077)),R=n(11671),V=i(n(55529)),A=i(n(39284)),z=n(47671);t.default=function(){var e,t,n=(0,m.useRoute)(),i=(0,g.useTranslation)().t,B=(0,h.useAppDispatch)(),L=(0,m.useNavigation)(),N=null!=(e=null==n||null==(t=n.params)?void 0:t.dataUserTask)?e:{},U=(0,p.useState)(),W=(0,a.default)(U,2),H=W[0],$=W[1],G=(0,p.useState)(!1),Y=(0,a.default)(G,2),q=Y[0],K=Y[1],J=(0,p.useState)(!1),X=(0,a.default)(J,2),Q=X[0],Z=X[1],ee=(0,p.useState)(!0),te=(0,a.default)(ee,2),ne=te[0],ie=te[1],re=(0,p.useState)(!1),le=(0,a.default)(re,2),ae=le[0],oe=le[1],ue=(0,p.useState)(!0),se=(0,a.default)(ue,2),de=se[0],ce=se[1],fe=(0,p.useState)(!0),pe=(0,a.default)(fe,2),ye=pe[0],me=pe[1],he=(0,p.useState)(!1),ve=(0,a.default)(he,2),ge=ve[0],xe=ve[1],je=(0,p.useState)(!0),Se=(0,a.default)(je,2),we=Se[0],be=Se[1],Ie=(0,p.useState)(""),Te=(0,a.default)(Ie,2),Ce=Te[0],De=Te[1],ke=(0,p.useState)(""),Pe=(0,a.default)(ke,2),_e=Pe[0],Fe=Pe[1],Me=(0,p.useState)([]),Ee=(0,a.default)(Me,2),Oe=Ee[0],Re=Ee[1],Ve=(0,p.useState)([]),Ae=(0,a.default)(Ve,2),ze=Ae[0],Be=Ae[1],Le=(0,p.useState)(!1),Ne=(0,a.default)(Le,2),Ue=Ne[0],We=Ne[1],He=(0,p.useState)(!1),$e=(0,a.default)(He,2),Ge=$e[0],Ye=$e[1],qe=(0,p.useState)(null),Ke=(0,a.default)(qe,2),Je=Ke[0],Xe=Ke[1],Qe=(0,h.useAppSelector)((function(e){return e.common})).accessToken,Ze=(0,h.useAppSelector)((function(e){return e.ticket})),et=Ze.dataTicketRedux,tt=Ze.formData,nt=Ze.modeler,it=Ze.recipientDetaiImpl,rt=((0,h.useAppSelector)((function(e){return e.account})).dataAccount,(0,x.useReviewServices)()),lt=(0,_.useReviewEcontractServices)(),at=(0,R.useTicketServices)(),ot=(0,p.useState)(null==it?void 0:it.find((function(e){return e.userTaskId===(null==N?void 0:N._userTaskId)}))),ut=(0,a.default)(ot,1)[0],st=(0,p.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:(null==Je?void 0:Je.personalName)||"---",email:et.createdBy||"---",avatarUrl:null==Je?void 0:Je.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==et?void 0:et.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==et?void 0:et.jsonXml)&&JSON.parse(null==et?void 0:et.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:b.DateUtils.convertDateToDDMMYYYY_H_M(null==et?void 0:et.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==tt?void 0:tt.formName,funcViewFrom:function(){return Z(!0)}}},{key:"RV.status",type:"status",value:{status:et.ticketStatus===I.Status.voided?I.Status.voided:(null==ut?void 0:ut.recipientStatus)||I.Status.processing}}]}),[et,tt,nt,Je]);(0,p.useEffect)((function(){vt(),wt(),gt()}),[]);var dt,ct,ft,pt,yt,mt,ht,vt=(dt=(0,l.default)((function*(){try{var e=yield lt.getDataFormFill({versionId:ut.versionFormId});e&&$(e)}catch(e){}})),function(){return dt.apply(this,arguments)}),gt=(ct=(0,l.default)((function*(){try{var e=yield at.getMultiLoginAccount([et.createdBy]);e&&e.length>0&&Xe(e[0]),console.log("user",e)}catch(e){}})),function(){return ct.apply(this,arguments)}),xt=(ft=(0,l.default)((function*(e){if(e||null==H||!H.versionId){if(Oe.length>0&&!(yield jt(Oe)))return;try{We(!0);var t=Object.assign({},ut.recipient,{reason:Ce});(yield rt.actionTicket(ut.id,ut.ticketId,ut.userTaskId,t,Qe,"finish"))?(F.default.show({type:"success",text1:i("CM.noti"),text2:i("CM.actionUserStaskSuccess")}),L.goBack()):F.default.show({type:"error",text1:i("CM.noti"),text2:i("CM.actionUserStaskFailure")})}catch(e){}finally{We(!1)}}else oe(!0)})),function(e){return ft.apply(this,arguments)}),jt=(pt=(0,l.default)((function*(e){if(e){var t=e.map((function(e){return e.taskId}));return!(yield rt.getListTaskByListId(t)).find((function(e){return"completed"!==e.statusType}))||(s.Alert.alert(i("CM.needDoneTask")),!1)}return!0})),function(e){return pt.apply(this,arguments)}),St=(yt=(0,l.default)((function*(){if(!Ce)return be(!0),void Fe("CM.empty");Fe("");try{Ye(!0);var e=Object.assign({},null==ut?void 0:ut.recipient,{reason:Ce});(yield rt.actionTicket(null==ut?void 0:ut.id,null==ut?void 0:ut.ticketId,null==ut?void 0:ut.userTaskId,e,Qe,"reject"))?(F.default.show({type:"success",text1:i("CM.noti"),text2:i("CM.rejectSucesss")}),B(M.ticketActions.setDataTicket(Object.assign({},et,{ticketStatus:I.Status.rejected}))),L.goBack()):F.default.show({type:"error",text1:i("CM.noti"),text2:i("CM.rejectFailed")})}catch(e){}finally{Ye(!1)}})),function(){return yt.apply(this,arguments)}),wt=(mt=(0,l.default)((function*(){var e=yield rt.getListTaskByTicketIdAndUsertaskId(et.id,N._userTaskId);if(e){var t=e.map((function(e){return e.owner})),n=e.map((function(e){return e.taskId})),i=yield at.getMultiLoginAccount((0,r.default)(new Set(t))),l=e.map((function(e){var t,n,r;return Object.assign({},e,{avatar:null==i||null==(t=i.find((function(t){return t.email===e.owner})))?void 0:t.imageUrl,name:(null==i||null==(n=i.find((function(t){return t.email===e.owner})))?void 0:n.firstName)+" "+(null==i||null==(r=i.find((function(t){return t.email===e.owner})))?void 0:r.lastName)})}));Re(l);var a=yield rt.getListTaskByListId(n);if(a){var o=a.map((function(e){var t,n,i;return Object.assign({},e,{owner:null==(t=l.find((function(t){return t.listTaskId==e.listTaskId})))?void 0:t.owner,fullName:null==(n=l.find((function(t){return t.listTaskId==e.listTaskId})))?void 0:n.name,avatar:null==(i=l.find((function(t){return t.listTaskId==e.listTaskId})))?void 0:i.avatar,attrJson:JSON.parse(e.attr)})}));yield bt(o)}}})),function(){return mt.apply(this,arguments)}),bt=(ht=(0,l.default)((function*(e){var t=e.flatMap((function(e){return e.assignTaskList.map((function(e){return e.userId}))})),n=yield rt.findUserByOrgIn(0,1e4,"",null,t);if(n){var i=e.map((function(e){return e.assignTaskList.length&&(e.assignTaskList=e.assignTaskList.map((function(e){var t,i,r,l,a,o;return Object.assign({},e,{avatar:null==(t=n.data)||null==(i=t.find((function(t){return t.resourceId==e.userId})))?void 0:i.imageUrl,email:null==(r=n.data)||null==(l=r.find((function(t){return t.resourceId==e.userId})))?void 0:l.email,name:null==(a=n.data)||null==(o=a.find((function(t){return t.resourceId==e.userId})))?void 0:o.personalName})}))),e}));Be(i)}})),function(e){return ht.apply(this,arguments)});return(0,z.jsxs)(o.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,z.jsx)(u.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:i("RV.infoDoc"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,z.jsx)(j.TopNavigationAction,{onPress:function(){return K(!0)},icon:(0,z.jsx)(c.IconWorkflow,{width:20,height:20})})}}),(0,z.jsxs)(T.KeyboardAwareScrollView,{children:[(0,z.jsx)(s.View,{style:f.default.ctnBody,children:(0,z.jsxs)(s.View,{style:f.default.ctnSubBody,children:[(0,z.jsxs)(s.Pressable,{style:f.default.ctnHeader,onPress:function(){return xe(!ge)},children:[(0,z.jsx)(j.Icon,{fill:"#6F2CED",width:16,height:16,name:ge?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(C.default,{style:f.default.textTitle,children:i("CM.infoCommon")})]}),ge&&(0,z.jsx)(s.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,z.jsx)(D.default,{dataInfo:st})})]})}),Oe.length>0&&(0,z.jsx)(s.View,{style:f.default.ctnBody,children:(0,z.jsxs)(s.View,{style:[f.default.ctnSubBody],children:[(0,z.jsxs)(s.Pressable,{style:f.default.ctnHeader,onPress:function(){return me(!ye)},children:[(0,z.jsx)(j.Icon,{fill:"#6F2CED",width:16,height:16,name:ye?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(C.default,{style:f.default.textTitle,children:i("RV.taskNeedDone")})]}),ye&&(0,z.jsx)(j.List,{contentContainerStyle:{rowGap:10,backgroundColor:"#fff",paddingBottom:10},scrollEnabled:!1,data:ze,renderItem:function(e){var t=e.item,n=e.index;return(0,z.jsx)(O.default,{dataTask:t},n)}})]})}),H&&(0,z.jsx)(s.View,{style:f.default.ctnBody,children:(0,z.jsxs)(s.View,{style:[f.default.ctnSubBody],children:[(0,z.jsxs)(s.Pressable,{style:f.default.ctnHeader,onPress:function(){return ie(!ne)},children:[(0,z.jsx)(j.Icon,{fill:"#6F2CED",width:16,height:16,name:ne?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(C.default,{style:f.default.textTitle,children:i("RV.econtract.formNeedAction")})]}),ne&&(0,z.jsxs)(s.View,{style:f.default.ctnFormName,children:[(0,z.jsxs)(C.default,{style:f.default.textTitle,children:[i("RV.econtract.fillForm")," "]}),(0,z.jsx)(s.TouchableOpacity,{onPress:function(){oe(!0)},children:(0,z.jsx)(C.default,{style:f.default.formName,children:null==H?void 0:H.formName})})]})]})}),(0,z.jsx)(s.View,{style:f.default.ctnBody,children:(0,z.jsxs)(s.View,{style:[f.default.ctnSubBody],children:[(0,z.jsxs)(s.Pressable,{style:f.default.ctnHeader,onPress:function(){return ce(!de)},children:[(0,z.jsx)(j.Icon,{fill:"#6F2CED",width:16,height:16,name:de?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(C.default,{style:f.default.textTitle,children:i("RV.fileRelative")})]}),de&&(0,z.jsx)(E.default,{dataUserTask:N})]})}),N._status===v.STATUS_TASK.TASK_SEARCH&&(0,z.jsx)(s.View,{style:f.default.ctnBody,children:(0,z.jsxs)(s.View,{style:[f.default.ctnSubBody,{marginBottom:16}],children:[(0,z.jsxs)(s.Pressable,{style:f.default.ctnHeader,onPress:function(){return be(!we)},children:[(0,z.jsx)(j.Icon,{fill:"#6F2CED",width:16,height:16,name:we?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(C.default,{style:f.default.textTitle,children:i("CM.note")})]}),we&&(0,z.jsx)(s.View,{style:{paddingHorizontal:10,paddingBottom:10,rowGap:4},children:(0,z.jsx)(P.default,{isRequired:!0,label:i("CM.fillNote"),value:Ce,onChangeText:function(e){De(e),Fe("")},multiline:!0,maxLength:400,errorMessage:i(_e)})})]})})]}),(0,z.jsx)(s.View,{style:f.default.ctnFooter,children:N._status===v.STATUS_TASK.TASK_SEARCH&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(s.TouchableOpacity,{disabled:Ge,onPress:St,children:(0,z.jsx)(c.IconRejectReview,{width:(0,y.SizeDP)(36),height:(0,y.SizeDP)(36)})}),(0,z.jsx)(d.default,{style:{flex:1},label:i("CM.confirm"),loading:Ue,onPress:function(){return xt(!1)}})]})}),(0,z.jsx)(S.default,{isVisible:q,children:(0,z.jsx)(w.default,{onClose:function(){return K(!1)}})}),(0,z.jsx)(S.default,{isVisible:ae,children:(0,z.jsx)(V.default,{versionId:null==H?void 0:H.versionId,readOnly:N._status!==v.STATUS_TASK.TASK_SEARCH,data:{_userTaskId:null==N?void 0:N._userTaskId,_ticketId:null==et?void 0:et.id,formId:null==H?void 0:H.formId},isOnlyView:N._status!==v.STATUS_TASK.TASK_SEARCH,handleSubmit:function(){return xt(!0)},onClose:function(){return oe(!1)},nameHeader:null==H?void 0:H.formName})}),(0,z.jsx)(S.default,{isVisible:Q,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(s.View,{style:{flex:1},children:(0,z.jsx)(k.default,{})}),(0,z.jsx)(d.default,{style:{backgroundColor:"#f2ecfd",marginHorizontal:16},styleLabel:{color:"#6d1fad"},label:i("CM.back"),onPress:function(){return Z(!1)}})]})}),(0,z.jsx)(A.default,{ticketId:et.id,userTaskId:null==N?void 0:N._userTaskId})]})}},19867:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_TASK=t.ACTION_TYPES=void 0;t.ACTION_TYPES=function(e){return e.SHOW_EXECUTOR_USER="SHOW_EXECUTOR_USER",e.SHOW_EID_INFO="SHOW_EID_INFO",e.SHOW_ELMS_INFO="SHOW_ELMS_INFO",e.SHOW_ECONTRACT_INFO="SHOW_ECONTRACT_INFO",e.CREATE_ECONTRACT_ENV="CREATE_ECONTRACT_ENV",e.SHOW_USERTASK_INFO="SHOW_USERTASK_INFO",e.SHOW_COLLABO_INFO="SHOW_COLLABO_INFO",e}({}),t.STATUS_TASK=function(e){return e.TASK_SEARCH="task-search",e.TASK_SUCCESS="task-success",e.TASK_REJECTED="task-reject",e}({})},89052:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995),l=n(20880);t.default=i.StyleSheet.create({ctnFooter:{flexDirection:"row",paddingHorizontal:(0,r.SizeDP)(16),columnGap:(0,r.SizeDP)(16),marginTop:(0,r.SizeDP)(8)},ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:l.Font.InterMedium500},redDot:{color:"#E14337"},formName:{fontSize:14,color:"#366ae2",textDecorationLine:"underline",fontFamily:l.Font.InterRegular400},ctnFormName:{paddingHorizontal:10,paddingBottom:10,rowGap:4}})},93183:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),o=n(87841),u=i(n(14507)),s=n(12638),d=n(19867),c=i(n(75672)),f=n(41995),p=i(n(24541)),y=n(46317),m=i(n(81924)),h=n(14740),v=n(35708),g=i(n(77389)),x=n(2884),j=n(40851),S=i(n(86933)),w=i(n(99746)),b=i(n(76644)),I=i(n(7006)),T=n(88e3),C=n(47671);function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}t.default=function(e){var t=e.dataUserTask,n=(0,x.useTranslation)().t,i=((0,h.useNavigation)(),(0,a.useState)(1)),D=(0,l.default)(i,2),k=D[0],P=D[1],_=(0,a.useState)(0),F=(0,l.default)(_,2),M=F[0],E=F[1],O=(0,a.useState)([]),R=(0,l.default)(O,2),V=R[0],A=R[1],z=(0,a.useState)(!1),B=(0,l.default)(z,2),L=B[0],N=B[1],U=(0,a.useState)(""),W=(0,l.default)(U,2),H=W[0],$=W[1],G=(0,a.useState)(""),Y=(0,l.default)(G,2),q=Y[0],K=Y[1],J=(0,s.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,X=(0,s.useAppSelector)((function(e){return e.common})).accessToken,Q=(0,s.useAppSelector)((function(e){return e.account})).dataAccount,Z=(0,j.useReviewServices)();(0,a.useEffect)((function(){se(k)}),[k]);var ee,te,ne,ie,re,le,ae,oe,ue,se=(ee=(0,r.default)((function*(e){try{var n={page:e-1,size:3,sort:"createdDate,desc"},i=yield Z.getListAttachmentsUserTask(J.id,t._userTaskId,n,X);if(i){var r,l,a=[];if(0===(null==(l=a=null!=Q&&null!=(r=Q.orgIn)&&r.includes("/1978/5742")?null==i?void 0:i.data.filter((function(e){return!("eform"==e.resource&&"upload_img"==e.type)})):null==i?void 0:i.data)?void 0:l.length))return void(e>1?P(e-1):(A([]),E(0)));E(null==i?void 0:i.totalRecords),ve(a)}}catch(e){}})),function(e){return ee.apply(this,arguments)}),de=(te=(0,r.default)((function*(){try{yield Z.getListFileReview(J.id,t._userTaskId,X)}catch(e){}})),function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0;return(0,C.jsxs)(o.View,{style:u.default.ctnAction,children:[(0,C.jsx)(o.TouchableOpacity,{onPress:function(){return ce(e,n)},hitSlop:(0,f.SizeDP)(15),children:(0,C.jsx)(y.IconView,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})}),(0,C.jsx)(o.TouchableOpacity,{onPress:function(){return ye(n,e)},hitSlop:(0,f.SizeDP)(15),children:(0,C.jsx)(y.IconDownload,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})}),!e&&n.allowDeleted&&t._status===d.STATUS_TASK.TASK_SEARCH&&(0,C.jsx)(o.TouchableOpacity,{onPress:function(){var e;return pe(null==n||null==(e=n.id)?void 0:e.toString())},hitSlop:(0,f.SizeDP)(15),children:(0,C.jsx)(y.IconTrash,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})})]})}),ce=(ne=(0,r.default)((function*(){var e,t,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1?arguments[1]:void 0;K(null==(e=r.fileName)||null==(t=e.split("."))?void 0:t[0]);try{g.default.show({type:"info",text1:n("CM.info"),text2:n("TK.viewFile")});var l=new FormData;if(!i&&"ewriter"===r.resource){var a=yield fe(r.userTaskId,null==r?void 0:r.fileRepositoryId,null==r?void 0:r.fileName);l.append("file",a);var o=yield Z.viewFile(l,X);return void(1==(null==o?void 0:o.code)?(N(!0),$(o.message)):g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.error")}))}var u=r.name;u=i?r.keyName:r.name;var s=r.bucketName;if(!r.bucketName){var d,c=null==r||null==(d=r.name)?void 0:d.split(".s3-hfx03.fptcloud.com:443/");u=c[1],s=c[0].split("https://")[1]}l.append("keyName",u),l.append("bucketName",s),l.append("beanName",r.beanName);var f=yield Z.viewFile(l,X);1==(null==f?void 0:f.code)?(N(!0),$(f.message)):g.default.show({type:"error",text1:n("CM.info"),text2:n("CM.error")})}catch(e){g.default.show({type:"error",text1:n("CM.info"),text2:n("CM.error")})}})),function(){return ne.apply(this,arguments)}),fe=(ie=(0,r.default)((function*(e,t,n){try{var i,r=null==n||null==(i=n.split("."))?void 0:i[1],l=`${w.default.fs.dirs.DocumentDir}/${(new Date).getTime().toString()}.${r}`,a=yield w.default.config({path:l}).fetch("GET",`${(0,T.getConfig)().BASE_URL}/services/erequest/api/tickets/${J.id}/userTaskId/${e}/fileId/${t}`).then((function(e){return 200==e.info().status?e.path():null})).catch((function(){return null}));return{uri:"ios"===o.Platform.OS?a:"file://"+a,name:`${(new Date).getTime().toString()}.${r}`,type:v.CommonUtils.getMimeType(n)}}catch(e){}})),function(e,t,n){return ie.apply(this,arguments)}),pe=(re=(0,r.default)((function*(e){try{yield Z.deleteFileRelative(e,X),yield se(k),g.default.show({type:"success",text1:n("CM.info"),text2:n("TK.deleteFileSuccess")})}catch(e){console.log(e),g.default.show({type:"error",text1:n("CM.info"),text2:n("TK.deleteFileErr")})}})),function(e){return re.apply(this,arguments)}),ye=(le=(0,r.default)((function*(e,t){var n=e.fileName;n=t?e.keyName.replace("/","_"):e.fileName;var i=`${"android"===o.Platform.OS?S.default.DownloadDirectoryPath:S.default.DocumentDirectoryPath}/${(new Date).getTime()}_${n}`;t||(e.bucketName?yield he(i,e.id):yield me(i,e.name))})),function(e,t){return le.apply(this,arguments)}),me=(ae=(0,r.default)((function*(e,t){var i={fromUrl:t,toFile:e,background:!0,begin:function(e){console.log("Download has begun",e)},progress:function(e){e.bytesWritten,e.contentLength},connectionTimeout:5e3};try{200===(yield S.default.downloadFile(i).promise).statusCode?"ios"===o.Platform.OS&&(yield o.Share.share({url:e})).action==o.Share.dismissedAction?g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")}):g.default.show({type:"success",text1:n("CM.noti"),text2:n("CM.downloadSuccess")}):g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")})}catch(e){g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")})}})),function(e,t){return ae.apply(this,arguments)}),he=(oe=(0,r.default)((function*(e,t){try{g.default.show({type:"info",text1:n("CM.noti"),text2:n("CM.pleaseWait")});var i=yield w.default.fetch("GET",`${(0,T.getConfig)().BASE_URL}/services/erequest/api/attachments/download-file?attachmentId=${t}`).then((function(e){return 200==e.info().status?e.base64():null})).catch((function(){return null}));if(i){try{yield S.default.writeFile(e,i,"base64")}catch(e){console.log(e)}"ios"===o.Platform.OS&&(yield o.Share.share({url:e})).action==o.Share.dismissedAction?g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")}):g.default.show({type:"success",text1:n("CM.noti"),text2:n("CM.downloadSuccess")})}else g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")})}catch(e){g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")})}})),function(e,t){return oe.apply(this,arguments)}),ve=function(e){var t=e.map((function(e,t){return{STT:String(3*(k-1)+1+t),keyName:(0,C.jsx)(p.default,{style:u.default.txtText,numberOfLines:1,children:(l=null==e?void 0:e.fileName,l?null==l||null==(a=l.split("."))||null==(o=a.slice(0,-1))?void 0:o.join("."):"")}),createdBy:e.createdBy,documentSize:v.CommonUtils.getSize(e.size),type:(n=null==e?void 0:e.fileName,i=e.resource,n?"docx"==n.split(".").pop()&&"ewriter"===i&&null!=Q&&null!=(r=Q.orgIn)&&r.includes("/1978/5742")?"pdf":n.split(".").pop():""),lastModifiedDate:v.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate),action:de(!1,e)};var n,i,r,l,a,o}));A(t)},ge=(ue=(0,r.default)((function*(){try{var e=yield v.CommonUtils.handleGetFile();if(!e)return;var i=new FormData;i.append("uploadFile",e),i.append("attachmentJson",JSON.stringify({ticketId:null==J?void 0:J.id,userTaskId:t._userTaskId})),(yield Z.uploadFileRelative(i,X))?(yield se(k),g.default.show({type:"success",text1:n("CM.info"),text2:n("TK.uploadFileSuccess")})):g.default.show({type:"error",text1:n("CM.info"),text2:n("TK.uploadFileErr")})}catch(e){console.log(e),g.default.show({type:"error",text1:n("CM.info"),text2:n("TK.uploadFileErr")})}})),function(){return ue.apply(this,arguments)});return(0,C.jsxs)(o.View,{style:u.default.ctnMain,children:[(0,C.jsx)(o.ScrollView,{style:u.default.ctnBody,children:(0,C.jsxs)(o.View,{style:u.default.ctnForm,children:[(0,C.jsxs)(o.View,{style:u.default.viewForm,children:[(0,C.jsx)(p.default,{style:u.default.txtTitle,children:n("RV.document")}),t._status===d.STATUS_TASK.TASK_SEARCH&&(0,C.jsx)(o.TouchableOpacity,{onPress:ge,hitSlop:(0,f.SizeDP)(15),children:(0,C.jsx)(y.IconUpload,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})})]}),(0,C.jsx)(c.default,{stickyLeft:!0,stickyColumnLeftIndex:1,tableHeaders:["STT","keyName","createdBy","documentSize","type","lastModifiedDate","action"],tableData:V}),M>0&&(0,C.jsx)(m.default,{collectionSize:M,currentPage:k,pageSize:3,onPageChange:function(e){return P(e)}})]})}),(0,C.jsx)(b.default,{isVisible:L,children:(0,C.jsx)(I.default,{url:H,onClose:function(){return N(!1)},name:q})})]})}},14507:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(i,l,o):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(41995)),l=n(20880);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{backgroundColor:"#F8FAFE",flex:1},ctnBody:{backgroundColor:"#fff",flex:1,paddingHorizontal:(0,r.SizeDP)(16)},txtTitle:{fontSize:r.default.FontBase,fontFamily:l.Font.InterSemiBold600,color:l.Color.colorText},ctnForm:{rowGap:(0,r.SizeDP)(15),marginBottom:(0,r.SizeDP)(20)},ctnAction:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,r.SizeDP)(10)},txtText:{fontSize:r.default.FontTiny,fontFamily:l.Font.InterRegular400,color:"#00204DCC"},viewForm:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginRight:(0,r.SizeDP)(12)}})},85077:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=n(21527),o=n(87841),u=i(n(24541)),s=n(32207),d=n(20880),c=i(n(94196)),f=n(35708),p=n(46317),y=i(n(69290)),m=n(11671),h=n(2884),v=i(n(25517)),g=n(12638),x=n(60596),j=n(47671);t.default=function(e){var t=e.dataTask,n=(0,h.useTranslation)().t,i=(0,a.useState)(!1),S=(0,l.default)(i,2),w=S[0],b=S[1],I=(0,a.useState)(!1),T=(0,l.default)(I,2),C=T[0],D=T[1],k=(0,a.useState)(!1),P=(0,l.default)(k,2),_=P[0],F=P[1],M=(0,a.useState)([]),E=(0,l.default)(M,2),O=E[0],R=E[1],V=(0,m.useTicketServices)(),A=(0,g.useAppSelector)((function(e){return e.ticket})).dataTicketRedux;(0,a.useEffect)((function(){B()}),[]);var z,B=(z=(0,r.default)((function*(){var e,n=null==(e=t.owner)?void 0:e.split(",");if(n){var i=yield V.getMultiLoginAccount(n);i&&R(i)}})),function(){return z.apply(this,arguments)}),L=function(){return D(!C)},N=function(){return F(!_)},U=function(e,t){if(e&&t){var n=Math.floor(new Date(t).getTime())-Math.floor(new Date(e).getTime());return f.DateUtils.convertTime(n)}return"---"},W=function(e){switch(e){case"3":return(0,j.jsx)(p.Iconhigh,{width:16,height:16});case"2":return(0,j.jsx)(p.Iconmedium,{width:16,height:16});case"1":return(0,j.jsx)(p.Iconlow,{width:16,height:16});default:return(0,j.jsx)(u.default,{children:"---"})}},H=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,j.jsx)(o.Pressable,{onPress:t?L:N,style:v.default.ctnListUser,children:null==e?void 0:e.map((function(n,i){return(0,j.jsx)(j.Fragment,{children:i<=1?(0,j.jsx)(o.Image,{style:{position:"absolute",left:20*i},width:28,height:28,borderRadius:14,source:{uri:(null==n?void 0:n[t?"avatar":"imageUrl"])||d.String.DEFAULT_IMAGE}},i):(0,j.jsx)(o.View,{style:v.default.ctnAdd,children:(0,j.jsx)(u.default,{children:"+"+((null==e?void 0:e.length)-2)})},i)})}))})},$=(0,a.useMemo)((function(){return[{key:"RV.owner",type:"normal",value:{onlyIcon:H(O,!1)}},{key:"RV.userAction",type:"normal",value:{onlyIcon:H(t.assignTaskList)}},{key:"RV.status",type:"status",value:{status:(e=t,"todo"===(null==e||null==(i=e.attrJson)?void 0:i.type)?"todo":"processing"===(null==e||null==(r=e.attrJson)?void 0:r.type)?"processing":"completed"===(null==e||null==(l=e.attrJson)?void 0:l.type)?"completed":"approved"===(null==e||null==(a=e.attrJson)?void 0:a.type)?"approved":e.statusType)}},{key:"Estimate",type:"normal",value:{name:U(t.startDate,t.dueDate)}},{key:"HM.priority",type:"normal",value:{onlyIcon:W(t.priority)}},{key:"RV.listTask.startDate",type:"normal",value:{name:f.DateUtils.convertDateToDDMMYYYY_H_M(t.startDate)}},{key:"RV.listTask.endDate",type:"normal",value:{name:f.DateUtils.convertDateToDDMMYYYY_H_M(t.dueDate)}},{key:"RV.listTask.action",type:"normal",value:{onlyIcon:(0,j.jsx)(o.Pressable,{onPress:function(){A.ticketStatus!==x.Status.voided&&o.Alert.alert(n("NT.notification.inprocess_noti"))},style:{width:28,height:28,backgroundColor:"#F2ECFD",borderRadius:14,justifyContent:"center",alignItems:"center"},children:(0,j.jsx)(s.Icon,{fill:"#6F2CED",name:"edit-2",width:16,height:16})})}}];var e,i,r,l,a}),[O]);return(0,j.jsxs)(o.View,{style:{paddingHorizontal:10},children:[(0,j.jsxs)(o.Pressable,{onPress:function(){b(!w)},style:v.default.ctnHeader,children:[(0,j.jsxs)(o.View,{style:v.default.ctnBodyHeader,children:[(0,j.jsx)(o.View,{style:[w&&v.default.rotate],children:(0,j.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:"play-circle-outline"})}),(0,j.jsx)(u.default,{style:v.default.textTitle,children:n("RV.listTask.title")})]}),(0,j.jsx)(u.default,{style:v.default.tastName,children:t.name})]}),w&&(0,j.jsx)(o.View,{style:{backgroundColor:"#fff",paddingHorizontal:16},children:(0,j.jsx)(c.default,{dataInfo:$})}),(0,j.jsx)(s.Divider,{style:{marginTop:10}}),(0,j.jsx)(y.default,{isVisible:C,title:n("RV.listTask.listUserAction"),onClose:L,renderContent:(0,j.jsx)(s.List,{data:t.assignTaskList,renderItem:function(e){var t=e.item;return(0,j.jsx)(s.ListItem,{children:(0,j.jsxs)(o.View,{style:v.default.listUser,children:[(0,j.jsx)(o.Image,{width:28,height:28,borderRadius:14,source:{uri:t.avatar||d.String.DEFAULT_IMAGE}}),(0,j.jsxs)(o.View,{children:[(0,j.jsx)(u.default,{style:v.default.textname,children:t.name}),(0,j.jsx)(u.default,{children:t.email})]})]})})}})}),(0,j.jsx)(y.default,{isVisible:_,title:n("RV.listTask.listOwner"),onClose:N,renderContent:(0,j.jsx)(s.List,{data:O,renderItem:function(e){var t=e.item;return(0,j.jsx)(s.ListItem,{children:(0,j.jsxs)(o.View,{style:v.default.listUser,children:[(0,j.jsx)(o.Image,{width:28,height:28,borderRadius:14,source:{uri:t.imageUrl||d.String.DEFAULT_IMAGE}}),(0,j.jsxs)(o.View,{children:[(0,j.jsx)(u.default,{style:v.default.textname,children:t.firstName+" "+t.lastName||"---"}),(0,j.jsx)(u.default,{children:t.email})]})]})})}})})]})}},25517:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnHeader:{backgroundColor:"#fff",flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:30},ctnBodyHeader:{flexDirection:"row",alignItems:"center",columnGap:8},rotate:{transform:[{rotate:"90deg"}]},textTitle:{color:"#00204DE5",fontSize:12,fontFamily:r.Font.InterSemiBold600},tastName:{flex:1,fontSize:12,color:"#366AE2",fontFamily:r.Font.InterRegular400},listUser:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:16},textname:{fontSize:14,fontFamily:r.Font.InterSemiBold600},ctnListUser:{flexDirection:"row",position:"relative"},ctnAdd:{position:"absolute",left:40,width:28,height:28,borderRadius:14,backgroundColor:"#F4F4F4",justifyContent:"center",alignItems:"center"}})},86288:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=n(87841),o=i(n(24541)),u=i(n(88420)),s=n(41995),d=n(35708),c=n(46317),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),p=n(32207),y=n(68289),m=n(40851),h=n(12638),v=i(n(77389)),g=n(2884),x=i(n(76644)),j=i(n(93238)),S=n(88e3),w=n(20880),b=n(47671);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}var T=[{id:1,key:"TK.editAction",value:"edit",icon:(0,b.jsx)(c.IconEdit,{width:(0,s.SizeDP)(20),height:(0,s.SizeDP)(20)})},{id:2,key:"TK.deleteComment",value:"trash",icon:(0,b.jsx)(c.IconTrash,{width:(0,s.SizeDP)(20),height:(0,s.SizeDP)(20)})}],C=f.default.memo((function(e){var t,n,i=e.data,c=e.user,I=e.setComment,D=e.deleteComment,k=e.allComments,P=e.onReplyClick,_=e.level,F=e.listDataUser,M=(0,g.useTranslation)().t,E=(0,f.useState)(!1),O=(0,l.default)(E,2),R=O[0],V=O[1],A=(0,f.useState)(!1),z=(0,l.default)(A,2),B=z[0],L=z[1],N=(0,f.useState)(!1),U=(0,l.default)(N,2),W=U[0],H=U[1],$=(0,f.useState)(!1),G=(0,l.default)($,2),Y=G[0],q=G[1],K=(0,f.useState)(""),J=(0,l.default)(K,2),X=J[0],Q=J[1],Z=(0,f.useState)(c),ee=(0,l.default)(Z,1)[0],te=(0,m.useReviewServices)(),ne=(0,h.useAppSelector)((function(e){return e.common})).accessToken,ie=(0,h.useAppSelector)((function(e){return e.account})).dataAccount,re=k.get(i.id)||[],le=function(){H(!W)},ae=(t=(0,r.default)((function*(){try{q(!0);var e=new FormData;e.append("keyName",i.attachment),e.append("bucketName",i.bucketName);var t=yield te.viewFile(e,ne);1==(null==t?void 0:t.code)?(Q(t.message),L(!0)):a.Alert.alert(M("CM.info"),M("CM.error"))}catch(e){}finally{q(!1)}})),function(){return t.apply(this,arguments)}),oe=(n=(0,r.default)((function*(){try{q(!0);var e=`${(0,S.getConfig)().BASE_URL}/services/erequest/api/comments/download-file?commentId=${i.id}`,t=yield d.CommonUtils.downloadFile(i.fileName,e);"success"===t.status?v.default.show({type:"success",text1:M("CM.downloadSuccess")}):"error"===t.status&&v.default.show({type:"error",text1:M("CM.downloadFail")})}catch(e){v.default.show({type:"error",text1:M("CM.downloadFail")})}finally{q(!1)}})),function(){return n.apply(this,arguments)}),ue=function(){V(!R)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(a.View,{style:u.default.ctnMain,children:[(0,b.jsx)(a.View,{style:u.default.ctnImage,children:(0,b.jsx)(a.Image,{width:(0,s.SizeDP)(24),height:(0,s.SizeDP)(24),borderRadius:(0,s.SizeDP)(12),source:{uri:(null==ee?void 0:ee.imageUrl)||w.String.DEFAULT_IMAGE}})}),(0,b.jsxs)(a.View,{style:{flex:1},children:[(0,b.jsxs)(a.View,{style:u.default.ctnSecond,children:[(0,b.jsx)(o.default,{style:u.default.ctnName,children:null!=ee&&ee.personalName?(null==ee?void 0:ee.personalName)+"• ":"---"}),(0,b.jsx)(o.default,{style:u.default.ctnEmail,children:null==ee?void 0:ee.email})]}),(0,b.jsx)(o.default,{style:u.default.ctnTime,children:d.DateUtils.convertDateToDDMMYYYY_H_M(i.lastModifiedDate)}),function(e){var t=(0,y.decodeUnicodeToEmoji)(e);if(!t)return i.fileName?(0,b.jsxs)(a.View,{style:u.default.ctnViewFile,children:[(0,b.jsxs)(a.Pressable,{onPress:ae,style:u.default.styleFile,children:[(0,b.jsx)(o.default,{numberOfLines:1,style:u.default.content,children:""+i.fileName}),Y&&(0,b.jsx)(p.Spinner,{size:"tiny"})]}),(0,b.jsx)(a.Pressable,{onPress:oe,children:(0,b.jsx)(p.Icon,{name:"download-outline",width:24,height:24})})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(o.default,{style:u.default.content,children:"'---'"})});if(!t.includes('class="user_tag"'))return i.fileName?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.default,{style:u.default.content,children:(0,y.decodeUnicodeToEmoji)(t)}),(0,b.jsxs)(a.View,{style:u.default.ctnViewFile,children:[(0,b.jsxs)(a.Pressable,{onPress:ae,style:u.default.styleFile,children:[(0,b.jsx)(o.default,{numberOfLines:1,style:u.default.content,children:""+i.fileName}),Y&&(0,b.jsx)(p.Spinner,{size:"tiny"})]}),(0,b.jsx)(a.Pressable,{onPress:oe,children:(0,b.jsx)(p.Icon,{name:"download-outline",width:24,height:24})})]})]}):(0,b.jsx)(a.View,{style:u.default.bodyView,children:(0,b.jsx)(o.default,{style:u.default.content,children:(0,y.decodeUnicodeToEmoji)(t)})});if(t.includes('class="user_tag"')){var n=t.split("\n").map((function(e){return(0,y.splitStringWithSpans)(e).map((function(e){var t,n;return e.includes('class="user_tag"')?`${null==(t=(0,y.extractSpanList)(e))||null==(n=t[0])?void 0:n.textContent}`:e})).map((function(e,t){return e.startsWith("@")?(0,b.jsx)(o.default,{style:u.default.tag,children:`${e.slice(1)}`}):(0,b.jsx)(o.default,{style:u.default.content,children:`${e}`})}))}));return(0,b.jsx)(a.View,{style:u.default.bodyView,children:n.map((function(e,t){return(0,b.jsx)(a.View,{style:u.default.ctnViewGroup,children:e.map((function(e,t){return(0,b.jsx)(a.View,{children:e},t)}))},t)}))})}}(i.content),(0,b.jsxs)(a.View,{style:u.default.ctnReplyView,children:[(0,b.jsx)(a.Pressable,{onPress:function(){return function(e){P("reply",e),H(!0)}(i)},hitSlop:(0,s.SizeDP)(15),children:(0,b.jsx)(o.default,{style:u.default.ctnReply,children:M("CM.reply")})}),re.length>0&&(0,b.jsx)(b.Fragment,{children:W?(0,b.jsx)(a.Pressable,{onPress:le,style:u.default.ctnToggleShow,children:(0,b.jsx)(o.default,{style:{fontSize:12},children:M("CM.thugon")})}):(0,b.jsxs)(a.Pressable,{onPress:le,style:u.default.ctnToggleShow,children:[(0,b.jsx)(p.Icon,{fill:"#00204DE5",name:"message-circle-outline",width:16,height:16}),(0,b.jsxs)(o.default,{style:{fontSize:12},children:[M("CM.view")," ",null==re?void 0:re.length," ",M("CM.comment")]})]})})]})]}),(null==ee?void 0:ee.email)===ie.email&&(0,b.jsx)(a.View,{style:{},children:(0,b.jsx)(p.OverflowMenu,{anchor:function(){return(0,b.jsx)(a.TouchableOpacity,{onPress:ue,children:(0,b.jsx)(p.Icon,{width:20,height:20,name:"more-vertical"})})},visible:R,onBackdropPress:ue,children:T.map((function(e){return(0,b.jsx)(p.MenuItem,{accessoryLeft:(0,b.jsx)(p.Icon,{name:e.value}),title:M(e.key),onPress:function(){return function(e){switch(e.value){case"edit":ue(),P("edit",i);break;case"trash":ue(),D(i.id)}}(e)}},e.value)}))})})]}),W&&(0,b.jsx)(a.View,{style:{marginLeft:30,marginTop:10},children:null==re?void 0:re.map((function(e){return(0,b.jsx)(C,{data:e,user:null==F?void 0:F.find((function(t){return t.email===e.createdBy})),listDataUser:F,setComment:I,deleteComment:D,allComments:k,onReplyClick:P,level:_+1},e.id)}))}),(0,b.jsx)(x.default,{isVisible:B,children:(0,b.jsxs)(a.View,{style:u.default.ctnView,children:[(0,b.jsx)(a.View,{style:u.default.ctnBodyView,children:(0,b.jsx)(a.Pressable,{onPress:function(){return L(!1)},children:(0,b.jsx)(p.Icon,{name:"close",width:24,height:24})})}),(0,b.jsx)(a.View,{style:{flex:1},children:X&&(0,b.jsx)(j.default,{startInLoadingState:!0,source:{uri:X}})})]})})]})}));t.default=C},88420:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(i,l,o):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(41995)),l=n(20880);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnImage:{width:(0,r.SizeDP)(24),height:(0,r.SizeDP)(24),borderRadius:(0,r.SizeDP)(12),overflow:"hidden",backgroundColor:l.Color.BgPrimary},ctnTime:{color:"#00204DB2",fontSize:r.default.FontTinier,fontFamily:l.Font.InterRegular400},ctnEmail:{color:"#00204DB2",fontSize:r.default.FontTiny,fontFamily:l.Font.InterSemiBold600},ctnName:{fontSize:r.default.FontTiny,color:"#00204D",fontFamily:l.Font.InterSemiBold600},ctnMain:{flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",columnGap:"ios"==i.Platform.OS?16:12,marginBottom:10},ctnSecond:{flex:1,flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",flexWrap:"wrap"},ctnReply:{color:"#366AE2",fontSize:r.default.FontTiny,fontFamily:l.Font.InterMedium500},content:{color:"#00204DE5",fontSize:r.default.FontSmallest,fontFamily:l.Font.InterRegular400},tag:{color:"#62248F",fontSize:r.default.FontSmall,fontFamily:l.Font.InterRegular400},contentTag:{color:"#00204DE5",fontSize:r.default.FontSmallest,fontFamily:l.Font.InterRegular400},bodyView:{marginVertical:8},styleFile:{paddingHorizontal:10,paddingVertical:6,backgroundColor:"#e8e5e5de",borderRadius:8,marginVertical:3,maxWidth:130,justifyContent:"space-between",alignItems:"center",flexDirection:"row"},ctnViewFile:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8},ctnReplyView:{flexDirection:"row-reverse",alignItems:"center",justifyContent:"flex-end",columnGap:10},ctnToggleShow:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:6,paddingVertical:3},ctnView:{backgroundColor:"#fff",height:"100%"},ctnBodyView:{justifyContent:"flex-end",alignItems:"flex-end",marginRight:16,marginBottom:10},ctnViewGroup:{flexDirection:"row",alignItems:"center",columnGap:8}})},68289:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.extractSpanList=t.encodeEmojiToUnicode=t.decodeUnicodeToEmoji=void 0,t.filterCommentsByParentId=function(e){var t=new Map;return e.forEach((function(e){var n=null===e.commentId?"root":e.commentId;t.has(n)||t.set(n,[]),t.get(n).push(e)})),t},t.splitStringWithSpans=void 0;t.decodeUnicodeToEmoji=function(e){return e.replace(/\\u\{([0-9A-F]{1,6})\}/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/\\u([0-9A-F]{4})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))}))},t.encodeEmojiToUnicode=function(e){return e.replace(/([\uD800-\uDBFF][\uDC00-\uDFFF])|([^\n])/g,(function(e,t,n){return t?"\\u{"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536).toString(16).toUpperCase()+"}":n?"\\u"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0"):e}))},t.extractSpanList=function(e){for(var t,n=/<span(?: [^>]*id="([^"]*)")?(?: [^>]*data-user-id="([^"]*)")?(?: [^>]*data-email="([^"]*)")?(?: [^>]*data-org-in="([^"]*)")?(?: [^>]*data-cust-id="([^"]*)")?[^>]*>(.*?)<\/span>/g,i=[];null!==(t=n.exec(e));)i.push({id:t[1],userId:t[2],email:t[3],orgIn:t[4],custId:t[5],textContent:t[6].trim()});return i},t.splitStringWithSpans=function(e){var t=/<span[^>]*>.*?<\/span>/g,n=e.match(t),i=e.split(t),r=[];return i.forEach((function(e,t){e.trim()&&r.push(e.trim()),n&&n[t]&&r.push(n[t])})),r}},55087:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),u=n(14740),s=n(41995),d=n(46317),c=n(87841),f=i(n(7259)),p=i(n(86288)),y=n(12638),m=n(68289),h=i(n(31263)),v=n(11671),g=n(32207),x=i(n(43184)),j=n(2884),S=i(n(24541)),w=n(20880),b=n(45335),I=n(47671);function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}t.default=function(e){var t=e.onClose,n=(0,j.useTranslation)().t,i=(0,o.useState)([]),T=(0,a.default)(i,2),C=T[0],D=T[1],k=(0,o.useState)([]),P=(0,a.default)(k,2),_=P[0],F=P[1],M=(0,o.useState)([]),E=(0,a.default)(M,2),O=E[0],R=E[1],V=(0,o.useState)([]),A=(0,a.default)(V,2),z=A[0],B=A[1],L=(0,o.useState)(""),N=(0,a.default)(L,2),U=N[0],W=N[1],H=(0,o.useState)(!1),$=(0,a.default)(H,2),G=$[0],Y=$[1],q=(0,o.useState)(!1),K=(0,a.default)(q,2),J=K[0],X=K[1],Q=(0,o.useState)(),Z=(0,a.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,o.useState)(null),ie=(0,a.default)(ne,2),re=ie[0],le=ie[1],ae=(0,o.useState)(!1),oe=(0,a.default)(ae,2),ue=oe[0],se=oe[1],de=(0,o.useState)("new"),ce=(0,a.default)(de,2),fe=ce[0],pe=ce[1],ye=(0,o.useState)(!1),me=(0,a.default)(ye,2),he=me[0],ve=me[1],ge=(0,o.useState)("loading"),xe=(0,a.default)(ge,2),je=xe[0],Se=xe[1],we=(0,o.useState)([]),be=(0,a.default)(we,2),Ie=be[0],Te=be[1],Ce=(0,o.useRef)(null),De=(0,y.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,ke=(0,y.useAppSelector)((function(e){return e.account})).dataAccount,Pe=(0,v.useTicketServices)(),_e=function(){return se(!ue)};(0,u.useFocusEffect)((0,o.useCallback)((function(){Ae()}),[]));var Fe,Me,Ee,Oe,Re,Ve,Ae=(Fe=(0,l.default)((function*(){try{Se("loading");var e={userTaskId:"all",ticketId:De.id,sort:"lastModifiedDate,desc",page:0,size:1e5},t=yield Pe.getListComments(e);if(t&&t.content){D(t.content);var n=t.content.map((function(e){return e.createdBy})),i=ke.email||"",l=(0,r.default)(new Set([].concat((0,r.default)(n),[i]))).filter((function(e){return e.length>0})),a=yield Pe.getMultiLoginAccount(l);R(a||[]),yield $e()}}catch(e){console.log("Error get list comments:",e),Se("error")}finally{X(!1)}})),function(){return Fe.apply(this,arguments)}),ze=(0,o.useMemo)((function(){var e=new Map;return C.forEach((function(t){var n,i=null!=(n=t.commentId)?n:"root",l=e.get(i)||[];e.set(i,[].concat((0,r.default)(l),[t]))})),e}),[C]),Be=function(e){var t=e.split(" "),n=t.filter((function(e){return!e.startsWith("@")})).join(" "),i=t.filter((function(e){return e.startsWith("@")})).map((function(e){var t,n,i;return`<span id="#${(new Date).getTime()}" class="user_tag" contenteditable="false" data-user-id="${null!=(t=ke.id)?t:5845}" data-email="${e.slice(1)}" data-org-in="${null!=(n=ke.orgIn)?n:"/1833/5390/5392"}" data-cust-id="${null!=(i=ke.custId)?i:1833}">${e}</span>`})).join(" ");return(0,m.encodeEmojiToUnicode)(`${i} ${n}`)},Le=(Me=(0,l.default)((function*(e,t,n){try{var i={content:Be(U),userTaskId:"all",ticketId:De.id,name:`${ke.firstName} ${ke.lastName}`,createdBy:ke.email,commentType:"comment",avatar:ke.imageUrl,commentId:e,userId:ke.id,orgIn:ke.orgIn,custId:ke.custId,contactDTO:Ie,isPrivate:n},l=new FormData;l.append("uploadFile",t?{uri:null==t?void 0:t.path,type:null==t?void 0:t.mime,name:null==t?void 0:t.path.split("/").pop()}:null),l.append("commentJson",JSON.stringify(i));var a=yield Pe.sendComment(l);a&&(Te([]),D([a].concat((0,r.default)(C))),te(null),c.Keyboard.dismiss())}catch(e){}})),function(e,t,n){return Me.apply(this,arguments)}),Ne=(0,o.useCallback)((0,l.default)((function*(){if("reply"===fe||"new"===fe){if(U.trim()||ee){var e=re&&null!=re&&re.commentId?null==re?void 0:re.commentId:null==re?void 0:re.id;yield Le(e,ee,G)}}else"edit"===fe&&U.trim()&&re&&(yield He(null==re?void 0:re.id,null==re?void 0:re.commentId,ee,G));W(""),pe("new"),le(null)})),[U,fe,re,ee,G]),Ue=(Ee=(0,l.default)((function*(e){try{(yield Pe.deleteComment(e))&&We(e)}catch(e){}})),function(e){return Ee.apply(this,arguments)}),We=function(e){D((function(t){return null==t?void 0:t.filter((function(t){return t.id!==e}))}))},He=(Oe=(0,l.default)((function*(e,t,n,i){try{var r=Object.assign({},re,{content:Be(U),isPrivate:i,lastModifiedDate:(new Date).toISOString()}),l=new FormData;l.append("uploadFile",n?{uri:null==n?void 0:n.path,type:null==n?void 0:n.mime,name:null==n?void 0:n.path.split("/").pop()}:null),l.append("commentJson",JSON.stringify(r));var a=yield Pe.updateComment(l);a&&(D((function(t){return t.map((function(t){return t.id===e?a:t}))})),c.Keyboard.dismiss())}catch(e){}})),function(e,t,n,i){return Oe.apply(this,arguments)}),$e=(Re=(0,l.default)((function*(){try{var e=yield Pe.getListAclUser(De.id);if(e){var t=e.map((function(e){var t;return null==e||null==(t=e.personal)?void 0:t.email}))||[],n=yield Pe.getMultiLoginAccount((0,r.default)(new Set(t)));n&&F(n)}}catch(e){console.log("Error get list users:",e)}finally{Se("done")}})),function(){return Re.apply(this,arguments)}),Ge=function(e){W(e);var t,n=e.split(" ").pop();if(null!=n&&n.startsWith("@")&&n.length>0)if((null==n||null==(t=n.slice(1))?void 0:t.length)<=0)B(_),ve(!0);else{var i,r=null==n||null==(i=n.slice(1))?void 0:i.toLowerCase();B(_.filter((function(e){var t;return null==e||null==(t=e.email)?void 0:t.toLowerCase().includes(r)}))),ve(!0)}else ve(!1)},Ye=(0,o.useCallback)((function(e,t){var n;if(pe(e),"reply"===e){var i=_.find((function(e){return e.email==t.createdBy})),l={id:null==i?void 0:i.resourceId,name:null==i?void 0:i.personalName,email:null==i?void 0:i.email,orgIn:null==i?void 0:i.orgIn,custId:null==i?void 0:i.custId,haveAvatar:!(null==i||!i.imageUrl),avatar:null==i?void 0:i.imageUrl,disabled:(null==i?void 0:i.resourceId)===ke.id||Ie.some((function(e){return(null==e?void 0:e.id)===(null==i?void 0:i.resourceId)}))};Te((function(e){return[].concat((0,r.default)(e),[l])})),Ge(`@${t.createdBy} `)}else Ge(qe((0,m.decodeUnicodeToEmoji)(t.content)));le(t),null==(n=Ce.current)||n.focus()}),[]),qe=function(e){return(0,m.splitStringWithSpans)(e).map((function(e){var t,n;return e.includes('class="user_tag"')?`${null==(t=(0,m.extractSpanList)(e))||null==(n=t[0])?void 0:n.textContent}`:e})).join(" ")},Ke=(Ve=(0,l.default)((function*(){try{var e=yield h.default.ChoosePhoto({width:500,height:500});te(e)}catch(e){console.log(e)}})),function(){return Ve.apply(this,arguments)});return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(c.KeyboardAvoidingView,{keyboardVerticalOffset:50,behavior:"ios"===c.Platform.OS?"padding":"height",style:{flex:1},children:(0,I.jsx)(c.TouchableWithoutFeedback,{children:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(x.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:n("TK.comment"),onPressIconLeft:t}),(0,I.jsxs)(c.View,{style:{flex:1,padding:16},children:[(0,I.jsxs)(c.View,{style:{flex:1,position:"relative"},children:["done"===je&&(0,I.jsx)(c.FlatList,{style:{flex:1},refreshing:J,onRefresh:function(){X(!0),Se("loading"),Ae()},showsVerticalScrollIndicator:!1,contentContainerStyle:{rowGap:(0,s.SizeDP)(16)},data:(null==ze?void 0:ze.get("root"))||[],renderItem:function(e){var t=e.item;return(0,I.jsx)(p.default,{data:t,user:O.find((function(e){return e.email===t.createdBy})),listDataUser:O,setComment:W,deleteComment:Ue,allComments:ze,onReplyClick:Ye,level:0})},ListEmptyComponent:function(){return(0,I.jsxs)(c.View,{style:f.default.emptyComment,children:[(0,I.jsx)(g.Icon,{name:"message-circle-outline",width:30,height:30}),(0,I.jsx)(S.default,{style:{textAlign:"center"},children:n("TK.commentDescription")})]})}}),"loading"===je&&(0,I.jsx)(g.Spinner,{size:"small"}),"error"===je&&(0,I.jsx)(c.View,{children:(0,I.jsx)(S.default,{children:n("CM.emptyData")})}),he&&z.length>0&&(0,I.jsx)(c.View,{style:f.default.ctnModalListUser,children:(0,I.jsx)(c.View,{style:f.default.bodyModalListUser,children:(0,I.jsx)(g.List,{keyboardShouldPersistTaps:"handled",data:z,renderItem:function(e){var t=e.item;return(0,I.jsx)(g.ListItem,{onPress:function(){return function(e){var t,n={id:e.resourceId,name:e.personalName,email:e.email,orgIn:e.orgIn,custId:e.custId,haveAvatar:!!e.imageUrl,avatar:e.imageUrl,disabled:e.resourceId===ke.id||Ie.some((function(t){return t.id===e.resourceId}))};Te((function(e){return[].concat((0,r.default)(e),[n])}));var i=U.split(" ");i[i.length-1]=`@${e.email} `,W(i.join(" ")),ve(!1),null==(t=Ce.current)||t.focus()}(t)},children:(0,I.jsxs)(c.View,{style:f.default.ctnViewTag,children:[(0,I.jsx)(c.Image,{width:24,height:24,borderRadius:12,source:{uri:(null==t?void 0:t.imageUrl)||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,I.jsxs)(c.View,{children:[(0,I.jsx)(S.default,{style:{fontSize:14,fontFamily:w.Font.InterSemiBold600},children:t.personalName}),(0,I.jsx)(S.default,{children:t.email})]})]})})}})})})]}),(0,I.jsxs)(c.View,{style:[f.default.ctnSend],children:[(0,I.jsxs)(c.View,{style:f.default.ctnImg,children:[ee&&(0,I.jsx)(I.Fragment,{children:ee.mime.includes("image")&&(0,I.jsxs)(c.View,{style:f.default.ctnImage,children:[(0,I.jsx)(c.Image,{style:f.default.image,source:{uri:ee.sourceURL}}),(0,I.jsx)(c.Pressable,{onPress:function(){return te(null)},style:f.default.closeImage,children:(0,I.jsx)(g.Icon,{width:12,height:12,name:"close-outline"})})]})}),(0,I.jsxs)(c.View,{style:f.default.ctnInput,children:[(0,I.jsx)(c.TextInput,{ref:Ce,style:{padding:(0,s.SizeDP)(12),flex:1},allowFontScaling:!1,multiline:!0,placeholder:n("new"===fe?"TK.addComment":"reply"===fe?"TK.replyComment":"TK.editComment"),value:U,onChangeText:Ge,onFocus:function(e){return t=e.nativeEvent.text,void(null!=(n=null==t?void 0:t.split(" ").pop())&&n.startsWith("@")&&ve(!0));var t,n}}),(0,I.jsx)(c.TouchableOpacity,{onPress:Ke,hitSlop:(0,s.SizeDP)(15),children:(0,I.jsx)(d.IconGetRelative,{width:(0,s.SizeDP)(20),height:(0,s.SizeDP)(20)})}),(0,I.jsx)(c.Pressable,{style:{marginHorizontal:12},onPress:function(){Y(!G),_e()},children:(0,I.jsx)(g.Icon,{width:20,height:20,fill:"#39AC6D",name:G?"people-outline":"globe-outline"})}),(0,I.jsx)(b.Snackbar,{style:{marginBottom:20},onDismiss:_e,visible:ue,duration:1e3,children:n(G?"TK.commentPrivate":"TK.commentPublic")})]})]}),(0,I.jsx)(c.TouchableOpacity,{onPress:Ne,hitSlop:(0,s.SizeDP)(15),children:(0,I.jsx)(d.IconSend,{width:(0,s.SizeDP)(24),height:(0,s.SizeDP)(24)})})]})]})]})})})})}},7259:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995);t.default=i.StyleSheet.create({ctnSend:{flexDirection:"row",alignItems:"center",columnGap:(0,r.SizeDP)(10),zIndex:1,backgroundColor:"#fff",paddingVertical:10},ctnImage:{marginLeft:4,marginTop:6,position:"relative",width:100,height:100},closeImage:{position:"absolute",top:-4,right:-4,padding:2,borderRadius:20,backgroundColor:"#fff",borderWidth:.5,borderColor:"#00358090"},image:{width:100,height:100,borderRadius:(0,r.SizeDP)(8)},ctnImg:{flex:1,borderWidth:(0,r.SizeDP)(.5),borderColor:"#00358026",borderRadius:(0,r.SizeDP)(8)},backdrop:{backgroundColor:"rgba(0, 0, 0, 0.5)"},menu:{width:250,maxHeight:300,position:"absolute",borderRadius:8,overflow:"hidden"},menuTitle:{padding:8,fontWeight:"bold"},ctnModalListUser:{alignItems:"center",justifyContent:"center",width:"100%",bottom:0,position:"absolute"},bodyModalListUser:{width:"90%",maxHeight:180,borderRadius:8,overflow:"hidden",borderWidth:.5,borderColor:"#a2b3cfe6"},ctnInput:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnViewTag:{flexDirection:"row",alignItems:"center",columnGap:10,marginLeft:10},emptyComment:{margin:10,flex:1,alignItems:"center",rowGap:5}})},84478:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(21527));var r=n(87841),l=n(2543),a=n(32207),o=n(14740),u=i(n(24541)),s=n(47671);t.default=function(e){var t=e.style,n=e.onPressIconLeft,i=e.viewIconLeft,d=void 0===i?"arrow-back":i,c=e.title,f=void 0===c?"quangnh39":c,p=e.contentStyle,y=e.renderContentRight,m=e.appearance,h=void 0===m?"default":m,v=e.alignment,g=void 0===v?"start":v,x=e.subtitle,j=void 0===x?"":x,S=e.fillIconBackLeft,w=(0,o.useNavigation)(),b=function(){(0,l.isUndefined)(n)?w.goBack():n()};return(0,s.jsx)(r.View,{style:[t],children:(0,s.jsx)(a.TopNavigation,{title:function(e){return(0,s.jsx)(u.default,Object.assign({},e,{children:f}))},appearance:h,accessoryLeft:function(){return(0,s.jsx)(a.TopNavigationAction,{hitSlop:15,onPress:b,icon:(0,s.jsx)(a.Icon,{name:d,fill:S})})},accessoryRight:y,alignment:g,subtitle:j,style:[p]})})}},69107:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),o=n(87841),u=n(32207),s=i(n(33489)),d=i(n(24541)),c=n(20880),f=n(35708),p=n(47671);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}t.default=function(e){var t=e.item,n=(0,a.useState)([t.id]),i=(0,l.default)(n,2),y=i[0],m=i[1],h=y.includes(t.id);return(0,p.jsxs)(o.View,{style:s.default.processContainer,children:[(0,p.jsxs)(o.TouchableOpacity,{onPress:function(){return e=t.id,void(y.includes(e)?m(y.filter((function(t){return t!==e}))):m([].concat((0,r.default)(y),[e])));var e},style:s.default.processHeader,children:[(0,p.jsx)(u.Icon,{name:h?"arrow-ios-downward-outline":"arrow-ios-forward-outline",fill:"#FC6B03",width:16,height:16}),(0,p.jsx)(d.default,{style:s.default.processTitle,children:t.notionName})]}),h&&(0,p.jsx)(p.Fragment,{children:t.reason&&(0,p.jsx)(o.View,{style:s.default.expandedContainer,children:(0,p.jsxs)(o.View,{style:s.default.userRow,children:[(0,p.jsx)(o.Image,{style:s.default.avatar,source:{uri:null!=t&&t.avatar?`${c.String.PREFIX_IMG_BASE64}${t.avatar}`:c.String.DEFAULT_IMAGE}}),(0,p.jsxs)(o.View,{style:s.default.userInfo,children:[t.userName&&t.email&&(0,p.jsxs)(o.View,{style:s.default.userDetails,children:[(0,p.jsx)(d.default,{style:s.default.commentUser,children:t.userName}),(0,p.jsx)(d.default,{style:s.default.commentEmail,children:t.email?`(${t.email.split("@")[0]})`:""}),(0,p.jsx)(d.default,{style:s.default.commentTime,children:t.signDate?` • ${f.DateUtils.convertDateToDDMMYYYY_H_M(t.signDate)}`:""})]}),(0,p.jsx)(d.default,{style:s.default.commentText,children:t.reason})]})]})})})]})}},24617:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),u=n(87841),s=n(14740),d=n(2884),c=n(32207),f=i(n(33489)),p=i(n(69107)),y=i(n(43184)),m=i(n(24541)),h=n(11671),v=n(12638),g=n(40851),x=n(31004),j=n(47671);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}t.default=function(e){var t,n=e.onClose,i=(0,d.useTranslation)().t,S=(0,v.useAppSelector)((function(e){return e.common})).accessToken,w=(0,v.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,b=(0,h.useTicketServices)(),I=(0,g.useReviewServices)(),T=(0,x.useReviewEcontractServices)(),C=(0,o.useState)("loading"),D=(0,a.default)(C,2),k=D[0],P=D[1],_=(0,o.useState)([]),F=(0,a.default)(_,2),M=F[0],E=F[1],O=(0,o.useState)([]),R=(0,a.default)(O,2),V=R[0],A=R[1],z=(0,o.useState)([]),B=(0,a.default)(z,2),L=B[0],N=B[1],U=(t=(0,l.default)((function*(e){var t=yield b.getMultiLoginAccount((0,r.default)(new Set(e)),S);t&&A(t)})),function(e){return t.apply(this,arguments)});(0,s.useFocusEffect)((0,o.useCallback)((function(){H()}),[])),(0,o.useEffect)((function(){var e=(0,r.default)(M).map((function(e){e.implementerId;var t=L.find((function(t){return t.id==e.implementerId}));if(t){var n,i,r,l,a,o=null==t||null==(n=t.recipient)||null==(i=n.contact)?void 0:i.email,u="",s=V.find((function(e){return e.email==o}));return s&&(u=s.personalName||"---",a=s.avatar),Object.assign({},e,{email:null==t||null==(r=t.recipient)||null==(l=r.contact)?void 0:l.email,userName:u,avatar:a})}return e}));E(e)}),[V]);var W,H=(W=(0,l.default)((function*(){try{var e=yield I.getStatusParty(w.id,S);if(e){var t,n,i;E(null==e||null==(t=e.party)?void 0:t.recipients);var r=yield T.getRecipientDetail((null==e||null==(n=e.party)||null==(i=n.recipients[0])?void 0:i.id)||"",(null==e?void 0:e.ticketId)||"");if(r){N(r);var l=r.map((function(e){var t,n;return(null==e||null==(t=e.recipient)||null==(n=t.contact)?void 0:n.email)||""}));yield U(l)}}}catch(e){P("error")}finally{P("done")}})),function(){return W.apply(this,arguments)});return(0,j.jsx)(u.TouchableWithoutFeedback,{children:(0,j.jsxs)(u.View,{style:f.default.indexContainer,children:[(0,j.jsx)(y.default,{titleStyle:f.default.titleContainer,fillIconBackLeft:"#00204DB2",contentStyle:f.default.backgroundContainer,title:i("CM.note"),onPressIconLeft:n}),(0,j.jsx)(c.Divider,{}),(0,j.jsxs)(u.View,{style:{flex:1},children:["loading"===k&&(0,j.jsx)(u.View,{style:f.default.wrapSpin,children:(0,j.jsx)(c.Spinner,{size:"small"})}),"done"===k&&(0,j.jsx)(u.FlatList,{data:M,renderItem:function(e){var t=e.item;return t.id&&"accepted"==t.status?(0,j.jsx)(p.default,{item:t}):null},style:f.default.container,ListEmptyComponent:function(){return(0,j.jsx)(u.View,{children:(0,j.jsx)(m.default,{style:{textAlign:"center"},children:i("TK.noteEmptyDescription")})})}}),"error"===k&&(0,j.jsx)(u.View,{children:(0,j.jsx)(m.default,{children:i("CM.emptyData")})})]})]})})}},33489:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({indexContainer:{flex:1},titleContainer:{color:"#00204D"},backgroundContainer:{backgroundColor:"#fff"},container:{flex:1,backgroundColor:"#F8FAFE"},wrapSpin:{flex:1,justifyContent:"center",alignItems:"center"},processContainer:{backgroundColor:"#fff",marginVertical:15,marginHorizontal:10,borderRadius:10,overflow:"hidden",elevation:2,padding:12},processHeader:{flexDirection:"row",alignItems:"center",padding:10},processTitle:{fontSize:14,fontFamily:r.Font.InterMedium500,color:"#FC6B03",marginLeft:8},expandedContainer:{paddingVertical:10},userRow:{flexDirection:"row",alignItems:"flex-start",marginBottom:8},avatar:{width:24,height:24,borderRadius:12,marginRight:6},userInfo:{flex:1,marginTop:4,lineHeight:20},commentUser:{fontSize:13,fontFamily:r.Font.InterMedium500,color:"#333"},userDetails:{flexDirection:"row",alignItems:"center",flexWrap:"wrap",marginBottom:5},commentFullName:{fontSize:13,fontFamily:r.Font.InterMedium500,color:"#333"},commentShortlName:{fontSize:13,fontFamily:r.Font.InterMedium500,color:"#333"},commentEmail:{fontSize:13,color:"#666",marginLeft:5},commentTime:{fontSize:12,color:"#888",marginLeft:10},commentText:{fontSize:14,color:"#333",marginTop:5,lineHeight:20},notYetText:{textAlign:"center",paddingVertical:10}})},23813:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=n(87841),o=i(n(16861)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),s=n(46317),d=n(2884),c=n(12638),f=i(n(27747)),p=i(n(45001)),y=n(20880),m=n(32207),h=n(11671),v=n(97427),g=i(n(77389)),x=n(47671);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}t.default=function(e){var t,n=e.isVisible,i=e.toogleRateNow,j=(0,d.useTranslation)().t,S=(0,c.useAppDispatch)(),w=(0,u.useState)(""),b=(0,l.default)(w,2),I=b[0],T=b[1],C=(0,u.useState)(-1),D=(0,l.default)(C,2),k=D[0],P=D[1],_=(0,c.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,F=(0,u.useState)(!1),M=(0,l.default)(F,2),E=M[0],O=M[1],R=(0,h.useTicketServices)(),V=(t=(0,r.default)((function*(){var e={id:_.id,rate:k+1,rateNote:I,ticketStatus:"completed"};try{O(!0);var t=yield R.sendRateTicket(e);t?(S(v.ticketActions.setDataTicket(Object.assign({},_,{rate:null==t?void 0:t.rate}))),g.default.show({type:"success",text1:j("CM.noti"),text2:j("TK.rateSuccess")})):g.default.show({type:"error",text1:j("CM.noti"),text2:j("TK.rateFaile")}),i()}catch(e){}finally{O(!1)}})),function(){return t.apply(this,arguments)});return E?(0,x.jsx)(a.View,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,x.jsx)(m.Spinner,{size:"large"})}):(0,x.jsx)(p.default,{isVisible:n,onClose:i,title:`${j("TK.rate_now")}`,type:"rate",labelCancel:j("CM.labelCancel"),labelConfirm:j("TK.rate"),styleBtnRight:{backgroundColor:y.Color.completed},onConfirm:function(){return V()},renderContent:function(){return(0,x.jsxs)(a.View,{style:{marginVertical:6},children:[(0,x.jsx)(a.View,{style:o.default.starContainer,children:new Array(5).fill(1).map((function(e,t){return(0,x.jsx)(a.TouchableOpacity,{onPress:function(){return function(e){P(e)}(t)},children:t>k?(0,x.jsx)(s.IconStarOutline,{width:55,height:50,fill:y.Color.gray}):(0,x.jsx)(s.IconStar,{width:55,height:50,fill:y.Color.yellow})},t)}))}),(0,x.jsx)(f.default,{value:I,onChangeText:T,multiline:!0,isFloatingLabel:!0,label:j("TK.enter_comment"),maxLength:400})]})}})}},16861:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995),l=n(20880);t.default=i.StyleSheet.create({starContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center"},btnRate:{color:l.Color.White,backgroundColor:l.Color.rate,padding:(0,r.SizeDP)(6),borderRadius:6}})},73639:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),o=n(87841),u=i(n(93238)),s=n(12638),d=n(14740),c=n(20880),f=n(19867),p=i(n(69290)),y=n(32207),m=i(n(24541)),h=n(2884),v=n(40851),g=n(97427),x=n(11671),j=n(88e3),S=n(35708),w=n(31004),b=i(n(77389)),I=n(2543),T=n(47671);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}t.default=function(e){var t=e.selectTabBottom,n=e.userTaskId,i=e.recipientDetailsId,C=e.isRealoadWebview,D=e.notifyActionType,k=e.typeView,P=(0,h.useTranslation)().t,_=(0,d.useNavigation)(),F=(0,s.useAppDispatch)(),M=(0,s.useAppSelector)((function(e){return e.ticket})),E=M.dataTicketRedux,O=M.statusPartyRaw,R=(0,s.useAppSelector)((function(e){return e.common})),V=R.accessToken,A=(R.language,(0,s.useAppSelector)((function(e){return e.account})).dataAccount),z=(0,a.useState)(!1),B=(0,l.default)(z,2),L=B[0],N=B[1],U=(0,a.useState)([]),W=(0,l.default)(U,2),H=W[0],$=W[1],G=(0,a.useState)({width:o.Dimensions.get("screen").width,height:o.Dimensions.get("screen").height}),Y=(0,l.default)(G,2),q=(Y[0],Y[1]),K=(0,a.useState)(0),J=(0,l.default)(K,2),X=J[0],Q=J[1],Z=(0,a.useState)(!0),ee=(0,l.default)(Z,2),te=ee[0],ne=ee[1],ie=(0,a.useState)(),re=(0,l.default)(ie,2),le=re[0],ae=re[1],oe=(0,v.useReviewServices)(),ue=(0,x.useTicketServices)(),se=(0,w.useReviewEcontractServices)();(0,d.useFocusEffect)((0,a.useCallback)((function(){return"email"===D&&S.CacheUtils.getReloadWebview().then((function(e){ne("first"===e)})),Q((function(e){return e+1})),S.CacheUtils.clearReloadWebview()}),[C])),(0,a.useEffect)((function(){Promise.all([Ie(),Te(),Ce(),De()])}),[]),(0,a.useEffect)((function(){"quick"===k&&O&&be(JSON.parse((null==E?void 0:E.jsonXml)||"{}"))}),[O]),(0,a.useEffect)((function(){(0,I.isEmpty)(le)||ye(le)}),[le]);var de,ce,fe,pe,ye=(de=(0,r.default)((function*(e){var r,l,a=yield Ie(),o=null==a?void 0:a.some((function(e){return e.recipient.contact.email===(null==A?void 0:A.email)})),u=yield ue.getAuthorizationOfTaskSla({email:(null==A?void 0:A.email)||"binhntt6@fpt.com.vn",orgIn:(null==A?void 0:A.orgIn)||"/1978/5742",userTaskId:n,resourceId:null==E?void 0:E.id});if(null!=u&&u.length||o){var s=null==O||null==(r=O.party)||null==(l=r.recipients)?void 0:l.find((function(e){return e.id===n})),d="Disbursement"===(null==s?void 0:s.role);if(e){var f="";if("processing"===(null==s?void 0:s.status)?f="task-search":"accepted"===(null==s?void 0:s.status)?f="task-success":"rejected"===(null==s?void 0:s.status)&&(f="task-reject"),!f||"task-search"!==f)return;var p=1===t?"mine":"required";switch(null==s?void 0:s.role){case"Disbursement":default:_.navigate(c.NavigationName.ReviewFlow,{dataUserTask:{_status:f,_typeView:p,_userTaskId:n,checkDisbursement:d,modelerId:null==E?void 0:E.modelerId,reason:null==s?void 0:s.reason}});break;case"eID":var y={userTask:s,_recipientDetailsId:i,_userTaskId:n,_typeView:p,modelerId:null==E?void 0:E.modelerId,formData:E.formData?E.formData[0].formData:null,perms:"perms"};_.navigate(c.NavigationName.ReviewEIDScreen,{dataUserTask:y});break;case"eCollabo":var m={recipientDetailsId:i,_userTaskId:n,_status:f,_typeView:p,modelerId:null==E?void 0:E.modelerId,perms:"perms"};_.navigate(c.NavigationName.ReviewEcollaboFlow,{dataUserTask:m});break;case"eContract":me();case"eLMS":}}}else b.default.show({type:"error",text1:P("CM.noti"),text2:P("CM.noPermission")})})),function(e){return de.apply(this,arguments)}),me=(ce=(0,r.default)((function*(){try{var e,t="ewriter",i=yield se.getListAutomationEcontract(null==E?void 0:E.id,n),r=yield se.getEContractNotionDocResource(n);r&&null!=r&&r.data&&(t=(null==r||null==(e=r.data)?void 0:e.filter((function(e){return"ewriter"===e.resourceType||null===e.resourceType||"null"===e.resourceType}))).length>0?"ewriter":"ecollabo"),i&&(null==i?void 0:i.length)>0?ge(i[0].envelopeId):he(n,t,!0)}catch(e){}})),function(){return ce.apply(this,arguments)}),he=(fe=(0,r.default)((function*(e,t,n){var r=yield ve(),l={userTaskId:e,recipientDetailsId:i,statusParty:null==O?void 0:O.party,isForm:n,documentResource:t,owner:r,perms:"perms"};_.navigate(c.NavigationName.ReviewEcontractFlow,{dataUserTask:l,isFinish:!1})})),function(e,t,n){return fe.apply(this,arguments)}),ve=(pe=(0,r.default)((function*(){var e=yield se.getTicketModelerFlowStatusRaw(E.id);return e?null==e?void 0:e.createdBy:""})),function(){return pe.apply(this,arguments)}),ge=function(e){_.navigate(c.NavigationName.ReviewEcontractFlow,{dataUserTask:{envelopeId:e,perms:"perms"},isFinish:!0})};(0,a.useEffect)((function(){var e=o.Dimensions.addEventListener("change",(function(e){var t=e.screen,n={width:t.width,height:t.height};q(n)}));return function(){return e.remove()}}),[]);var xe,je,Se,we,be=function e(t){t&&t.childShapes&&t.childShapes.length>0&&t.childShapes.forEach((function(t){if("callactivity"===t.stencil.id.toLowerCase()||"eid"===t.stencil.id.toLowerCase()||"elms"===t.stencil.id.toLowerCase()||"econtract"===t.stencil.id.toLowerCase()||"disbursement"===t.stencil.id.toLowerCase()||"payment"===t.stencil.id.toLowerCase()||"settlement"===t.stencil.id.toLowerCase()||"ecollabo"===t.stencil.id.toLowerCase()||"eapi"===t.stencil.id.toLowerCase()){if(t.resourceId===n)return void ae(t)}else if(t.childShapes.length>0)return t.childShapes.forEach((function(e){return e.bounds.lowerRight.y=e.bounds.lowerRight.y+t.bounds.upperLeft.y,e.bounds.upperLeft.y=e.bounds.upperLeft.y+t.bounds.upperLeft.y,e.bounds.upperLeft.x=e.bounds.upperLeft.x+t.bounds.upperLeft.x,e.bounds.lowerRight.x=e.bounds.lowerRight.x+t.bounds.upperLeft.x,e})),e(t)}))},Ie=(xe=(0,r.default)((function*(){try{var e=yield oe.getRecipientDetaiImpl(E.id,V);return e?(F(g.ticketActions.setDataRecipientDetailImpl(e)),e):[]}catch(e){}})),function(){return xe.apply(this,arguments)}),Te=(je=(0,r.default)((function*(){try{var e=yield oe.getListTaskSLA(E.id);e&&F(g.ticketActions.setDataListRecipientsSLA(e))}catch(e){}})),function(){return je.apply(this,arguments)}),Ce=(Se=(0,r.default)((function*(){try{if(!E.modelerId)return;var e=null==E?void 0:E.formData.find((function(e){return!e.userTaskId})),t=yield oe.getFormDetailById(null==e?void 0:e.eformId,V);t&&F(g.ticketActions.setFormData(t))}catch(e){}})),function(){return Se.apply(this,arguments)}),De=(we=(0,r.default)((function*(){try{var e=yield ue.getModeler(E.modelerId,V);e&&F(g.ticketActions.setModeler(e))}catch(e){}})),function(){return we.apply(this,arguments)}),ke=function(e){var t=JSON.parse(e.nativeEvent.data);switch(null==t?void 0:t.action){case f.ACTION_TYPES.SHOW_USERTASK_INFO:return S.CacheUtils.saveReloadWebview(),void _.navigate(c.NavigationName.ReviewFlow,{dataUserTask:t.data});case f.ACTION_TYPES.SHOW_ECONTRACT_INFO:return void _.navigate(c.NavigationName.ReviewEcontractFlow,{dataUserTask:t.data,isFinish:!0});case f.ACTION_TYPES.SHOW_EXECUTOR_USER:return $(t.data),void N(!0);case f.ACTION_TYPES.SHOW_EID_INFO:return void _.navigate(c.NavigationName.ReviewEIDScreen,{dataUserTask:t.data});case f.ACTION_TYPES.CREATE_ECONTRACT_ENV:return void _.navigate(c.NavigationName.ReviewEcontractFlow,{dataUserTask:t.data,isFinish:!1});case f.ACTION_TYPES.SHOW_COLLABO_INFO:return void _.navigate(c.NavigationName.ReviewEcollaboFlow,{dataUserTask:t.data});default:return}},Pe=function(){return 1===t?`${null==E?void 0:E.id}?_typeView=mine&access_token=${V}`:"email"===D&&te?`${null==E?void 0:E.id}?_recipientDetailsId=${i}&_userTaskId=${n}&_typeView=required&access_token=${V}&from=${D}`:`${null==E?void 0:E.id}?_recipientDetailsId=${i}&_userTaskId=${n}&_typeView=required&access_token=${V}`};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(o.View,{style:{flex:1},children:1===t?(0,T.jsx)(u.default,{startInLoadingState:!0,source:{uri:(0,j.getConfig)().BASE_URL_TICKET+Pe()},onMessage:ke,webviewDebuggingEnabled:!0},X):(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(u.default,{startInLoadingState:!0,source:{uri:(0,j.getConfig)().BASE_URL_TICKET+Pe()},onMessage:ke,webviewDebuggingEnabled:!0},X)})}),(0,T.jsx)(p.default,{title:P("TK.listUser"),isVisible:L,onClose:function(){return N(!1)},renderContent:(0,T.jsx)(o.FlatList,{data:H,keyExtractor:function(e){return e.id},renderItem:function(e){var t,n,i=e.item;return(0,T.jsxs)(o.View,{style:{flexDirection:"row",columnGap:10,alignItems:"center",marginBottom:20},children:[(0,T.jsx)(y.Avatar,{source:{uri:i.avatar||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,T.jsxs)(o.View,{style:{flex:1},children:[(0,T.jsx)(m.default,{style:{flex:1},children:""+i.personalName}),(0,T.jsx)(m.default,{children:(null==i||null==(t=i.recipient)||null==(n=t.contact)?void 0:n.email)||"---"})]})]})}})})]})}},7006:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(7005),l=i(n(93238)),a=n(20880),o=i(n(43184)),u=n(47671);t.default=function(e){var t=e.url,n=e.onClose,i=e.name;return(0,u.jsxs)(r.SafeAreaView,{edges:["bottom","top"],style:{flex:1,backgroundColor:"#fff"},children:[(0,u.jsx)(o.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:i,onPressIconLeft:n}),(0,u.jsx)(l.default,{startInLoadingState:!0,injectedJavaScript:a.String.SCRIPT_SCALE_WEBVIEW,source:{uri:t}})]})}},89076:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),o=n(87841),u=i(n(76456)),s=n(7005),d=n(41995),c=n(46317),f=i(n(75672)),p=n(35708),y=i(n(24541)),m=i(n(81924)),h=n(14740),v=i(n(77389)),g=n(12638),x=n(60596),j=n(2884),S=n(40851),w=i(n(86933)),b=i(n(99746)),I=i(n(76644)),T=i(n(7006)),C=n(88e3),D=i(n(55529)),k=n(37106),P=n(47671);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}t.default=function(){var e=(0,j.useTranslation)().t,t=((0,h.useNavigation)(),(0,a.useState)(1)),n=(0,l.default)(t,2),i=n[0],_=n[1],F=(0,a.useState)(0),M=(0,l.default)(F,2),E=M[0],O=M[1],R=(0,a.useState)([]),V=(0,l.default)(R,2),A=V[0],z=V[1],B=(0,a.useState)([]),L=(0,l.default)(B,2),N=L[0],U=L[1],W=(0,a.useState)([]),H=(0,l.default)(W,2),$=H[0],G=H[1],Y=(0,a.useState)(!1),q=(0,l.default)(Y,2),K=q[0],J=q[1],X=(0,a.useState)(""),Q=(0,l.default)(X,2),Z=Q[0],ee=Q[1],te=(0,a.useState)(!1),ne=(0,l.default)(te,2),ie=ne[0],re=ne[1],le=(0,a.useState)(),ae=(0,l.default)(le,2),oe=ae[0],ue=ae[1],se=(0,a.useState)(""),de=(0,l.default)(se,2),ce=de[0],fe=de[1],pe=(0,g.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,ye=(0,g.useAppSelector)((function(e){return e.common})).accessToken,me=(0,k.useZutandStore)((function(e){return e})).statusTicketSelect,he=(0,S.useReviewServices)();(0,a.useEffect)((function(){ke(),Pe()}),[]),(0,a.useEffect)((function(){_e(i)}),[i]);var ve,ge,xe,je,Se,we,be,Ie,Te,Ce,De,ke=(ve=(0,r.default)((function*(){try{var e=yield he.getListFileByTicketId(pe.id);Fe(e)}catch(e){}})),function(){return ve.apply(this,arguments)}),Pe=(ge=(0,r.default)((function*(){try{var e=yield he.getStatusParty(null==pe?void 0:pe.id,ye);if(e){var t,n=null==(t=e.party)?void 0:t.recipients,i=yield he.getListFormIdByTicketId(null==pe?void 0:pe.id);if(!i)return;i=function(e){var t=new Set,n=[];for(var i of e)null===i.userTaskId?n.push(i):t.has(i.userTaskId)||(t.add(i.userTaskId),n.push(i));return n}(i),Promise.all(i.map((function(e){return he.getFormERequest({versionId:e.versionId},ye)}))).then((function(e){Me(null==e?void 0:e.map((function(e){var t,n,r,l;return Object.assign({},e,{userTaskId:null==(t=i)||null==(n=t.find((function(t){return t.formId===e.formId})))?void 0:n.userTaskId,versionId:null==(r=i)||null==(l=r.find((function(t){return t.formId===e.formId})))?void 0:l.versionId})})),n)}))}}catch(e){console.log("error",e)}})),function(){return ge.apply(this,arguments)}),_e=(xe=(0,r.default)((function*(e){try{var t={size:3,page:e-1,sort:"createdDate,desc",ticketId:null==pe?void 0:pe.id},n=yield he.getListFileRelative(t,ye);if(n){var i;if(0===(null==n||null==(i=n.data)?void 0:i.length))return void(e>1?_(e-1):(G([]),O(0)));O(null==n?void 0:n.totalRecords),Ee(null==n?void 0:n.data)}}catch(e){}})),function(e){return xe.apply(this,arguments)}),Fe=function(e){var t=e.map((function(e,t){var n;return{STT:String(t+1),keyName:(0,P.jsx)(y.default,{style:u.default.txtText,numberOfLines:1,children:null==e?void 0:e.name}),notionName:(null==e?void 0:e.notionName)||"---",createdBy:e.createdBy,documentSize:p.CommonUtils.getSize(null==e?void 0:e.fileSize),type:null==e||null==(n=e.name)?void 0:n.split(".").slice(-1)[0],lastModifiedDate:p.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate),action:Ue(!0,e)}}));z(t)},Me=function(e,t){var n=e.map((function(e,n){var i,r;return{STT:String(n+1),keyName:(0,P.jsx)(o.TouchableOpacity,{onPress:function(){re(!0),ue(e)},children:(0,P.jsx)(y.default,{style:u.default.txtText,numberOfLines:1,children:null==e?void 0:e.formName})}),createdBy:e.createdBy,notionName:null!=(i=null==t||null==(r=t.find((function(t){return e.userTaskId==t.id})))?void 0:r.notionName)?i:"Form quy trình"}}));U(n)},Ee=function(e){var t=e.map((function(e,t){var n,r;return{STT:String(3*(i-1)+1+t),keyName:(0,P.jsx)(y.default,{style:u.default.txtText,numberOfLines:1,children:null==e?void 0:e.fileName}),notionName:(null==e?void 0:e.notionName)||"---",createdBy:e.createdBy,documentSize:p.CommonUtils.getSize(e.size),type:null==e||null==(n=e.fileName)||null==(r=n.split("."))?void 0:r.pop(),lastModifiedDate:p.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate),action:Ue(!1,e)}}));G(t)},Oe=(je=(0,r.default)((function*(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0;if(null!=n&&n.name){var i,r;fe(t?null==n?void 0:n.name:null==(i=n.fileName)||null==(r=i.split("."))?void 0:r[0]);try{v.default.show({type:"info",text1:e("CM.noti"),text2:e("TK.viewFile")});var l=new FormData;if(t&&"ewriter"===n.documentType){var a=yield Le(n.notionId,n.id,null==n?void 0:n.name);l.append("file",a);var o=yield he.viewFile(l,ye);return void(1==(null==o?void 0:o.code)?(J(!0),ee(o.message)):v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.error")}))}var u=null==n?void 0:n.name;u=t?n.keyName:n.name;var s=n.bucketName;n.bucketName?(l.append("keyName",u),l.append("bucketName",s),l.append("beanName",n.beanName)):l.append("href",null==n?void 0:n.name);var d=yield he.viewFile(l,ye);1==(null==d?void 0:d.code)?(J(!0),ee(d.message)):v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.error")})}catch(t){v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.error")})}}else v.default.show({type:"error",text1:e("CM.noti"),text2:"File không có tên"})})),function(){return je.apply(this,arguments)}),Re=(Se=(0,r.default)((function*(t){try{yield he.deleteFileRelative(t,ye),yield _e(i),v.default.show({type:"success",text1:e("CM.noti"),text2:e("TK.deleteFileSuccess")})}catch(t){console.log(t),v.default.show({type:"error",text1:e("CM.noti"),text2:e("TK.deleteFileErr")})}})),function(e){return Se.apply(this,arguments)}),Ve=(we=(0,r.default)((function*(){try{var t=yield p.CommonUtils.handleGetFile();if(!t)return;var n=new FormData;n.append("uploadFile",t),n.append("attachmentJson",JSON.stringify({ticketId:null==pe?void 0:pe.id})),v.default.show({type:"info",text1:e("CM.noti"),text2:e("NT.notification.downloadingPleaseWait")}),(yield he.uploadFileRelative(n,ye))?(yield _e(i),v.default.show({type:"success",text1:e("CM.noti"),text2:e("TK.uploadFileSuccess")})):v.default.show({type:"error",text1:e("CM.noti"),text2:e("TK.uploadFileErr")})}catch(t){console.log(t),v.default.show({type:"error",text1:e("CM.noti"),text2:e("TK.uploadFileErr")})}})),function(){return we.apply(this,arguments)}),Ae=(be=(0,r.default)((function*(e,t){var n=e.fileName;n=t?e.keyName.replace("/","_"):e.fileName;var i=`${"android"===o.Platform.OS?w.default.DownloadDirectoryPath:w.default.DocumentDirectoryPath}/${(new Date).getTime()}_${n}`;t?yield Ne(i,e.id,null==e?void 0:e.notionId):e.bucketName?yield Be(i,e.id):yield ze(i,e.name)})),function(e,t){return be.apply(this,arguments)}),ze=(Ie=(0,r.default)((function*(t,n){var i={fromUrl:n,toFile:t,background:!0,begin:function(e){},progress:function(e){e.bytesWritten,e.contentLength},connectionTimeout:5e3};try{200===(yield w.default.downloadFile(i).promise).statusCode?"ios"===o.Platform.OS&&(yield o.Share.share({url:t})).action==o.Share.dismissedAction?v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")}):v.default.show({type:"success",text1:e("CM.noti"),text2:e("CM.downloadSuccess")}):v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}catch(t){v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}})),function(e,t){return Ie.apply(this,arguments)}),Be=(Te=(0,r.default)((function*(t,n){try{v.default.show({type:"info",text1:e("CM.noti"),text2:e("CM.pleaseWait")});var i=yield b.default.fetch("GET",`${(0,C.getConfig)().BASE_URL}/services/erequest/api/attachments/download-file?attachmentId=${n}`).then((function(e){return 200==e.info().status?e.base64():null})).catch((function(){return null}));if(i){try{yield w.default.writeFile(t,i,"base64")}catch(e){console.log(e)}"ios"===o.Platform.OS&&(yield o.Share.share({url:t})).action==o.Share.dismissedAction?v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")}):v.default.show({type:"success",text1:e("CM.noti"),text2:e("CM.downloadSuccess")})}else v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}catch(t){v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}})),function(e,t){return Te.apply(this,arguments)}),Le=(Ce=(0,r.default)((function*(e,t,n){try{var i,r=null==n||null==(i=n.split("."))?void 0:i[1],l=`${b.default.fs.dirs.DocumentDir}/${(new Date).getTime().toString()}.${r}`,a=yield b.default.config({path:l}).fetch("GET",`${(0,C.getConfig)().BASE_URL}/services/erequest/api/tickets/${pe.id}/userTaskId/${e}/fileId/${t}`).then((function(e){return 200==e.info().status?e.path():null})).catch((function(){return null}));return{uri:"ios"===o.Platform.OS?a:"file://"+a,name:`${(new Date).getTime().toString()}.${r}`,type:p.CommonUtils.getMimeType(n)}}catch(e){console.log(e)}})),function(e,t,n){return Ce.apply(this,arguments)}),Ne=(De=(0,r.default)((function*(t,n,i){try{var r=yield b.default.fetch("GET",`${(0,C.getConfig)().BASE_URL}/services/erequest/api/tickets/${pe.id}/userTaskId/${i}/fileId/${n}/content`).then((function(e){return 200==e.info().status?e.base64():null})).catch((function(){return null}));r?(yield w.default.writeFile(t,r,"base64"),"ios"===o.Platform.OS&&(yield o.Share.share({url:t})).action==o.Share.dismissedAction?v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")}):v.default.show({type:"success",text1:e("CM.noti"),text2:e("CM.downloadSuccess")})):v.default.show({type:"error",text2:e("CM.downloadFail")})}catch(t){v.default.show({type:"error",text2:e("CM.downloadFail")})}})),function(e,t,n){return De.apply(this,arguments)}),Ue=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return(0,P.jsxs)(o.View,{style:u.default.ctnAction,children:[(0,P.jsx)(o.TouchableOpacity,{onPress:function(){return Oe(e,t)},hitSlop:(0,d.SizeDP)(15),children:(0,P.jsx)(c.IconView,{width:(0,d.SizeDP)(16),height:(0,d.SizeDP)(16)})}),(0,P.jsx)(o.TouchableOpacity,{onPress:function(){return Ae(t,e)},hitSlop:(0,d.SizeDP)(15),children:(0,P.jsx)(c.IconDownload,{width:(0,d.SizeDP)(16),height:(0,d.SizeDP)(16)})}),!e&&t.allowDeleted&&(null==pe?void 0:pe.ticketStatus)!==x.Status.voided&&(null==pe?void 0:pe.ticketStatus)!==x.Status.rejected&&(0,P.jsx)(o.TouchableOpacity,{onPress:function(){var e;return Re(null==t||null==(e=t.id)?void 0:e.toString())},hitSlop:(0,d.SizeDP)(15),children:(0,P.jsx)(c.IconTrash,{width:(0,d.SizeDP)(16),height:(0,d.SizeDP)(16)})})]})};return(0,P.jsxs)(s.SafeAreaView,{style:{flex:1},edges:[],children:[(0,P.jsxs)(o.ScrollView,{showsVerticalScrollIndicator:!1,children:[(0,P.jsxs)(o.View,{style:u.default.ctnForm,children:[(0,P.jsxs)(o.View,{style:u.default.ctnView,children:[(0,P.jsx)(y.default,{style:u.default.txtTitle,children:e("TK.docRelative")}),me===x.Status.processing&&(0,P.jsx)(o.TouchableOpacity,{onPress:Ve,hitSlop:(0,d.SizeDP)(15),children:(0,P.jsx)(c.IconUpload,{width:(0,d.SizeDP)(24),height:(0,d.SizeDP)(24)})})]}),(0,P.jsx)(f.default,{stickyLeft:!0,stickyColumnLeftIndex:1,tableHeaders:["STT","keyName","notionName","createdBy","documentSize","type","lastModifiedDate","action"],tableData:$}),E>0&&(0,P.jsx)(m.default,{collectionSize:E,currentPage:i,pageSize:3,onPageChange:function(e){return _(e)}})]}),(0,P.jsxs)(o.View,{style:u.default.ctnForm,children:[(0,P.jsx)(y.default,{style:u.default.txtTitle,children:e("TK.templateInfo")}),(0,P.jsx)(f.default,{stickyLeft:!0,stickyColumnLeftIndex:1,tableHeaders:["STT","keyName","notionName","createdBy","documentSize","type","lastModifiedDate","action"],tableData:A})]}),(0,P.jsxs)(o.View,{style:u.default.ctnForm,children:[(0,P.jsx)(y.default,{style:u.default.txtTitle,children:e("TK.templateForm")}),(0,P.jsx)(f.default,{stickyLeft:!1,tableHeaders:["STT","keyName","createdBy","notionName"],tableData:N})]})]}),(0,P.jsx)(I.default,{isVisible:K,children:(0,P.jsx)(T.default,{url:Z,onClose:function(){return J(!1)},name:ce})}),(0,P.jsx)(I.default,{isVisible:ie,children:(0,P.jsx)(D.default,{onClose:function(){return re(!1)},isOnlyView:!0,readOnly:!0,versionId:null==oe?void 0:oe.versionId,data:{_userTaskId:null==oe?void 0:oe.userTaskId,_ticketId:null==pe?void 0:pe.id,formId:null==oe?void 0:oe.formId},nameHeader:null==oe?void 0:oe.formName})})]})}},76456:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),l=n(41995);t.default=i.StyleSheet.create({container:{justifyContent:"center",alignItems:"center"},txtTitle:{fontSize:r.FontSize.FontBase,fontFamily:r.Font.InterSemiBold600,color:r.Color.colorText},ctnForm:{marginLeft:(0,l.SizeDP)(8),marginTop:(0,l.SizeDP)(8),rowGap:(0,l.SizeDP)(15)},ctnAction:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,l.SizeDP)(10)},txtText:{fontSize:r.FontSize.FontTiny,fontFamily:r.Font.InterRegular400,color:"#366ae2"},ctnView:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginRight:(0,l.SizeDP)(12)}})},27163:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),o=i(n(93238)),u=n(12638),s=n(7005),d=n(20880),c=n(88e3),f=n(40851),p=n(87841),y=i(n(24541)),m=n(32207),h=n(2884),v=n(75463),g=i(n(98327)),x=n(14740),j=n(47671);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}t.default=function(){var e,t=(0,h.useTranslation)().t,n=(0,x.useRoute)(),i=(null==n||null==(e=n.params)?void 0:e.ticketId)||"",S=(0,a.useRef)(null),w=(0,u.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,b=(0,u.useAppSelector)((function(e){return e.common})).accessToken,I=(0,a.useState)(),T=(0,l.default)(I,2),C=T[0],D=T[1],k=(0,a.useState)([]),P=(0,l.default)(k,2),_=P[0],F=P[1],M=(0,a.useState)(),E=(0,l.default)(M,2),O=E[0],R=E[1],V=(0,a.useState)(),A=(0,l.default)(V,2),z=A[0],B=A[1],L=(0,a.useState)(!1),N=(0,l.default)(L,2),U=N[0],W=N[1],H=(0,f.useReviewServices)();(0,a.useEffect)((function(){Y(null)}),[]);var $,G,Y=($=(0,r.default)((function*(e){var n={ticketId:(null==w?void 0:w.id)||i,userTaskId:null,version:e};try{var r=yield H.getFormVersionByTicketAndUserTaskId(n,b);if(r&&null===e){var l=Array.from(Array(Math.ceil(r.versionUserTask))).map((function(e,t){return t+1})).map((function(e,n){return{id:e,key:`${t("CM.version")} `+e,value:`${t("CM.version")} `+e}}));F(l),B(l[l.length-1])}return D(r),r}catch(e){console.log("error getSubFromData",e)}})),function(e){return $.apply(this,arguments)}),q=(G=(0,r.default)((function*(e){W(!0);var t=yield Y(e);if(t){var n=null==t?void 0:t.formData,i=`window.postMessage('${JSON.stringify({type:"postFormEdit",isReadonly:!0,data:n}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;setTimeout((function(){var e;null==S||null==(e=S.current)||e.injectJavaScript(i),W(!1)}),800)}})),function(e){return G.apply(this,arguments)});return(0,j.jsxs)(s.SafeAreaView,{style:{flex:1},edges:[],children:[_.length>0&&(0,j.jsxs)(p.View,{style:g.default.selectForm,children:[(0,j.jsx)(y.default,{children:t("CM.selectVersion")}),(0,j.jsx)(v.OverflowMenuCM,{selectedIndex:O,listData:_,setSelectedIndex:function(e){var t;e&&(R(e),B(_[null==e?void 0:e.row]),q(null==(t=_[null==e?void 0:e.row])?void 0:t.id))},selectedTitle:(0,j.jsxs)(p.View,{style:g.default.version,children:[(0,j.jsx)(y.default,{children:null==z?void 0:z.value}),U&&(0,j.jsx)(m.Spinner,{size:"small"})]})})]}),(0,j.jsx)(o.default,{nestedScrollEnabled:!0,ref:S,startInLoadingState:!0,onMessage:function(e){var t=JSON.parse(e.nativeEvent.data);"e-from"===(null==t?void 0:t.result)&&q(null)},javaScriptEnabled:!0,injectedJavaScript:d.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,webviewDebuggingEnabled:!0,source:{uri:(0,c.getConfig)().BASE_URL_FORM+(null==C?void 0:C.version)}})]})}},98327:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({version:{borderWidth:1,borderColor:"rgba(0, 53, 128, .35)",borderRadius:8,paddingHorizontal:8,paddingVertical:5,flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:4},selectForm:{padding:16,alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:16}})},96237:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HISTORY_ACTION=void 0;var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),u=n(87841),s=i(n(24997)),d=i(n(24541)),c=n(12638),f=n(35708),p=n(7005),y=n(41995),m=n(2884),h=n(2543),v=n(11671),g=n(32207),x=n(47671);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}var S=t.HISTORY_ACTION={CREATE:"add",PUBLIC:"public",UNPUBLIC:"unpublic",ACTIVE:"active",INACTIVE:"inactive",UPDATE:"edit",DELETE:"delete",ASSIGN:"assign",REQUEST_APP:"request_approve",COMMENT:"comment",REJECT:"reject_approve",REJECT_CONSIDER:"reject_consider",AUTHORITY:"authority",REQUEST_UPDATE:"request_update",SIGNING:"signing",UPLOAD:"upload",CANCEL:"cancel",EDIT_COMMENT:"edit_comment",REJECT_APPROVE:"reject_approve",REVIEW_CONDUCT:"review_conduct"};t.default=function(){var e=(0,m.useTranslation)().t,t=(0,c.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,n=(0,o.useState)(0),i=(0,a.default)(n,2),j=i[0],w=i[1],b=(0,o.useState)(0),I=(0,a.default)(b,2),T=I[0],C=I[1],D=(0,o.useState)(!1),k=(0,a.default)(D,2),P=k[0],_=k[1],F=(0,o.useState)([]),M=(0,a.default)(F,2),E=M[0],O=M[1],R=(0,c.useAppSelector)((function(e){return e.common})).accessToken,V=(0,v.useTicketServices)();(0,o.useEffect)((function(){(0,l.default)((function*(){yield z(j)}))()}),[j]);var A,z=(A=(0,l.default)((function*(e){try{var n=yield V.getTicketHistories(e,t.id,R);O(0===e?null==n?void 0:n.data:[].concat((0,r.default)(E),(0,r.default)(null==n?void 0:n.data))),C(n.totalRecords)}catch(e){console.error(e)}})),function(e){return A.apply(this,arguments)}),B=function(e,t,n){return(0,x.jsx)(u.View,{style:[{backgroundColor:e},s.default.ctnViewIcon],children:(0,x.jsx)(g.Icon,{fill:n,name:t,width:15,height:15})})},L=function(e){switch(e){case S.CREATE:return B("#F2ECFD","plus","#6F2CED");case S.REQUEST_APP:return B("#E8F7EF","file","#39AC6D");case S.COMMENT:return B("#f3f5f8","message-circle","");case S.REJECT:return B("#FCEEED","close","#E14337");case S.REJECT_CONSIDER:return B("#FCEEED","minus","#E14337");case S.AUTHORITY:return B("#F2ECFD","swap","#6F2CED");case S.REQUEST_UPDATE:return B("#FFF3EB","arrow-circle-left","#FC6B03");case S.SIGNING:return B("#E8F7EF","edit","#39AC6D");case S.UPLOAD:return B("#FFF3EB","cloud-upload-outline","#FC6B03");case S.CANCEL:return B("#FCEEED","minus","#E14337");case S.EDIT_COMMENT:return B("#f3f5f8","edit-2-outline","");case S.REJECT_APPROVE:return B("#FCEEED","close","#E14337");case S.REVIEW_CONDUCT:return B("#E8F7EF","checkmark","#39AC6D");default:return(0,x.jsx)(u.View,{style:s.default.ctnViewIcon})}};return(0,x.jsx)(p.SafeAreaView,{style:s.default.container,edges:["bottom"],children:E.length>0&&(0,x.jsx)(u.View,{children:(0,x.jsx)(u.FlatList,{keyExtractor:function(e){return e.id},refreshing:P,onRefresh:function(){0!==j&&_(!0),w(0)},data:E,onEndReached:function(){E.length<T&&w(j+1)},onEndReachedThreshold:.5,renderItem:function(t){var n=t.item,i=t.index;return(0,x.jsx)(x.Fragment,{children:!(0,h.isNull)(n.createdBy)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(u.View,{style:s.default.ctnItem,children:[L(n.action),(0,x.jsxs)(u.View,{style:{rowGap:(0,y.SizeDP)(4)},children:[(0,x.jsx)(d.default,{style:s.default.title,children:e(`TK.transaction-history.action.${n.action}`)}),(0,x.jsx)(u.View,{style:s.default.ctnDes,children:(0,x.jsx)(d.default,{style:s.default.Des,children:`${f.DateUtils.convertDateToDDMMYYYY_H_M(n.createdDate)} ${e("TK.by")} ${n.createdBy}`})})]})]}),E.length-1!==i&&(0,x.jsx)(u.View,{style:s.default.tabHoz})]})})}})})})}},24997:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(i,l,o):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(41995)),l=n(20880);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({container:{flex:1},ctnItem:{paddingHorizontal:(0,r.SizeDP)(16),paddingVertical:(0,r.SizeDP)(8),flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:(0,r.SizeDP)(16)},ctnDes:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:(0,r.SizeDP)(10)},ctnAction:{width:(0,r.SizeDP)(24),height:(0,r.SizeDP)(24),backgroundColor:"blue",borderRadius:(0,r.SizeDP)(12),justifyContent:"center",alignItems:"center"},tabHoz:{width:(0,r.SizeDP)(2),height:(0,r.SizeDP)(26),backgroundColor:"rgba(0, 53, 128, 0.15)",marginLeft:(0,r.SizeDP)(28)},title:{fontSize:r.default.FontSmall,fontFamily:l.Font.InterSemiBold600,color:l.Color.colorText},Des:{fontSize:r.default.FontTiny,fontFamily:l.Font.InterRegular400,color:l.Color.Text07},ctnViewIcon:{width:24,height:24,borderRadius:12,alignItems:"center",justifyContent:"center"}})},32251:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),o=n(87841),u=n(12638),s=i(n(75672)),d=n(35708),c=n(2884),f=n(32207),p=i(n(24541)),y=i(n(19767)),m=n(60596),h=n(11671),v=n(47671);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}t.default=function(){var e=(0,c.useTranslation)().t,t=(0,a.useState)(),n=(0,l.default)(t,2),i=n[0],g=n[1],x=(0,a.useState)(0),j=(0,l.default)(x,2),S=j[0],w=j[1],b=(0,u.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,I=(0,h.useTicketServices)(),T=(0,o.useWindowDimensions)(),C=T.width;T.height;(0,a.useEffect)((function(){k()}),[]);var D,k=(D=(0,r.default)((function*(){var e=yield I.getSla(b.id);e&&_(e)})),function(){return D.apply(this,arguments)}),P=function(e){switch(F(e)){case m.Status.processing:return{color:"#7F43EF",bgColor:"#F2ECFD"};case m.Status.accepted:case m.Status.completed:case"onTime":return{color:"#39AC6D",bgColor:"#E8F7EF"};case m.Status.voided:case m.Status.rejected:case"late":return{color:"#F05959",bgColor:"rgba(251, 213, 213, 1)"};default:return{}}},_=function(t){var n=t.map((function(t,n){var i,r,l;return{STT:String(n+1),notionName:t.notionName||"---",createdBy:t.owner,status:(0,v.jsx)(o.View,{style:{backgroundColor:null==(i=P(t))?void 0:i.bgColor,borderRadius:4,paddingHorizontal:4,paddingVertical:2},children:(0,v.jsx)(p.default,{style:{color:null==(r=P(t))?void 0:r.color,fontSize:12},children:e(`TK.${F(t)}`)})}),actualStartSate:t.estimateDate?d.DateUtils.convertDateToDDMMYYYY_H_M(t.estimateDate):"---",eventStartDate:t.startDate?d.DateUtils.convertDateToDDMMYYYY_H_M(t.startDate):"---",executionTime:t.totalTime?t.totalTime:"---",sla:(0,v.jsx)(p.default,{style:{color:null==(l=P(t))?void 0:l.color,fontSize:12},children:O(null==t?void 0:t.estimateDate,null==t?void 0:t.startDate,null==t?void 0:t.finishDate)})}}));g(n)},F=function(e){return b.ticketStatus===m.Status.voided&&e.status===m.Status.processing?m.Status.voided:"accepted"!=e.status&&"rejected"==b.status?"rejected":"accepted"==e.status&&e.delayTime?"late":"accepted"==e.status&&e.estimateDate?"onTime":e.status},M=function(){if(new Date(b.finishDate)<new Date(b.estimateDate)){var e=E(b.finishDate,b.createdDate)/E(b.estimateDate,b.createdDate);return{positionOfEstimateDate:{top:-20,right:.1*C/2-10},positionOfPopupEstimateDate:{top:-58,right:.1*C/2-10},positionOfFinishDate:{bottom:-20,right:.95*C-.1*C/2-e*C*.85-10},positionOfPopupFinishDate:{bottom:-58,right:e<.6?.95*C-.1*C/2-e*C*.85-10-S+30:.95*C-.1*C/2-e*C*.85-10},width:e*C*.85,bgColor:"completed"===b.ticketStatus?"#d9f2e4":"#40bf79",typeOfArrow:{estimateDate:"arrow-down",finishDate:"arrow-up"}}}var t=E(b.estimateDate,b.createdDate)/E(b.finishDate,b.createdDate);return{positionOfEstimateDate:{bottom:-20,right:(null==b?void 0:b.ticketStatus)!==m.Status.voided?.95*C-.1*C/2-t*C*.85-10:C-.95*C-10},positionOfPopupEstimateDate:{bottom:-58,right:(null==b?void 0:b.ticketStatus)!==m.Status.voided?t<.6?.95*C-.1*C/2-t*C*.85-10-S+30:.95*C-.1*C/2-t*C*.85-10:C-.95*C-10},positionOfFinishDate:{top:-20,right:.1*C/2-10},positionOfPopupFinishDate:{top:-58,right:.1*C/2-10},width:t*C*.85,bgColor:"completed"===b.ticketStatus?"#d9f2e4":"#40bf79",typeOfArrow:{estimateDate:"arrow-up",finishDate:"arrow-down"}}},E=function(e,t){var n=0;if(e&&t){var i=new Date(e);n=new Date(t).getTime()-i.getTime()}return n},O=function(e,t,n){var i,r=E(t,n),l=E(t,e);i=Math.abs(l-r);var a=Math.floor(i/864e5),o=Math.floor((i-24*a*60*60*1e3)/36e5),u=Math.floor((i-24*a*60*60*1e3-60*o*60*1e3)/6e4),s=Math.floor((i-24*a*60*60*1e3-60*o*60*1e3-60*u*1e3)/1e3);return i?a+"d"+o%60+"h"+u%60+"m"+s+"s":"---"};return(0,v.jsx)(o.View,{style:{flex:1},children:(0,v.jsx)(o.ScrollView,{children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.View,{style:y.default.ctnSLA,children:(0,v.jsxs)(o.View,{style:[{width:.95*C},y.default.ctnBody],children:[(0,v.jsx)(o.TouchableOpacity,{style:{position:"absolute",top:-20,left:.1*C/2-10,zIndex:1},children:(0,v.jsx)(f.Icon,{width:20,height:20,name:"arrow-down"})}),(0,v.jsxs)(o.View,{style:[{top:-58,left:.1*C/2-20},y.default.ctnDate],children:[(0,v.jsxs)(p.default,{style:y.default.size,children:[e("SR.created_at"),": "]}),(0,v.jsx)(p.default,{style:y.default.size,children:d.DateUtils.convertDateToDDMMYYYY_H_M(b.createdDate)})]}),(0,v.jsx)(o.TouchableOpacity,{style:[{position:"absolute",zIndex:1},M().positionOfEstimateDate],children:(0,v.jsx)(f.Icon,{width:20,height:20,name:M().typeOfArrow.estimateDate})}),(0,v.jsxs)(o.View,{style:[M().positionOfPopupEstimateDate,y.default.ctnDate],children:[(0,v.jsxs)(p.default,{style:y.default.size,children:[e("TK.estimateDate"),": "]}),(0,v.jsx)(p.default,{style:y.default.size,children:d.DateUtils.convertDateToDDMMYYYY_H_M(b.estimateDate)})]}),"completed"===b.ticketStatus&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.TouchableOpacity,{style:[{position:"absolute",zIndex:1},M().positionOfFinishDate],children:(0,v.jsx)(f.Icon,{width:20,height:20,name:M().typeOfArrow.finishDate})}),(0,v.jsxs)(o.View,{onLayout:function(e){w(e.nativeEvent.layout.width)},style:[M().positionOfPopupFinishDate,y.default.ctnDate],children:[(0,v.jsxs)(p.default,{style:y.default.size,children:[e("TK.finishDate"),": "]}),(0,v.jsx)(p.default,{style:y.default.size,children:d.DateUtils.convertDateToDDMMYYYY_H_M(b.finishDate)})]})]}),(0,v.jsx)(o.View,{style:y.default.line}),(0,v.jsx)(o.View,{style:{height:30,backgroundColor:"#40bf79",width:.85*C},children:(0,v.jsx)(o.View,{style:{height:30,backgroundColor:M().bgColor,width:M().width}})}),(0,v.jsx)(o.View,{style:y.default.line})]})}),(0,v.jsx)(f.Divider,{style:{marginVertical:10}}),(0,v.jsx)(s.default,{tableHeaders:["STT","notionName","createdBy","status","actualStartSate","eventStartDate","executionTime","sla"],tableData:i||[],stickyLeft:!0,stickyColumnLeftIndex:1})]})})})}},19767:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({container:{justifyContent:"center",alignItems:"center",backgroundColor:"#2c3e50"},line:{height:30,backgroundColor:"#fff",width:3},ctnSLA:{alignItems:"center",justifyContent:"center",marginTop:80,marginBottom:80},ctnBody:{height:30,backgroundColor:"#d9d9d9",borderRadius:8,alignItems:"center",justifyContent:"center",flexDirection:"row",position:"relative"},ctnDate:{position:"absolute",zIndex:1,borderRadius:8,borderWidth:1,borderColor:"#cfb9f9",paddingHorizontal:6,paddingVertical:8,backgroundColor:"#f2ecfd"},size:{fontSize:11}})},90487:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),o=n(87841),u=n(35708),s=n(12638),d=n(46317),c=n(41995),f=i(n(75672)),p=i(n(81924)),y=n(2884),m=n(11671),h=i(n(24541)),v=i(n(37899)),g=n(60596),x=i(n(97667)),j=n(47671);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}t.default=function(){var e=(0,y.useTranslation)().t,t=(0,a.useState)([]),n=(0,l.default)(t,2),i=n[0],S=n[1],w=(0,a.useState)(1),b=(0,l.default)(w,2),I=b[0],T=b[1],C=(0,s.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,D=(0,m.useTicketServices)(),k=(0,a.useState)(1),P=(0,l.default)(k,2),_=P[0],F=P[1],M=(0,s.useAppSelector)((function(e){return e.common})).accessToken;(0,a.useEffect)((function(){O(_)}),[_]);var E,O=(E=(0,r.default)((function*(e){try{var t=yield D.getTicketRelatives(C.id,e-1,8,M);A(t.content),T(t.totalElements)}catch(e){}})),function(e){return E.apply(this,arguments)}),R=function(e){switch(e){case g.Status.completed:return V(v.default.completed,v.default.completed01,g.Status.completed);case g.Status.draft:return V(v.default.draft,v.default.draft01,g.Status.draft);case g.Status.voided:return V(v.default.voided,v.default.voided01,g.Status.voided);case g.Status.rejected:return V(v.default.rejected,v.default.rejected01,g.Status.rejected);case g.Status.processing:return V(v.default.processing,v.default.processing01,g.Status.processing)}},V=function(t,n,i){return(0,j.jsx)(o.View,{style:[{backgroundColor:n},x.default.ctnContent],children:(0,j.jsx)(h.default,{style:{color:t},children:e(`TK.${i}`)})})},A=function(e){var t=e.map((function(e,t){return{STT:String(8*(_-1)+1+t),title:null==e?void 0:e.title,serviceName:e.serviceName,ticketStatus:R(e.ticketStatus),createdBy:null==e?void 0:e.createdBy,createdDate:u.DateUtils.convertDateToDDMMYYYY_H_M(e.createdDate),lastModifiedDate:u.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate)}}));S(t)};return(0,j.jsx)(o.View,{style:{flex:1},children:i.length>0?(0,j.jsx)(o.ScrollView,{children:(0,j.jsxs)(o.View,{style:{flex:1},children:[(0,j.jsx)(o.View,{style:{flex:1,paddingVertical:(0,c.SizeDP)(10),marginLeft:(0,c.SizeDP)(10)},children:(0,j.jsx)(f.default,{tableData:i,tableHeaders:["STT","title","serviceName","ticketStatus","createdBy","createdDate","lastModifiedDate"]})}),I>0&&(0,j.jsx)(p.default,{collectionSize:I,currentPage:_,pageSize:8,onPageChange:function(e){return F(e)}})]})}):(0,j.jsxs)(o.View,{style:{alignItems:"center",justifyContent:"center",flex:1},children:[(0,j.jsx)(d.IconEmpty,{width:(0,c.SizeDP)(200),height:(0,c.SizeDP)(150)}),(0,j.jsx)(h.default,{children:e("CM.emptyData")})]})})}},97667:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({ctnContent:{paddingHorizontal:8,paddingVertical:4,borderRadius:4,alignItems:"center",justifyContent:"center"}})},36913:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),l=n(21527),a=i(n(73639)),o=i(n(27163)),u=i(n(96237)),s=i(n(90487)),d=i(n(97433)),c=i(n(89076)),f=i(n(32251)),p=i(n(24541)),y=n(87841),m=n(41995),h=n(2884),v=n(47671);t.default=function(e){var t=e.selectTabBottom,n=e.userTaskId,i=e.recipientDetailsId,g=e.isRealoadWebview,x=e.notifyActionType,j=e.typeView,S=(0,l.useState)({key:"background",title:"Tổng quan"}),w=(0,r.default)(S,2),b=w[0],I=w[1],T=(0,l.useRef)(null),C=(0,l.useState)({width:y.Dimensions.get("screen").width,height:y.Dimensions.get("screen").height}),D=(0,r.default)(C,2),k=D[0],P=D[1];(0,l.useEffect)((function(){var e=y.Dimensions.addEventListener("change",(function(e){var t=e.screen;P({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]);var _=(0,h.useTranslation)().t,F=(0,l.useState)([{key:"background",title:"Tổng quan"},{key:"flow",title:"Thông tin giao dịch"},{key:"hsitoryTicket",title:"Lịch sử giao dịch"},{key:"ticketRelative",title:"Giao dịch liên quan"},{key:"sla",title:"Thông tin SLA"},{key:"document",title:"Tài liệu đính kèm"}]),M=(0,r.default)(F,1)[0],E=function(e){var t,n=Math.floor(e);null==T||null==(t=T.current)||t.scrollToIndex({animated:!0,index:""+n,viewOffset:k.width/3})};return(0,v.jsxs)(y.View,{style:{flex:1},children:[(0,v.jsx)(y.View,{children:(0,v.jsx)(y.FlatList,{ref:T,horizontal:!0,data:M,keyExtractor:function(e,t){return String(e.key)},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,initialScrollIndex:0,renderItem:function(e){var t=e.item,n=e.index;return(0,v.jsx)(y.TouchableOpacity,{style:[d.default.ctnMainTab,b.key===t.key&&d.default.activeTab],onPress:function(){I(t),E(n)},children:(0,v.jsx)(p.default,{style:[d.default.tabBar,b.key===t.key&&d.default.colorActive],children:_(`TK.${t.key}`)})})}})}),(0,v.jsx)(y.View,{style:{height:(0,m.SizeDP)(6),backgroundColor:"#F8FAFE"}}),(0,v.jsx)(y.View,{style:{flex:1},children:function(e){switch(e.key){case"background":return(0,v.jsx)(a.default,{userTaskId:n,recipientDetailsId:i,selectTabBottom:t,isRealoadWebview:g,notifyActionType:x,typeView:j});case"flow":return(0,v.jsx)(o.default,{});case"document":return(0,v.jsx)(c.default,{});case"hsitoryTicket":return(0,v.jsx)(u.default,{});case"ticketRelative":return(0,v.jsx)(s.default,{});case"sla":return(0,v.jsx)(f.default,{});default:return(0,v.jsx)(y.View,{})}}(b)})]})}},97433:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),l=n(41995);t.default=i.StyleSheet.create({tabBar:{fontSize:r.FontSize.FontSmall,fontFamily:r.Font.InterRegular400,textAlign:"center",lineHeight:(0,l.SizeDP)(16)},ctnMainTab:{paddingHorizontal:(0,l.SizeDP)(16),paddingVertical:(0,l.SizeDP)(12)},activeTab:{borderBottomWidth:(0,l.SizeDP)(4),borderBottomColor:r.Color.BgPrimary},colorActive:{color:r.Color.BgPrimary}})},35648:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),l=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(21527)),u=n(87841),s=n(2884),d=n(40851),c=i(n(66771)),f=i(n(6663)),p=n(32207),y=i(n(24541)),m=n(12638),h=n(47671);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}t.default=function(e){var t=e.onSelect,n=e.placeholder,i=void 0===n?"TK.select":n,v=(0,s.useTranslation)().t,g=(0,o.useState)(!1),x=(0,a.default)(g,2),j=x[0],S=x[1],w=(0,o.useState)(null),b=(0,a.default)(w,2),I=b[0],T=b[1],C=(0,o.useState)(""),D=(0,a.default)(C,2),k=D[0],P=D[1],_=(0,o.useState)([]),F=(0,a.default)(_,2),M=F[0],E=F[1],O=(0,o.useState)(0),R=(0,a.default)(O,2),V=R[0],A=R[1],z=(0,o.useState)(0),B=(0,a.default)(z,2),L=B[0],N=B[1],U=(0,o.useState)(!1),W=(0,a.default)(U,2),H=W[0],$=W[1],G=(0,m.useAppSelector)((function(e){return e.account})).dataAccount,Y=(0,c.default)(k,500),q=(0,d.useReviewServices)();(0,o.useEffect)((function(){J(0,Y)}),[Y]);var K,J=(K=(0,l.default)((function*(e,t){try{var n={page:e,size:20},i={advanced:!0,orgIn:"/1833/5390/5392/5943",q:t.trim().toLowerCase(),resource:"table_user"},l=yield q.getUserInfoModel(n,i);l&&(E(0===e?l.data.filter((function(e){return e.email!==G.email})):[].concat((0,r.default)(M),(0,r.default)(l.data)).filter((function(e){return e.email!==G.email}))),N(l.totalRecords))}catch(e){}finally{$(!1)}})),function(e,t){return K.apply(this,arguments)});return(0,h.jsxs)(u.View,{style:f.default.container,children:[(0,h.jsxs)(u.View,{style:f.default.selectContainer,children:[(0,h.jsx)(u.TouchableOpacity,{style:f.default.select,onPress:function(){S(!0),P("")},children:(0,h.jsx)(u.Text,{style:f.default.selectText,children:(null==I?void 0:I.email)||v(i)})}),I&&(0,h.jsx)(u.TouchableOpacity,{style:f.default.clearButton,onPress:function(){T(null),t(null)},children:(0,h.jsx)(p.Icon,{name:"close",width:20,height:20})})]}),(0,h.jsx)(u.Modal,{visible:j,animationType:"slide",transparent:!0,children:(0,h.jsx)(u.SafeAreaView,{style:f.default.modalContainer,children:(0,h.jsxs)(u.View,{style:f.default.modalContent,children:[(0,h.jsx)(u.TextInput,{style:f.default.searchInput,placeholder:v("CM.search"),value:k,onChangeText:P}),(0,h.jsx)(u.FlatList,{refreshing:H,onRefresh:function(){$(!0),A(0),J(0,Y)},data:M,renderItem:function(e){var n=e.item;return(0,h.jsxs)(u.TouchableOpacity,{style:f.default.item,onPress:function(){return function(e){T(e),t(e),S(!1)}(n)},children:[(0,h.jsx)(u.Image,{width:32,height:32,borderRadius:16,source:{uri:n.imageUrl||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,h.jsxs)(u.View,{children:[(0,h.jsx)(y.default,{style:f.default.textname,children:n.personalName}),(0,h.jsx)(y.default,{style:f.default.textEmail,children:n.email})]})]})},keyExtractor:function(e){return e.email},onEndReached:function(){M.length<L&&(J(V+1,Y),A(V+1))},onEndReachedThreshold:.5,initialNumToRender:20}),(0,h.jsx)(u.TouchableOpacity,{style:f.default.closeButton,onPress:function(){return S(!1)},children:(0,h.jsx)(u.Text,{style:f.default.closeButtonText,children:v("CM.close")})})]})})})]})}},6859:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=n(87841),o=i(n(43184)),u=n(2884),s=i(n(54813)),d=i(n(24541)),c=n(12638),f=i(n(94516)),p=i(n(35648)),y=n(11671),m=n(21527),h=i(n(6663)),v=i(n(77389)),g=n(47671);t.default=function(e){var t=e.onClose,n=e.userTaskId,i=e.recipientDetailsId,x=(0,u.useTranslation)().t,j=(0,m.useState)(null),S=(0,l.default)(j,2),w=S[0],b=S[1],I=(0,c.useAppSelector)((function(e){return e.account})).dataAccount,T=(0,c.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,C=(0,y.useTicketServices)(),D=(0,m.useState)(),k=(0,l.default)(D,2),P=k[0],_=k[1];(0,m.useEffect)((function(){E()}),[]);var F,M,E=(F=(0,r.default)((function*(){var e=yield C.getSla(T.id);if(e){var t=e.find((function(e){return e.recipientId==n}));_(t)}})),function(){return F.apply(this,arguments)}),O=(M=(0,r.default)((function*(){var e={ticketId:T.id,recipientId:null,contactId:null,email:null==w?void 0:w.email,name:null==w?void 0:w.personalName,phone:null==w?void 0:w.phone,reason:"null"};(yield C.forwardActionUser(T.id,n,i,e))?(t(),v.default.show({type:"success",text1:x("CM.info"),text2:x("CM.forwardSuccessfully")})):v.default.show({type:"error",text1:x("CM.info"),text2:x("CM.forwardFail")})})),function(){return M.apply(this,arguments)});return(0,g.jsxs)(a.View,{style:{flex:1},children:[(0,g.jsx)(o.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:x("CM.authority"),onPressIconLeft:t}),(0,g.jsxs)(a.View,{style:h.default.ctnBody,children:[(0,g.jsx)(s.default,{label:x("TK.nameJob"),value:null==P?void 0:P.notionName,onChangeText:function(){},disabled:!0}),(0,g.jsxs)(a.View,{style:h.default.group,children:[(0,g.jsx)(d.default,{style:h.default.textTitle,children:x("TK.userAction")}),(0,g.jsxs)(a.View,{style:h.default.ctnImage,children:[(0,g.jsx)(a.Image,{width:32,height:32,borderRadius:16,source:{uri:(null==I?void 0:I.imageUrl)||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,g.jsxs)(a.View,{style:{flex:1},children:[(0,g.jsx)(d.default,{style:h.default.textname,children:`${I.firstName} ${I.lastName}`}),(0,g.jsx)(d.default,{style:h.default.textEmail,children:I.email})]})]})]}),(0,g.jsxs)(a.View,{style:h.default.group,children:[(0,g.jsxs)(d.default,{style:h.default.textTitle,children:[x("TK.selectUserAuthor")," ",(0,g.jsx)(d.default,{style:{color:"#e14337"},children:"*"})]}),(0,g.jsx)(p.default,{onSelect:function(e){b(e)}})]})]}),(0,g.jsxs)(a.View,{style:h.default.ctnFooter,children:[(0,g.jsx)(f.default,{style:{flex:1,backgroundColor:"#F2F5F8"},label:x("CM.labelCancel"),styleLabel:{color:"#00204DB2"},onPress:t}),(0,g.jsx)(f.default,{style:{flex:1},label:x("CM.confirm"),onPress:O})]})]})}},6663:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnBody:{padding:10,flex:1},ctnFooter:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:8,paddingHorizontal:10},group:{rowGap:8,paddingVertical:8},textTitle:{fontSize:12,fontFamily:r.Font.InterMedium500,color:"#00204DF2"},ctnImage:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8,paddingHorizontal:16,paddingVertical:10,backgroundColor:"#e6eaf0",borderRadius:8},textname:{color:"#0b2b55",fontSize:14,fontFamily:r.Font.InterRegular400},textEmail:{color:"#465d7e",fontSize:12,fontFamily:r.Font.InterRegular400},container:{width:"100%"},selectContainer:{flexDirection:"row",alignItems:"center"},select:{flex:1,borderWidth:1,borderColor:"#ccc",borderRadius:8,padding:10,backgroundColor:"#fff"},selectText:{fontSize:14,fontFamily:r.Font.InterRegular400},clearButton:{marginLeft:10,padding:5,backgroundColor:"#f0f0f0",borderRadius:15,width:30,height:30,justifyContent:"center",alignItems:"center"},clearButtonText:{fontSize:16,color:"#333"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalContent:{backgroundColor:"#fff",borderRadius:10,padding:20,width:"90%",maxHeight:"80%"},searchInput:{borderWidth:1,borderColor:"#ccc",borderRadius:5,padding:10,marginBottom:10},item:{padding:10,borderBottomWidth:1,borderBottomColor:"#eee",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",columnGap:10},closeButton:{marginTop:10,padding:10,backgroundColor:"#f0f0f0",borderRadius:5,alignItems:"center"},closeButtonText:{fontSize:14,color:"#333",fontFamily:r.Font.InterSemiBold600}})},7037:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ListAction=void 0;t.ListAction=[{title:"comments",description:"Description for Item",iconName:"message-circle",navigationName:"comments"},{title:"note",description:"Description for Item",iconName:"edit-2-outline",navigationName:"note"},{title:"authority",description:"Description for Item",iconName:"swap",navigationName:"authority"}]},19691:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),l=i(n(85715)),a=n(14740),o=n(87841),u=i(n(64455)),s=i(n(24541)),d=V(n(41995)),c=V(n(21527)),f=n(46317),p=i(n(84478)),y=i(n(36913)),m=n(20880),h=n(12638),v=n(97427),g=n(7005),x=(n(60596),n(2884)),j=n(32207),S=i(n(69290)),w=n(7037),b=n(72676),I=n(11595),T=n(45335),C=i(n(55087)),D=n(85653),k=n(11671),P=n(40851),_=i(n(76644)),F=i(n(6859)),M=i(n(23813)),E=i(n(24617)),O=n(47671);function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function V(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}t.default=function(){var e,t,n,i,R,V,A,z,B=(0,a.useNavigation)(),L=(0,a.useRoute)(),N=(0,x.useTranslation)().t,U=(0,h.useAppDispatch)(),W=null==L?void 0:L.params,H=W.dataTicketId,$=(W.email,W.status),G=W.selectTabBottom,Y=null!=(e=null==L||null==(t=L.params)?void 0:t.recipientDetailsId)?e:"",q=null!=(n=null==L||null==(i=L.params)?void 0:i.userTaskId)?n:"",K=null!=(R=null==L||null==(V=L.params)?void 0:V.typeView)?R:"view",J=null!=(A=null==L||null==(z=L.params)?void 0:z.notifyActionType)?A:"",X=(0,c.useState)(!1),Q=(0,l.default)(X,2),Z=Q[0],ee=Q[1],te=(0,c.useState)(1===G?b.dataListStatusTicket.find((function(e){return e.status===$})):I.dataListStatusTicketFollowNoti.find((function(e){return e.status===$}))),ne=(0,l.default)(te,2),ie=ne[0],re=ne[1],le=(0,c.useState)(""),ae=(0,l.default)(le,2),oe=ae[0],ue=ae[1],se=(0,c.useState)(!1),de=(0,l.default)(se,2),ce=de[0],fe=de[1],pe=(0,c.useState)(!1),ye=(0,l.default)(pe,2),me=ye[0],he=ye[1],ve=(0,c.useState)(),ge=(0,l.default)(ve,2),xe=ge[0],je=ge[1],Se=(0,c.useState)(!1),we=(0,l.default)(Se,2),be=we[0],Ie=we[1],Te=(0,a.useIsFocused)(),Ce=(0,h.useAppSelector)((function(e){return e.ticket})),De=Ce.dataTicketRedux,ke=Ce.dataUserTicket,Pe=Ce.dataOrgin,_e=(Ce.statusPartyRaw,(0,h.useAppSelector)((function(e){return e.account})).dataAccount),Fe=(0,h.useAppSelector)((function(e){return e.common})).accessToken,Me=(0,D.useOriginServices)(),Ee=(0,k.useTicketServices)(),Oe=(0,P.useReviewServices)(),Re=(0,o.useWindowDimensions)().width,Ve=function(){Ie((function(e){return!e})),ee(!1)};(0,c.useEffect)((function(){(0,r.default)((function*(){yield Be()}))()}),[G]);var Ae,ze,Be=(Ae=(0,r.default)((function*(){try{var e,t,n,i,r,l,a,o=yield Promise.all([Ee.getTicketById(H,Fe),Oe.getStatusParty(H,Fe)]);if(!ie){var u=1===G?b.dataListStatusTicket.find((function(e){var t;return e.status===(null==(t=o[0])?void 0:t.ticketStatus)})):I.dataListStatusTicketFollowNoti.find((function(e){var t;return e.status===(null==(t=o[0])?void 0:t.ticketStatus)}));re(u)}var s,d,c=null==(e=o[0])||null==(t=e.orgIn)?void 0:t.split("/")[(null==(n=o[0])||null==(i=n.orgIn)||null==(r=i.split("/"))?void 0:r.length)-1],f=yield Ee.getMultiLoginAccount([null==o||null==(l=o[0])?void 0:l.createdBy],Fe);try{s=yield Me.getOrigin(c,Fe)}catch(e){}try{d=yield Ee.getImplementByModelerId(o[0].modelerId)}catch(e){}je(null==(a=d)?void 0:a.data.filter((function(e){return e.userTaskId==q})).find((function(e){return e.email==_e.email}))),U(v.ticketActions.setDataTicket(o[0])),U(v.ticketActions.setDataUserTicket(f[0])),U(v.ticketActions.setDataOrgin(s)),U(v.ticketActions.setStatusPartyRaw(o[1])),"ticket_tag_comment"===J&&ue("comments")}catch(e){console.log(e)}})),function(){return Ae.apply(this,arguments)}),Le=function(){ee(!0)};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(g.SafeAreaView,{style:{backgroundColor:"#fff",flex:1},children:[(0,O.jsx)(o.StatusBar,{barStyle:"dark-content",backgroundColor:m.Color.Transparent}),(0,O.jsx)(p.default,{onPressIconLeft:function(){B.navigate(m.NavigationName.BottomTabs)},contentStyle:{backgroundColor:"#fff"},title:null!=De&&De.title?null==De?void 0:De.title:"---",renderContentRight:function(){return(0,O.jsx)(o.View,{style:{alignItems:"center",flexDirection:"row"},children:(0,O.jsx)(j.TopNavigationAction,{hitSlop:15,onPress:Le,icon:(0,O.jsx)(j.Icon,{fill:"#00204D",name:"more-vertical"})})})}}),(0,O.jsx)(j.Divider,{}),(0,O.jsx)(o.View,{style:{flex:1},children:(null==De?void 0:De.id)===H&&(0,O.jsx)(y.default,{userTaskId:q,recipientDetailsId:Y,selectTabBottom:G,isRealoadWebview:me,notifyActionType:J,typeView:K})}),Te&&(0,O.jsx)(o.View,{children:(0,O.jsx)(T.Portal,{children:(0,O.jsx)(T.FAB.Group,{open:ce,visible:!0,variant:"primary",style:{paddingRight:Re-100},fabStyle:u.default.fabStyle,icon:ce?function(){return(0,O.jsx)(j.Icon,{fill:"#fff",name:"close-outline"})}:function(){return(0,O.jsx)(j.Icon,{fill:"#fff",name:"plus-outline"})},actions:function(e){if(1===G||!e)return w.ListAction.filter((function(e){return"authority"!==e.navigationName})).map((function(e){return{icon:function(){return(0,O.jsx)(j.Icon,{fill:"#985FF4",name:e.iconName})},label:N(`CM.${e.title}`),labelStyle:u.default.iconStyle,onPress:function(){return ue(e.navigationName)}}}));var t=JSON.parse(null==e?void 0:e.authorizationType),n=w.ListAction;return(null==t?void 0:t.length)>0||(n=w.ListAction.filter((function(e){return"authority"!==e.navigationName}))),n.map((function(e){return{icon:function(){return(0,O.jsx)(j.Icon,{fill:"#985FF4",name:e.iconName})},label:N(`CM.${e.title}`),labelStyle:u.default.iconStyle,onPress:function(){return ue(e.navigationName)}}}))}(xe),onStateChange:function(){return fe(!ce)},onPress:function(){}})})})]}),(0,O.jsx)(S.default,{isVisible:Z,onClose:function(){return ee(!1)},title:N("CM.info"),renderContent:(ze=null==De?void 0:De.rate,(0,O.jsxs)(o.View,{style:{rowGap:10},children:[(0,O.jsxs)(o.View,{style:[u.default.columnCenter],children:[(0,O.jsxs)(o.View,{style:[u.default.columnSubCenter],children:[(0,O.jsx)(j.Icon,{fill:"#00204D",width:(0,d.SizeDP)(16),height:(0,d.SizeDP)(16),name:"person"}),(0,O.jsx)(s.default,{style:u.default.textTit,children:N("TK.staff")})]}),(0,O.jsxs)(o.View,{style:[{columnGap:10,flexDirection:"row",alignItems:"center",justifyContent:"flex-start",flex:1}],children:[(0,O.jsx)(o.Image,{width:(0,d.SizeDP)(24),height:(0,d.SizeDP)(24),borderRadius:(0,d.SizeDP)(12),source:{uri:null!=_e&&_e.imageUrl?null==_e?void 0:_e.imageUrl:"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,O.jsx)(s.default,{style:u.default.textDes,children:""+(null==ke?void 0:ke.personalName)})]})]}),(0,O.jsxs)(o.View,{style:[u.default.columnCenter],children:[(0,O.jsxs)(o.View,{style:[u.default.columnSubCenter],children:[(0,O.jsx)(f.IconMailFill,{width:(0,d.SizeDP)(16),height:(0,d.SizeDP)(16)}),(0,O.jsx)(s.default,{style:u.default.textTit,children:N("CM.email")})]}),(0,O.jsx)(s.default,{style:u.default.textDes,children:null==ke?void 0:ke.email})]}),(0,O.jsxs)(o.View,{style:[u.default.columnCenter],children:[(0,O.jsxs)(o.View,{style:[u.default.columnSubCenter],children:[(0,O.jsx)(f.IconPeople,{width:(0,d.SizeDP)(16),height:(0,d.SizeDP)(16)}),(0,O.jsx)(s.default,{style:u.default.textTit,children:N("CM.orgIn")})]}),(0,O.jsx)(s.default,{style:u.default.textDes,children:null==Pe?void 0:Pe.name})]}),(0,O.jsxs)(o.View,{style:[u.default.columnCenter],children:[(0,O.jsxs)(o.View,{style:[u.default.columnSubCenter],children:[(0,O.jsx)(j.Icon,{name:"bookmark",width:(0,d.SizeDP)(16),height:(0,d.SizeDP)(16)}),(0,O.jsx)(s.default,{style:u.default.textTit,children:N("CM.status")})]}),(0,O.jsxs)(o.View,{style:[{flex:1,flexDirection:"row"}],children:[(0,O.jsx)(o.View,{style:{backgroundColor:null==ie?void 0:ie.bgColor,paddingHorizontal:5,paddingVertical:3,borderRadius:4},children:(0,O.jsx)(s.default,{style:[{color:null==ie?void 0:ie.color,textAlign:"center",fontSize:d.default.FontTinier,fontFamily:m.Font.InterMedium500}],children:N(`TK.${null==De?void 0:De.ticketStatus}`)})}),(0,O.jsx)(o.View,{style:{flex:1}})]})]}),"completed"==(null==De?void 0:De.ticketStatus)&&(0,O.jsxs)(o.View,{style:[u.default.columnCenter],children:[(0,O.jsxs)(o.View,{style:[u.default.columnSubCenter],children:[(0,O.jsx)(f.IconCheckmarkCircle,{fill:m.Color.gray,width:(0,d.SizeDP)(16),height:(0,d.SizeDP)(16)}),(0,O.jsx)(s.default,{style:u.default.textTit,children:N("TK.rate")})]}),(0,O.jsxs)(o.View,{style:{flex:1,flexDirection:"row"},children:[null==ze||null==ze?(0,O.jsx)(o.TouchableOpacity,{style:u.default.btnRate,onPress:function(){return Ve()},children:(0,O.jsx)(s.default,{style:u.default.btnRate,children:N("TK.rate_now")})}):(0,O.jsx)(O.Fragment,{children:new Array(5).fill(1).map((function(e,t){return t>=ze?(0,O.jsx)(f.IconStarOutline,{width:(0,d.SizeDP)(16),height:(0,d.SizeDP)(16),fill:"#D3D3D3"},t):(0,O.jsx)(f.IconStar,{width:(0,d.SizeDP)(16),height:(0,d.SizeDP)(16),fill:m.Color.yellow},t)}))}),(0,O.jsx)(o.View,{style:{flex:1}})]})]})]}))}),be&&(0,O.jsx)(M.default,{isVisible:be,toogleRateNow:Ve}),(0,O.jsx)(_.default,{isVisible:"comments"===oe,children:(0,O.jsx)(C.default,{onClose:function(){return ue("")}})}),(0,O.jsx)(_.default,{isVisible:"authority"===oe,children:(0,O.jsx)(F.default,{userTaskId:q,recipientDetailsId:Y,onClose:function(){ue(""),he(!me)}})}),(0,O.jsx)(_.default,{isVisible:"note"===oe,children:(0,O.jsx)(E.default,{onClose:function(){return ue("")}})})]})}},64455:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(i,l,o):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}(n(41995)),l=n(20880);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{backgroundColor:l.Color.White},ctnBody:{backgroundColor:l.Color.White},ctnbodyDetail:{margin:(0,r.SizeDP)(16),position:"relative",backgroundColor:l.Color.White,borderRadius:(0,r.SizeDP)(16),padding:(0,r.SizeDP)(16),shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:5,elevation:2},textTitle:{textAlign:"center",fontFamily:l.Font.InterSemiBold600,fontSize:r.default.FontBase,color:l.Color.Text},priority:{alignItems:"center",justifyContent:"center",paddingVertical:(0,r.SizeDP)(16)},priorityDetail:{borderRadius:(0,r.SizeDP)(16),paddingHorizontal:(0,r.SizeDP)(8),paddingVertical:(0,r.SizeDP)(4),backgroundColor:"#FCEEED"},priorityText:{fontFamily:l.Font.InterRegular400,fontSize:r.default.FontTiny},rowCenterStart:{flexDirection:"row",justifyContent:"center",alignItems:"flex-start",columnGap:(0,r.SizeDP)(10),marginTop:(0,r.SizeDP)(10),borderTopWidth:(0,r.SizeDP)(.5),borderTopColor:l.Color.borderColor,paddingTop:(0,r.SizeDP)(10)},columnCenter:{justifyContent:"space-around",alignItems:"center",gap:(0,r.SizeDP)(6),flexDirection:"row"},columnSubCenter:{justifyContent:"flex-start",alignItems:"center",gap:(0,r.SizeDP)(10),flexDirection:"row",flex:.5},textDes:{fontSize:r.default.FontTiny,fontFamily:l.Font.InterMedium500,color:l.Color.colorText,flex:1},ctnImage:{width:(0,r.SizeDP)(24),height:(0,r.SizeDP)(24),borderRadius:(0,r.SizeDP)(12),overflow:"hidden",backgroundColor:l.Color.BgPrimary},borderStyle:{height:"100%",width:(0,r.SizeDP)(1),backgroundColor:l.Color.borderColor},textTit:{fontFamily:l.Font.InterRegular400,fontSize:r.default.FontTinier,color:l.Color.Text07},ctnStatus:{borderRadius:(0,r.SizeDP)(4),paddingHorizontal:(0,r.SizeDP)(8),flex:1},fabStyle:{borderRadius:25,width:50,height:50,alignItems:"center",justifyContent:"center",backgroundColor:"#6F2CED"},iconStyle:{left:100,position:"absolute",top:-10,fontFamily:l.Font.InterMedium500},btnRate:{color:l.Color.White,backgroundColor:l.Color.rate,padding:(0,r.SizeDP)(6),borderRadius:6}})},84093:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReviewCollaboServices=void 0;var i=n(12387),r=n(97300);t.useReviewCollaboServices=function(){var e=(0,r.useFetchRequest)();return(0,i.createEcollaboServices)(e)}},31004:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReviewEcontractServices=void 0;var i=n(47188),r=n(97300);t.useReviewEcontractServices=function(){var e=(0,r.useFetchRequest)();return(0,i.createReviewEcontractServices)(e)}},12387:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createEcollaboServices=void 0;var r=i(n(29293)),l=n(88e3);t.createEcollaboServices=function(e){return{getFileById:(n=(0,r.default)((function*(t){try{var n="/services/collabora/api/files/"+t,i=yield e({url:(0,l.getConfig)().BASE_URL_ECOLLABO+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return console.log("getFileById",e),Promise.reject(e)}})),function(e){return n.apply(this,arguments)}),changeStatusFile:(t=(0,r.default)((function*(t){try{var n=yield e({url:(0,l.getConfig)().BASE_URL_ECOLLABO+"/services/collabora/api/files",method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("changeStatusFile",e),Promise.reject(e)}})),function(e){return t.apply(this,arguments)})};var t,n}},47188:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createReviewEcontractServices=void 0;var r=i(n(29293)),l=n(88e3);t.createReviewEcontractServices=function(e){return{getEnvelopeById:(b=(0,r.default)((function*(t,n){try{var i=yield e({url:(0,l.getConfig)().BASE_URL+"/services/excall/api/excall",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(t)});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return b.apply(this,arguments)}),getRecipientDetail:(w=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/recipient-details/${n}/${t}`,r=yield e({url:(0,l.getConfig)().BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return w.apply(this,arguments)}),getEWriterDocByUserTaskIdAndTicketId:(S=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/file-repositories/getFileIdNotionEContract/${n}/userTask/${t}`,r=yield e({url:(0,l.getConfig)().BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return S.apply(this,arguments)}),getEcontractDocInfo:(j=(0,r.default)((function*(t){try{var n=yield e({url:(0,l.getConfig)().BASE_URL+"/services/ewriter/api/documents/details",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return j.apply(this,arguments)}),getStructureOfData:(x=(0,r.default)((function*(t,n){try{var i=yield e({url:(0,l.getConfig)().BASE_URL+"/services/envelope/api/external/v1/template/tempAndStructure",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},params:t});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return x.apply(this,arguments)}),getDataFormFill:(g=(0,r.default)((function*(t){try{var n=yield e({url:(0,l.getConfig)().BASE_URL+"/services/eform/api/share/form-erequest",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return g.apply(this,arguments)}),createContract:(v=(0,r.default)((function*(t){try{var n=yield e({url:(0,l.getConfig)().BASE_URL+"/services/erequest/api/envelope/create-envelope",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),typeOfResponse:"text"});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return v.apply(this,arguments)}),getEkycRepositoryDetailIdCard:(h=(0,r.default)((function*(t,n){try{var i=`/services/common/api/p/ekyc/${t}/ekycRepositoryDetails/detailss/idCard`,r=yield e({url:(0,l.getConfig)().BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"},params:n});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return h.apply(this,arguments)}),getTicketForms:(m=(0,r.default)((function*(t){try{var n="/services/erequest/api/ticket-form-data/findByTicketId/"+t,i=yield e({url:(0,l.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e){return m.apply(this,arguments)}),getListCollaboDocs:(y=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/file-repositories/getFileIdFromCollabor/${t}/userTask/${n}`,r=yield e({url:(0,l.getConfig)().BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return y.apply(this,arguments)}),getDetailCollabora:(p=(0,r.default)((function*(t){try{var n=`/services/collabora/api/files/${t}/info`,i=yield e({url:(0,l.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e){return p.apply(this,arguments)}),getTicketModelerFlowStatusRaw:(f=(0,r.default)((function*(t){try{var n="/services/erequest/api/ticket-modeler-flows/statusRaw/"+t,i=yield e({url:(0,l.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e){return f.apply(this,arguments)}),getLinkIframeEcollabo:(c=(0,r.default)((function*(t){try{var n=`/services/collabora/wopi/iframe-info/${t}`,i=yield e({url:(0,l.getConfig)().BASE_URL_ECOLLABO+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e){return c.apply(this,arguments)}),deleteFile:(d=(0,r.default)((function*(t){try{var n="/services/erequest/api/file-repositories/deleteFileUploadCollaboration/"+t,i=yield e({url:(0,l.getConfig)().BASE_URL+n,method:"DELETE",headers:{"Content-Type":"application/json"},typeOfResponse:"text"});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e){return d.apply(this,arguments)}),getListOrgin:(s=(0,r.default)((function*(t){try{var n=yield e({url:(0,l.getConfig)().BASE_URL+"/services/uaa/api/organizations/child/find-organization-like-orgin",method:"GET",params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return Promise.reject(e)}})),function(e){return s.apply(this,arguments)}),uploadFiles:(u=(0,r.default)((function*(t,n,i){try{var r=`/services/erequest/api/file-repositories/uploadFileToCollaboration/${t}/userTask/${n}`,a=yield e({url:(0,l.getConfig)().BASE_URL+r,method:"POST",headers:{"Content-Type":"multipart/form-data"},body:i});return Promise.resolve(null==a?void 0:a.data)}catch(e){return Promise.reject(e)}})),function(e,t,n){return u.apply(this,arguments)}),getAllFileInNotion:(o=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/file-repositories/getFileDTOCreateEcontract/${t}/${n}`,r=yield e({url:(0,l.getConfig)().BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){return Promise.reject(e)}})),function(e,t){return o.apply(this,arguments)}),getExecutorByTicketIdAndUsertaskId:(a=(0,r.default)((function*(t,n){var i=`/services/erequest/api/recipient-details/implement-accepted/${t}/${n}`,r=yield e({url:(0,l.getConfig)().BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)})),function(e,t){return a.apply(this,arguments)}),generateEnvNo:(i=(0,r.default)((function*(t){var n=yield e({url:(0,l.getConfig)().BASE_URL+"/services/excall/api/excall",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Promise.resolve(null==n?void 0:n.data)})),function(e){return i.apply(this,arguments)}),getListAutomationEcontract:(n=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/tickets/${t}/userTaskId/${n}/listAutomationEcontract`,r=yield e({url:(0,l.getConfig)().BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){return Promise.reject(e)}})),function(e,t){return n.apply(this,arguments)}),getEContractNotionDocResource:(t=(0,r.default)((function*(t){try{var n=`/services/idaas-eflow/api/documents/user-task/${t}`,i=yield e({url:(0,l.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e){return t.apply(this,arguments)})};var t,n,i,a,o,u,s,d,c,f,p,y,m,h,v,g,x,j,S,w,b}}}]);//# sourceMappingURL=src_app_screens_create-contract_index_tsx-src_app_screens_review-ecollabo-flow_index_tsx-src_-8c6434.chunk.bundle.map?platform=ios/* RCSSB */eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJoYXNoIjoiZWExMzNiNzIwYjcyMGM5OTUyMmI0NDg4MGMyOWFjMTczODY0MGZhZTcwMWZlMzNlYTgzM2Q0ZWRhNDhiZWVjOSIsImlhdCI6MTc0OTcyNjA1OX0.G9-1zfb5hOSSN-6LN7spizX89VTSBnEICSn3D87B_OvTkYJsDOti5WcNvER9SU6APcz6JwJTMElzvTcMGbOLlLfa5g5e8rkwicLIbug8uOjU7yIIRnRkvgKQHH7PmpGA4nO8ef3juEnwqfcdnGTeSqOlExM7ckyT1npZ7mM2IXO1uHkg10k9SrFIWSpTY9Hf9EUISDudet92x4loqpJPHoWesf1LVMvuxOstNuFNlvV2AK77nSCxXFw0w8nciF55TwMP87qSTDiqSExKywtKlXjqBAgNiFFRfG_yohK6RFyXYOK-kVdO5guApvpzDkyr8v6iOx8q6dzYLm4E8BJkXwQRFP2YdxdIt3HJnFPl-G-2PUuLHA9stBCVLvNbE3cdnhnCZuugf9dPQ67T4ZoDUjROpAM2M-1JIzWOegGdxs9mhy6asTTd9PamcQQjnCJWUUF3Jpz6Y8M0HNIiD1HUx_RB2QKEPAOPvjatHy2J1UKnTy79oGj4_1prMcDhhh9j1tAwEAepNStVkdar6ZUWoq8MLG68P0YQZkMC7pEczzgqZXtjWXK4s8PtZA4PD1-4YbZrboJx1gAmf4FPKwtM1fNjqZxMN6j5Ibt2IFT9mm32y-rEE0-uo9gK1UDpeEnMWcUDPgybAs-YR3Z-6aJEPuHXeKLRVLBgPmp9xq9-4ww                                                                                                                                                                                                                                                                                                                                                                                                                                         