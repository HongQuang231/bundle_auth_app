(self.webpackChunkerequestApp=self.webpackChunkerequestApp||[]).push([["src_navigation_Request_tsx"],{89142:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(85715)),o=n(87841),l=i(n(24541)),s=i(n(32055)),u=n(21527),c=i(n(61086)),d=n(46317),f=n(7005),p=n(41995),h=n(60596),y=n(35708),m=n(20880),v=n(2884),g=n(47671);t.default=function(e){var t=e.dataCard,n=e.select,i=e.onSelect,S=e.account,x=e.isView,j=(0,v.useTranslation)().t,w=(0,u.useState)(!1),b=(0,a.default)(w,2),D=b[0],T=b[1];(0,u.useEffect)((function(){x||null==n||n.forEach((function(e){e.id===t.id&&T(!0)}))}),[]);var P=function(e,t,n){return(0,g.jsx)(o.View,{style:{backgroundColor:t,paddingHorizontal:(0,p.SizeDP)(10),paddingVertical:(0,p.SizeDP)(6),borderRadius:(0,p.SizeDP)(16),alignItems:"center",justifyContent:"center"},children:(0,g.jsx)(l.default,{style:{color:e},children:j(`TK.${n}`)})})};return(0,g.jsxs)(o.View,{style:c.default.ctnMain,children:[!x&&(0,g.jsx)(s.default,{checked:D,onChange:function(){return function(e){if(T(e),e)null==i||i([].concat((0,r.default)(n),[t]));else{var a=n.filter((function(e){return e.id!==t.id}));null==i||i(a)}}(!D)}}),(0,g.jsx)(f.SafeAreaView,{edges:["right"],style:{flex:1},children:(0,g.jsxs)(o.View,{style:[c.default.ctnCard,x&&{marginHorizontal:(0,p.SizeDP)(16)}],children:[(0,g.jsxs)(o.View,{style:c.default.ctnHeader,children:[(0,g.jsxs)(o.View,{style:c.default.ctnRow,children:[(0,g.jsx)(o.View,{style:c.default.ctnImage,children:(0,g.jsx)(o.Image,{width:(0,p.SizeDP)(40),height:(0,p.SizeDP)(40),style:{borderRadius:(0,p.SizeDP)(20)},source:{uri:null!=S&&S.imageUrl?null==S?void 0:S.imageUrl:"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}})}),(0,g.jsxs)(o.View,{style:{rowGap:(0,p.SizeDP)(6)},children:[(0,g.jsx)(l.default,{style:c.default.name,children:null==t?void 0:t.createdBy}),(0,g.jsxs)(l.default,{style:c.default.group,children:["Nhóm DV: ",null==t?void 0:t.serviceName]})]})]}),function(){switch(null==t?void 0:t.priority){case h.Propity.high:return(0,g.jsx)(d.Iconhigh,{width:(0,p.SizeDP)(16),height:(0,p.SizeDP)(16)});case h.Propity.medium:return(0,g.jsx)(d.Iconmedium,{width:(0,p.SizeDP)(16),height:(0,p.SizeDP)(16)});case h.Propity.low:return(0,g.jsx)(d.Iconlow,{width:(0,p.SizeDP)(16),height:(0,p.SizeDP)(16)})}}()]}),(0,g.jsxs)(o.View,{style:c.default.ctnTitle,children:[(0,g.jsxs)(o.View,{style:c.default.ctnRow,children:[(0,g.jsx)(l.default,{style:c.default.name,children:"Tiêu đề giao dịch"}),(0,g.jsx)(l.default,{numberOfLines:1,style:c.default.handleNewGroup,children:null==t?void 0:t.title})]}),(0,g.jsxs)(o.View,{style:c.default.ctnRow,children:[(0,g.jsx)(l.default,{style:c.default.name,children:"Ngày tạo"}),(0,g.jsx)(l.default,{numberOfLines:1,style:c.default.handleNewGroup,children:y.DateUtils.convertDateToDDMMYYYY_H_M(null==t?void 0:t.createdDate)})]}),(0,g.jsxs)(o.View,{style:c.default.ctnRow,children:[(0,g.jsx)(l.default,{style:c.default.name,children:"Trạng thái giao dịch"}),function(){switch(null==t?void 0:t.ticketStatus){case h.Status.completed:return P(m.Color.completed,m.Color.completed01,h.Status.completed);case h.Status.draft:return P(m.Color.draft,m.Color.draft01,h.Status.draft);case h.Status.voided:return P(m.Color.voided,m.Color.voided01,h.Status.voided);case h.Status.rejected:return P(m.Color.rejected,m.Color.rejected01,h.Status.rejected);case h.Status.processing:return P(m.Color.processing,m.Color.processing01,h.Status.processing)}}()]})]})]})})]})}},61086:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},ctnCard:{backgroundColor:a.Color.White,borderRadius:(0,r.SizeDP)(10),marginVertical:(0,r.SizeDP)(12),shadowColor:a.Color.Black,shadowOffset:{width:2,height:2},shadowOpacity:.2,shadowRadius:4,elevation:4},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:(0,r.SizeDP)(16),paddingVertical:(0,r.SizeDP)(12)},ctnTitle:{paddingHorizontal:(0,r.SizeDP)(16),rowGap:(0,r.SizeDP)(16),marginVertical:(0,r.SizeDP)(16)},ctnRow:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnImage:{width:(0,r.SizeDP)(40),height:(0,r.SizeDP)(40),backgroundColor:"red",borderRadius:(0,r.SizeDP)(20),marginRight:(0,r.SizeDP)(12)},name:{fontFamily:a.Font.InterMedium500,color:a.Color.TextPrimary},group:{color:a.Color.Text,fontSize:r.default.FontTiny},handleNewGroup:{color:a.Color.Text,fontSize:r.default.FontTiny,width:(0,r.SizeDP)(130),textAlign:"right"}})},32055:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(21527));var r=n(87841),a=i(n(35395)),o=i(n(24541)),l=n(32207),s=n(20880),u=n(47671);t.default=function(e){var t=e.checked,n=e.label,i=e.onChange,c=e.style,d=e.labelStyle;return(0,u.jsxs)(r.View,{style:[a.default.ctnContainer,c],children:[(0,u.jsx)(r.TouchableOpacity,{onPress:i,children:(0,u.jsx)(l.Icon,{name:t?"checkmark-square-2":"square-outline",fill:s.Color.BgPrimary,width:24,height:24})}),(0,u.jsx)(r.TouchableOpacity,{activeOpacity:1,onPress:i,children:(0,u.jsx)(o.default,{style:[a.default.txtLabel,d],children:n})})]})}},35395:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({ctnContainer:{flexDirection:"row",alignItems:"center"},txtLabel:{fontSize:r.FontSize.FontSmall,fontFamily:r.Font.InterMedium500,color:r.Color.TxtCheckbox,marginStart:(0,a.SizeDP)(8)}})},85555:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=n(2543),o=i(n(21527)),l=n(87841),s=i(n(24541)),u=n(46317),c=n(41995),d=i(n(72431)),f=n(7005),p=n(45335),h=n(2884),y=n(47671);t.default=function(e){var t=e.listDropdown,n=e.onChangeItem,i=e.renderShowData,m=(0,h.useTranslation)().t,v=((0,f.useSafeAreaInsets)(),o.default.useState(!1)),g=(0,r.default)(v,2),S=g[0],x=g[1],j=function(e){n(e),x(!1)};return(0,y.jsx)(l.View,{style:{flexDirection:"row",justifyContent:"center"},children:(0,y.jsx)(p.Menu,{visible:S,onDismiss:function(){return x(!1)},style:{backgroundColor:"#fff",zIndex:999999999},contentStyle:{backgroundColor:"#fff",borderRadius:(0,c.SizeDP)(8)},anchor:(0,y.jsx)(l.Pressable,{hitSlop:(0,c.SizeDP)(15),style:{minWidth:(0,c.SizeDP)(20),alignItems:"center",justifyContent:"center"},onPress:function(){x(!0)},children:(0,a.isEmpty)(i)?(0,y.jsx)(u.IconHozDot,{width:(0,c.SizeDP)(12),height:(0,c.SizeDP)(12)}):i}),children:(0,y.jsx)(l.FlatList,{style:{zIndex:999999999},data:t,renderItem:function(e){var t=e.item;return(0,y.jsx)(p.Menu.Item,{style:d.default.item,onPress:function(){return j(t)},title:(0,y.jsxs)(l.TouchableOpacity,{style:d.default.item,onPress:function(){return j(t)},children:[!(0,a.isEmpty)(t.icon)&&t.icon,t.key&&(0,y.jsx)(s.default,{children:m(`${t.key}`)})]})})},keyExtractor:function(e,t){return t.toString()}})})})}},72431:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995);t.default=i.StyleSheet.create({ctnListItem:{minWidth:(0,r.SizeDP)(30),position:"absolute",backgroundColor:"grey",borderRadius:(0,r.SizeDP)(8),right:(0,r.SizeDP)(20),top:(0,r.SizeDP)(20),zIndex:3},item:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:(0,r.SizeDP)(10)},overlay:{flex:1},dropdown:{position:"absolute",backgroundColor:"#fff",minWidth:(0,r.SizeDP)(30),maxWidth:(0,r.SizeDP)(200),shadowColor:"#000000",shadowRadius:4,shadowOffset:{height:4,width:0},shadowOpacity:.5,right:(0,r.SizeDP)(10),borderRadius:(0,r.SizeDP)(8)}})},65963:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),a=i(n(10727)),o=n(32207),l=i(n(24541)),s=n(2884),u=n(47671);t.default=function(e){var t,n,i,c,d=e.placeholder,f=e.onSelect,p=e.valueSelect,h=e.listData,y=e.multiple,m=void 0!==y&&y,v=e.size,g=void 0===v?"large":v,S=e.isi18n,x=void 0!==S&&S,j=e.label,w=e.isRequired,b=void 0!==w&&w,D=e.caption,T=e.status,P=void 0===T?"primary":T,C=e.disabled,I=void 0!==C&&C,k=(0,s.useTranslation)().t,_="";p&&(_=m?null==p?void 0:p.map((function(e){return x?k(null==h?void 0:h[e.row].label.trim()):null==h?void 0:h[e.row].label.trim()})).join(", "):x?k(null==h||null==(t=h[null==p?void 0:p.row])||null==(n=t.label)?void 0:n.trim()):null==h||null==(i=h[null==p?void 0:p.row])||null==(c=i.label)?void 0:c.trim());return(0,u.jsx)(r.View,{style:a.default.container,children:(0,u.jsx)(o.Select,{label:j?function(e){return(0,u.jsxs)(l.default,Object.assign({},e,{style:a.default.textTitle,children:[j," ",b&&(0,u.jsx)(l.default,{style:{color:"#E14337"},children:"*"})]}))}:void 0,caption:D?function(e){return(0,u.jsxs)(r.View,Object.assign({},e,{style:a.default.ctnCaption,children:[(0,u.jsx)(o.Icon,{fill:"#E14337",width:14,height:14,name:"info"}),(0,u.jsx)(l.default,{style:a.default.textCaption,children:D})]}))}:void 0,disabled:I,size:g,status:P,multiSelect:m,appearance:"default",placeholder:function(e){return(0,u.jsx)(l.default,Object.assign({},e,{children:d}))},selectedIndex:p,value:_,onSelect:function(e){return f(e)},children:h&&h.map((function(e){return(0,u.jsx)(o.SelectItem,{title:function(t){return(0,u.jsx)(l.default,Object.assign({},t,{children:x?k(e.label):e.label}))}},e.value)}))})})}},10727:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({container:{backgroundColor:r.Color.White},dropdown:{height:(0,a.SizeDP)(48),borderColor:r.Color.TxtCheckbox,borderWidth:(0,a.SizeDP)(1),borderRadius:(0,a.SizeDP)(8),paddingHorizontal:(0,a.SizeDP)(8)},placeholderStyle:{fontSize:a.default.FontSmall,color:r.Color.Text055,fontFamily:r.Font.InterRegular400},selectedTextStyle:{fontSize:a.default.FontSmall,color:r.Color.Text,fontFamily:r.Font.InterRegular400},itemTextStyle:{fontSize:a.default.FontBase,color:r.Color.Text07,fontFamily:r.Font.InterRegular400},itemContainerStyle:{borderRadius:(0,a.SizeDP)(8),overflow:"hidden",borderWidth:(0,a.SizeDP)(1),borderColor:r.Color.colorBorder},iconStyle:{},inputSearchStyle:{},selectedStyle:{flexDirection:"row",justifyContent:"center",alignItems:"center",borderRadius:(0,a.SizeDP)(8),backgroundColor:"white",shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1.41,elevation:2,paddingHorizontal:(0,a.SizeDP)(12),paddingVertical:(0,a.SizeDP)(8),columnGap:(0,a.SizeDP)(16),marginTop:(0,a.SizeDP)(8),marginRight:(0,a.SizeDP)(8)},textSelectedStyle:{},textTitle:{fontSize:12,fontFamily:r.Font.InterMedium500,color:"#00204DF2",marginBottom:4,lineHeight:22},ctnCaption:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,marginTop:4},textCaption:{fontSize:12,fontFamily:r.Font.InterMedium500,color:"#E14337"}})},64213:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),a=i(n(94516)),o=i(n(4653)),l=n(47671);t.default=function(e){var t=e.onPressLeft,n=e.onPressRight,i=e.containerStyle,s=e.btnStyleLeft,u=e.btnStyleRight,c=e.labelStyleLeft,d=e.labelStyleRight,f=e.labelLeft,p=void 0===f?"left":f,h=e.labelRight,y=void 0===h?"right":h;return(0,l.jsxs)(r.View,{style:[i,o.default.ctnGroup],children:[(0,l.jsx)(a.default,{style:[o.default.btn,o.default.btnLeft,s],label:p,styleLabel:[c,o.default.labelStyleLeft],onPress:t}),(0,l.jsx)(a.default,{style:[o.default.btn,u],label:y,styleLabel:[d],onPress:n})]})}},4653:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995),a=n(20880);t.default=i.StyleSheet.create({ctnGroup:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,r.SizeDP)(12),backgroundColor:a.Color.White,paddingVertical:(0,r.SizeDP)(12)},btn:{minWidth:(0,r.SizeDP)(160)},btnLeft:{backgroundColor:a.Color.BtnDisable},labelStyleLeft:{color:a.Color.Text}})},87288:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(21527));var r=n(87841),a=i(n(93580)),o=i(n(24541)),l=n(20880),s=n(47671);t.default=function(e){var t=e.style,n=e.message,i=e.isVisible;return(0,s.jsx)(r.Modal,{visible:i,transparent:!0,style:t,children:(0,s.jsxs)(r.View,{style:a.default.ctnContainer,children:[(0,s.jsx)(r.ActivityIndicator,{size:"large",color:l.Color.White}),(0,s.jsx)(o.default,{children:n})]})})}},93580:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnContainer:{flex:1,backgroundColor:r.Color.TxtCheckbox,alignItems:"center",justifyContent:"center"}})},45001:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),o=n(2884),l=i(n(88491)),s=n(87841),u=n(2543),c=i(n(94516)),d=i(n(24541)),f=n(46317),p=n(41995),h=n(47671);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}t.default=function(e){var t=e.onClose,n=e.onConfirm,i=e.isVisible,y=e.title,m=e.content,v=e.labelCancel,g=e.labelConfirm,S=e.renderContent,x=e.type,j=void 0===x?"delete":x,w=e.styleBtnLeft,b=e.styleBtnRight,D=((0,o.useTranslation)().t,(0,a.useState)({width:s.Dimensions.get("screen").width,height:s.Dimensions.get("screen").height})),T=(0,r.default)(D,2),P=T[0],C=T[1],I=(0,a.useState)(0),k=(0,r.default)(I,2),_=k[0],F=k[1];(0,a.useEffect)((function(){var e=s.Dimensions.addEventListener("change",(function(e){var t=e.screen;C({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]),(0,a.useEffect)((function(){var e=s.Keyboard.addListener("keyboardDidShow",(function(e){console.log(e.endCoordinates.height),F(e.endCoordinates.height)})),t=s.Keyboard.addListener("keyboardDidHide",(function(e){F(0)}));return function(){e.remove(),t.remove()}}),[]);var O=function(){null==n||n()};return(0,h.jsx)(s.Modal,{visible:i,transparent:!0,children:(0,h.jsx)(s.TouchableWithoutFeedback,{onPress:function(){return s.Keyboard.dismiss()},children:(0,h.jsx)(s.View,{onLayout:function(e){console.log(e.nativeEvent.layout)},style:[l.default.ctnContainer,_/P.height>.45&&{paddingBottom:_}],children:(0,h.jsxs)(s.View,{style:[l.default.container,P.width>=p.TYPE_SCREEN.mobile&&{width:P.width/3*1.5}],children:[(0,h.jsxs)(s.View,{style:l.default.body,children:[(0,h.jsx)(s.View,{style:l.default.viewIconDelete,children:function(){switch(j){case"cancel":return(0,h.jsx)(f.IconCancel,{width:(0,p.SizeDP)(56),height:(0,p.SizeDP)(56)});case"delete":case"success":case"error":case"info":return(0,h.jsx)(f.IconInfo,{width:(0,p.SizeDP)(56),height:(0,p.SizeDP)(56)});case"noti":return(0,h.jsx)(f.IconNotiModal,{width:(0,p.SizeDP)(56),height:(0,p.SizeDP)(56)})}}()}),!(0,u.isEmpty)(y)&&(0,h.jsx)(d.default,{style:l.default.txtTitle,children:y}),!(0,u.isEmpty)(m)&&(0,h.jsx)(d.default,{style:l.default.txtContent,children:m}),null==S?void 0:S()]}),(0,h.jsxs)(s.View,{style:l.default.viewBtn,children:[(0,h.jsx)(c.default,{label:v,onPress:t,style:[l.default.btn,w,l.default.btnLeft],styleLabel:l.default.labelStyleLeft}),(0,h.jsx)(c.default,{label:g,onPress:O,style:[l.default.btn,b]})]})]})})})})}},88491:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnContainer:{flex:1,backgroundColor:"#000810B2",justifyContent:"center",alignItems:"center"},container:{backgroundColor:r.Color.White,margin:(0,a.SizeDP)(20),borderRadius:(0,a.SizeDP)(8),padding:(0,a.SizeDP)(16),paddingVertical:(0,a.SizeDP)(24)},body:{justifyContent:"center",alignItems:"center",gap:(0,a.SizeDP)(8)},viewBtn:{marginTop:(0,a.SizeDP)(16),flexDirection:"row",gap:(0,a.SizeDP)(16),alignItems:"center",justifyContent:"center"},btn:{flex:1},btnLeft:{backgroundColor:r.Color.BtnDisable},labelStyleLeft:{color:r.Color.Text},txtTitle:{fontSize:a.default.FontBase,fontFamily:r.Font.InterSemiBold600,color:r.Color.Text,textAlign:"center"},txtContent:{textAlign:"center",fontFamily:r.Font.InterRegular400,color:r.Color.Text07},viewIconDelete:{marginVertical:(0,a.SizeDP)(10)}})},81924:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=n(87841),o=i(n(24541)),l=n(21527),s=i(n(83128)),u=n(41995),c=n(46317),d=n(47671);t.default=function(e){var t=e.collectionSize,n=e.pageSize,i=e.currentPage,f=e.onPageChange,p=(0,l.useState)(Array.from(Array(Math.ceil(t/n))).map((function(e,t){return t+1}))),h=(0,r.default)(p,2),y=h[0],m=h[1];(0,l.useEffect)((function(){m(Array.from(Array(Math.ceil(t/n))).map((function(e,t){return t+1})))}),[t]);var v=function(){for(var e=[],t=Math.max(1,i-1),n=Math.min(y.length,i+1),r=t;r<=n;r++)r>y.length||(0===r&&(r+=1),e.push(r));return e},g=function(e){f(e),v()};return(0,d.jsxs)(a.View,{style:s.default.ctnMain,children:[(0,d.jsx)(a.TouchableOpacity,{onPress:function(){var e=i-1;e<=0||e>=1&&g(e)},style:[s.default.ctnText,{transform:[{rotate:"90deg"}]}],hitSlop:(0,u.SizeDP)(15),children:(0,d.jsx)(c.IconArrowGrey,{width:(0,u.SizeDP)(16),height:(0,u.SizeDP)(16)})}),i>2&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.TouchableOpacity,{hitSlop:(0,u.SizeDP)(15),onPress:function(){return g(1)},style:[s.default.ctnText,1===i&&s.default.ctnSelect],children:(0,d.jsx)(o.default,{children:"1"})}),(0,d.jsx)(o.default,{children:"..."})]}),v().map((function(e){return(0,d.jsx)(a.TouchableOpacity,{hitSlop:(0,u.SizeDP)(15),onPress:function(){return g(e)},style:[s.default.ctnText,i===e&&s.default.ctnSelect],children:(0,d.jsx)(o.default,{children:e})},e)})),i<y.length-1&&(0,d.jsxs)(d.Fragment,{children:[i<y.length-1&&(0,d.jsx)(o.default,{children:"..."}),(0,d.jsx)(a.TouchableOpacity,{hitSlop:(0,u.SizeDP)(15),style:[s.default.ctnText,i===y.length&&s.default.ctnSelect],onPress:function(){return g(y.length)},children:(0,d.jsx)(o.default,{children:y.length})})]}),(0,d.jsx)(a.TouchableOpacity,{onPress:function(){var e=i+1;e>y.length||e<=y.length&&g(e)},style:[s.default.ctnText,{transform:[{rotate:"-90deg"}]}],hitSlop:(0,u.SizeDP)(15),children:(0,d.jsx)(c.IconArrowGrey,{width:(0,u.SizeDP)(16),height:(0,u.SizeDP)(16)})})]})}},83128:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995);t.default=i.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"center"},ctnText:{alignItems:"center",justifyContent:"center",padding:(0,r.SizeDP)(4),borderRadius:(0,r.SizeDP)(10),marginHorizontal:(0,r.SizeDP)(5),minWidth:(0,r.SizeDP)(30)},ctnSelect:{backgroundColor:"#f2ecfd",color:"#6f2ced"}})},71773:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(21527));var r=n(87841),a=n(45335),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),l=n(47671);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var u=r.StyleSheet.create({container:{flex:1,justifyContent:"center"},icon:{textAlign:"center"},text:{padding:(0,o.SizeDP)(16),fontSize:o.default.FontBiggest,color:a.MD3Colors.primary20,textAlign:"center"},progress:{marginVertical:(0,o.SizeDP)(16),marginHorizontal:(0,o.SizeDP)(32)}});t.default=function(e){var t=e.app;return(0,l.jsxs)(r.SafeAreaView,{style:u.container,children:[(0,l.jsxs)(a.Text,{allowFontScaling:!1,style:u.text,children:[t," application is loading. Please wait..."]}),(0,l.jsx)(a.ProgressBar,{style:u.progress,indeterminate:!0,color:a.MD3Colors.primary50})]})}},75672:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),o=n(87841),l=i(n(14892)),s=n(2884),u=i(n(24541)),c=n(47671);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}t.default=function(e){var t=e.tableHeaders,n=e.tableData,i=e.stickyColumnLeftIndex,d=void 0===i?0:i,f=(e.stickyColumnRightIndex,e.stickyLeft),p=(e.stickyRight,e.isPaging,(0,s.useTranslation)().t),h=(0,a.useState)(o.Dimensions.get("window").width),y=(0,r.default)(h,2),m=y[0],v=y[1],g=(0,a.useState)(0),S=(0,r.default)(g,2),x=S[0],j=S[1];return(0,a.useEffect)((function(){var e=o.Dimensions.addEventListener("change",(function(e){var t=e.window;v(t.width)}));return function(){return e.remove()}}),[]),(0,c.jsx)(o.View,{style:l.default.container,children:(0,c.jsxs)(o.View,{style:l.default.tableBody,children:[f&&d&&t.slice(-d).reverse().map((function(e,t){return(0,c.jsxs)(o.View,{onLayout:function(e){j(e.nativeEvent.layout.width)},style:[l.default.stickyColumnScroll,{right:t*x},1===d&&l.default.box],children:[(0,c.jsx)(o.View,{style:[l.default.stickyHeader,"action"===e&&{alignItems:"center"}],children:(0,c.jsx)(u.default,{style:l.default.headerText,children:p(`TK.${e}`)})}),null==n?void 0:n.map((function(t,n){return(0,c.jsx)(o.View,{style:[l.default.stickyColumn,"action"===e&&{alignItems:"center"}],children:"object"!=typeof t[e]?(0,c.jsx)(u.default,{style:l.default.cellText,children:t[e]}):t[e]},n)}))]},e)})),(0,c.jsx)(o.ScrollView,{horizontal:!0,children:(0,c.jsx)(o.View,{style:[l.default.row,!f&&{marginRight:0}],children:t.slice(0,t.length-d).map((function(e,i){return(0,c.jsxs)(o.View,{children:[(0,c.jsx)(o.View,{style:[l.default.stickyHeader,"action"===e&&{alignItems:"center"},{minWidth:"STT"===e?30:(m+30)/(t.length-d)}],children:(0,c.jsx)(u.default,{style:l.default.headerText,children:p(`TK.${e}`)})}),null==n?void 0:n.map((function(n,i){return(0,c.jsx)(o.View,{style:[l.default.stickyColumn,"action"===e&&{alignItems:"center"},{minWidth:"STT"===e?30:(m+30)/(t.length-d)}],children:"object"!=typeof n[e]?(0,c.jsx)(u.default,{style:l.default.cellText,children:n[e]}):n[e]},i)}))]},i)}))})})]})})}},14892:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({container:{flex:1},tableBody:{flexDirection:"row",flex:1},stickyColumnScroll:{position:"absolute",right:0,zIndex:10,minWidth:(0,a.SizeDP)(100),flex:1},stickyHeader:{minWidth:(0,a.SizeDP)(100),padding:(0,a.SizeDP)(10),justifyContent:"center",alignItems:"flex-start",backgroundColor:"#F2ECFD",borderTopWidth:1,borderBottomWidth:1,borderColor:"#00358014"},stickyColumn:{minWidth:(0,a.SizeDP)(100),flex:1,justifyContent:"center",alignItems:"flex-start",backgroundColor:"#fff",padding:(0,a.SizeDP)(10),minHeight:(0,a.SizeDP)(50)},headerRow:{flexDirection:"row",marginRight:(0,a.SizeDP)(100)},headerCell:{minWidth:(0,a.SizeDP)(100),padding:(0,a.SizeDP)(10),justifyContent:"center",alignItems:"flex-start",backgroundColor:"#F2ECFD",borderTopWidth:1,borderBottomWidth:1,borderColor:"#00358014"},headerText:{fontSize:r.FontSize.FontTiny,fontFamily:r.Font.InterMedium500,color:"#00204DB2"},row:{flexDirection:"row",marginRight:(0,a.SizeDP)(100)},cell:{minWidth:(0,a.SizeDP)(100),padding:(0,a.SizeDP)(10),justifyContent:"center",alignItems:"flex-start"},cellText:{textAlign:"left",fontSize:r.FontSize.FontTiny,fontFamily:r.Font.InterRegular400,color:"#00204DCC"},box:{shadowColor:"#2D3239",shadowOffset:{width:-1,height:0},shadowOpacity:.1,shadowRadius:6,elevation:3}})},27747:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=i(n(91847)),o=n(2543),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),s=n(87841),u=i(n(24541)),c=i(n(45855)),d=n(41995),f=n(20880),p=n(32207),h=n(47671),y=["containerStyle","inputContainerStyle","errorContainerStyle","label","viewIconRight","viewIconLeft","value","errorMessage","isRequired","onChangeText","onIconPress","onFocus","onBlur","isDisabled","isFloatingLabel","isShowIconClear"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var v=(0,l.forwardRef)((function(e,t){var n=e.containerStyle,i=e.inputContainerStyle,m=e.errorContainerStyle,v=e.label,g=e.viewIconRight,S=e.viewIconLeft,x=e.value,j=e.errorMessage,w=e.isRequired,b=e.onChangeText,D=void 0===b?function(){}:b,T=e.onIconPress,P=void 0===T?function(){}:T,C=e.onFocus,I=void 0===C?function(){}:C,k=e.onBlur,_=void 0===k?function(){}:k,F=e.isDisabled,O=e.isFloatingLabel,M=void 0!==O&&O,E=e.isShowIconClear,R=void 0===E||E,z=(0,a.default)(e,y),V=(0,l.useState)(!1),B=(0,r.default)(V,2),A=B[0],L=B[1],N=(0,l.useState)(""),U=(0,r.default)(N,2),W=U[0],H=U[1],G=(0,l.useRef)(null),$=(0,l.useRef)(new s.Animated.Value(0)).current,Y=function(e){H(e),D(e)};(0,l.useEffect)((function(){(0,o.isEmpty)(x)||(H(null!=x?x:""),M&&s.Animated.timing($,{toValue:1,duration:150,useNativeDriver:!1}).start())}),[x]),(0,l.useImperativeHandle)(t,(function(){return{focus:function(){G.current&&G.current.focus()},blur:function(){G.current&&G.current.blur()},clear:function(){G.current&&(G.current.clear(),H(""))}}}));var K=function(){L(!0),M&&s.Animated.timing($,{toValue:1,duration:150,useNativeDriver:!1}).start(),I&&I()},q=function(){L(!1),(0,o.isEmpty)(W)&&s.Animated.timing($,{toValue:0,duration:150,useNativeDriver:!1}).start(),_&&_()},J={top:$.interpolate({inputRange:[0,1],outputRange:[(0,d.SizeDP)(10),0]})},X={fontSize:$.interpolate({inputRange:[0,1],outputRange:[(0,d.SizeDP)(14),(0,d.SizeDP)(11)]})},Q={fontSize:$.interpolate({inputRange:[0,1],outputRange:[(0,d.SizeDP)(14),(0,d.SizeDP)(11)]}),color:$.interpolate({inputRange:[0,1],outputRange:[f.Color.TextPrimary,F?f.Color.textDisableColor:f.Color.TextPrimary]})};return(0,h.jsxs)(s.View,{style:[n],children:[(0,h.jsx)(s.TouchableWithoutFeedback,{onPress:function(){G.current&&G.current.focus()},children:(0,h.jsxs)(s.View,{style:[c.default.inputContainer,z.multiline&&c.default.textAreaContainer,A&&{borderColor:f.Color.TxtCheckbox},!(0,o.isEmpty)(j)&&{borderColor:f.Color.Red},F&&{backgroundColor:f.Color.Background},i],children:[!(0,o.isEmpty)(S)&&(0,h.jsx)(s.View,{style:c.default.iconContainer,children:S}),M?(0,h.jsxs)(s.View,{style:[c.default.innerInputContainer],children:[!(0,o.isEmpty)(v)&&(0,h.jsxs)(s.Animated.View,{style:[c.default.labelContainer,J],children:[(0,h.jsx)(s.Animated.Text,{allowFontScaling:!1,style:[c.default.labelDefault,F&&{color:f.Color.textDisableColor},Q],children:v}),w&&(0,h.jsx)(s.Animated.Text,{allowFontScaling:!1,style:[c.default.requiredIndicator,X],children:"*"})]}),(0,h.jsx)(s.TextInput,Object.assign({},z,{ref:G,style:[c.default.textInput,F&&{color:f.Color.textDisableColor},!(0,o.isEmpty)(g)&&{paddingRight:(0,d.SizeDP)(8)},!(0,o.isEmpty)(S)&&{paddingLeft:(0,d.SizeDP)(8)}],allowFontScaling:!1,onChangeText:Y,value:x,onFocus:K,onBlur:q,placeholderTextColor:A?f.Color.textDisableColor:"transparent",editable:!F})),z.multiline&&(0,h.jsx)(s.View,{style:c.default.textCountContainer,children:(0,h.jsx)(u.default,{style:c.default.textCount,children:`${W.length}/${z.maxLength}`})})]}):(0,h.jsxs)(s.View,{style:[c.default.innerInputContainer],children:[(0,h.jsx)(s.TextInput,Object.assign({},z,{ref:G,placeholder:v,allowFontScaling:!1,style:[c.default.textInput,F&&{color:f.Color.textDisableColor},!(0,o.isEmpty)(g)&&{paddingRight:(0,d.SizeDP)(8)},!(0,o.isEmpty)(S)&&{paddingLeft:(0,d.SizeDP)(8)}],onChangeText:Y,value:x,onFocus:K,onBlur:q,editable:!F})),z.multiline&&(0,h.jsx)(s.View,{style:c.default.textCountContainer,children:(0,h.jsx)(u.default,{style:c.default.textCount,children:`${W.length}/${z.maxLength}`})})]}),!(z.readOnly||F||!R||(0,o.isEmpty)(x))&&(0,h.jsx)(s.TouchableOpacity,{onPress:function(){var e;Y(""),null==(e=G.current)||e.focus()},style:c.default.iconContainer,hitSlop:(0,d.SizeDP)(15),children:(0,h.jsx)(p.Icon,{name:"close-outline",width:(0,d.SizeDP)(18),height:(0,d.SizeDP)(18)})}),!(0,o.isEmpty)(g)&&(0,h.jsx)(s.TouchableOpacity,{style:c.default.iconContainer,onPress:P,children:g})]})}),!(0,o.isEmpty)(j)&&(0,h.jsx)(s.View,{style:[c.default.errorContainer,m],children:(0,h.jsx)(u.default,{style:[c.default.errorText],children:j})})]})}));t.default=v},45855:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({labelContainer:{flexDirection:"row",alignItems:"center",paddingTop:0},labelDefault:{color:r.Color.Text055,fontFamily:r.Font.InterRegular400,includeFontPadding:!1,fontSize:a.default.FontSmall},requiredIndicator:{marginLeft:(0,a.SizeDP)(4),fontSize:a.default.FontBase,color:r.Color.Red,fontFamily:r.Font.InterRegular400,includeFontPadding:!1},inputContainer:{flexDirection:"row",alignItems:"center",borderRadius:(0,a.SizeDP)(8),borderWidth:(0,a.SizeDP)(1),borderColor:r.Color.borderColor,height:(0,a.SizeDP)(48),paddingHorizontal:(0,a.SizeDP)(16),paddingVertical:(0,a.SizeDP)(7)},textAreaContainer:{flexDirection:"row",alignItems:"center",borderRadius:(0,a.SizeDP)(8),borderWidth:(0,a.SizeDP)(1),borderColor:r.Color.borderColor,height:(0,a.SizeDP)(96),paddingHorizontal:(0,a.SizeDP)(16),paddingVertical:(0,a.SizeDP)(7)},innerInputContainer:{flex:1},textInput:{flex:1,fontSize:a.default.FontBase,color:r.Color.Black,fontFamily:r.Font.InterRegular400,includeFontPadding:!1,paddingVertical:0,paddingLeft:0},errorContainer:{flexDirection:"row",alignItems:"center",marginTop:(0,a.SizeDP)(8)},errorText:{marginLeft:(0,a.SizeDP)(6),fontSize:a.default.FontSmall,color:r.Color.Red,fontFamily:r.Font.InterRegular400},iconContainer:{width:(0,a.SizeDP)(20)},textCountContainer:{alignItems:"flex-end"},textCount:{fontFamily:r.Font.InterRegular400,fontSize:a.default.FontSmall,color:"#667085"}})},55529:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(7005),l=i(n(93238)),s=n(14740),u=n(20880),c=n(88e3),d=n(87841),f=i(n(94516)),p=i(n(48049)),h=n(21527),y=n(12638),m=i(n(85555)),v=i(n(24541)),g=n(41995),S=n(35708),x=i(n(77389)),j=n(40851),w=n(47671);t.default=function(){var e=(0,h.useRef)(null),t=(0,s.useRoute)().params,n=(0,s.useNavigation)(),i=t.versionId,b=t.isShowNoti,D=void 0!==b&&b,T=t.data,P=t.readOnly,C=t.isOnlyView,I=t.viewFromDoc,k=void 0!==I&&I,_=(0,y.useAppSelector)((function(e){return e.common})).accessToken,F=(0,h.useState)(),O=(0,a.default)(F,2),M=O[0],E=O[1],R=(0,h.useState)([]),z=(0,a.default)(R,2),V=z[0],B=z[1],A=(0,h.useState)(!0),L=(0,a.default)(A,2),N=L[0],U=L[1],W=(0,j.useReviewServices)();(0,h.useEffect)((function(){D&&d.Alert.alert("Thông báo","Vui lòng nhập thông tin vào form sau để xác nhận")}),[]);var H,G,$=(H=(0,r.default)((function*(e){var t={userTaskId:T._userTaskId,ticketId:T._ticketId,version:e},n=yield W.getFormVersionByTicketAndUserTaskId(t,_);if(n&&null===e){var i=Array.from(Array(Math.ceil(n.versionUserTask))).map((function(e,t){return t+1})).map((function(e,t){return{id:e,key:"Version "+e,value:"Version "+e}}));B(i),E(i[i.length-1])}return n})),function(e){return H.apply(this,arguments)}),Y=function(e){return["textField","textArea","password","email","phone_number","radio_button","upload_file","upload_img","hyperlink","datepicker","signature"].includes(e.type)?"String":"number"===e.type?"Number":["check_box","dropdown"].includes(e.type)?"dropdown"===e.type&&e.validate.mutilChoose||"check_box"===e.type?"List":"String":null},K=(G=(0,r.default)((function*(t){var n=yield $(t);if(n){var i,r=JSON.parse(null==n?void 0:n.formData);console.log(r);var a="window.postMessage(`"+JSON.stringify({type:"postFormEdit",isReadonly:P,data:r}).replace(/'/g,"\\'")+'`, "*");';null==e||null==(i=e.current)||i.injectJavaScript(a)}})),function(e){return G.apply(this,arguments)});return(0,w.jsxs)(o.SafeAreaView,{edges:["bottom","top"],style:{flex:1,backgroundColor:"#fff"},children:[V.length>0&&!C&&!P&&(0,w.jsxs)(d.View,{style:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:(0,g.SizeDP)(16)},children:[(0,w.jsx)(v.default,{children:"Lựa chọn version"}),(0,w.jsx)(m.default,{listDropdown:V,onChangeItem:function(e){E(e),K(Number(null==e?void 0:e.id))},renderShowData:(0,w.jsx)(d.View,{style:p.default.version,children:(0,w.jsx)(v.default,{children:null==M?void 0:M.value})})})]}),(0,w.jsx)(l.default,{nestedScrollEnabled:!0,ref:e,onMessage:function(e){if(!k){var t=e.nativeEvent.data;if(t&&"string"==typeof t){var r=JSON.parse(t);if("e-from"===(null==r?void 0:r.result))K(null);else if("result"===(null==r?void 0:r.result)){var a=null==r?void 0:r.data.map((function(e){return Object.assign({},e,{dataType:Y(e),typeForm:e.type,value:"datepicker"===e.type?S.DateUtils.convertDateToDDMMYYYY(e.value):e.value})})),o={formData:JSON.stringify(a),ticketId:T._ticketId,userTaskId:T._userTaskId,version:i,eformId:T.formId};W.updateFormData(o,_).then((function(e){e?(x.default.show({type:"success",text1:"Thông báo",text2:"Cập nhật dữ liệu thành công"}),n.goBack()):x.default.show({type:"error",text1:"Thông báo",text2:"Cập nhật dữ liệu thất bại"})}))}}}},startInLoadingState:!0,injectedJavaScript:u.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,domStorageEnabled:!0,javaScriptEnabled:!0,thirdPartyCookiesEnabled:!0,source:{uri:c.BASE_URL_FORM+i},onLoadEnd:function(){return U(!1)}}),(0,w.jsxs)(d.View,{style:p.default.ctnFooter,children:[(0,w.jsx)(f.default,{style:{flex:1,backgroundColor:"#f2ecfd"},styleLabel:{color:"#6d1fad"},label:"Quay lại",onPress:function(){return n.goBack()}}),!C&&!P&&(0,w.jsx)(f.default,{disabled:N,style:{flex:1},label:"Lưu",onPress:function(){var t,n=`window.postMessage('${JSON.stringify({result:"submit"}).replace(/'/g,"\\'")}', '*');`;null==e||null==(t=e.current)||t.injectJavaScript(n)}})]})]})}},48049:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995);t.default=i.StyleSheet.create({ctnFooter:{flexDirection:"row",paddingHorizontal:(0,r.SizeDP)(16),columnGap:(0,r.SizeDP)(16),marginTop:(0,r.SizeDP)(8)},version:{borderWidth:(0,r.SizeDP)(1),borderColor:"rgba(0, 53, 128, .35)",borderRadius:(0,r.SizeDP)(8),paddingHorizontal:(0,r.SizeDP)(8),paddingVertical:(0,r.SizeDP)(5)}})},3614:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(55166),a=i(n(21527)),o=i(n(71773)),l=n(47671),s=a.default.lazy((function(){return r.Federated.importModule("eContract","./createContract")}));t.default=function(){return(0,l.jsx)(a.default.Suspense,{fallback:(0,l.jsx)(o.default,{app:"Create contract screen"}),children:(0,l.jsx)(s,{})})}},98884:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.dataStatus=t.dataPrioritySelect=void 0;var i=n(60596);t.dataPrioritySelect=[{label:"TK.high",value:i.Propity.high},{label:"TK.medium",value:i.Propity.medium},{label:"TK.low",value:i.Propity.low}],t.dataStatus=[{label:"TK.processing",value:i.Status.processing},{label:"TK.completed",value:i.Status.completed},{label:"TK.draft",value:i.Status.draft},{label:"TK.voided",value:i.Status.voided},{label:"TK.rejected",value:i.Status.rejected}]},82894:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=n(7005),s=i(n(43184)),u=i(n(27747)),c=n(41995),d=i(n(29846)),f=n(46317),p=i(n(69290)),h=n(21527),y=n(87841),m=i(n(24541)),v=i(n(65963)),g=n(98884),S=n(14740),x=n(2543),j=i(n(94516)),w=i(n(64213)),b=n(12638),D=i(n(89142)),T=n(32207),P=n(2884),C=n(11671),I=n(47671);t.default=function(e){var t=e.route,n=(0,P.useTranslation)().t,i=null==t?void 0:t.params,k=i.onGoBack,_=i.paramsSelectTicket,F=(0,S.useNavigation)(),O=(0,h.useState)(!1),M=(0,o.default)(O,2),E=M[0],R=M[1],z=(0,h.useState)([]),V=(0,o.default)(z,2),B=V[0],A=V[1],L=(0,h.useState)([]),N=(0,o.default)(L,2),U=N[0],W=N[1],H=(0,h.useState)([]),G=(0,o.default)(H,2),$=G[0],Y=G[1],K=(0,h.useState)([]),q=(0,o.default)(K,2),J=q[0],X=q[1],Q=(0,h.useState)(0),Z=(0,o.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,h.useState)([]),ie=(0,o.default)(ne,2),re=ie[0],ae=ie[1],oe=(0,h.useState)(_),le=(0,o.default)(oe,2),se=le[0],ue=le[1],ce=(0,h.useState)(0),de=(0,o.default)(ce,2),fe=de[0],pe=de[1],he=(0,h.useState)(!1),ye=(0,o.default)(he,2),me=ye[0],ve=ye[1],ge=(0,h.useState)(""),Se=(0,o.default)(ge,2),xe=Se[0],je=Se[1],we=(0,h.useState)(""),be=(0,o.default)(we,2),De=be[0],Te=be[1],Pe=(0,h.useState)({}),Ce=(0,o.default)(Pe,2),Ie=Ce[0],ke=Ce[1],_e=(0,b.useAppSelector)((function(e){return e.account})).dataAccount,Fe=(0,b.useAppSelector)((function(e){return e.common.accessToken})),Oe=(0,C.useTicketServices)(),Me=(0,x.debounce)((function(e){Te(e)}),500);(0,h.useEffect)((function(){return Me(xe),function(){Me.cancel()}}),[xe]),(0,h.useEffect)((function(){(0,a.default)((function*(){yield Be(fe,De)}))()}),[fe,De]),(0,S.useFocusEffect)((0,h.useCallback)((function(){(0,a.default)((function*(){pe(0),yield Ae()}))()}),[]));var Ee,Re,ze,Ve=(Ee=(0,a.default)((function*(){pe(0),yield Be(0,De)})),function(){return Ee.apply(this,arguments)}),Be=(Re=(0,a.default)((function*(e,t){try{var n,i,a,o,l,s={createdBy:null!=(n=null==_e?void 0:_e.email)?n:"elmstest7@gmail.com",myTicket:!0,textSearch:t,ticketStatus:null!=(i=U.map((function(e){return g.dataStatus[e.row].value})))?i:[],service:null!=(a=null==B?void 0:B.map((function(e){var t;return null==$||null==(t=$[null==e?void 0:e.row])?void 0:t.value})))?a:[],priority:null!=(o=null==J?void 0:J.map((function(e){var t;return null==g.dataPrioritySelect||null==(t=g.dataPrioritySelect[null==e?void 0:e.row])?void 0:t.value})))?o:[],startDate:null==Ie?void 0:Ie.startDate,endDate:null==Ie?void 0:Ie.endDate},u=yield Oe.getTicketList(e,20,"createdDate,desc",Fe,s);ae(0===e?null==u?void 0:u.content:[].concat((0,r.default)(re),(0,r.default)(null==u?void 0:u.content))),te(null==u||null==(l=u.page)?void 0:l.totalRecords)}catch(e){}finally{ve(!1),R(!1)}})),function(e,t){return Re.apply(this,arguments)}),Ae=(ze=(0,a.default)((function*(){try{var e=(yield Oe.getServiceMenu(0,1e4,void 0,Fe,!0)).content.map((function(e){return{label:e.serviceName,value:e.id}}));Y(e)}catch(e){}})),function(){return ze.apply(this,arguments)});return(0,I.jsx)(y.TouchableWithoutFeedback,{onPress:function(){return y.Keyboard.dismiss()},children:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(s.default,{title:n("HM.addRelativeTicket")}),(0,I.jsxs)(l.SafeAreaView,{style:d.default.ctnArea,edges:["bottom","left","right"],children:[(0,I.jsx)(u.default,{viewIconLeft:(0,I.jsx)(f.IcSearch,{}),viewIconRight:(0,I.jsx)(f.IconFilter,{}),value:xe,onIconPress:function(){return R(!0)},onChangeText:je,label:n("HM.searchTicket")}),(0,I.jsx)(y.FlatList,{data:re,refreshing:me,onRefresh:function(){0!==fe&&ve(!0),pe(0)},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,contentContainerStyle:{paddingRight:(0,c.SizeDP)(2)},onEndReached:function(){re.length<ee&&pe(fe+1)},onEndReachedThreshold:.5,renderItem:function(e){var t=e.item;return(0,I.jsx)(D.default,{dataCard:t,onSelect:ue,select:se,account:_e})}}),(0,I.jsx)(w.default,{labelLeft:n("CM.labelCancel"),labelRight:`${n("CM.save")} (${se.length}) ${n("HM.ticket")}`,onPressLeft:function(){return F.goBack()},onPressRight:function(){k(se),F.goBack()}})]}),(0,I.jsx)(p.default,{isVisible:E,title:n("CM.filter"),onClose:function(){return R(!1)},renderContent:(0,I.jsx)(I.Fragment,{children:!(0,x.isEmpty)($)&&(0,I.jsxs)(l.SafeAreaView,{style:{maxHeight:2*c.ScreenHeight/3},children:[(0,I.jsxs)(y.ScrollView,{showsVerticalScrollIndicator:!1,children:[(0,I.jsx)(m.default,{children:n("HM.groupService")}),(0,I.jsx)(v.default,{onSelect:A,valueSelect:B,placeholder:n("HM.groupServiceSelect"),multiple:!0,listData:$}),(0,I.jsx)(m.default,{children:n("HM.priority")}),(0,I.jsx)(v.default,{onSelect:X,valueSelect:J,placeholder:n("HM.priotitySelect"),multiple:!0,isi18n:!0,listData:g.dataPrioritySelect}),(0,I.jsx)(m.default,{children:n("HM.statusTicket")}),(0,I.jsx)(v.default,{onSelect:W,valueSelect:U,placeholder:n("HM.select"),multiple:!0,isi18n:!0,listData:g.dataStatus}),(0,I.jsx)(m.default,{style:{paddingVertical:(0,c.SizeDP)(10)},children:n("HM.createDate")}),(0,I.jsx)(T.RangeDatepicker,{range:Ie,size:"large",controlStyle:d.default.calender,onSelect:function(e){return ke(e)},min:new Date(1900,0,0),placeholder:function(e){return(0,I.jsx)(m.default,Object.assign({},e,{children:n("HM.selectDate")}))}}),(0,I.jsx)(y.View,{style:d.default.bottom})]}),(0,I.jsx)(y.View,{style:{},children:(0,I.jsx)(j.default,{label:n("CM.save"),style:{marginTop:(0,c.SizeDP)(20)},onPress:Ve})})]})})})]})})}},29846:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995),a=n(20880);t.default=i.StyleSheet.create({ctnArea:{padding:(0,r.SizeDP)(16),backgroundColor:a.Color.White,flex:1},bottom:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",columnGap:(0,r.SizeDP)(10),flex:1},calender:{backgroundColor:"#fff",flex:1,alignItems:"center",justifyContent:"center"}})},94655:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),a=n(46317),o=i(n(85739)),l=i(n(24541)),s=n(41995),u=n(20880),c=n(60596),d=n(35708),f=n(2884),p=n(47671);t.default=function(e){var t=e.dataCard,n=e.onSelect,i=e.select,h=e.account,y=(0,f.useTranslation)().t,m=function(e,t,n){return(0,p.jsx)(r.View,{style:{backgroundColor:t,paddingHorizontal:(0,s.SizeDP)(10),paddingVertical:(0,s.SizeDP)(6),borderRadius:(0,s.SizeDP)(8),alignItems:"center",justifyContent:"center",marginTop:(0,s.SizeDP)(6),maxWidth:160},children:(0,p.jsx)(l.default,{style:{color:e},children:y(`TK.${n}`)})})};return(0,p.jsxs)(r.View,{style:o.default.ctnMain,children:[(0,p.jsxs)(r.View,{style:{rowGap:(0,s.SizeDP)(6)},children:[(0,p.jsx)(l.default,{children:null==t?void 0:t.title}),(0,p.jsxs)(r.View,{style:o.default.ctnInfo,children:[(0,p.jsx)(l.default,{children:d.DateUtils.convertDateToDDMMYYYY_H_M(null==t?void 0:t.createdDate)}),null!=h&&h.avatar?(0,p.jsx)(r.View,{style:o.default.ctnImage,children:(0,p.jsx)(r.Image,{width:(0,s.SizeDP)(16),height:(0,s.SizeDP)(16),style:{borderRadius:(0,s.SizeDP)(8)},source:{uri:u.String.PREFIX_IMG_BASE64+(null==h?void 0:h.avatar)}})}):(0,p.jsx)(r.View,{style:o.default.ctnImage}),(0,p.jsx)(l.default,{numberOfLines:1,style:{width:(0,s.SizeDP)(150)},children:null==t?void 0:t.createdBy})]}),function(){switch(null==t?void 0:t.ticketStatus){case c.Status.completed:return m(u.Color.completed,u.Color.completed01,c.Status.completed);case c.Status.draft:return m(u.Color.draft,u.Color.draft01,c.Status.draft);case c.Status.voided:return m(u.Color.voided,u.Color.voided01,c.Status.voided);case c.Status.rejected:return m(u.Color.rejected,u.Color.rejected01,c.Status.rejected);case c.Status.processing:return m(u.Color.processing,u.Color.processing01,c.Status.processing)}}()]}),(0,p.jsx)(r.TouchableOpacity,{onPress:function(){var e=i.filter((function(e){return e.id!==t.id}));n(e)},children:(0,p.jsx)(a.IconTrash,{width:(0,s.SizeDP)(16),height:(0,s.SizeDP)(16)})})]})}},85739:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:(0,r.SizeDP)(16),backgroundColor:a.Color.White,borderBottomWidth:(0,r.SizeDP)(1),borderBottomColor:a.Color.borderColor},ctnImage:{width:(0,r.SizeDP)(16),height:(0,r.SizeDP)(16),backgroundColor:"red",borderRadius:(0,r.SizeDP)(8),marginHorizontal:(0,r.SizeDP)(4)},subText:{fontSize:r.default.FontTiny},ctnInfo:{flexDirection:"row",alignItems:"center"}})},37377:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(87841),l=i(n(43184)),s=i(n(33865)),u=n(46317),c=n(41995),d=i(n(93238)),f=n(21527),p=n(7005),h=n(20880),y=i(n(64213)),m=i(n(85555)),v=n(60596),g=i(n(69290)),S=n(14740),x=n(88e3),j=n(2543),w=n(12638),b=i(n(24541)),D=i(n(45001)),T=i(n(27747)),P=i(n(87288)),C=i(n(94655)),I=n(2884),k=n(32207),_=n(11671),F=n(47671),O=[{id:1,key:"TK.high",value:v.Propity.high,icon:(0,F.jsx)(u.Iconhigh,{width:(0,c.SizeDP)(12),height:(0,c.SizeDP)(12)})},{id:2,key:"TK.medium",value:v.Propity.medium,icon:(0,F.jsx)(u.Iconmedium,{width:(0,c.SizeDP)(12),height:(0,c.SizeDP)(12)})},{id:3,key:"TK.low",value:v.Propity.low,icon:(0,F.jsx)(u.Iconlow,{width:(0,c.SizeDP)(12),height:(0,c.SizeDP)(12)})}],M=[{id:1,key:"HM.information",value:"information",icon:(0,F.jsx)(u.IconPerson,{width:(0,c.SizeDP)(20),height:(0,c.SizeDP)(20)})},{id:2,key:"HM.relative",value:"relative",icon:(0,F.jsx)(u.IconRelative,{width:(0,c.SizeDP)(20),height:(0,c.SizeDP)(20)})}];t.default=function(e){var t,n,i=e.route,v=(0,I.useTranslation)().t,E=(0,f.useRef)(null),R=(0,S.useNavigation)(),z=null!=(t=null==i||null==(n=i.params)?void 0:n.action)?t:"create",V=(0,f.useState)(O[2]),B=(0,a.default)(V,2),A=B[0],L=B[1],N=(0,f.useState)(),U=(0,a.default)(N,2),W=U[0],H=U[1],G=(0,f.useState)(),$=(0,a.default)(G,2),Y=$[0],K=$[1],q=(0,f.useState)(""),J=(0,a.default)(q,2),X=J[0],Q=J[1],Z=(0,f.useState)(""),ee=(0,a.default)(Z,2),te=ee[0],ne=ee[1],ie=(0,f.useState)(!1),re=(0,a.default)(ie,2),ae=re[0],oe=re[1],le=(0,f.useState)(!1),se=(0,a.default)(le,2),ue=se[0],ce=se[1],de=(0,f.useState)(!1),fe=(0,a.default)(de,2),pe=fe[0],he=fe[1],ye=(0,f.useState)(!1),me=(0,a.default)(ye,2),ve=(me[0],me[1]),ge=(0,f.useState)(!1),Se=(0,a.default)(ge,2),xe=Se[0],je=Se[1],we=(0,f.useState)(!1),be=(0,a.default)(we,2),De=be[0],Te=be[1],Pe=(0,f.useState)(0),Ce=(0,a.default)(Pe,2),Ie=Ce[0],ke=Ce[1],_e=(0,_.useTicketServices)(),Fe=(0,w.useAppSelector)((function(e){return e.account.dataAccount})),Oe=(0,w.useAppSelector)((function(e){return e.common.accessToken}));(0,S.useFocusEffect)((0,f.useCallback)((function(){var e,t;(null==i||null==(e=i.params)||null==(t=e.paramsSelectTicket)?void 0:t.length)>=0&&ce(!0)}),[null==i?void 0:i.params])),(0,f.useEffect)((function(){var e=o.Keyboard.addListener("android"===o.Platform.OS?"keyboardDidShow":"keyboardWillShow",(function(e){ke(e.endCoordinates.height)})),t=o.Keyboard.addListener("android"===o.Platform.OS?"keyboardDidHide":"keyboardWillHide",(function(e){ke(0)}));return function(){e.remove(),t.remove()}}),[]),(0,f.useEffect)((function(){(0,r.default)((function*(){try{var e,t;Q("");var n=yield _e.getModeler(null==i||null==(e=i.params)||null==(t=e.dataTicket)?void 0:t.modelerId,Oe);H(n),K(n.formVersion)}catch(e){}}))()}),[]);var Me,Ee,Re,ze,Ve=(Me=(0,r.default)((function*(e){var t=JSON.parse(e.nativeEvent.data);if("e-from"===t.result&&"create"!==z){var n=yield Be();if(n){var r,a=O.find((function(e){return(null==e?void 0:e.value)===n.priority}));a&&L(a);var o=null==(r=n.formData)?void 0:r.find((function(e){return!e.userTaskId}));if(o&&o.formData){var l;K(o.version);var s=`window.postMessage('${JSON.stringify({type:"postFormEdit",data:JSON.parse(o.formData)}).replace(/'/g,"\\'")}', '*');`;null==E||null==(l=E.current)||l.injectJavaScript(s)}var u=n.listRelativeTicket;u.length>0&&R.setParams(Object.assign({},null==i?void 0:i.params,{paramsSelectTicket:u}))}}if("result"==t.result){var c,d,f;Te(!0);var p=null==i||null==(c=i.params)?void 0:c.dataTicket,y=null!=i&&null!=(d=i.params)&&d.paramsSelectTicket?null==i||null==(f=i.params)?void 0:f.paramsSelectTicket.map((function(e){return{id:e.id}})):[];if(p&&W){var m={followerId:W.followerId,formData:[{eformId:W.formId,formData:JSON.stringify(t.data),ticketId:null,userTaskId:null,version:Y}],jsonXml:W.jsonXml,listRelativeTicket:y,priority:A.value,ticketStatus:"processing",title:X,workFlowId:p.id};try{var v=yield _e.createTicket(m,Oe);v&&R.navigate(h.NavigationName.CreateTicketSuccess,{ticketId:null==v?void 0:v.id})}catch(e){console.log(e)}finally{Q(""),Te(!1)}}}})),function(e){return Me.apply(this,arguments)}),Be=(Ee=(0,r.default)((function*(){try{var e,t;return yield _e.getTicketById(null==i||null==(e=i.params)||null==(t=e.dataTicket)?void 0:t.id,Oe)}catch(e){console.log(e)}})),function(){return Ee.apply(this,arguments)}),Ae=function(e){switch(e){case"noti":ve(!1),je(!0);break;case"cancel":he(!1);break;case"info":je(!1),Q(""),ne("")}},Le=function(){var e,t=`window.postMessage('${JSON.stringify({result:"submit"}).replace(/'/g,"\\'")}', '*');`;null==E||null==(e=E.current)||e.injectJavaScript(t),ve(!1)};return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(o.TouchableWithoutFeedback,{onPress:function(){return o.Keyboard.dismiss()},children:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(o.StatusBar,{translucent:!0,barStyle:"dark-content",backgroundColor:h.Color.Transparent}),(0,F.jsx)(l.default,{style:s.default.ctnHeader,contentStyle:s.default.ctnHeader,titleStyle:{color:h.Color.TextPrimary},title:function(){switch(z){case"create":return v("HM.addSearch");case"multi":return v("HM.muiTicket");case"edit":return v("HM.editTicket");default:return""}}(),fillIconBackLeft:"",renderContentRight:function(){return(0,F.jsxs)(o.View,{style:s.default.ctnRenderRightHeader,children:[(0,F.jsx)(m.default,{listDropdown:O,onChangeItem:L,dropDownStyle:{right:(0,c.SizeDP)(50)},renderShowData:(0,F.jsxs)(o.View,{style:s.default.renderShow,children:[A.icon,(0,F.jsx)(u.IconArrowGrey,{fill:"#fff",width:(0,c.SizeDP)(12),height:(0,c.SizeDP)(12)})]})}),(0,F.jsx)(o.View,{children:(0,F.jsx)(m.default,{listDropdown:M,onChangeItem:function(e){return function(e){"information"===e.value?oe(!0):"relative"===e.value&&ce(!0)}(e)},containerStyle:{width:(0,c.SizeDP)(12)}})})]})}}),(0,F.jsx)(k.Divider,{}),(0,F.jsx)(o.View,{style:[{flex:1,backgroundColor:h.Color.BgBlur},"android"===o.Platform.OS&&{paddingBottom:Ie>0?Ie-100:0}],children:!(0,j.isEmpty)(Y)&&(0,F.jsx)(d.default,{containerStyle:[],nestedScrollEnabled:!0,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,startInLoadingState:!0,injectedJavaScript:h.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,ref:E,onMessage:Ve,source:{uri:x.BASE_URL_FORM+Y}})}),(0,F.jsx)(k.Divider,{}),(0,F.jsx)(p.SafeAreaView,{edges:["bottom","left","right"],style:{backgroundColor:h.Color.White},children:(0,F.jsx)(y.default,{labelLeft:v("CM.labelCancel"),labelRight:v("HM.sendServices"),onPressLeft:function(){return he(!0)},onPressRight:function(){(0,j.isEmpty)(X)?je(!0):Le()}})}),(0,F.jsx)(g.default,{isVisible:ae,onClose:function(){return oe(!1)},title:v("HM.infoPerson"),renderContent:(0,F.jsx)(F.Fragment,{children:!(0,j.isEmpty)(Fe)&&(0,F.jsxs)(o.View,{style:s.default.ctnTicketPerson,children:[(0,F.jsxs)(o.View,{style:s.default.ctnUser,children:[(0,F.jsx)(o.Image,{width:(0,c.SizeDP)(50),height:(0,c.SizeDP)(50),borderRadius:(0,c.SizeDP)(25),source:{uri:h.String.PREFIX_IMG_BASE64+Fe.avatar}}),(0,F.jsx)(b.default,{children:""+Fe.firstName+Fe.lastName})]}),(0,F.jsxs)(o.View,{style:s.default.ctnSub,children:[(0,F.jsx)(u.IconMail,{width:(0,c.SizeDP)(24),height:(0,c.SizeDP)(24)}),(0,F.jsx)(b.default,{children:""+Fe.email})]}),(0,F.jsxs)(o.View,{style:s.default.ctnSub,children:[(0,F.jsx)(u.IconTree,{width:(0,c.SizeDP)(24),height:(0,c.SizeDP)(24)}),(0,F.jsx)(b.default,{children:""+Fe.acNameOrg})]}),(0,F.jsxs)(o.View,{style:s.default.ctnSub,children:[(0,F.jsx)(u.IconPhone,{width:(0,c.SizeDP)(24),height:(0,c.SizeDP)(24)}),(0,F.jsx)(b.default,{children:""+Fe.phone})]})]})})}),(0,F.jsx)(g.default,{isVisible:ue,onClose:function(){return ce(!1)},title:v("HM.relatedTicket"),labelRight:v("CM.add"),onPresLabelRight:function(){var e,t;ce(!1),R.navigate(h.NavigationName.AddTicketRelativeS,{paramsSelectTicket:null!=i&&null!=(e=i.params)&&e.paramsSelectTicket?null==i||null==(t=i.params)?void 0:t.paramsSelectTicket:[],onGoBack:function(e){R.setParams({paramsSelectTicket:e})}})},renderContent:(0,F.jsx)(F.Fragment,{children:(0,j.isEmpty)(null==i||null==(Re=i.params)?void 0:Re.paramsSelectTicket)?(0,F.jsxs)(o.View,{style:s.default.ctnArea,children:[(0,F.jsx)(u.IconEmpty,{width:(0,c.SizeDP)(218),height:(0,c.SizeDP)(149)}),(0,F.jsx)(b.default,{style:s.default.textTitle,children:v("HM.relativeTicketEmpty")}),(0,F.jsx)(b.default,{style:s.default.textDes,children:v("HM.desRelativeTicket")})]}):(0,F.jsx)(o.FlatList,{style:{height:c.ScreenHeight-(0,c.SizeDP)(200)},data:null==i||null==(ze=i.params)?void 0:ze.paramsSelectTicket,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,renderItem:function(e){var t,n=e.item;return(0,F.jsx)(C.default,{dataCard:n,account:Fe,select:null==i||null==(t=i.params)?void 0:t.paramsSelectTicket,onSelect:function(e){return R.setParams({paramsSelectTicket:e})}})}})})}),(0,F.jsx)(D.default,{isVisible:pe,onClose:function(){return Ae("cancel")},title:v("HM.titleCancel"),content:v("HM.contentCancel"),type:"cancel",labelCancel:v("HM.cancel"),labelConfirm:v("CM.labelCancel"),styleBtnRight:{backgroundColor:h.Color.RedE14337},onConfirm:function(){he(!1),R.goBack()}}),(0,F.jsx)(D.default,{isVisible:xe,onClose:function(){return Ae("info")},title:v("HM.serviceName"),content:v("HM.contentFill"),type:"info",labelCancel:v("CM.labelCancel"),labelConfirm:v("HM.sendServices"),styleBtnRight:{backgroundColor:h.Color.BgPrimary},onConfirm:function(){(0,j.isEmpty)(X)?ne(v("HM.notEmpty")):(Le(),je(!1),ve(!0),ne(""))},renderContent:function(){return(0,F.jsx)(o.View,{style:{width:"100%",marginVertical:(0,c.SizeDP)(6)},children:(0,F.jsx)(T.default,{label:v("HM.enterName"),value:X,onChangeText:Q,errorMessage:te})})}}),(0,F.jsx)(P.default,{isVisible:De})]})})})}},33865:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({ctnHeader:{backgroundColor:r.Color.White},ctnTitle:{color:r.Color.colorText,fontSize:r.FontSize.FontLarge,fontFamily:r.Font.InterSemiBold600},ctnWebview:{marginHorizontal:(0,a.SizeDP)(18),marginVertical:(0,a.SizeDP)(18),borderRadius:(0,a.SizeDP)(17)},ctnRenderRightHeader:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,a.SizeDP)(10)},renderShow:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,a.SizeDP)(2),borderRadius:(0,a.SizeDP)(4),borderWidth:(0,a.SizeDP)(1),borderColor:r.Color.borderPrority,paddingVertical:(0,a.SizeDP)(4),paddingHorizontal:(0,a.SizeDP)(4)},ctnTicketPerson:{alignItems:"flex-start",rowGap:(0,a.SizeDP)(20)},ctnUser:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,a.SizeDP)(10),paddingHorizontal:(0,a.SizeDP)(10)},ctnSub:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,a.SizeDP)(10),marginLeft:(0,a.SizeDP)(40)},textTitle:{fontFamily:r.Font.InterSemiBold600,fontSize:r.FontSize.FontBase,color:r.Color.TextPrimary,marginTop:(0,a.SizeDP)(20)},textDes:{fontFamily:r.Font.InterRegular400,fontSize:r.FontSize.FontSmall,color:r.Color.Text07,textAlign:"center",marginVertical:(0,a.SizeDP)(8)},ctnArea:{backgroundColor:r.Color.White,alignItems:"center",justifyContent:"center",padding:(0,a.SizeDP)(16)}})},77134:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),a=i(n(43184)),o=n(46317),l=i(n(2198)),s=n(7005),u=i(n(24541)),c=i(n(94516)),d=n(14740),f=n(20880),p=n(41995),h=n(2884),y=n(60596),m=n(12638),v=n(47671);t.default=function(){var e,t=(0,d.useRoute)(),n=(0,d.useNavigation)(),i=(null==t||null==(e=t.params)?void 0:e.ticketId)||"",g=(0,m.useAppSelector)((function(e){return e.account})).dataAccount,S=(0,h.useTranslation)().t;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(r.StatusBar,{translucent:!0,barStyle:"dark-content",backgroundColor:f.Color.Transparent}),(0,v.jsx)(a.default,{style:l.default.ctnHeader,contentStyle:l.default.ctnHeader,titleStyle:{color:f.Color.TextPrimary},title:S("HM.addSearch"),fillIconBackLeft:""}),(0,v.jsxs)(s.SafeAreaView,{edges:["bottom","left","right"],style:l.default.ctnArea,children:[(0,v.jsx)(o.IconEmpty,{width:(0,p.SizeDP)(331),height:(0,p.SizeDP)(217)}),(0,v.jsx)(u.default,{style:l.default.textTitle,children:S("HM.createSuccess")}),(0,v.jsx)(r.TouchableOpacity,{onPress:function(){i&&n.navigate(f.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:i,email:g.email,status:y.Status.processing,selectTabBottom:1})},children:(0,v.jsx)(u.default,{style:l.default.textDetail,children:"Xem chi tiết"})}),(0,v.jsx)(c.default,{style:{width:"100%",marginTop:(0,p.SizeDP)(16)},label:S("HM.home"),onPress:function(){n.navigate(f.NavigationName.BottomTabs)}})]})]})}},2198:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({ctnHeader:{backgroundColor:r.Color.White},ctnTitle:{color:r.Color.colorText,fontSize:r.FontSize.FontLarge,fontFamily:r.Font.InterSemiBold600},ctnArea:{backgroundColor:r.Color.White,alignItems:"center",justifyContent:"center",flex:1,paddingHorizontal:(0,a.SizeDP)(16)},textTitle:{fontFamily:r.Font.InterSemiBold600,fontSize:r.FontSize.FontBase,color:r.Color.TextPrimary,marginTop:(0,a.SizeDP)(20)},textDes:{fontFamily:r.Font.InterRegular400,fontSize:r.FontSize.FontSmall,color:r.Color.Text07,textAlign:"center",marginVertical:(0,a.SizeDP)(8)},textDetail:{fontFamily:r.Font.InterMedium500,fontSize:r.FontSize.FontSmall,color:r.Color.BgInfo,marginBottom:(0,a.SizeDP)(50)}})},94149:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(87841),l=n(7005),s=n(20880),u=n(32207),c=n(21527),d=n(14740),f=n(12638),p=n(2543),h=i(n(24541)),y=n(2884),m=n(11671),v=n(47671);t.default=function(){var e=(0,y.useTranslation)().t,t=(0,d.useNavigation)(),n=(0,l.useSafeAreaInsets)(),i=(0,c.useRef)(null),g=(0,c.useState)(""),S=(0,a.default)(g,2),x=S[0],j=S[1],w=(0,c.useState)(),b=(0,a.default)(w,2),D=b[0],T=b[1],P=(0,m.useTicketServices)(),C=(0,c.useState)(""),I=(0,a.default)(C,2),k=I[0],_=I[1],F=(0,p.debounce)((function(e){_(e)}),300),O=(0,f.useAppSelector)((function(e){return e.common})).accessToken;(0,c.useEffect)((function(){return F(x),function(){F.cancel()}}),[x]),(0,c.useEffect)((function(){(0,p.isEmpty)(k)?T([]):E(k)}),[k]);var M,E=(M=(0,r.default)((function*(e){var t={isAdmin:!1,status:["display"],textSearch:e},n=yield P.getListServives(t,{sort:"displayOrder,asc",page:0,size:1e4},O);n&&T(n.content)})),function(e){return M.apply(this,arguments)});return(0,v.jsx)(o.TouchableWithoutFeedback,{onPress:function(){return o.Keyboard.dismiss()},children:(0,v.jsx)(l.SafeAreaView,{edges:["top"],style:{backgroundColor:s.Color.BgPrimary,flex:1},children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.Input,{style:{backgroundColor:s.Color.BgPrimary,borderWidth:0},allowFontScaling:!1,textStyle:{color:"#fff"},placeholderTextColor:"#fff",ref:i,placeholder:e("HM.search"),value:x,autoFocus:!0,status:"basic",onChangeText:function(e){return j(e)},accessoryLeft:(0,v.jsx)(o.TouchableOpacity,{onPress:function(){return t.goBack()},children:(0,v.jsx)(u.Icon,{name:"arrow-back",fill:"#ffffff"})}),accessoryRight:x?(0,v.jsx)(o.TouchableOpacity,{onPress:function(){return j("")},children:(0,v.jsx)(u.Icon,{name:"close-outline",fill:"#ffffff"})}):void 0}),(0,v.jsx)(u.Divider,{}),(0,v.jsx)(u.Layout,{style:{flex:1,paddingBottom:n.bottom,backgroundColor:"#fff"},level:"1",children:(0,v.jsx)(u.List,{style:{backgroundColor:"#fff",flex:1},showsVerticalScrollIndicator:!1,data:D,renderItem:function(e){var n=e.item;e.index;return(0,v.jsx)(u.ListItem,{title:function(e){return(0,v.jsx)(h.default,Object.assign({},e,{children:`${n.serviceName}`}))},description:function(e){return(0,v.jsx)(h.default,Object.assign({},e,{children:`${n.description}`}))},accessoryLeft:(0,v.jsx)(u.Icon,{fill:n.color,name:"grid-outline"}),accessoryRight:(0,v.jsx)(u.Icon,{name:"chevron-right-outline"}),onPress:function(){return function(e){t.navigate(s.NavigationName.ServiceDetail,e)}(n)}})},ListEmptyComponent:function(){return(0,v.jsx)(o.View,{style:{margin:10,flex:1},children:(0,v.jsx)(h.default,{children:e("CM.emptyData")})})}})})]})})})}},77410:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(14740),l=n(21527),s=n(87841),u=i(n(85594)),c=n(7005),d=n(46317),f=i(n(12530)),p=i(n(43184)),h=i(n(24541)),y=n(41995),m=n(12638),v=n(2884),g=n(11671),S=n(47671);t.default=function(e){var t=e.route,n=(0,v.useTranslation)().t,i=null==t?void 0:t.params,x=(0,l.useState)([]),j=(0,a.default)(x,2),w=j[0],b=j[1],D=(0,m.useAppSelector)((function(e){return e.common})).accessToken,T=(0,g.useTicketServices)();(0,o.useFocusEffect)((0,l.useCallback)((function(){(0,r.default)((function*(){var e=yield T.getByServiceId(i.id,D);b(P(e))}))()}),[]));var P=function(e){var t=new Map;return e.forEach((function(e){e.groupModelerId?t.has(e.groupModelerId)?t.get(e.groupModelerId).push(e):t.set(e.groupModelerId,[e]):t.has(e.id)?t.get(e.id).push(e):t.set(e.id,[e])})),Array.from(t.values())};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(p.default,{title:i.serviceName}),(0,S.jsx)(c.SafeAreaView,{edges:["bottom","left","right"],style:u.default.ctnMain,children:(0,S.jsx)(s.FlatList,{data:w,renderItem:function(e){var t=e.item;return(0,S.jsx)(f.default,{item:t})},ListEmptyComponent:(0,S.jsxs)(s.View,{style:u.default.ctnEmpty,children:[(0,S.jsx)(d.IconEmptyOther,{width:(0,y.SizeDP)(95),height:(0,y.SizeDP)(111)}),(0,S.jsx)(h.default,{children:n("HM.subServicesEmpty")})]})})})]})}},85594:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({ctnMain:{backgroundColor:r.Color.White,padding:(0,a.SizeDP)(16),flex:1},ctnEmpty:{flex:1,alignItems:"center",justifyContent:"center",rowGap:(0,a.SizeDP)(20)}})},12530:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=n(87841),o=n(21527),l=n(46317),s=i(n(106)),u=i(n(24541)),c=n(14740),d=n(20880),f=n(41995),p=n(47671);t.default=function(e){var t=e.item,n=(0,c.useNavigation)(),i=(0,o.useState)(!1),h=(0,r.default)(i,2),y=h[0],m=h[1],v=function(e){n.navigate(d.NavigationName.CreateTicket,{dataTicket:e})};return(0,p.jsx)(a.View,{children:t.every((function(e){return!e.groupModelerId}))?(0,p.jsx)(a.TouchableOpacity,{onPress:function(){return v(t[0])},style:s.default.ctnItem,children:(0,p.jsx)(u.default,{children:t[0].flowName})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.TouchableOpacity,{onPress:function(){return m(!y)},style:s.default.ctnItem,children:[(0,p.jsx)(u.default,{children:t[0].groupModelerName}),y?(0,p.jsx)(a.View,{style:{transform:[{rotate:"180deg"}]},children:(0,p.jsx)(l.IconArrowGrey,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})}):(0,p.jsx)(a.View,{children:(0,p.jsx)(l.IconArrowGrey,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})})]}),y&&t.map((function(e){return(0,p.jsx)(a.View,{style:[s.default.ctnSubItem],children:(0,p.jsx)(a.TouchableOpacity,{onPress:function(){return v(e)},children:(0,p.jsx)(u.default,{children:e.flowName})})},e.id)}))]})})}},106:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995),a=n(20880);t.default=i.StyleSheet.create({ctnItem:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:(0,r.SizeDP)(20),borderBottomWidth:1,borderBottomColor:a.Color.borderColor},ctnSubItem:{paddingLeft:(0,r.SizeDP)(30),paddingVertical:(0,r.SizeDP)(20),rowGap:(0,r.SizeDP)(20),borderBottomWidth:1,borderBottomColor:a.Color.borderColor}})},91510:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),s=n(87841),u=i(n(76158)),c=i(n(24541)),d=n(46317),f=n(41995),p=n(14740),h=n(2543),y=n(20880),m=i(n(43184)),v=n(12638),g=n(32207),S=n(2884),x=n(11671),j=n(47671);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}t.default=function(){var e=(0,S.useTranslation)().t,t=(0,p.useNavigation)(),n=((0,v.useAppDispatch)(),(0,l.useState)([])),i=(0,o.default)(n,2),w=i[0],b=i[1],D=(0,l.useState)(0),T=(0,o.default)(D,2),P=T[0],C=T[1],I=(0,l.useState)(0),k=(0,o.default)(I,2),_=k[0],F=k[1],O=(0,l.useState)(!1),M=(0,o.default)(O,2),E=M[0],R=M[1],z=(0,l.useState)({width:s.Dimensions.get("screen").width,height:s.Dimensions.get("screen").height}),V=(0,o.default)(z,2),B=V[0],A=V[1],L=(0,v.useAppSelector)((function(e){return e.common})).accessToken,N=(0,x.useTicketServices)();(0,l.useEffect)((function(){var e=s.Dimensions.addEventListener("change",(function(e){var t=e.screen;A({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]),(0,p.useFocusEffect)((0,l.useCallback)((function(){(0,a.default)((function*(){yield W(0)}))()}),[]));var U,W=(U=(0,a.default)((function*(e){try{try{var t,n={sort:"displayOrder,asc",page:e,size:10},i=yield N.getListServives({isAdmin:!1,status:["display"],textSearch:""},n,L);b(0===e?i.content:[].concat((0,r.default)(w),(0,r.default)(i.content))),F(null==i||null==(t=i.page)?void 0:t.totalPage)}catch(e){console.log("error",e)}finally{R(!1)}}catch(e){}})),function(e){return U.apply(this,arguments)}),H=function(e){var n=e.item;return(0,j.jsxs)(s.TouchableOpacity,{onPress:function(){return function(e){t.navigate(y.NavigationName.ServiceDetail,e)}(n)},style:[u.default.ctnItemList,{flex:1}],children:[(0,j.jsx)(s.View,{style:[u.default.ctnImage,{backgroundColor:(0,h.isNull)(n.color)?y.Color.BgPrimary:n.color}],children:(0,h.isNull)(n.iconBase64)?(0,j.jsx)(d.IconDefault,{width:(0,f.SizeDP)(28),height:(0,f.SizeDP)(28)}):(0,j.jsx)(s.Image,{source:{uri:`${y.String.PREFIX_IMG_BASE64}${n.iconBase64}`}})}),(0,j.jsxs)(s.View,{style:{flex:1,rowGap:(0,f.SizeDP)(8)},children:[(0,j.jsx)(c.default,{style:u.default.textTitleItem,children:n.serviceName}),(0,j.jsx)(c.default,{style:u.default.textDes,children:n.description})]})]})},G=function(){R(!0),C(0),W(0)},$=function(){P<_&&(W(P+1),C(P+1))};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.default,{title:"eRequest",renderContentRight:function(){return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(g.TopNavigationAction,{icon:(0,j.jsx)(g.Icon,{fill:"#ffffff",name:"search"}),onPress:function(){t.navigate(y.NavigationName.SearchHomeScreen,{})}})})}}),(0,j.jsxs)(s.View,{style:u.default.ctnMain,children:[(0,j.jsx)(c.default,{style:u.default.textTitle,children:e("HM.title")}),(0,j.jsx)(j.Fragment,{children:(null==B?void 0:B.width)>f.TYPE_SCREEN.tablet_h?(0,j.jsx)(s.FlatList,{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,data:w,renderItem:H,keyExtractor:function(e){return"_"+e.id},numColumns:2,columnWrapperStyle:{columnGap:20},onEndReachedThreshold:.5,onEndReached:$,refreshing:E,onRefresh:G,ListEmptyComponent:(0,j.jsxs)(s.View,{style:u.default.viewListServices,children:[(0,j.jsx)(d.IconEmpty,{width:(0,f.SizeDP)(218),height:(0,f.SizeDP)(149)}),(0,j.jsx)(c.default,{style:u.default.textH1,children:e("HM.titleEmpty")}),(0,j.jsx)(c.default,{children:e("HM.description")})]})},"_"):(0,j.jsx)(s.FlatList,{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,data:w,renderItem:H,keyExtractor:function(e){return"#"+e.id},numColumns:1,onEndReachedThreshold:.5,onEndReached:$,refreshing:E,onRefresh:G,ListEmptyComponent:(0,j.jsxs)(s.View,{style:u.default.viewListServices,children:[(0,j.jsx)(d.IconEmpty,{width:(0,f.SizeDP)(218),height:(0,f.SizeDP)(149)}),(0,j.jsx)(c.default,{style:u.default.textH1,children:e("HM.titleEmpty")}),(0,j.jsx)(c.default,{children:e("HM.description")})]})},"#")})]})]})}},76158:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{padding:(0,r.SizeDP)(16),backgroundColor:a.Color.White,flex:1},textTitle:{fontFamily:a.Font.InterSemiBold600,fontSize:r.default.FontLarge,color:a.Color.Text},viewListServices:{alignItems:"center",justifyContent:"center",flex:1},textH1:{fontFamily:a.Font.InterSemiBold600,fontSize:r.default.FontBase,color:a.Color.Text,marginBottom:(0,r.SizeDP)(8),marginTop:(0,r.SizeDP)(16)},textH3:{fontFamily:a.Font.InterRegular400,fontSize:r.default.FontTiny,color:a.Color.Text07},ctnItemList:{backgroundColor:a.Color.White,padding:(0,r.SizeDP)(16),borderRadius:(0,r.SizeDP)(8),marginBottom:(0,r.SizeDP)(16),shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:3.84,elevation:5,flexDirection:"row",alignItems:"center",columnGap:(0,r.SizeDP)(10)},ctnImage:{width:(0,r.SizeDP)(68),height:(0,r.SizeDP)(68),borderRadius:(0,r.SizeDP)(8),alignItems:"center",justifyContent:"center"},textTitleItem:{fontFamily:a.Font.InterMedium500,fontSize:r.default.FontSmall,color:a.Color.colorText},textDes:{fontFamily:a.Font.InterRegular400,fontSize:r.default.FontTiny,color:a.Color.Text07}})},89117:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=n(87841),s=n(7005),u=i(n(24541)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),d=i(n(66549)),f=i(n(55980)),p=n(12638),h=n(20880),y=i(n(77389)),m=n(60596),v=n(2884),g=n(11671),S=n(47671);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}t.default=function(e){var t=e.dataListStatus,n=(0,v.useTranslation)().t,i=(0,c.useState)([]),x=(0,o.default)(i,2),j=x[0],w=x[1],b=(0,c.useState)(0),D=(0,o.default)(b,2),T=D[0],P=D[1],C=(0,c.useState)(0),I=(0,o.default)(C,2),k=I[0],_=I[1],F=(0,c.useState)(!1),O=(0,o.default)(F,2),M=O[0],E=O[1],R=(0,p.useAppSelector)((function(e){return e.account})).dataAccount,z=(0,p.useAppSelector)((function(e){return e.common})).accessToken,V=(0,c.useState)(l.Dimensions.get("window").width),B=(0,o.default)(V,2),A=B[0],L=B[1],N=(0,g.useTicketServices)();(0,c.useEffect)((function(){var e=l.Dimensions.addEventListener("change",(function(e){var t=e.window;L(t.width)}));return function(){return e.remove()}}),[]),(0,c.useEffect)((function(){H(k)}),[k]);var U,W,H=(U=(0,a.default)((function*(e){try{var n,i,a={createdBy:null!=(n=null==R?void 0:R.email)?n:"elmstest7@gmail.com",myTicket:!0,textSearch:"",ticketStatus:[t.status]},o=yield N.getTicketList(e,20,t.status===m.Status.processing?"createdDate,desc":"lastModifiedDate,desc",z,a);w(0===e?null==o?void 0:o.content:[].concat((0,r.default)(j),(0,r.default)(null==o?void 0:o.content))),P(Number(null==o||null==(i=o.page)?void 0:i.totalRecords))}catch(e){}finally{E(!1)}})),function(e){return U.apply(this,arguments)}),G=(W=(0,a.default)((function*(e){try{var t={ticketId:e.id,reason:""};(yield N.cancelTicket(t,z))?(y.default.show({text1:n("CM.noti"),type:"success",text2:n("TK.rejectSuccess")}),_(0)):y.default.show({text1:n("CM.noti"),type:"error",text2:n("TK.rejectFailure")})}catch(e){}})),function(e){return W.apply(this,arguments)});return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(s.SafeAreaView,{style:[d.default.ctnMain,{width:A-40}],edges:["left","right"],children:[(0,S.jsxs)(l.View,{style:d.default.ctnHeader,children:[(0,S.jsx)(l.View,{style:[d.default.ctnNumber,{backgroundColor:t.color}],children:(0,S.jsx)(u.default,{style:d.default.text,children:T})}),(0,S.jsx)(l.View,{style:[d.default.ctnText,{backgroundColor:t.color}],children:(0,S.jsx)(u.default,{style:d.default.text,children:n(`TK.name_${t.status}`)})})]}),j?(0,S.jsx)(l.FlatList,{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,data:j,refreshing:M,onRefresh:function(){0!==k?(E(!0),_(0)):H(0)},onEndReached:function(){j.length<T&&_(k+1)},onEndReachedThreshold:.5,keyExtractor:function(e){return""+e.id},contentContainerStyle:{backgroundColor:"#fff"},renderItem:function(e){var n=e.item;return(0,S.jsx)(f.default,{item:n,dataListStatus:t,handleCancelTicket:G})}}):(0,S.jsx)(l.View,{style:{alignItems:"center",justifyContent:"center",flex:1},children:(0,S.jsx)(l.ActivityIndicator,{size:"large",color:h.Color.BgPrimary})})]})})}},66549:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{flex:1},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",marginTop:(0,r.SizeDP)(12),marginLeft:(0,r.SizeDP)(16),columnGap:(0,r.SizeDP)(8),paddingBottom:(0,r.SizeDP)(10)},ctnNumber:{paddingHorizontal:(0,r.SizeDP)(4),height:(0,r.SizeDP)(24),minWidth:(0,r.SizeDP)(24),borderRadius:(0,r.SizeDP)(4),justifyContent:"center",alignItems:"center"},ctnText:{height:(0,r.SizeDP)(24),justifyContent:"center",alignItems:"center",paddingHorizontal:(0,r.SizeDP)(4),borderRadius:(0,r.SizeDP)(5)},text:{fontFamily:a.Font.InterSemiBold600,fontSize:r.default.FontSmall,color:a.Color.White},ctnIcon:{transform:[{rotate:"90deg"}],width:(0,r.SizeDP)(16),height:(0,r.SizeDP)(16),alignItems:"center",justifyContent:"center",marginLeft:(0,r.SizeDP)(8)}})},77838:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getListAction=void 0;var i=n(46317),r=n(41995),a=n(60596),o=n(47671);t.getListAction=function(e){switch(e){case a.Status.processing:return[{id:1,key:"TK.multi",value:"multi",icon:(0,o.jsx)(i.IconMulti,{width:(0,r.SizeDP)(18),height:(0,r.SizeDP)(18)})},{id:2,key:"TK.cancel",value:"cancel",icon:(0,o.jsx)(i.IconTrash,{width:(0,r.SizeDP)(18),height:(0,r.SizeDP)(18)})}];case a.Status.completed:case a.Status.rejected:case a.Status.voided:return[{id:1,key:"TK.multi",value:"multi",icon:(0,o.jsx)(i.IconMulti,{width:(0,r.SizeDP)(18),height:(0,r.SizeDP)(18)})}];case a.Status.draft:return[{id:1,key:"TK.multi",value:"multi",icon:(0,o.jsx)(i.IconMulti,{width:(0,r.SizeDP)(18),height:(0,r.SizeDP)(18)})},{id:2,key:"TK.edit",value:"edit",icon:(0,o.jsx)(i.IconEdit,{width:(0,r.SizeDP)(18),height:(0,r.SizeDP)(18)})},{id:3,key:"TK.cancel",value:"cancel",icon:(0,o.jsx)(i.IconTrash,{width:(0,r.SizeDP)(18),height:(0,r.SizeDP)(18)})}];default:return[]}}},55980:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),a=i(n(24541)),o=i(n(69536)),l=n(46317),s=n(41995),u=n(35708),c=n(2543),d=n(14740),f=n(20880),p=n(2884),h=i(n(85555)),y=n(77838),m=n(45335),v=n(60596),g=n(12638),S=n(47671);t.default=function(e){var t=e.item,n=e.dataListStatus,i=e.handleCancelTicket,x=(0,d.useNavigation)(),j=(0,p.useTranslation)().t,w=((0,g.useAppDispatch)(),function(e){switch(e.value){case"multi":return void x.navigate(f.NavigationName.CreateTicket,{dataTicket:t,action:"multi"});case"edit":return void x.navigate(f.NavigationName.CreateTicket,{dataTicket:t,action:"edit"});case"cancel":return void i(t)}}),b=function(){if(t.ticketStatus===v.Status.processing){if(D(t.remindTime,t.estimateDate))return`${j("TK.before")} `+C(null==t?void 0:t.remindTime,null==t?void 0:t.estimateDate);if(T(t.estimateDate,null))return`${j("TK.late")} `+P(null==t?void 0:t.estimateDate,null)}return t.ticketStatus!==v.Status.completed&&t.ticketStatus!==v.Status.accepted||!T(t.estimateDate,t.finishDate)?"":`${j("TK.late")} `+P(null==t?void 0:t.estimateDate,null==t?void 0:t.finishDate)},D=function(e,t){if(!e)return!1;if(Number(e)>0){var n=Math.floor(new Date(t).getTime()/1e3),i=n-60*Number(e),r=Math.floor((new Date).getTime()/1e3);return i<r&&r<n}},T=function(e,t){if(e){if(t){var n=Math.floor(new Date(e).getTime()/1e3);return Math.floor(new Date(t).getTime()/1e3)>n}var i=Math.floor(new Date(e).getTime()/1e3);return Math.floor((new Date).getTime()/1e3)>i}return!1},P=function(e,t){if(t){var n=Math.floor(new Date(e).getTime()),i=Math.floor(new Date(t).getTime());return I(i-n)}var r=Math.floor(new Date(e).getTime()),a=Math.floor((new Date).getTime());return I(a-r)},C=function(e,t){if(Number(e)>0){var n=Math.floor(new Date(t).getTime()),i=Math.floor((new Date).getTime());return I(n-i)}},I=function(e){var t=Math.floor(e/1e3),n=t%86400,i=n%3600;return`${Math.floor(t/86400)}d${Math.floor(n/3600)}h${Math.floor(i/60)}m`};return(0,S.jsxs)(r.TouchableOpacity,{onPress:function(){x.navigate(f.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:null==t?void 0:t.id,email:t.createdBy,status:n.status,selectTabBottom:1})},style:o.default.ctnMain,children:[(0,S.jsxs)(r.View,{style:o.default.ctnHeader,children:[function(){switch(null==t?void 0:t.priority){case v.Propity.high:return(0,S.jsx)(l.Iconhigh,{width:(0,s.SizeDP)(12),height:(0,s.SizeDP)(12)});case v.Propity.medium:return(0,S.jsx)(l.Iconmedium,{width:(0,s.SizeDP)(12),height:(0,s.SizeDP)(12)});case v.Propity.low:return(0,S.jsx)(l.Iconlow,{width:(0,s.SizeDP)(12),height:(0,s.SizeDP)(12)})}}(),(0,S.jsx)(a.default,{style:[o.default.title,{flex:1,marginHorizontal:(0,s.SizeDP)(12)}],children:(0,c.isEmpty)(t.title)?"---":t.title}),(0,S.jsx)(r.View,{style:o.default.time,children:(0,S.jsxs)(r.View,{style:o.default.center,children:[!(0,c.isEmpty)(b())&&(0,S.jsx)(m.Tooltip,{title:b(),children:(0,S.jsx)(l.IconClock,{width:(0,s.SizeDP)(16),height:(0,s.SizeDP)(16)})}),(0,S.jsx)(h.default,{listDropdown:(0,y.getListAction)(t.ticketStatus),onChangeItem:function(e){return w(e)},containerStyle:{width:(0,s.SizeDP)(12)}})]})})]}),(0,S.jsxs)(a.default,{children:[j("TK.createDate"),":"," ",u.DateUtils.convertDateToDDMMYYYY_H_M(t.createdDate)]}),!(0,c.isEmpty)(b())&&(0,S.jsx)(a.default,{style:o.default.styleClock,children:b()}),(0,S.jsxs)(r.View,{style:o.default.ctnFooter,children:[(0,S.jsxs)(r.View,{style:[o.default.rowCenter],children:[(0,S.jsx)(r.View,{style:[o.default.viewId],children:(0,S.jsx)(a.default,{numberOfLines:1,style:{width:(0,s.SizeDP)(50)},children:`#${t.id}`})}),(0,S.jsx)(r.View,{style:[o.default.viewStatus,{backgroundColor:n.bgColor,borderColor:"#fff"}],children:(0,S.jsx)(a.default,{style:[{color:n.color}],children:j(`TK.${t.ticketStatus}`)})})]}),(0,S.jsxs)(r.View,{style:[o.default.rowCenter],children:[(0,S.jsxs)(r.View,{style:[o.default.rowCenter],children:[(0,S.jsx)(l.IconFilePresent,{width:(0,s.SizeDP)(20),height:(0,s.SizeDP)(20)}),(0,S.jsx)(a.default,{children:t.attachmentCount})]}),(0,S.jsxs)(r.View,{style:[o.default.rowCenter],children:[(0,S.jsx)(l.IconMessageChat,{width:(0,s.SizeDP)(20),height:(0,s.SizeDP)(20)}),(0,S.jsx)(a.default,{children:t.commentCount})]})]})]})]})}},69536:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{padding:(0,r.SizeDP)(16),borderRadius:(0,r.SizeDP)(8),shadowColor:"#51459F",shadowOffset:{width:0,height:3},shadowOpacity:.1,shadowRadius:(0,r.SizeDP)(3),elevation:4,marginVertical:(0,r.SizeDP)(8),backgroundColor:a.Color.White,marginHorizontal:(0,r.SizeDP)(3),minHeight:150},title:{fontSize:r.default.FontSmall,color:a.Color.color1F2633,fontFamily:a.Font.InterSemiBold600},ctnFooter:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:(0,r.SizeDP)(16)},ctnHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:(0,r.SizeDP)(16)},rowCenter:{flexDirection:"row",justifyContent:"center",alignItems:"center",columnGap:(0,r.SizeDP)(4)},viewId:{borderWidth:(0,r.SizeDP)(1),borderColor:"#EBEEF2",borderRadius:(0,r.SizeDP)(16),paddingHorizontal:(0,r.SizeDP)(8),paddingVertical:(0,r.SizeDP)(5)},viewStatus:{borderWidth:(0,r.SizeDP)(1),borderColor:"#EBEEF2",borderRadius:(0,r.SizeDP)(16),paddingHorizontal:(0,r.SizeDP)(8),paddingVertical:(0,r.SizeDP)(5)},time:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,r.SizeDP)(6)},center:{alignItems:"center",justifyContent:"center",flexDirection:"row",columnGap:(0,r.SizeDP)(8)},styleClock:{marginTop:(0,r.SizeDP)(6),color:a.Color.RedE14337}})},72676:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.dataListStatusTicket=void 0;var i=n(60596);t.dataListStatusTicket=[{id:1,name:"Giao dịch đang thực hiện",status:i.Status.processing,color:"#7F43EF",bgColor:"#F2ECFD"},{id:2,name:"Giao dịch hoàn thành",status:i.Status.completed,color:"#39AC6D",bgColor:"#E8F7EF"},{id:3,name:"Giao dịch nháp",status:i.Status.draft,color:"#00204DB2",bgColor:"#F2F5F8"},{id:4,name:"Giao dịch hủy",status:i.Status.voided,color:"#F05959",bgColor:"rgba(251, 213, 213, 1)"},{id:5,name:"Giao dịch từ chối",status:i.Status.rejected,color:"#6496e4",bgColor:"#6496e45c"}]},16702:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=n(87841),o=i(n(43184)),l=i(n(89117)),s=n(72676),u=i(n(8966)),c=n(21527),d=n(32207),f=n(14740),p=i(n(80671)),h=n(2884),y=n(47671);t.default=function(){var e=(0,h.useTranslation)().t,t=(0,f.useNavigation)(),n=(0,c.useState)({width:a.Dimensions.get("window").width,height:a.Dimensions.get("window").height}),i=(0,r.default)(n,2),m=i[0],v=i[1];(0,c.useEffect)((function(){var e=a.Dimensions.addEventListener("change",(function(e){var t=e.window;v({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(o.default,{title:e("TK.myTicket"),renderContentRight:function(){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.TopNavigationAction,{icon:(0,y.jsx)(d.Icon,{fill:"#ffffff",name:"search"}),onPress:function(){t.navigate(p.default.SearchTicketScreen,{type:"my-ticket"})}})})}}),(0,y.jsx)(a.FlatList,{style:{backgroundColor:"#fff"},data:s.dataListStatusTicket,horizontal:!0,pagingEnabled:!0,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,snapToAlignment:"start",snapToInterval:m.width-40,decelerationRate:"fast",contentContainerStyle:[u.default.flatListContainer,{paddingRight:40}],renderItem:function(e){var t=e.item;return(0,y.jsx)(l.default,{dataListStatus:t})}})]})}},8966:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({flatListContainer:{backgroundColor:r.Color.White}})},50608:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.listAction=void 0;t.listAction=[{status:"all",name:"Tất cả"},{status:"read",name:"Đã đọc"},{status:"unread",name:"Chưa đọc"}]},50570:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43693)),a=i(n(41132)),o=i(n(29293)),l=i(n(85715)),s=n(7005),u=i(n(43184)),c=i(n(24541)),d=n(21527),f=n(32207),p=n(87841),h=n(2884),y=n(20880),m=i(n(21954)),v=n(14740),g=n(45335),S=n(50608),x=n(12638),j=i(n(69290)),w=n(97427),b=n(43790),D=n(11671),T=n(47671);t.default=function(){var e=(0,h.useTranslation)().t,t=(0,v.useNavigation)(),n=(0,x.useAppDispatch)(),i=(0,d.useState)([]),P=(0,l.default)(i,2),C=P[0],I=P[1],k=(0,d.useState)(0),_=(0,l.default)(k,2),F=_[0],O=_[1],M=(0,d.useState)(0),E=(0,l.default)(M,2),R=E[0],z=E[1],V=(0,d.useState)(!1),B=(0,l.default)(V,2),A=B[0],L=B[1],N=(0,d.useState)({}),U=(0,l.default)(N,2),W=U[0],H=U[1],G=(0,d.useState)(!1),$=(0,l.default)(G,2),Y=$[0],K=$[1],q=(0,d.useState)("all"),J=(0,l.default)(q,2),X=J[0],Q=J[1],Z=(0,b.useNotificationServices)(),ee=(0,D.useTicketServices)(),te=(0,x.useAppSelector)((function(e){return e.common})),ne=te.accessToken,ie=te.totalNumberNotiUnread;(0,v.useFocusEffect)((0,d.useCallback)((function(){O(0),le(0,X)}),[X]));var re,ae,oe,le=(re=(0,o.default)((function*(e,t){try{var n={page:e,size:30,sort:"createdDate,desc"},i={status:"all"===t?"":t,system:"E_REQUEST"},r=yield Z.getListNotifications(n,i);r&&(I(0===e?r.data:[].concat((0,a.default)(C),(0,a.default)(r.data))),z(r.totalRecords))}catch(e){}finally{L(!1)}})),function(e,t){return re.apply(this,arguments)}),se=function(t){if(t){var n={ticketName:t.ticketName,usertaskName:t.userTaskName,remindTime:t.remindTime,overdueTime:t.overdueTime,notifyTime:t.notifyTime,createdBy:t.createdBy,createdDate:t.createdDate,assigner:t.assigner,status:ue(t.status),reason:t.reason?t.reason:"",perm:null==t?void 0:t.perm,accountCreated:null==t?void 0:t.createdAcl};return"acl_ticket_create"===t.type&&t.userTaskName?e("NT.notification."+t.type+"_user_task",n):e("NT.notification."+t.type,n)}},ue=function(e){return e&&"rejected"===e.trim()?"từ chối":e&&"completed"===e.trim()?"hoàn thành":e&&"voided"===e.trim()?"hủy":""},ce=(ae=(0,o.default)((function*(e){try{H((0,r.default)({},e.id,!0));var t=[{id:e.id,status:"read"}];if(yield Z.updateNotifications(t)){var i=C.map((function(t){return t.id===e.id?Object.assign({},e,{status:"read"}):t}));I(i),n(w.commonActions.setTotalNumberNotiUnread(ie-1))}de(e)}catch(e){}})),function(e){return ae.apply(this,arguments)}),de=(oe=(0,o.default)((function*(e){if(console.log(e.type),"ticket_create"!==e.type&&"ticket_update"!==e.type&&"ticket_cancel"!==e.type&&"ticket_require_confirm"!==e.type&&"ticket_confirm"!==e.type&&"ticket_reject"!==e.type&&"ticket_require_review"!==e.type&&"ticket_review"!==e.type&&"ticket_review_reject"!==e.type&&"ticket_assign_user"!==e.type&&"ticket_update_status"!==e.type&&"ticket_authorize"!==e.type&&"ticket_remind_workflow"!==e.type&&"ticket_remind_usertask"!==e.type&&"ticket_remind_workflow_overdue_onetime"!==e.type&&"ticket_remind_usertask_overdue_onetime"!==e.type&&"ticket_remind_workflow_overdue_period"!==e.type&&"ticket_remind_usertask_overdue_period"!==e.type&&"ticket_tag_comment"!==e.type&&"acl_ticket_create"!==e.type);else{var n=JSON.parse(e.content);if(n){var i=yield ee.getTicketById(n.ticketId,ne);i&&(t.navigate(y.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:n.ticketId,email:e.emailReceiver,status:i.ticketStatus,selectTabBottom:"ticket_tag_comment"===e.type||"acl_ticket_create"===e.type?1:2,recipientDetailsId:n.recipientDetailsId,userTaskId:n.userTaskId,notifyActionType:e.type}),H((0,r.default)({},e.id,!1)))}}})),function(e){return oe.apply(this,arguments)});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(s.SafeAreaView,{edges:[],style:{backgroundColor:"#943cdd0d",flex:1},children:[(0,T.jsx)(u.default,{title:e("CM.noti"),renderContentRight:function(){return(0,T.jsx)(f.TopNavigationAction,{icon:(0,T.jsx)(f.Icon,{fill:"#fff",name:"funnel-outline"}),onPress:function(){return K(!0)}})}}),(0,T.jsx)(f.List,{style:{backgroundColor:"#fff"},contentContainerStyle:{backgroundColor:"#fff"},data:C,onEndReachedThreshold:.5,refreshing:A,onEndReached:function(){C.length<R&&(le(F+1,X),O(F+1))},onRefresh:function(){L(!0),O(0),le(0,X)},renderItem:function(e){var t=e.item,n=e.index,i=JSON.parse(t.content),r="system"!==t.createdBy?"people-outline":"settings-outline";return(0,T.jsx)(f.ListItem,{onPress:function(){return ce(t)},children:(0,T.jsxs)(p.View,{style:m.default.ctnMain,children:[(0,T.jsxs)(p.View,{style:m.default.ctnIcon,children:[(0,T.jsx)(f.Icon,{width:20,height:20,fill:"#39ac6c",name:r}),"unread"===t.status&&(0,T.jsx)(g.Badge,{size:10,style:m.default.badge})]}),(0,T.jsxs)(p.View,{style:{flex:1,rowGap:10},children:[(0,T.jsx)(c.default,{children:se(i)}),(0,T.jsxs)(p.View,{style:m.default.ctnText,children:[(0,T.jsx)(c.default,{style:[{fontFamily:y.Font.InterSemiBold600},m.default.text],children:""}),(0,T.jsx)(c.default,{style:[[{fontFamily:y.Font.InterRegular400},m.default.text]],children:i.notifyTime})]})]}),null!=W&&W[null==t?void 0:t.id]?(0,T.jsx)(f.Spinner,{size:"tiny"}):(0,T.jsx)(f.Icon,{width:20,height:20,name:"chevron-right-outline"})]},n)})}})]}),(0,T.jsx)(j.default,{title:e("CM.noti"),onClose:function(){return K(!1)},isVisible:Y,renderContent:(0,T.jsx)(f.Menu,{children:S.listAction.map((function(t){return(0,T.jsx)(f.MenuItem,{title:function(n){return(0,T.jsx)(c.default,Object.assign({},n,{children:e(`NT.notification.filter.${t.status}`)}))},onPress:function(){return e=t.status,Q(e),void K(!1);var e},accessoryRight:X===t.status?(0,T.jsx)(f.Icon,{name:"checkmark"}):void 0},t.status)}))})})]})}},21954:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",gap:10},ctnIcon:{width:40,height:40,borderRadius:20,backgroundColor:"#e8f7ee",alignItems:"center",justifyContent:"center",position:"relative"},ctnText:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:5},text:{fontSize:12,color:"#00204df2"},badge:{position:"absolute",right:0,top:0}})},43952:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=n(87841),s=i(n(65963)),u=i(n(24541)),c=n(87071),d=n(91530),f=n(21527),p=n(32207),h=n(11671),y=i(n(76644)),m=i(n(43184)),v=n(26878),g=i(n(27747)),S=i(n(94516)),x=i(n(50852)),j=n(2884),w=n(46317),b=n(47671);t.default=function(e){var t,n,i,D=e.dataResource,T=e.dataUser,P=e.setListDataUpdate,C=e.toogleReload,I=(0,j.useTranslation)().t,k=(0,f.useState)(new p.IndexPath(c.optionPermisson.findIndex((function(e){return e.value===D.perm})))),_=(0,o.default)(k,2),F=_[0],O=_[1],M=(0,f.useState)(!1),E=(0,o.default)(M,2),R=E[0],z=E[1],V=(0,f.useState)(!1),B=(0,o.default)(V,2),A=B[0],L=B[1],N=(0,f.useState)(""),U=(0,o.default)(N,2),W=U[0],H=U[1],G=function(){return z(!R)},$=function(){return L(!A)},Y=(0,h.useTicketServices)(),K=(t=(0,a.default)((function*(){(yield Y.deleteAclsById(D.id))&&C(),$()})),function(){return t.apply(this,arguments)}),q=(n=(0,a.default)((function*(e){var t=(D.permType!==d.PermType.orgin?c.optionPermisson:c.optionPermisson.filter((function(e){return e.value!==d.OptionPermisson.permission})))[e.row];if(t.value!==d.OptionPermisson.delete){if(t.value===d.OptionPermisson.permission)return H(""),void G();O(e);var n={assignee:D.assignee,assigneeId:D.assigneeId,perm:t.value,permType:D.permType,name:D.name,avatar:D.avatar};P((function(e){var t=e.find((function(e){return e.assigneeId===D.assigneeId}));return t?e.map((function(e){return e.assigneeId===D.assigneeId?n:e})):[].concat((0,r.default)(e),[n])}))}else $()})),function(e){return n.apply(this,arguments)}),J=function(){var e,t;return null!=D&&null!=(e=D.name)&&e.trim()?null==D||null==(t=D.name)?void 0:t.trim():T?(null==T?void 0:T.firstName)+" "+(null==T?void 0:T.lastName):void 0},X=(i=(0,a.default)((function*(){var e=c.optionPermisson[F.row],t={resourceId:D.resourceId},n={aclForm:{assignee:D.assignee,assigneeId:D.assigneeId,perm:e.value,permType:D.permType,name:D.name},description:W};(yield Y.pushlishFile(t,n))&&(G(),O(new p.IndexPath(c.optionPermisson.findIndex((function(e){return e.value===D.perm})))))})),function(){return i.apply(this,arguments)});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(l.View,{style:x.default.ctnMain,children:[(0,b.jsxs)(l.View,{style:x.default.ctnBody,children:[D.permType!==d.PermType.orgin?(0,b.jsx)(l.Image,{width:32,height:32,borderRadius:16,source:{uri:D.avatar||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}):(0,b.jsx)(l.View,{style:x.default.ctnIcon,children:(0,b.jsx)(p.Icon,{fill:"#fff",width:26,height:26,name:"people"})}),(0,b.jsxs)(l.View,{style:{flex:1},children:[D.permType!==d.PermType.orgin&&(0,b.jsx)(l.View,{children:(0,b.jsx)(u.default,{style:x.default.ctnName,children:J()})}),(0,b.jsx)(l.View,{children:(0,b.jsx)(u.default,{style:x.default.ctnAssignee,children:D.assignee})})]})]}),(0,b.jsx)(l.View,{style:{flex:.7},children:D.perm===d.OptionPermisson.owner?(0,b.jsx)(l.View,{style:x.default.ctnOwner,children:(0,b.jsx)(u.default,{style:x.default.textOwner,children:I("RV.owner")})}):(0,b.jsx)(s.default,{isi18n:!0,size:"medium",onSelect:q,valueSelect:F,listData:D.permType!==d.PermType.orgin?c.optionPermisson:c.optionPermisson.filter((function(e){return e.value!==d.OptionPermisson.permission}))})}),(0,b.jsx)(y.default,{isVisible:R,children:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:I("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:function(){O(new p.IndexPath(c.optionPermisson.findIndex((function(e){return e.value===D.perm})))),G()}}),(0,b.jsx)(p.Divider,{}),(0,b.jsxs)(v.KeyboardAwareScrollView,{style:{padding:16,rowGap:10},children:[(0,b.jsxs)(l.View,{style:[{marginBottom:16},x.default.ctnBody],children:[D.permType!==d.PermType.orgin?(0,b.jsx)(l.Image,{width:32,height:32,borderRadius:16,source:{uri:D.avatar||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}):(0,b.jsx)(l.View,{style:x.default.ctnIcon,children:(0,b.jsx)(p.Icon,{fill:"#fff",width:26,height:26,name:"people"})}),(0,b.jsxs)(l.View,{style:{flex:1},children:[D.permType!==d.PermType.orgin&&(0,b.jsx)(l.View,{children:(0,b.jsx)(u.default,{style:x.default.ctnName,children:J()})}),(0,b.jsx)(l.View,{children:(0,b.jsx)(u.default,{style:x.default.ctnAssignee,children:D.assignee})})]})]}),(0,b.jsx)(g.default,{value:W,onChangeText:H,label:I("RV.fillNote"),maxLength:100,multiline:!0})]}),(0,b.jsxs)(l.View,{style:x.default.ctnDes,children:[(0,b.jsx)(p.Icon,{fill:"#6F2CED",name:"alert-circle",width:16,height:16}),(0,b.jsx)(u.default,{style:x.default.textDes,children:I("RV.noteDes")})]}),(0,b.jsx)(l.View,{style:{paddingHorizontal:16},children:(0,b.jsx)(S.default,{label:I("RV.sendInvent"),onPress:X})})]})})]}),(0,b.jsx)(y.default,{isVisible:A,animationType:"fade",backdropStyle:{backgroundColor:"#000810B2"},children:(0,b.jsx)(l.View,{style:x.default.ctnModal,children:(0,b.jsxs)(l.View,{style:x.default.ctnBodyModal,children:[(0,b.jsx)(l.View,{style:{alignItems:"center",justifyContent:"center"},children:(0,b.jsx)(w.IconCancel,{width:56,height:56})}),(0,b.jsx)(u.default,{style:x.default.textTitle,children:I("RV.confirmDeletePer")}),(0,b.jsx)(u.default,{style:x.default.textDesModal,children:I("RV.comfirmDelPerDes")}),(0,b.jsxs)(l.View,{style:x.default.viewBtn,children:[(0,b.jsx)(S.default,{label:I("CM.labelCancel"),onPress:$,style:[x.default.btn,x.default.btnLeft],styleLabel:x.default.labelStyleLeft}),(0,b.jsx)(S.default,{label:I("CM.confirm"),onPress:K,style:[x.default.btn]})]})]})})})]})}},50852:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnMain:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginVertical:10,backgroundColor:"#fff",columnGap:10},ctnBody:{flexDirection:"row",alignItems:"center",columnGap:8,flex:1},ctnIcon:{width:32,height:32,borderRadius:16,backgroundColor:"#08c",alignItems:"center",justifyContent:"center"},ctnName:{flex:1,fontSize:14,color:"#00204DF2",fontFamily:r.Font.InterRegular400,justifyContent:"center",alignItems:"center"},ctnAssignee:{flex:1,fontSize:12,justifyContent:"center",alignItems:"center",color:"#00204DB2",fontFamily:r.Font.InterRegular400},ctnOwner:{backgroundColor:"#EDF2FD",padding:8,borderRadius:4},textOwner:{color:"#366AE2",fontFamily:r.Font.InterRegular400,fontSize:12,textAlign:"center"},ctnDes:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8,backgroundColor:"#F2ECFD",padding:4,borderRadius:8,marginHorizontal:16,marginBottom:16},textDes:{color:"#6F2CED",flex:1},btn:{flex:1},btnLeft:{backgroundColor:r.Color.BtnDisable},labelStyleLeft:{color:r.Color.Text},txtTitle:{fontSize:r.FontSize.FontBase,fontFamily:r.Font.InterSemiBold600,color:r.Color.Text,textAlign:"center"},txtContent:{textAlign:"center",fontFamily:r.Font.InterRegular400,color:r.Color.Text07},viewBtn:{marginTop:16,flexDirection:"row",gap:16,alignItems:"center",justifyContent:"center"},ctnModal:{alignItems:"center",justifyContent:"center",flex:1},ctnBodyModal:{backgroundColor:"#fff",width:"90%",borderRadius:8,padding:10},textTitle:{color:"#00204D",fontSize:18,fontFamily:r.Font.InterSemiBold600,paddingVertical:8,textAlign:"center"},textDesModal:{color:"#00204DE5",fontSize:12,fontFamily:r.Font.InterRegular400,textAlign:"center"}})},33904:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),s=n(87841),u=n(32207),c=n(45335),d=i(n(43184)),f=i(n(66771)),p=n(40851),h=i(n(47876)),y=n(35708),m=i(n(54813)),v=i(n(24541)),g=n(87071),S=n(91530),x=n(2884),j=n(47671);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}t.default=function(e){var t=e.toogleFunc,n=e.toogleReload,i=e.fileId,w=(0,x.useTranslation)().t,b=(0,l.useState)(""),D=(0,o.default)(b,2),T=D[0],P=D[1],C=(0,l.useState)(""),I=(0,o.default)(C,2),k=I[0],_=I[1],F=(0,l.useState)([]),O=(0,o.default)(F,2),M=O[0],E=O[1],R=(0,l.useState)(0),z=(0,o.default)(R,2),V=z[0],B=z[1],A=(0,l.useState)(0),L=(0,o.default)(A,2),N=L[0],U=L[1],W=(0,l.useState)(!1),H=(0,o.default)(W,2),G=H[0],$=H[1],Y=(0,l.useState)([]),K=(0,o.default)(Y,2),q=K[0],J=K[1],X=(0,f.default)(T,500),Q=(0,l.useState)(!1),Z=(0,o.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,l.useState)(g.typeLimit[0]),ie=(0,o.default)(ne,2),re=ie[0],ae=ie[1],oe=(0,p.useReviewServices)();(0,l.useEffect)((function(){ce(0,X)}),[X]);var le,se,ue,ce=(le=(0,a.default)((function*(e,t){try{var n={page:e,size:10},i={q:t.trim().toLowerCase(),terms:{status:0}},a=yield oe.getUserInfoModel(n,i);a&&(J(0===e?a.data:[].concat((0,r.default)(q),(0,r.default)(a.data))),U(a.totalRecords))}catch(e){}finally{$(!1)}})),function(e,t){return le.apply(this,arguments)}),de=(se=(0,a.default)((function*(){$(!0),B(0),ce(0,X)})),function(){return se.apply(this,arguments)}),fe=(0,l.useCallback)((function(e){E((function(t){return t.some((function(t){return t.id===e.id}))?t.filter((function(t){return t.id!==e.id})):[].concat((0,r.default)(t),[e])}))}),[]),pe=(0,l.useCallback)((function(e){E((function(t){return t.filter((function(t){return t.id!==e}))}))}),[]),he=(0,l.useCallback)((function(e){if(y.RegexUtils.FORMAT_EMAIL.test(e)){_("");var t={id:`new-${Date.now()}`,email:e,isAdd:!0};E((function(e){return[].concat((0,r.default)(e),[t])})),P("")}else _("CM.validEmail")}),[]),ye=(0,l.useCallback)((function(){T&&!q.some((function(e){return e.email===T}))&&he(T)}),[T,he]),me=(ue=(0,a.default)((function*(){if(0!==M.length){var e=M.map((function(e){var t,n;return{assignee:e.email,assigneeId:null!=e&&null!=(t=e.id)&&t.includes("new")?null:e.resourceId,perm:re.value,permType:null!=e&&null!=(n=e.id)&&n.includes("new")?3:2}})),r={resourceId:i};(yield oe.updatePermissionOrg(r,e))&&(n(),t())}else t()})),function(){return ue.apply(this,arguments)}),ve=function(){te(!ee)},ge=function(){switch(re.value){case S.OptionPermisson.editor:return{bg:"#ef5da81a",color:"#ef5da8"};case S.OptionPermisson.reviewer:return{bg:"#f7931e1a",color:"#f7931e"};case S.OptionPermisson.viewer:return{bg:"#1382fd1a",color:"#1382fd"}}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:w("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:t}),(0,j.jsx)(c.Divider,{}),(0,j.jsxs)(u.Layout,{style:h.default.container,children:[(0,j.jsxs)(s.View,{style:h.default.ctnListEmailSelect,children:[(0,j.jsx)(s.View,{style:{flex:1}}),(0,j.jsx)(u.OverflowMenu,{anchor:function(){var e,t,n;return(0,j.jsxs)(s.TouchableOpacity,{style:[{backgroundColor:null==(e=ge())?void 0:e.bg},h.default.ctnOverflow],onPress:ve,children:[(0,j.jsx)(v.default,{style:{color:null==(t=ge())?void 0:t.color},children:w(re.label)}),(0,j.jsx)(u.Icon,{name:ee?"arrow-up":"arrow-down",width:16,height:16,fill:null==(n=ge())?void 0:n.color})]})},visible:ee,onBackdropPress:ve,children:g.typeLimit.map((function(e){return(0,j.jsx)(u.MenuItem,{title:function(t){return(0,j.jsx)(v.default,Object.assign({},t,{children:w(e.label)}))},onPress:function(){return ae(e),void ve()}},e.value)}))})]}),(0,j.jsx)(m.default,{placeholder:w("RV.fillEmail"),value:T,onChangeText:P,onSubmitEditing:ye,style:h.default.input,captionText:w(k)}),(0,j.jsx)(s.ScrollView,{horizontal:!0,style:h.default.chipContainer,children:M.map((function(e){return t={item:e}.item,(0,j.jsx)(u.ListItem,{style:h.default.ctnItem,title:`${t.email}`,accessoryRight:function(){return(0,j.jsx)(s.Pressable,{onPress:function(){return pe(t.id)},children:(0,j.jsx)(u.Icon,{name:"close",width:16,height:16})})}},t.id);var t}))}),T.length>0&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(s.FlatList,{onRefresh:de,refreshing:G,onEndReached:function(){q.length<N&&(ce(V+1,X),B(V+1))},onEndReachedThreshold:.5,data:q,renderItem:function(e){var t=e.item;return(0,j.jsx)(u.Card,{style:h.default.card,children:(0,j.jsxs)(s.View,{style:h.default.cardContent,children:[(0,j.jsx)(s.View,{children:(0,j.jsx)(u.Text,{category:"s1",children:t.email})}),(0,j.jsx)(u.CheckBox,{checked:M.some((function(e){return e.id===t.id})),onChange:function(){return fe(t)}})]})})},keyExtractor:function(e){return e.id},ListEmptyComponent:function(){return(0,j.jsx)(u.Text,{style:h.default.noResults,children:w("CM.emptyData")})}})})]}),(0,j.jsxs)(s.View,{style:h.default.ctnFooter,children:[(0,j.jsx)(u.Button,{onPress:function(){return he(T)},style:h.default.addButton,children:w("RV.addNewEmail")}),(0,j.jsx)(u.Button,{onPress:me,style:h.default.addButton,children:w("CM.confirm")})]})]})}},47876:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({container:{flex:1,padding:16},input:{marginBottom:16},card:{marginBottom:8},cardContent:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},noResults:{textAlign:"center",marginTop:16},chipContainer:{flexGrow:0,marginVertical:10},chip:{margin:4},addButton:{marginTop:16,flex:1,backgroundColor:r.Color.BgPrimary},ctnFooter:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:8,paddingHorizontal:16},ctnListEmailSelect:{alignItems:"center",justifyContent:"space-between",flexDirection:"row",marginBottom:8},ctnOverflow:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingHorizontal:5,columnGap:3,paddingVertical:6,borderRadius:6},ctnItem:{borderWidth:1,borderColor:"#ccc",borderRadius:8,marginRight:8}})},6710:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=n(87841),s=i(n(43184)),u=n(40851),c=n(12638),d=n(21527),f=n(32207),p=i(n(4126)),h=i(n(24541)),y=n(87071),m=n(91530),v=i(n(94516)),g=i(n(77389)),S=n(2884),x=n(47671);t.default=function(e){var t=e.toogleFunc,n=e.toogleReload,i=e.fileId,j=(0,S.useTranslation)().t,w=(0,c.useAppSelector)((function(e){return e.account})).dataAccount,b=(0,d.useState)([]),D=(0,o.default)(b,2),T=D[0],P=D[1],C=(0,d.useState)([]),I=(0,o.default)(C,2),k=I[0],_=I[1],F=(0,u.useReviewServices)(),O=(0,d.useState)(!1),M=(0,o.default)(O,2),E=M[0],R=M[1],z=(0,d.useState)(y.typeLimit[0]),V=(0,o.default)(z,2),B=V[0],A=V[1],L=(0,d.useState)(new Set),N=(0,o.default)(L,2),U=N[0],W=N[1],H=(0,d.useState)(new Set),G=(0,o.default)(H,2),$=G[0],Y=G[1],K=function(){R(!E)};(0,d.useEffect)((function(){Q()}),[]);var q,J,X=function(){switch(B.value){case m.OptionPermisson.editor:return{bg:"#ef5da81a",color:"#ef5da8"};case m.OptionPermisson.reviewer:return{bg:"#f7931e1a",color:"#f7931e"};case m.OptionPermisson.viewer:return{bg:"#1382fd1a",color:"#1382fd"}}},Q=(q=(0,a.default)((function*(){var e,t=null==w||null==(e=w.orgIn)?void 0:e.split("/").slice(0,3).join("/"),n={orgIn:null!=t?t:"/1833/5390"},i=yield F.getDataOrgByOrgin(n);_(i);var r=Z(i,null);P(r)})),function(){return q.apply(this,arguments)}),Z=function e(t,n){var i=t.filter((function(e){return e.parentId===n&&!e.blocked})),a=[];return i&&i.length?(i.forEach((function(n){var i={item:n,children:[]};i.children=e(t,n.id),a=[].concat((0,r.default)(a),[i])})),a):[]},ee=function e(t,n,i){for(var r of t){if(r.children&&r.children.some((function(e){return e.item.id===n.item.id}))){r.children.every((function(e){return i.has(e.item.id)}))?i.add(r.item.id):i.delete(r.item.id),e(T,r,i);break}r.children&&e(r.children,n,i)}},te=function e(t){var n=[t.item.id];return t.children&&t.children.forEach((function(t){n=[].concat((0,r.default)(n),(0,r.default)(e(t)))})),n},ne=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=U.has(t.item.id),r=t.children&&t.children.length>0,a=$.has(t.item.id),o=function(e){if(!e.children)return!1;var t=te(e),n=t.filter((function(e){return U.has(e)}));return n.length>0&&n.length<t.length}(t);return(0,x.jsxs)(l.View,{style:{marginLeft:0===n?0:40,marginBottom:10},children:[(0,x.jsxs)(l.View,{style:p.default.nodeContainer,children:[r&&(0,x.jsx)(l.TouchableOpacity,{onPress:function(){return e=t.item.id,(n=new Set($)).has(e)?n.delete(e):n.add(e),void Y(n);var e,n},children:(0,x.jsx)(f.Icon,{name:a?"chevron-down-outline":"chevron-right-outline",fill:"#8F9BB3",style:p.default.icon})}),(0,x.jsx)(f.CheckBox,{checked:i,indeterminate:o,onChange:function(e){return function(e,t){var n=new Set(U),i=te(e);t?i.forEach((function(e){return n.add(e)})):i.forEach((function(e){return n.delete(e)})),ee(T,e,n),W(n)}(t,e)},style:p.default.checkbox,children:t.item.name})]}),r&&a&&(0,x.jsx)(l.View,{style:{marginTop:10},children:t.children.map((function(t){return e(t,n+1)}))})]},t.item.id)},ie=T.flatMap((function(e){return te(e)})),re=(J=(0,a.default)((function*(){var e=k.filter((function(e){return Array.from(U).includes(e.id)})).map((function(e){return{assignee:e.name,assigneeId:e.id,perm:B.value,permType:1}})),r={resourceId:i};(yield F.updatePermissionOrg(r,e))&&(g.default.show({type:"success",text1:j("CM.info"),text2:j("CM.permissionUpdatedSuccessfully")}),n(),null==t||t())})),function(){return J.apply(this,arguments)});return(0,x.jsxs)(f.Layout,{style:{flex:1},children:[(0,x.jsx)(s.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:j("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:t}),(0,x.jsx)(f.Divider,{}),(0,x.jsxs)(l.View,{style:{padding:10,flex:1},children:[(0,x.jsxs)(l.View,{style:p.default.ctnCheckBox,children:[(0,x.jsx)(f.CheckBox,{checked:U.size===ie.length,indeterminate:U.size>0&&U.size<ie.length,onChange:function(e){var t=T.flatMap((function(e){return te(e)}));W(e?new Set(t):new Set)},children:j("CM.all")}),(0,x.jsx)(f.OverflowMenu,{anchor:function(){var e,t,n;return(0,x.jsxs)(l.TouchableOpacity,{style:[{backgroundColor:null==(e=X())?void 0:e.bg},p.default.ctnOverflow],onPress:K,children:[(0,x.jsx)(h.default,{style:{color:null==(t=X())?void 0:t.color},children:j(B.label)}),(0,x.jsx)(f.Icon,{name:E?"arrow-up":"arrow-down",width:16,height:16,fill:null==(n=X())?void 0:n.color})]})},visible:E,onBackdropPress:K,children:y.typeLimit.map((function(e){return(0,x.jsx)(f.MenuItem,{title:function(t){return(0,x.jsx)(h.default,Object.assign({},t,{children:j(e.label)}))},onPress:function(){return A(e),void K()}},e.value)}))})]}),(0,x.jsx)(l.ScrollView,{style:{},children:T.map((function(e){return ne(e)}))})]}),(0,x.jsx)(l.View,{style:{padding:16},children:(0,x.jsx)(v.default,{label:j("CM.confirm"),onPress:re})})]})}},4126:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({container:{padding:16},nodeContainer:{flexDirection:"row",alignItems:"center"},icon:{width:24,height:24,marginRight:8},checkbox:{flex:1},ctnOverflow:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:5,columnGap:3,paddingVertical:6,borderRadius:6},ctnCheckBox:{alignItems:"center",justifyContent:"space-between",flexDirection:"row",marginBottom:16}})},91530:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PermType=t.PERMISSION=t.OptionPermisson=t.LimitPermission=void 0;t.PERMISSION=function(e){return e[e.everyone=1]="everyone",e[e.limit=2]="limit",e}({}),t.LimitPermission=function(e){return e.viewer="p_v",e.editor="p_e",e.reviewer="p_c",e}({}),t.OptionPermisson=function(e){return e.viewer="v",e.editor="e",e.reviewer="c",e.permission="r",e.delete="delete",e.owner="o",e}({}),t.PermType=function(e){return e[e.personOwner=0]="personOwner",e[e.orgin=1]="orgin",e[e.personInOrg=2]="personInOrg",e[e.personOutOrg=3]="personOutOrg",e}({})},87071:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.typeLimitPermisson=t.typeLimit=t.permissionArr=t.optionPermisson=void 0;var i=n(91530);t.permissionArr=[{label:i.PERMISSION.everyone,value:"RV.collaboration.everyone"},{label:i.PERMISSION.limit,value:"RV.collaboration.appointment"}],t.typeLimit=[{value:i.OptionPermisson.viewer,label:"RV.collaboration.viewer"},{value:i.OptionPermisson.editor,label:"RV.collaboration.editor"},{value:i.OptionPermisson.reviewer,label:"RV.collaboration.reviewer"}],t.typeLimitPermisson=[{value:i.LimitPermission.viewer,label:"RV.collaboration.viewer"},{value:i.LimitPermission.editor,label:"RV.collaboration.editor"},{value:i.LimitPermission.reviewer,label:"RV.collaboration.reviewer"}],t.optionPermisson=[{value:i.OptionPermisson.viewer,label:"RV.collaboration.viewer"},{value:i.OptionPermisson.editor,label:"RV.collaboration.editor"},{value:i.OptionPermisson.reviewer,label:"RV.collaboration.reviewer"},{value:i.OptionPermisson.permission,label:"RV.collaboration.permission"},{value:i.OptionPermisson.delete,label:"RV.collaboration.delete"}]},56677:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43693)),a=i(n(29293)),o=i(n(85715)),l=n(87841),s=i(n(43184)),u=n(32207),c=i(n(65963)),d=i(n(24541)),f=n(46317),p=n(21527),h=n(87071),y=n(91530),m=i(n(43952)),v=n(40851),g=n(11671),S=i(n(76644)),x=i(n(33904)),j=i(n(6710)),w=i(n(55773)),b=i(n(73732)),D=n(2884),T=n(88e3),P=n(45335),C=n(47671);t.default=function(e){var t,n=e.toogleFunc,i=e.dataDetailFile,I=(0,D.useTranslation)().t,k=(0,p.useState)(!1),_=(0,o.default)(k,2),F=_[0],O=_[1],M=(0,p.useState)(!1),E=(0,o.default)(M,2),R=E[0],z=E[1],V=(0,p.useState)(!1),B=(0,o.default)(V,2),A=B[0],L=B[1],N=(0,p.useState)(!1),U=(0,o.default)(N,2),W=U[0],H=U[1],G=(0,p.useState)(!1),$=(0,o.default)(G,2),Y=$[0],K=$[1],q=(0,p.useState)({permission:y.PERMISSION.limit,limit:"v",limitPermission:y.LimitPermission.viewer,selectOption:"v",selectOptionOrg:"v"}),J=(0,o.default)(q,2),X=J[0],Q=J[1],Z=(0,p.useState)([]),ee=(0,o.default)(Z,2),te=ee[0],ne=ee[1],ie=(0,p.useState)(new u.IndexPath(h.typeLimitPermisson.findIndex((function(e){return e.value===X.limitPermission})))),re=(0,o.default)(ie,2),ae=re[0],oe=re[1],le=(0,p.useState)([]),se=(0,o.default)(le,2),ue=se[0],ce=se[1],de=(0,p.useState)([]),fe=(0,o.default)(de,2),pe=fe[0],he=fe[1],ye=(0,p.useState)(),me=(0,o.default)(ye,2),ve=me[0],ge=me[1],Se=(0,v.useReviewServices)(),xe=(0,g.useTicketServices)(),je=function(){O(!F)},we=function(){H(!W)},be=function(){K(!Y)},De=function(){return L(!A)};(0,p.useEffect)((function(){Fe()}),[R]),(0,p.useEffect)((function(){_e()}),[]);var Te,Pe,Ce,Ie,ke,_e=(Te=(0,a.default)((function*(){var e={resourceId:i.fileId},t=yield xe.getDefaultPublic(e);ge(t),t&&(Q((function(e){return Object.assign({},e,{permission:y.PERMISSION.everyone,limitPermission:t.perm})})),oe(new u.IndexPath(h.typeLimitPermisson.findIndex((function(e){return e.value===t.perm})))))})),function(){return Te.apply(this,arguments)}),Fe=(Pe=(0,a.default)((function*(){var e={resourceId:i.fileId},t=yield Se.getResourceById(e);if(t){var n=t.filter((function(e){return e.permType!==y.PermType.orgin})).map((function(e){return e.assignee})),r=yield xe.getMultiLoginAccount(n);he(r),ce(t)}})),function(){return Pe.apply(this,arguments)}),Oe=(Ce=(0,a.default)((function*(){var e={resourceId:i.fileId};te.length>0&&(yield Se.updatePermissionOrg(e,te)),ve||X.permission!==y.PERMISSION.limit?(ve&&X.limitPermission===ve.perm||(X.permission===y.PERMISSION.limit?yield Me():yield Ee()),n()):n()})),function(){return Ce.apply(this,arguments)}),Me=(Ie=(0,a.default)((function*(){var e={resourceId:i.fileId};yield xe.limitLink(e)})),function(){return Ie.apply(this,arguments)}),Ee=(ke=(0,a.default)((function*(){var e={resourceId:i.fileId,perm:X.limitPermission};yield xe.publicLink(e)})),function(){return ke.apply(this,arguments)}),Re=(0,p.useCallback)((function(){if(X.permission===y.PERMISSION.limit)return I("RV.limit");if(X.permission===y.PERMISSION.everyone)switch(X.limitPermission){case y.LimitPermission.viewer:return I("RV.viewer");case y.LimitPermission.editor:return I("RV.editor");case y.LimitPermission.reviewer:return I("RV.reviewer");default:return""}}),[X]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(l.View,{style:w.default.ctnMain,children:[(0,C.jsx)(s.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:I("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:n}),(0,C.jsx)(u.Divider,{}),(0,C.jsxs)(l.View,{style:w.default.ctnBody,children:[(0,C.jsxs)(l.View,{style:w.default.ctnGroup1,children:[(0,C.jsxs)(l.View,{style:w.default.container,children:[(0,C.jsx)(d.default,{style:w.default.title,children:I("CM.orgIn")}),(0,C.jsxs)(l.Pressable,{onPress:be,style:w.default.ctnSelect,children:[(0,C.jsx)(d.default,{children:I("CM.orgIn")}),(0,C.jsx)(u.Icon,{width:16,height:16,name:"arrow-right",fill:"#00358059"})]})]}),(0,C.jsxs)(l.View,{style:w.default.container,children:[(0,C.jsx)(d.default,{style:w.default.title,children:"Email"}),(0,C.jsxs)(l.Pressable,{onPress:we,style:w.default.ctnSelect,children:[(0,C.jsx)(d.default,{children:I("CM.emailShare")}),(0,C.jsx)(u.Icon,{width:16,height:16,name:"arrow-right",fill:"#00358059"})]})]})]}),(0,C.jsxs)(l.View,{style:w.default.ctnWrapper,children:[(0,C.jsx)(d.default,{style:w.default.title,children:I("RV.userAccess")}),(0,C.jsx)(l.View,{style:w.default.ctnGroup2,children:(0,C.jsx)(u.List,{style:{backgroundColor:"#fff"},data:ue,renderItem:function(e){var t=e.item;return(0,C.jsx)(m.default,{toogleReload:function(){return z(!R)},setListDataUpdate:ne,dataUser:null==pe?void 0:pe.find((function(e){return e.email===t.assignee})),dataResource:t})}})})]}),(0,C.jsxs)(l.View,{style:w.default.ctnWrapper,children:[(0,C.jsx)(d.default,{style:w.default.title,children:I("RV.generalAccess")}),(0,C.jsxs)(l.View,{style:w.default.ctnImage,children:[X.permission===y.PERMISSION.limit?(0,C.jsx)(l.View,{style:w.default.ctnImagePer,children:(0,C.jsx)(f.Iconkey,{width:13,height:16})}):(0,C.jsx)(l.View,{style:w.default.ctnImagePer,children:(0,C.jsx)(u.Icon,{name:"globe",fill:"#39ac6c",width:20,height:20})}),(0,C.jsxs)(l.View,{style:w.default.ctnDes,children:[(0,C.jsxs)(l.View,{style:w.default.ctnDesPer,children:[(0,C.jsx)(d.default,{style:w.default.title,children:I(null==(t=h.permissionArr.find((function(e){return e.label===X.permission})))?void 0:t.value)}),(0,C.jsx)(u.OverflowMenu,{anchor:function(){return(0,C.jsx)(l.TouchableOpacity,{hitSlop:15,onPress:je,children:(0,C.jsx)(u.Icon,{name:"arrow-down",width:16,height:16,fill:"#00204DB2"})})},visible:F,onBackdropPress:je,children:h.permissionArr.map((function(e){return(0,C.jsx)(u.MenuItem,{title:I(e.value),onPress:function(){return t="permission",n=e.label,Q((function(e){return Object.assign({},e,(0,r.default)({},t,n))})),void je();var t,n}},e.value)}))})]}),(0,C.jsx)(d.default,{style:w.default.textLabel,children:Re()}),X.permission===y.PERMISSION.everyone&&(0,C.jsx)(c.default,{isi18n:!0,size:"medium",onSelect:function(e){oe(e),Q((function(t){return Object.assign({},t,{limitPermission:h.typeLimitPermisson[e.row].value})}))},valueSelect:ae,listData:h.typeLimitPermisson})]})]})]})]}),(0,C.jsxs)(l.View,{style:{},children:[(0,C.jsx)(u.Divider,{}),(0,C.jsxs)(l.View,{style:w.default.ctnCopy,children:[(0,C.jsxs)(l.Pressable,{onPress:function(){b.default.setString(`${T.BASE_URL_ECOLLABO}/negoti-doc/${i.fileId}`),De()},style:w.default.ctnPress,children:[(0,C.jsx)(u.Icon,{fill:"#366AE2",width:16,height:16,name:"link"}),(0,C.jsx)(d.default,{style:w.default.textCopy,children:I("RV.shareCopy")})]}),(0,C.jsx)(u.Button,{onPress:Oe,size:"small",children:(0,C.jsx)(d.default,{children:I("CM.confirm")})})]})]})]}),(0,C.jsx)(S.default,{isVisible:W,children:(0,C.jsx)(x.default,{fileId:i.fileId,toogleReload:function(){return z(!R)},toogleFunc:we})}),(0,C.jsx)(S.default,{isVisible:Y,children:(0,C.jsx)(j.default,{toogleReload:function(){return z(!R)},fileId:i.fileId,toogleFunc:be})}),(0,C.jsx)(P.Snackbar,{visible:A,onDismiss:De,duration:1e3,children:I("RV.copyLink")})]})}},55773:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnMain:{flex:1,backgroundColor:"#fff"},ctnBody:{flex:1},ctnGroup1:{padding:10,rowGap:8},container:{rowGap:10},title:{fontSize:14,color:"#00204DF2",fontFamily:r.Font.InterMedium500},ctnSelect:{borderWidth:.5,borderColor:"#00358059",borderRadius:8,paddingHorizontal:16,paddingVertical:10,flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnGroup2:{borderWidth:1,borderColor:"#00358026",borderRadius:8,maxHeight:300,padding:10},ctnWrapper:{rowGap:10,padding:10},ctnImage:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:16},ctnDes:{flex:1,rowGap:10},ctnImagePer:{width:32,height:32,backgroundColor:"#F2F5F8",borderRadius:16,alignItems:"center",justifyContent:"center"},ctnDesPer:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:4},textLabel:{fontSize:12,color:"#00204DB2",fontFamily:r.Font.InterRegular400},ctnCopy:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:16,marginTop:10},ctnPress:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:4},textCopy:{fontSize:14,color:"#366AE2",fontFamily:r.Font.InterRegular400}})},21758:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=n(14740),s=n(32207),u=n(21527),c=n(2884),d=n(46317),f=n(12638),p=i(n(43184)),h=i(n(76644)),y=i(n(46542)),m=n(7005),v=n(26878),g=n(87841),S=i(n(24541)),x=i(n(94196)),j=n(35708),w=i(n(80671)),b=n(60596),D=i(n(94516)),T=i(n(27747)),P=n(40851),C=i(n(77389)),I=n(97427),k=n(31004),_=i(n(78662)),F=i(n(64898)),O=i(n(33486)),M=n(47671);t.default=function(){var e,t=(0,c.useTranslation)().t,n=(0,f.useAppDispatch)(),i=(0,l.useRoute)(),E=(0,u.useRef)(null),R=null==i||null==(e=i.params)?void 0:e.dataUserTask,z=(0,l.useNavigation)(),V=(0,u.useState)(!1),B=(0,o.default)(V,2),A=B[0],L=B[1],N=(0,u.useState)(!1),U=(0,o.default)(N,2),W=U[0],H=U[1],G=(0,u.useState)(!0),$=(0,o.default)(G,2),Y=$[0],K=$[1],q=(0,u.useState)(""),J=(0,o.default)(q,2),X=J[0],Q=J[1],Z=(0,u.useState)(""),ee=(0,o.default)(Z,2),te=ee[0],ne=ee[1],ie=(0,u.useState)(!0),re=(0,o.default)(ie,2),ae=re[0],oe=re[1],le=(0,f.useAppSelector)((function(e){return e.ticket})),se=le.dataTicketRedux,ue=le.recipientDetaiImpl,ce=le.formData,de=le.modeler,fe=(0,u.useState)([]),pe=(0,o.default)(fe,2),he=pe[0],ye=pe[1],me=(0,u.useState)([]),ve=(0,o.default)(me,2),ge=ve[0],Se=ve[1],xe=(0,u.useState)(null==ue?void 0:ue.find((function(e){return e.userTaskId===(null==R?void 0:R._userTaskId)}))),je=(0,o.default)(xe,1)[0],we=(0,f.useAppSelector)((function(e){return e.account})).dataAccount,be=(0,f.useAppSelector)((function(e){return e.common})).accessToken,De=(0,P.useReviewServices)(),Te=(0,k.useReviewEcontractServices)();(0,u.useEffect)((function(){Oe()}),[]);var Pe,Ce,Ie,ke,_e,Fe=(0,u.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:we.firstName+" "+we.lastName||"---",email:se.createdBy||"---",avatarUrl:null==we?void 0:we.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==se?void 0:se.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==se?void 0:se.jsonXml)&&JSON.parse(null==se?void 0:se.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:j.DateUtils.convertDateToDDMMYYYY_H_M(null==se?void 0:se.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==ce?void 0:ce.formName,funcViewFrom:function(){z.navigate(w.default.ViewFormScreen,{isOnlyView:!0,readOnly:!0,versionId:null==de?void 0:de.formVersion,viewFromDoc:!0})}}},{key:"RV.status",type:"status",value:{status:(null==je?void 0:je.recipientStatus)||b.Status.processing}}]}),[se,ce,de]),Oe=(Pe=(0,a.default)((function*(){try{var e=yield De.getListFileReview(se.id,R._userTaskId,be);if(e){Se(e);var t=yield Promise.all(e.map((function(e){return Te.getDetailCollabora(e.eCollaboDocumentId)})));ye(t.map((function(t){var n;return Object.assign({},t,{sourceSystem:null!=(n=e.find((function(e){return e.eCollaboDocumentId===t.fileId})))&&n.attrs?"Từ eRequest":t.sourceSystem})})))}}catch(e){}})),function(){return Pe.apply(this,arguments)}),Me=(Ce=(0,a.default)((function*(){var e;if(!X)return oe(!0),ne(t("CM.empty")),void(null==E||null==(e=E.current)||e.focus());ne("");var i=Object.assign({},null==je?void 0:je.recipient,{reason:X});(yield De.actionTicket(null==je?void 0:je.id,null==je?void 0:je.ticketId,null==je?void 0:je.userTaskId,i,be,"reject"))?(C.default.show({type:"success",text1:t("CM.noti"),text2:t("CM.rejectSucesss")}),n(I.ticketActions.setDataTicket(Object.assign({},se,{ticketStatus:b.Status.rejected}))),z.goBack()):C.default.show({type:"error",text1:t("CM.noti"),text2:t("CM.rejectFailed")})})),function(){return Ce.apply(this,arguments)}),Ee=(Ie=(0,a.default)((function*(){})),function(){return Ie.apply(this,arguments)}),Re=(ke=(0,a.default)((function*(){try{var e=yield O.default.pick({type:[O.default.types.doc,O.default.types.docx,O.default.types.xls,O.default.types.xlsx]});if(e){var t="ios"===g.Platform.OS?null==e?void 0:e[0].uri.replace("file://",""):null==e?void 0:e[0].uri,n={name:e[0].name,uri:t,type:e[0].type},i=new FormData;i.append("file",n);var a=yield Te.uploadFiles(se.id,R._userTaskId,i);if(a){Se((function(e){return[a].concat((0,r.default)(e))}));var o=yield Te.getDetailCollabora(a.eCollaboDocumentId),l=Object.assign({},o,{sourceSystem:null!=a&&a.attrs?"Từ eRequest":o.sourceSystem});ye([l].concat((0,r.default)(he)))}}}catch(e){}})),function(){return ke.apply(this,arguments)}),ze=(_e=(0,a.default)((function*(e){var n=ge.find((function(t){return t.eCollaboDocumentId===e}));(yield Te.deleteFile(n.id))?(C.default.show({type:"success",text1:t("CM.info"),text2:t("CM.fileDeletedSuccessfully")}),ye(he.filter((function(t){return t.fileId!==e}))),Se(ge.filter((function(t){return t.eCollaboDocumentId!==e})))):C.default.show({type:"error",text1:t("CM.info"),text2:t("CM.fileDeleteFailed")})})),function(e){return _e.apply(this,arguments)});return(0,M.jsxs)(m.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,M.jsx)(p.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:t("CL.titleHeader"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,M.jsx)(s.TopNavigationAction,{onPress:function(){return L(!0)},icon:(0,M.jsx)(d.IconWorkflow,{width:20,height:20})})}}),(0,M.jsxs)(v.KeyboardAwareScrollView,{style:{flex:1},children:[(0,M.jsx)(g.View,{style:_.default.ctnBody,children:(0,M.jsxs)(g.View,{style:_.default.ctnSubBody,children:[(0,M.jsxs)(g.Pressable,{style:_.default.ctnHeader,onPress:function(){return H(!W)},children:[(0,M.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:W?"arrow-circle-down":"arrow-circle-right"}),(0,M.jsx)(S.default,{style:_.default.textTitle,children:t("CM.infoCommon")})]}),W&&(0,M.jsx)(g.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,M.jsx)(x.default,{dataInfo:Fe})})]})}),(0,M.jsx)(g.View,{style:_.default.ctnBody,children:(0,M.jsxs)(g.View,{style:_.default.ctnSubBody,children:[(0,M.jsxs)(g.Pressable,{style:_.default.ctnHeader,onPress:function(){return K(!Y)},children:[(0,M.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:Y?"arrow-circle-down":"arrow-circle-right"}),(0,M.jsx)(S.default,{style:_.default.textTitle,children:t("CL.listFile")})]}),Y&&"task-success"!==R._status&&(0,M.jsxs)(g.Pressable,{onPress:Re,style:_.default.ctnUpload,children:[(0,M.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:"cloud-upload"}),(0,M.jsx)(S.default,{style:_.default.textUpload,children:t("CL.addFile")})]}),Y&&(0,M.jsx)(g.View,{style:{paddingHorizontal:10,paddingBottom:10},children:he&&(0,M.jsx)(s.List,{scrollEnabled:!1,data:he,keyExtractor:function(e){return e.fileId},renderItem:function(e){var t=e.item;return(0,M.jsx)(F.default,{typeReview:"eCollabo",deleteFile:ze,dataFlow:R,data:t})}})})]})}),"task-success"!==R._status&&(0,M.jsx)(g.View,{style:_.default.ctnBody,children:(0,M.jsxs)(g.View,{style:[_.default.ctnSubBody,{marginBottom:16}],children:[(0,M.jsxs)(g.Pressable,{style:_.default.ctnHeader,onPress:function(){return oe(!ae)},children:[(0,M.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:ae?"arrow-circle-down":"arrow-circle-right"}),(0,M.jsx)(S.default,{style:_.default.textTitle,children:t("CM.note")})]}),ae&&(0,M.jsx)(g.View,{style:_.default.ctnTextNote,children:(0,M.jsx)(T.default,{ref:E,isRequired:!0,label:t("CM.fillNote"),value:X,onChangeText:function(e){Q(e),ne("")},multiline:!0,maxLength:400,errorMessage:te})})]})})]}),(0,M.jsxs)(g.View,{style:_.default.ctnDes,children:[(0,M.jsx)(s.Icon,{fill:"#6F2CED",name:"alert-circle",width:16,height:16}),(0,M.jsx)(S.default,{style:_.default.styleTextDes,children:t("CL.des")})]}),((null==je?void 0:je.recipientStatus)===b.Status.processing||null===(null==je?void 0:je.recipientStatus))&&(0,M.jsx)(g.View,{style:_.default.ctnFooter,children:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(g.TouchableOpacity,{onPress:Me,children:(0,M.jsx)(d.IconRejectReview,{width:36,height:36})}),(0,M.jsx)(D.default,{style:{flex:1},label:t("CM.confirm"),onPress:Ee})]})}),(0,M.jsx)(h.default,{isVisible:A,children:(0,M.jsx)(y.default,{onClose:function(){return L(!1)}})})]})}},78662:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({ctnMain:{padding:(0,a.SizeDP)(16),backgroundColor:"#F8FAFE",flex:1},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,a.SizeDP)(16),marginBottom:(0,a.SizeDP)(24)},txtTitle:{fontFamily:r.Font.InterSemiBold600,fontSize:r.FontSize.FontTiny,color:r.Color.colorText,flex:.5},txtValue:{fontFamily:r.Font.InterRegular400,fontSize:r.FontSize.FontTiny,color:"#00204DE5",flex:1},ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:r.Font.InterMedium500},redDot:{color:"#E14337"},ctnFooter:{flexDirection:"row",paddingHorizontal:16,columnGap:16,marginTop:8},ctnUpload:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",marginRight:10},textUpload:{color:"#6F2CED",fontSize:12,textDecorationLine:"underline",textDecorationColor:"#6F2CED"},ctnTextNote:{paddingHorizontal:10,paddingBottom:10,rowGap:4},ctnDes:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8,backgroundColor:"#F2ECFD",marginHorizontal:16,padding:4,borderRadius:8},styleTextDes:{color:"#6F2CED",flex:1}})},33254:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),a=i(n(24541)),o=n(32207),l=n(20880),s=n(47671);t.default=function(e){var t=e.value,n=e.onChangeDate,i=e.label,u=e.labelStyle,c=e.status,d=void 0===c?"basic":c,f=e.isRequired,p=void 0!==f&&f,h=e.captionText;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.Datepicker,{status:d,label:i?function(e){return(0,s.jsxs)(a.default,Object.assign({},e,{style:[u,{fontSize:12,fontFamily:l.Font.InterMedium500,color:"#00204DF2",marginBottom:4,lineHeight:22}],children:[i," ",p&&(0,s.jsx)(a.default,{style:{color:"#E14337"},children:"*"})]}))}:void 0,caption:h?function(e){return(0,s.jsxs)(r.View,Object.assign({},e,{style:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,marginTop:4},children:[(0,s.jsx)(o.Icon,{fill:"#E14337",width:14,height:14,name:"info"}),(0,s.jsx)(a.default,{style:{fontSize:12,fontFamily:l.Font.InterMedium500,color:"#E14337"},children:h})]}))}:void 0,renderFooter:function(){return(0,s.jsx)(o.Button,{onPress:function(){return n(null)},style:{marginHorizontal:10},children:function(e){return(0,s.jsx)(a.default,Object.assign({},e,{children:"Xoá"}))},status:"danger"})},controlStyle:{backgroundColor:"#fff"},accessoryRight:(0,s.jsx)(o.Icon,{fill:"#00204D8C",name:"calendar-outline",width:16,height:16}),min:new Date(1900,0,0),date:t?new Date(t):null,onSelect:function(e){return n(e?e.toISOString():null)}})})}},78935:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(7005),a=i(n(43184)),o=n(14740),l=i(n(93238)),s=n(20880),u=n(47671);t.default=function(){var e,t,n=(0,o.useRoute)(),i=null!=(e=null==n||null==(t=n.params)?void 0:t.iframeUrl)?e:"";return(0,u.jsxs)(r.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,u.jsx)(a.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:"Hợp đồng",contentStyle:{backgroundColor:"#fff"}}),i&&(0,u.jsx)(l.default,{startInLoadingState:!0,injectedJavaScript:s.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,domStorageEnabled:!0,javaScriptEnabled:!0,thirdPartyCookiesEnabled:!0,source:{uri:i}})]})}},77664:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(43693)),o=i(n(29293)),l=i(n(85715)),s=n(14740),u=n(32207),c=n(21527),d=n(2884),f=n(46317),p=n(12638),h=i(n(43184)),y=i(n(76644)),m=i(n(46542)),v=n(7005),g=n(26878),S=i(n(73264)),x=n(87841),j=i(n(8404)),w=i(n(24541)),b=i(n(94196)),D=n(35708),T=i(n(80671)),P=n(60596),C=i(n(94516)),I=n(2543),k=i(n(52275)),_=i(n(27747)),F=n(40851),O=i(n(77389)),M=n(97427),E=n(31004),R=n(99845),z=n(47671);t.default=function(){var e,t,n=(0,d.useTranslation)().t,i=(0,p.useAppDispatch)(),V=(0,s.useRoute)(),B=null==V||null==(e=V.params)?void 0:e.dataUserTask,A=(null==V||null==(t=V.params)?void 0:t.isFinish)||!1,L=(0,s.useNavigation)(),N=(0,c.useState)(!1),U=(0,l.default)(N,2),W=U[0],H=U[1],G=(0,c.useState)(!1),$=(0,l.default)(G,2),Y=$[0],K=$[1],q=(0,c.useState)(!1),J=(0,l.default)(q,2),X=J[0],Q=J[1],Z=(0,c.useState)({}),ee=(0,l.default)(Z,2),te=ee[0],ne=ee[1],ie=(0,c.useState)(""),re=(0,l.default)(ie,2),ae=re[0],oe=re[1],le=(0,c.useState)(""),se=(0,l.default)(le,2),ue=se[0],ce=se[1],de=(0,c.useState)(!0),fe=(0,l.default)(de,2),pe=fe[0],he=fe[1],ye=(0,c.useState)(!0),me=(0,l.default)(ye,2),ve=me[0],ge=me[1],Se=(0,c.useState)(),xe=(0,l.default)(Se,2),je=xe[0],we=xe[1],be=(0,c.useState)(),De=(0,l.default)(be,2),Te=De[0],Pe=De[1],Ce=(0,c.useState)([]),Ie=(0,l.default)(Ce,2),ke=Ie[0],_e=Ie[1],Fe=(0,c.useState)(),Oe=(0,l.default)(Fe,2),Me=Oe[0],Ee=Oe[1],Re=(0,c.useState)({isRemindEnv:!1,overdueDate:new Date,remindStartDate:new Date,remindFrequency:"daily",remindContent:null}),ze=(0,l.default)(Re,2),Ve=ze[0],Be=ze[1],Ae=(0,c.useState)(!1),Le=(0,l.default)(Ae,2),Ne=Le[0],Ue=Le[1],We=(0,c.useState)([]),He=(0,l.default)(We,2),Ge=He[0],$e=He[1],Ye=(0,c.useState)([]),Ke=(0,l.default)(Ye,2),qe=Ke[0],Je=Ke[1],Xe=(0,c.useState)({}),Qe=(0,l.default)(Xe,2),Ze=Qe[0],et=Qe[1],tt=(0,c.useState)([]),nt=(0,l.default)(tt,2),it=nt[0],rt=nt[1],at=(0,c.useState)(),ot=(0,l.default)(at,2),lt=ot[0],st=ot[1],ut=(0,c.useState)({isError:"ecollabo"!==B.documentResource,errorViewMessage:"ecollabo"===B.documentResource?"":"RV.econtract.title"}),ct=(0,l.default)(ut,2),dt=ct[0],ft=ct[1],pt=(0,p.useAppSelector)((function(e){return e.ticket})),ht=pt.dataTicketRedux,yt=pt.recipientDetaiImpl,mt=pt.formData,vt=pt.modeler,gt=pt.statusPartyRaw,St=(0,c.useState)(null==yt?void 0:yt.find((function(e){return e.userTaskId===(null==B?void 0:B.userTaskId)}))),xt=(0,l.default)(St,1)[0],jt=(0,p.useAppSelector)((function(e){return e.account})).dataAccount,wt=(0,p.useAppSelector)((function(e){return e.common})).accessToken,bt=(0,F.useReviewServices)(),Dt=(0,E.useReviewEcontractServices)(),Tt=(0,c.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:jt.firstName+" "+jt.lastName||"---",email:ht.createdBy||"---",avatarUrl:null==jt?void 0:jt.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==ht?void 0:ht.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==ht?void 0:ht.jsonXml)&&JSON.parse(null==ht?void 0:ht.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:D.DateUtils.convertDateToDDMMYYYY_H_M(null==ht?void 0:ht.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==mt?void 0:mt.formName,funcViewFrom:function(){L.navigate(T.default.ViewFormScreen,{isOnlyView:!0,readOnly:!0,versionId:null==vt?void 0:vt.formVersion,viewFromDoc:!0})}}},{key:"RV.status",type:"status",value:{status:(null==xt?void 0:xt.recipientStatus)||P.Status.processing}}]}),[ht,mt,vt]);(0,c.useEffect)((function(){Ot(),Mt()}),[]);var Pt,Ct,It,kt,_t,Ft,Ot=(Pt=(0,o.default)((function*(){try{var e=yield Dt.getDataFormFill({versionId:xt.versionFormId});e&&we(e)}catch(e){}})),function(){return Pt.apply(this,arguments)}),Mt=(Ct=(0,o.default)((function*(){var e=yield Dt.getTicketModelerFlowStatusRaw(ht.id);e&&st(e)})),function(){return Ct.apply(this,arguments)}),Et=(It=(0,o.default)((function*(){if(!ae)return he(!0),void ce("CM.empty");ce("");var e=Object.assign({},null==xt?void 0:xt.recipient,{reason:ae});(yield bt.actionTicket(null==xt?void 0:xt.id,null==xt?void 0:xt.ticketId,null==xt?void 0:xt.userTaskId,e,wt,"reject"))?(O.default.show({type:"success",text1:n("CM.noti"),text2:n("CM.rejectSucesss")}),i(M.ticketActions.setDataTicket(Object.assign({},ht,{ticketStatus:P.Status.rejected}))),L.goBack()):O.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.rejectFailed")})})),function(){return It.apply(this,arguments)}),Rt=(kt=(0,o.default)((function*(){try{var e=qe.find((function(e){return!e.value.trim()&&e.required}));if(e)return void qe.filter((function(e){return!e.value.trim()&&e.required})).forEach((function(e){ne((function(t){return Object.assign({},t,(0,a.default)({},e.id,"CM.empty"))}))}));var t={userTaskId:null==B?void 0:B.userTaskId,ticketId:ht.id,version:null},i=yield bt.getFormVersionByTicketAndUserTaskId(t,wt);if(null!=je&&je.versionId&&!i)return void L.navigate(T.default.ViewFormScreen,{versionId:je.versionId,readOnly:!1,isShowNoti:!0,data:{_userTaskId:null==B?void 0:B.userTaskId,_ticketId:ht.id,formId:je.formId}});K(!0);var r={id:"",refId:null,selector:"",lookup:ht.id,attrs:{},payload:"",body:null};if("ewriter"===B.documentResource){if(!Nt(null==Te?void 0:Te.template))return void O.default.show({type:"error",text1:n("CM.noti"),text2:n("RV.econtract.alert.error.otp_with_ekyc")});var o=yield Vt();r.payload=JSON.stringify(o),r.selector="flow_start_kyta_create_econtract_temp_n_determine"}if("ecollabo"===B.documentResource){var l=zt();r.payload=JSON.stringify(l),r.selector="flow_start_kyta_create_econtract_auto_determine"}var s=yield Dt.createContract(r),u=Lt(s);u&&(O.default.show({type:u.alertType,text1:n("CM.noti"),text2:u.message}),"success"===u.alertType&&L.goBack())}catch(e){}finally{K(!1)}})),function(){return kt.apply(this,arguments)}),zt=function(){var e={refId:ht.id,isDossier:!1,files:[],docTypeCode:null,headerFields:[],parties:null,owner:null==lt?void 0:lt.createdBy,recipientDetailsId:null==B?void 0:B.recipientDetailsId,userTaskId:null==B?void 0:B.userTaskId,ticketId:ht.id,userTaskVersion:null,remind:Ve.isRemindEnv?{expiredTime:D.DateUtils.convertDateToDDMMYYYY(Ve.overdueDate),remindBefore:D.DateUtils.convertDateToDDMMYYYY(Ve.remindStartDate),remindEvery:"daily"===Ve.remindFrequency?"1":"0",remindMessage:Ve.remindContent}:null},t=R.headerFieldsColla;return t.forEach((function(e){var t;e.value=null==(t=qe.find((function(t){return t.id==e.id})))?void 0:t.value,"refId"===e.id&&(e.value=ht.id)})),e.headerFields=t.map((function(e){return{id:e.id,name:e.name,type:e.type,value:e.value}})),e.files=(0,r.default)(it.map((function(e,t){return{name:e.fileName,id:e.fileId,order:t+1}}))),e},Vt=(_t=(0,o.default)((function*(){var e,t,n,i,r=yield At(),a={refId:ht.id,fileId:0===ke.length?Me.id:null,fileName:0===ke.length?Me.name:null,templateId:Me.templateEcontractId,customData:[],inputData:{datas:[[]]},owner:"",recipientDetailsId:null==B?void 0:B.recipientDetailsId,userTaskId:null==B?void 0:B.userTaskId,ticketId:ht.id,userTaskVersion:null,remind:Ve.isRemindEnv?{expiredTime:D.DateUtils.convertDateToDDMMYYYY(Ve.overdueDate),remindBefore:D.DateUtils.convertDateToDDMMYYYY(Ve.remindStartDate),remindEvery:"daily"===Ve.remindFrequency?"1":"0",remindMessage:Ve.remindContent}:null,files:Ne?[]:ke},o=null==Te||null==(e=Te.lotData)?void 0:e.datas[0];o.forEach((function(e){var t;e.value=null==(t=qe.find((function(t){return t.id==e.id})))?void 0:t.value,"refId"===e.id&&(e.value=ht.id)})),Ge.forEach((function(e){R.listTypeUserAction.forEach((function(t){e.recipient[t].forEach((function(e){o.forEach((function(t){if(t.id===e.id)if("r"===t.type)t.value=e.name;else if("m"===t.type)t.value=e.email;else if("phone"===t.type)t.value=e.phone;else if(!("fca"!==t.type.toLowerCase()||r&&r.recipientId)){t.type="fca_pre";var n=JSON.parse(t.value);n.type&&"fca"===n.type.toLowerCase()&&(n.type="fca_pre"),t.value=JSON.stringify(n)}}))}))}))}));var l=Bt(r);return a.customData=l,a.inputData.datas[0]=o,a.owner=null==Te||null==(t=Te.template)||null==(n=t.requester)||null==(i=n.contact)?void 0:i.email,a})),function(){return _t.apply(this,arguments)}),Bt=function(e){var t=[];return Object.keys(Ze).length>0&&Ge.forEach((function(n){R.listTypeUserAction.forEach((function(i){n.recipient[i].forEach((function(n){var i=Ze[n.id];i.email=n.email,i.personalName=n.name,i.telephoneNumber=n.phone,e&&n.id===e.recipientId&&(i.type="fca",i.photoBackSideIDCard=e.back.content,i.photoBackSideIDCardContentType=e.back.contentContentType,i.photoFrontSideIDCard=e.front.content,i.photoFrontSideIDCardContentType=e.front.contentContentType,i.address=e.ekycRepository.attrs.address,i.commune=e.ekycRepository.attrs.commune,i.country=e.ekycRepository.attrs.country,i.location=e.ekycRepository.attrs.location,i.personalID=e.ekycRepository.attrs.personalID,i.provideAddress=e.ekycRepository.attrs.provideAddress,i.stateOrProvince=e.ekycRepository.attrs.stateOrProvince,i.refId=e.ekycRepository.attrs.refId,i.personalName=e.ekycRepository.attrs.personalName,i.ekycContent=e.ekycRepository.ekycContent,i.provideDate=D.DateUtils.convertDateToDDMMYYYY(e.ekycRepository.attrs.provideDate)),t.push(i)}))}))})),t},At=(Ft=(0,o.default)((function*(){var e,t="";if(null!=gt&&gt.party&&(null==gt||null==(e=gt.party)||e.recipients.forEach((function(e){"eID"===e.role&&(t=e.id)}))),!t)return null;var n={ticketId:ht.id,userTaskId:t},i=yield bt.getHistoryEkycDetail(n);if(!i)return null;var r=i.ekycRepositoryId,a=yield bt.getEkycRepoById(r),o=yield Dt.getEkycRepositoryDetailIdCard(a.id,{ekycRepositoryId:r,id:a.id,recipientId:a.id});return o&&o.back&&o.front?{recipientId:a.personalId,ekycRepository:o.ekycRepository,front:{content:o.front.content,contentContentType:o.front.name},back:{content:o.back.content,contentContentType:o.back.name}}:null})),function(){return Ft.apply(this,arguments)}),Lt=function(e){var t={message:"",alertType:""};return"-1"===e||-1===e||"13"===e||13===e?(t.message="econtract.alert.error.13-error",t.alertType="error"):"2"===e||2===e?(t.message="econtract.alert.error.2-ekyc",t.alertType="error"):"3"===e||3===e?(t.message="econtract.alert.error.3-error",t.alertType="error"):"4"===e||4===e?(t.message="econtract.alert.error.4-ewriter-file",t.alertType="error"):"5"===e||5===e?(t.message="econtract.alert.error.5-error",t.alertType="error"):"6"===e||6===e?(t.message="econtract.alert.error.6-no-sign-control",t.alertType="error"):"7"===e||7===e?(t.message="econtract.alert.error.7-digital-sign-amount-invalid",t.alertType="error"):"8"===e||8===e?(t.message="econtract.alert.error.8-field-role-invalid",t.alertType="error"):"9"===e||9===e?(t.message="econtract.alert.error.9-error",t.alertType="error"):"10"===e||10===e?(t.message="econtract.alert.error.10-error",t.alertType="error"):"12"===e||12===e?(t.message="econtract.alert.error.12-filename-not-found",t.alertType="error"):"14"===e||14===e?(t.message="econtract.alert.error.14-rcp-no-sign-control",t.alertType="error"):(t.message="econtract.alert.success.create",t.alertType="success"),t},Nt=function(e){if(e){for(var t=0;t<e.parties.length;t++)for(var n=0;n<e.parties[t].recipients.length;n++){var i=e.parties[t].recipients[n].signTypes;if(i&&i.includes("sign_fca.otp")){if(i.includes("sign_ekyc"))continue;return!1}}return!0}return!0};return(0,c.useEffect)((function(){console.log("err",te)}),[te]),(0,z.jsxs)(v.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,z.jsx)(h.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:n("RV.econtract.infoContract"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,z.jsx)(u.TopNavigationAction,{onPress:function(){return H(!0)},icon:(0,z.jsx)(f.IconWorkflow,{width:20,height:20})})}}),(0,z.jsxs)(g.KeyboardAwareScrollView,{style:{flex:1},children:[(0,z.jsx)(x.View,{style:j.default.ctnBody,children:(0,z.jsxs)(x.View,{style:j.default.ctnSubBody,children:[(0,z.jsxs)(x.Pressable,{style:j.default.ctnHeader,onPress:function(){return Q(!X)},children:[(0,z.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:X?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(w.default,{style:j.default.textTitle,children:n("CM.infoCommon")})]}),X&&(0,z.jsx)(x.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,z.jsx)(b.default,{dataInfo:Tt})})]})}),A?(0,z.jsx)(S.default,{envelopeId:B.envelopeId}):(0,z.jsxs)(z.Fragment,{children:[je&&(0,z.jsx)(x.View,{style:j.default.ctnBody,children:(0,z.jsxs)(x.View,{style:[j.default.ctnSubBody],children:[(0,z.jsxs)(x.Pressable,{style:j.default.ctnHeader,onPress:function(){return ge(!ve)},children:[(0,z.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:ve?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(w.default,{style:j.default.textTitle,children:n("RV.econtract.formNeedAction")})]}),ve&&(0,z.jsxs)(x.View,{style:j.default.ctnFormName,children:[(0,z.jsxs)(w.default,{style:j.default.textTitle,children:[n("RV.econtract.fillForm")," "]}),(0,z.jsx)(x.TouchableOpacity,{onPress:function(){L.navigate(T.default.ViewFormScreen,{versionId:je.versionId,readOnly:!1,data:{_userTaskId:null==B?void 0:B.userTaskId,_ticketId:ht.id,formId:je.formId},isOnlyView:!1})},children:(0,z.jsx)(w.default,{style:j.default.formName,children:null==je?void 0:je.formName})})]})]})}),(0,z.jsx)(x.View,{style:j.default.ctnBody,children:(0,z.jsx)(k.default,{error:te,setError:ne,dataEcontractFlow:B,setTemplateStructure:Pe,setMergeFileList:_e,setEWriterDocInfoWriter:Ee,setEnvRemind:Be,envRemind:Ve,setIsDTFlow:Ue,setDataPartyForm:$e,dataPartyForm:Ge,listFormEnvData:qe,setListFormEnvData:Je,setListCaOtpRecipientForm:et,setIsErrorView:ft,isErrorView:dt,setDocumentList:rt})}),(0,z.jsx)(x.View,{style:j.default.ctnBody,children:(0,z.jsxs)(x.View,{style:[j.default.ctnSubBody,{marginBottom:16}],children:[(0,z.jsxs)(x.Pressable,{style:j.default.ctnHeader,onPress:function(){return he(!pe)},children:[(0,z.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:pe?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(w.default,{style:j.default.textTitle,children:n("CM.note")})]}),pe&&(0,z.jsx)(x.View,{style:j.default.ctnNote,children:(0,z.jsx)(_.default,{isRequired:!0,label:n("CM.fillNote"),value:ae,onChangeText:function(e){oe(e),ce("")},multiline:!0,maxLength:400,errorMessage:n(ue)})})]})})]})]}),!A&&((null==xt?void 0:xt.recipientStatus)===P.Status.processing||null===(null==xt?void 0:xt.recipientStatus))&&!dt.isError&&(0,z.jsx)(x.View,{style:j.default.ctnFooter,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.TouchableOpacity,{onPress:Et,children:(0,z.jsx)(f.IconRejectReview,{width:36,height:36})}),(0,z.jsx)(C.default,{disabled:!(0,I.isEmpty)(te),style:{flex:1},label:n("CM.confirm"),onPress:Rt,loading:Y})]})}),(0,z.jsx)(y.default,{isVisible:W,children:(0,z.jsx)(m.default,{onClose:function(){return H(!1)}})})]})}},31075:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ROOT_FOLDER_ID=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(87841),l=i(n(43184)),s=n(20880),u=i(n(93238)),c=n(21527),d=n(32207),f=i(n(69290)),p=n(87414),h=n(84093),y=n(45335),m=n(2884),v=n(47671),g=t.ROOT_FOLDER_ID="000010000000000000";t.default=function(e){var t=e.url,n=e.toogleViewFile,i=e.isView,S=e.fileId,x=e.changeDataFile,j=(0,m.useTranslation)().t,w=(0,c.useState)(!1),b=(0,a.default)(w,2),D=b[0],T=b[1],P=(0,c.useState)(),C=(0,a.default)(P,2),I=C[0],k=C[1],_=(0,c.useState)(),F=(0,a.default)(_,2),O=F[0],M=F[1],E=(0,c.useState)(0),R=(0,a.default)(E,2),z=R[0],V=R[1],B=(0,c.useState)(i),A=(0,a.default)(B,2),L=A[0],N=A[1],U=(0,c.useState)(""),W=(0,a.default)(U,2),H=W[0],G=W[1],$=(0,c.useState)(!1),Y=(0,a.default)($,2),K=Y[0],q=Y[1],J=function(){return q(!K)},X=(0,h.useReviewCollaboServices)(),Q=function(){T(!D)};(0,c.useEffect)((function(){te()}),[]);var Z,ee,te=(Z=(0,r.default)((function*(){var e=yield X.getFileById(S);e&&M(e)})),function(){return Z.apply(this,arguments)}),ne=(ee=(0,r.default)((function*(e){var t=Object.assign({},O,{status:e,versionId:e===p.FILE_ITEM_STATUS.DONE?null:null==O?void 0:O.versionId,fileParentId:(null==O?void 0:O.fileParentId)===g?"":null==O?void 0:O.fileParentId});(yield X.changeStatusFile(t))?(J(),G("CL.changeStatusDone"),x((function(t){return Object.assign({},t,{status:e})})),N(e),V(z+1)):G("CL.changeStatusStop")})),function(e){return ee.apply(this,arguments)});return(0,c.useEffect)((function(){0===(null==I?void 0:I.row)&&0===I.section&&(ne(p.FILE_ITEM_STATUS.DONE),Q()),1===(null==I?void 0:I.row)&&0===I.section&&(ne(p.FILE_ITEM_STATUS.STOP),Q())}),[I]),(0,v.jsxs)(o.View,{style:{flex:1},children:[(0,v.jsx)(l.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:j("CL.collabo"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:n,renderContentRight:L===p.FILE_ITEM_STATUS.EDITING?function(){return(0,v.jsx)(d.TopNavigationAction,{icon:(0,v.jsx)(d.Icon,{name:"more-vertical"}),onPress:Q})}:void 0}),(0,v.jsx)(o.View,{style:{backgroundColor:"red",flex:1},children:(0,v.jsx)(u.default,{javaScriptEnabled:!0,injectedJavaScript:s.String.SCRIPT_SCALE_WEBVIEW,source:{uri:t}},z)}),(0,v.jsx)(f.default,{title:j("CL.changeStatus"),isVisible:D,onClose:Q,renderContent:(0,v.jsx)(o.View,{children:(0,v.jsx)(d.Menu,{selectedIndex:I,onSelect:function(e){return k(e)},children:(0,v.jsxs)(d.MenuGroup,{initiallyExpanded:!0,title:j("CL.changeStatus"),children:[(0,v.jsx)(d.MenuItem,{title:j("CL.done")}),(0,v.jsx)(d.MenuItem,{title:j("CL.stop")})]})})})}),(0,v.jsx)(y.Snackbar,{visible:K,duration:1e3,onDismiss:J,children:j(H)})]})}},64898:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(87841),l=n(87414),s=i(n(24541)),u=n(32207),c=n(46317),d=i(n(76644)),f=n(21527),p=n(31004),h=i(n(91642)),y=i(n(31075)),m=n(2884),v=i(n(56677)),g=n(47671);t.default=function(e){var t,n,i,S=e.data,x=e.dataFlow,j=e.deleteFile,w=e.typeReview,b=(0,m.useTranslation)().t,D=(0,f.useState)(!1),T=(0,a.default)(D,2),P=T[0],C=T[1],I=(0,f.useState)(!1),k=(0,a.default)(I,2),_=k[0],F=k[1],O=(0,f.useState)(""),M=(0,a.default)(O,2),E=M[0],R=M[1],z=(0,f.useState)(S),V=(0,a.default)(z,2),B=V[0],A=V[1],L=(0,p.useReviewEcontractServices)(),N=function(){C(!P)},U=function(){F(!_)},W=function(e){switch(e){case l.FILE_ITEM_STATUS.DRAFT:return{backgroundColor:"rgb(255, 243, 235)",color:"rgb(252, 107, 3)"};case l.FILE_ITEM_STATUS.EDITING:return{backgroundColor:"#efeffd",color:"#5d5fef"};case l.FILE_ITEM_STATUS.DONE:return{backgroundColor:"#06a87726",color:"#39ac6d"};case l.FILE_ITEM_STATUS.SIGN:return{backgroundColor:"#ef5da81a",color:"#943cdd"};case l.FILE_ITEM_STATUS.REQUEST_EDIT:return{backgroundColor:"#f6eefc",color:"#943cdd"};case l.FILE_ITEM_STATUS.STOP:return{backgroundColor:"#fceeed",color:"#e14337"};default:return{backgroundColor:"rgb(255, 243, 235)",color:"rgb(252, 107, 3)"}}},H=(t=(0,r.default)((function*(e){var t=yield L.getLinkIframeEcollabo(e);t&&(R(t.iframe),N())})),function(e){return t.apply(this,arguments)});return(0,g.jsxs)(o.View,{style:h.default.ctnMain,children:[(0,g.jsx)(o.View,{style:h.default.ctnLeft,children:(0,g.jsx)(c.IconDocx,{width:32,height:32})}),(0,g.jsxs)(o.View,{style:h.default.ctnRight,children:[(0,g.jsx)(o.TouchableOpacity,{onPress:function(){return H(B.fileId)},children:(0,g.jsx)(s.default,{style:h.default.fileName,children:null==B?void 0:B.fileName})}),(0,g.jsxs)(o.View,{style:h.default.ctnBody,children:[(0,g.jsx)(s.default,{style:h.default.srcSys,children:(null==B?void 0:B.sourceSystem)||"Từ eRequest"}),(0,g.jsx)(s.default,{children:"•"}),(0,g.jsx)(s.default,{style:h.default.srcSys,children:(i=null==B?void 0:B.fileSize,i&&i>=1024?Math.floor(i/1024)+" KB":i&&i<1024?i+" MB":"---")})]}),(0,g.jsxs)(o.View,{style:h.default.ctnAction,children:[(0,g.jsx)(o.View,{style:[h.default.ctnStatus,{backgroundColor:W(null==B?void 0:B.status).backgroundColor}],children:(0,g.jsx)(s.default,{style:[{textAlign:"center",color:W(null==B?void 0:B.status).color},h.default.srcSys],children:(n=null==B?void 0:B.status,b("RV.status-collabo."+Object.keys(l.FILE_ITEM_STATUS)[n]))})}),(0,g.jsx)(o.View,{style:h.default.action})]}),(0,g.jsxs)(o.View,{style:h.default.action,children:["eCollabo"===w&&"task-success"!=(null==x?void 0:x._status)&&(0,g.jsx)(o.TouchableOpacity,{hitSlop:10,onPress:U,children:(0,g.jsx)(u.Icon,{fill:"#00204DB2",width:16,height:16,name:"share-outline"})}),(0,g.jsx)(o.TouchableOpacity,{hitSlop:10,onPress:function(){return H(B.fileId)},children:(0,g.jsx)(u.Icon,{fill:"#00204DB2",width:16,height:16,name:B.status===l.FILE_ITEM_STATUS.EDITING?"edit-2-outline":"eye-outline"})}),B.sourceSystem.includes("eRequest")&&B.status!=l.FILE_ITEM_STATUS.DONE&&(0,g.jsx)(o.TouchableOpacity,{hitSlop:10,onPress:function(){return null==j?void 0:j(B.fileId)},children:(0,g.jsx)(u.Icon,{fill:"#00204DB2",width:16,height:16,name:"trash"})})]}),(0,g.jsx)(u.Divider,{})]}),P&&(0,g.jsx)(d.default,{isVisible:P,children:(0,g.jsx)(y.default,{changeDataFile:A,isView:B.status,url:E,toogleViewFile:N,fileId:B.fileId})}),(0,g.jsx)(d.default,{isVisible:_,children:(0,g.jsx)(v.default,{dataDetailFile:B,toogleFunc:U})})]})}},91642:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",paddingVertical:8},ctnLeft:{width:80,alignItems:"center",justifyContent:"center"},ctnRight:{flex:1,rowGap:8},fileName:{fontSize:14,color:"#00204DF2",fontFamily:r.Font.InterRegular400},ctnBody:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:4},srcSys:{fontSize:12,color:"#00204DF2",fontFamily:r.Font.InterRegular400},ctnAction:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnStatus:{borderRadius:4,backgroundColor:"#E8F7EF",paddingHorizontal:8,paddingVertical:4},action:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",columnGap:16}})},67831:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),a=i(n(24541)),o=i(n(91278)),l=i(n(42467)),s=n(99845),u=n(2884),c=n(47671);t.default=function(e){var t=e.party,n=e.index,i=e.error,d=e.setError,f=(0,u.useTranslation)().t;return(0,c.jsxs)(r.View,{children:[(0,c.jsx)(r.View,{style:l.default.ctnMain,children:(0,c.jsxs)(a.default,{style:l.default.text,children:[f("RV.econtract.join")," ",n]})}),(0,c.jsx)(r.View,{style:l.default.ctnRecipient,children:s.listTypeUserAction.map((function(e){return t.recipient[e].map((function(t,n){return(0,c.jsx)(o.default,{error:i,setError:d,recipient:t,type:e},n)}))}))})]})}},42467:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnMain:{backgroundColor:"#F2ECFD",borderRadius:8,paddingHorizontal:12,paddingVertical:10,marginHorizontal:10},text:{color:"#6F2CED",fontSize:16,fontFamily:r.Font.InterSemiBold600},ctnRecipient:{paddingHorizontal:12,marginBottom:16}})},91278:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43693)),a=i(n(85715)),o=n(87841),l=i(n(54813)),s=i(n(24541)),u=i(n(65963)),c=n(99845),d=n(21527),f=n(32207),p=i(n(54582)),h=n(35708),y=n(2884),m=n(47671);t.default=function(e){var t=e.recipient,n=e.type,i=e.error,v=e.setError,g=(0,y.useTranslation)().t,S=(0,d.useState)(t.notifyType.map((function(e){return new f.IndexPath(c.notifyType.findIndex((function(t){return t.value===e})))}))),x=(0,a.default)(S,2),j=x[0],w=x[1];(0,d.useEffect)((function(){var e=i;0===j.length?(e[`notifyType_${t.id}`]="CM.empty",t.notifyType=[]):(delete e[`notifyType_${t.id}`],t.notifyType=j.map((function(e){return c.notifyType[e.row].value}))),v((function(t){return Object.assign({},t,e)}))}),[j]);var b=function(e,n,i){t[e]=i,i.trim()?"email"!==e||h.RegexUtils.FORMAT_EMAIL.test(i)?"phone"!==e||h.RegexUtils.REGEX_PHONE_NUMBER_9.test(i)?v((function(t){var i=Object.assign({},t);return delete i[`${e}_${n}`],i})):v((function(t){return Object.assign({},t,(0,r.default)({},`${e}_${n}`,"CM.validPhone"))})):v((function(t){return Object.assign({},t,(0,r.default)({},`${e}_${n}`,"CM.validEmail"))})):v((function(t){return Object.assign({},t,(0,r.default)({},`${e}_${n}`,"CM.empty"))}))};return(0,m.jsxs)(o.View,{children:[(0,m.jsx)(s.default,{style:p.default.text,children:g(`RV.econtract.${n}`)}),(0,m.jsx)(l.default,{isRequired:!0,label:g("RV.econtract.name"),value:t.name,captionText:g(i[`name_${t.id}`]),status:i[`name_${t.id}`]?"danger":"basic",onChangeText:function(e){return b("name",t.id,e)}}),(0,m.jsx)(l.default,{isRequired:!0,label:"Email",keyBoardType:"email-address",value:t.email,captionText:g(i[`email_${t.id}`]),status:i[`email_${t.id}`]?"danger":"basic",onChangeText:function(e){return b("email",t.id,e)}}),(0,m.jsx)(l.default,{isRequired:!0,label:g("RV.econtract.phone"),value:t.phone,keyBoardType:"numeric",captionText:g(i[`phone_${t.id}`]),status:i[`phone_${t.id}`]?"danger":"basic",onChangeText:function(e){return b("phone",t.id,e)}}),(0,m.jsx)(u.default,{valueSelect:j,onSelect:w,label:g("RV.econtract.notify-type"),isRequired:!0,multiple:!0,size:"medium",caption:g(i[`notifyType_${t.id}`]),status:i[`notifyType_${t.id}`]?"danger":"basic",listData:c.notifyType})]})}},54582:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({text:{fontSize:15,fontFamily:r.Font.InterMedium500,color:"#00204D",textDecorationLine:"underline",paddingVertical:6}})},99845:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.notifyType=t.listTypeUserAction=t.listRemind=t.headerFieldsColla=void 0;t.listRemind=[{label:"Nhắc hằng ngày",value:"daily"},{label:"Nhắc một lần",value:"onetime"}],t.notifyType=[{label:"Thông báo qua sms",value:"sms"},{label:"Thông báo qua email",value:"email"}],t.listTypeUserAction=["reviewer","signer","stamper"],t.headerFieldsColla=[{id:"envName",name:"Tên tài liệu",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"String",required:!0},{id:"envNo",name:"Số tài liệu",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"String",required:!1},{id:"envDate",name:"Ngày ký",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"Date",required:!1},{id:"envSubmittedFrom",name:" Được gửi từ :  ",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"String",required:!1}]},52275:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43693)),a=i(n(41132)),o=i(n(29293)),l=i(n(85715)),s=n(21527),u=n(12638),c=n(31004),d=n(87841),f=i(n(54813)),p=n(32207),h=i(n(24541)),y=i(n(23599)),m=i(n(33254)),v=i(n(65963)),g=n(99845),S=i(n(27747)),x=i(n(67831)),j=n(2884),w=i(n(64898)),b=n(47671),D=["000010eViX8cWwWn5reR","000010Nmi1KfN5azzXD4","000010ayipEI5eN61LrV","0000101JigKI6w6GvQ5G"];t.default=function(e){var t=e.dataEcontractFlow,n=e.error,i=e.setError,T=e.setTemplateStructure,P=e.setMergeFileList,C=e.setEWriterDocInfoWriter,I=e.setEnvRemind,k=e.envRemind,_=e.setIsDTFlow,F=e.dataPartyForm,O=e.setDataPartyForm,M=e.listFormEnvData,E=e.setListFormEnvData,R=e.setListCaOtpRecipientForm,z=e.setIsErrorView,V=e.isErrorView,B=e.setDocumentList,A=(0,j.useTranslation)().t,L=(0,s.useState)(!0),N=(0,l.default)(L,2),U=N[0],W=N[1],H=(0,s.useState)(!0),G=(0,l.default)(H,2),$=G[0],Y=G[1],K=(0,s.useState)(),q=(0,l.default)(K,2),J=(q[0],q[1]),X=(0,s.useState)([]),Q=(0,l.default)(X,2),Z=Q[0],ee=Q[1],te=(0,u.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,ne=(0,s.useState)(new p.IndexPath(0)),ie=(0,l.default)(ne,2),re=ie[0],ae=ie[1],oe=(0,u.useAppSelector)((function(e){return e.common})).accessToken,le=(0,c.useReviewEcontractServices)();(0,s.useEffect)((function(){ge()}),[]),(0,s.useEffect)((function(){I((function(e){return Object.assign({},e,{remindFrequency:g.listRemind[re.row].value})}))}),[re]);var se,ue,ce,de,fe,pe,he,ye,me,ve,ge=(se=(0,o.default)((function*(){null!=t&&t.userTaskId&&(te.id&&(yield Oe()),"ewriter"===t.documentResource?yield Se():"ecollabo"===t.documentResource&&(yield _e()))})),function(){return se.apply(this,arguments)}),Se=(ue=(0,o.default)((function*(){var e=yield ke();if(e){var t=te.modelerId;if(t&&D.includes(t)){var n=(yield le.getTicketForms(te.id)).find((function(e){return!e.userTaskId}));if(n&&n.formData){var i=JSON.parse(n.formData),r=i.find((function(e){return"contract"===e.label})),a=i.find((function(e){return"category"===e.label}));r&&a&&(yield xe(e,r.value,a.value))}}else yield we(e)}})),function(){return ue.apply(this,arguments)}),xe=(ce=(0,o.default)((function*(e,t,n){if(_(!0),e.length>1)try{var i=yield Promise.all(e.map((function(e){var t={Id:e.eWriterId};return le.getEcontractDocInfo(t)})));if(i){var r=i;if(r){var a=je(t,n),o=r.find((function(e){return(e.name&&e.name.split(".")[0])===a}));o&&o.templateEcontractId&&(yield be(o))}}}catch(e){}})),function(e,t,n){return ce.apply(this,arguments)}),je=function(e,t){var n=e.split(" ").join("");return"Troubleshoot"===t?`KPSC_${n}`:`BDĐK_${n}`},we=(de=(0,o.default)((function*(e){var t;e.length>1&&(yield Ie(e));var n=yield le.getEcontractDocInfo({Id:null==(t=e[0])?void 0:t.eWriterId});n&&n.templateEcontractId&&(yield be(n))})),function(e){return de.apply(this,arguments)}),be=(fe=(0,o.default)((function*(e){C(e);var t={templateid:e.templateEcontractId},n=yield le.getStructureOfData(t,oe);if(n){var i;T(n);var r=null==n||null==(i=n.lotData)?void 0:i.datas[0];E(r.filter((function(e){return"envSubmittedFrom"!==e.id&&"header_fields"===e.type}))),z({isError:!1,errorViewMessage:""}),r&&r.filter((function(e){return"header_fields"!==e.type})).length>0&&De(n)}})),function(e){return fe.apply(this,arguments)}),De=function(e){var t,n=[],i=null==e||null==(t=e.lotData)?void 0:t.datas[0],r=i.filter((function(e){return"p"===e.type}));n.push.apply(n,(0,a.default)(r.map((function(e){return{id:e.id,recipient:{reviewer:[],signer:[],stamper:[]}}})))),n.map((function(t){i.filter((function(e){return"r"===e.type&&e.id.includes(t.id)})).forEach((function(r){var a,o;Te(e.template,r.id);var l=Ce(e.template,r.id);null==n||null==(a=n.find((function(e){return e.id===t.id})))||null==(o=a.recipient)||o[l].push(Pe(r.id,i))}))})),O(n)},Te=function(e,t){e.parties.forEach((function(e){e.recipients.forEach((function(e){e.id===t&&e.signTypes&&e.signTypes.find((function(e){return"sign_fca.otp"===e}))&&R((function(n){return Object.assign({},n,(0,r.default)({},t,{recipientId:t,email:e.contact.email,telephoneNumber:e.contact.phone,contactId:e.contact.id,personalName:e.contact.name,location:null,stateOrProvince:null,country:null,personalID:null,passportID:null,type:"fca_pre",photoIDCard:null,photoIDCardContentType:null,photoFrontSideIDCard:null,photoFrontSideIDCardContentType:null,photoBackSideIDCard:"",photoBackSideIDCardContentType:null,statusCode:null,resourceType:null,provideAddress:null,provideDate:null,commune:null,address:null,refId:null}))}))}))}))},Pe=function(e,t){var n=t.filter((function(t){return t.id===e})),i=n.find((function(e){return"r"===e.type})),r=n.find((function(e){return"m"===e.type})),a=n.find((function(e){return"phone"===e.type})),o=n.find((function(e){return"contact_recipient"===e.type}));return{id:e,name:i?i.value:null,phone:a?a.value:null,email:r?r.value:null,contactRecipient:o?o.value:null,notifyType:["email"]}},Ce=function(e,t){var n="";return e&&e.parties.forEach((function(e){e.recipients.forEach((function(e){e.id===t&&(n=e.role)}))})),n},Ie=(pe=(0,o.default)((function*(e){try{Promise.all(e.map((function(e){var t={Id:e.eWriterId};return le.getEcontractDocInfo(t)}))).then((function(e){var t=e.map((function(e,t){return{fileId:e.id,fileName:e.name,order:t+1}}));P(t)}))}catch(e){}})),function(e){return pe.apply(this,arguments)}),ke=(he=(0,o.default)((function*(){try{return yield le.getEWriterDocByUserTaskIdAndTicketId(null==t?void 0:t.userTaskId,te.id)}catch(e){}})),function(){return he.apply(this,arguments)}),_e=(ye=(0,o.default)((function*(){yield Fe(),E(g.headerFieldsColla.filter((function(e){return"envSubmittedFrom"!==e.id})))})),function(){return ye.apply(this,arguments)}),Fe=(me=(0,o.default)((function*(){var e=yield le.getListCollaboDocs(te.id,null==t?void 0:t.userTaskId);if(e){B(e);var n=yield Promise.all(e.map((function(e){return le.getDetailCollabora(e.fileId)})));ee(n)}})),function(){return me.apply(this,arguments)}),Oe=(ve=(0,o.default)((function*(){try{var e=yield le.getRecipientDetail(null==t?void 0:t.userTaskId,te.id);e&&J(e)}catch(e){}})),function(){return ve.apply(this,arguments)}),Me=function(e,t,n){E(M.map((function(t){return t.id!==e?t:Object.assign({},t,{value:n})}))),t&&(n.trim()?i((function(t){var n=Object.assign({},t);return delete n[e],n})):i((function(t){return Object.assign({},t,(0,r.default)({},e,"CM.empty"))})))},Ee=function(e,t){I((function(n){return Object.assign({},n,(0,r.default)({},e,t))})),"isRemindEnv"!==e||!1!==t?"remindContent"!==e&&i(t?function(t){var n=Object.assign({},t);return delete n[e],n}:function(t){return Object.assign({},t,(0,r.default)({},e,"CM.empty"))}):i((function(e){var t=Object.assign({},e);return delete t.overdueDate,delete t.remindStartDate,delete t.remindFrequency,delete t.remindContent,t}))};return(0,b.jsx)(d.View,{style:{backgroundColor:"#fff"},children:V.isError?(0,b.jsx)(h.default,{style:y.default.textError,children:A(V.errorViewMessage)}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.View,{children:(0,b.jsxs)(d.Pressable,{style:[y.default.ctnHeader],onPress:function(){return W(!U)},children:[(0,b.jsx)(p.Icon,{fill:"#6F2CED",width:16,height:16,name:U?"arrow-circle-down":"arrow-circle-right"}),(0,b.jsxs)(h.default,{style:y.default.textTitle,children:[A("RV.econtract.infoContract")," ",(0,b.jsx)(h.default,{style:y.default.redDot,children:"*"})]})]})}),(0,b.jsxs)(d.View,{style:{paddingHorizontal:10},children:[M&&U&&M.map((function(e,t){return(0,b.jsxs)(b.Fragment,{children:["Date"!==e.dataType&&(0,b.jsx)(s.Fragment,{children:(0,b.jsx)(f.default,{label:e.name,value:e.value,onChangeText:function(t){return Me(e.id,e.required,t)},isRequired:e.required,captionText:A(n[e.id]),status:n[e.id]?"danger":"basic",placeholder:"Nhập "+e.name.toLowerCase()})},t),"Date"===e.dataType&&(0,b.jsx)(s.Fragment,{children:(0,b.jsx)(m.default,{isRequired:e.required,label:e.name,value:e.value,captionText:A(n[e.id]),status:n[e.id]?"danger":"basic",onChangeDate:function(t){return Me(e.id,e.required,t)}})},t)]})})),U&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.CheckBox,{style:{paddingVertical:8},checked:k.isRemindEnv,onChange:function(e){return Ee("isRemindEnv",e)},children:function(e){return(0,b.jsx)(h.default,Object.assign({},e,{children:A("RV.econtract.remind")}))}}),k.isRemindEnv&&(0,b.jsxs)(d.View,{style:{rowGap:4},children:[(0,b.jsx)(m.default,{isRequired:!0,label:A("RV.econtract.overdueDate"),value:k.overdueDate,captionText:A(n.overdueDate),status:n.overdueDate?"danger":"basic",onChangeDate:function(e){return Ee("overdueDate",e)}}),(0,b.jsx)(m.default,{isRequired:!0,label:A("RV.econtract.remindStartDate"),value:k.remindStartDate,captionText:A(n.remindStartDate),status:n.remindStartDate?"danger":"basic",onChangeDate:function(e){return Ee("remindStartDate",e)}}),(0,b.jsx)(v.default,{onSelect:ae,valueSelect:re,placeholder:A("RV.econtract.remindFrequency"),label:A("RV.econtract.notiType"),isRequired:!0,size:"medium",listData:g.listRemind,caption:A(n.remindFrequency),status:n.remindFrequency?"danger":"primary"}),(0,b.jsxs)(d.View,{style:{paddingVertical:6,rowGap:4},children:[(0,b.jsx)(h.default,{style:y.default.textRemind,children:A("CM.remind")}),(0,b.jsx)(S.default,{isRequired:!0,label:A("CM.fillRemind"),value:k.remindContent,onChangeText:function(e){return Ee("remindContent",e)},multiline:!0,maxLength:400})]})]})]})]}),(0,b.jsx)(d.View,{children:(0,b.jsxs)(d.Pressable,{style:[y.default.ctnHeader],onPress:function(){return Y(!$)},children:[(0,b.jsx)(p.Icon,{fill:"#6F2CED",width:16,height:16,name:$?"arrow-circle-down":"arrow-circle-right"}),"ewriter"===t.documentResource?(0,b.jsxs)(h.default,{style:y.default.textTitle,children:[A("RV.econtract.listEwriter")," ",(0,b.jsx)(h.default,{style:y.default.redDot,children:"*"})]}):(0,b.jsx)(h.default,{style:y.default.textTitle,children:A("RV.econtract.listEcollabo")})]})}),$&&(0,b.jsx)(b.Fragment,{children:"ewriter"===t.documentResource?(0,b.jsx)(b.Fragment,{children:F&&F.map((function(e,t){return(0,b.jsx)(x.default,{error:n,setError:i,party:e,index:t+1})}))}):(0,b.jsxs)(d.View,{style:{padding:10},children:[(0,b.jsx)(h.default,{children:A("RV.econtract.listEcontract")}),Z&&(0,b.jsx)(p.List,{scrollEnabled:!1,data:Z,renderItem:function(e){var t=e.item;return(0,b.jsx)(w.default,{typeReview:"eContract",data:t})}})]})})]})})}},87414:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FILE_ITEM_STATUS=void 0;t.FILE_ITEM_STATUS={DRAFT:0,EDITING:1,DONE:2,SIGN:3,REQUEST_EDIT:4,STOP:5}},23599:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({ctnBody:{backgroundColor:"#fff",padding:(0,a.SizeDP)(10),borderRadius:8},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,a.SizeDP)(16),marginBottom:(0,a.SizeDP)(24)},txtTitle:{fontFamily:r.Font.InterSemiBold600,fontSize:r.FontSize.FontTiny,color:r.Color.colorText,flex:.5},txtValue:{fontFamily:r.Font.InterRegular400,fontSize:r.FontSize.FontTiny,color:"#00204DE5",flex:1},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10,backgroundColor:"#FFFFFF",borderRadius:8},textTitle:{color:"#00204D",fontSize:14,fontFamily:r.Font.InterMedium500},redDot:{color:"#E14337"},textError:{fontSize:16,color:"#000",textAlign:"center",padding:16,fontFamily:r.Font.InterSemiBold600},textRemind:{fontSize:12,fontFamily:r.Font.InterMedium500,color:"#00204DF2"}})},8404:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({ctnMain:{padding:(0,a.SizeDP)(16),backgroundColor:"#F8FAFE",flex:1},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,a.SizeDP)(16),marginBottom:(0,a.SizeDP)(24)},txtTitle:{fontFamily:r.Font.InterSemiBold600,fontSize:r.FontSize.FontTiny,color:r.Color.colorText,flex:.5},txtValue:{fontFamily:r.Font.InterRegular400,fontSize:r.FontSize.FontTiny,color:"#00204DE5",flex:1},ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:r.Font.InterMedium500},redDot:{color:"#E14337"},ctnFooter:{flexDirection:"row",paddingHorizontal:16,columnGap:16,marginTop:8},ctnNote:{paddingHorizontal:10,paddingBottom:10,rowGap:4},formName:{fontSize:14,color:"#366ae2",textDecorationLine:"underline",fontFamily:r.Font.InterRegular400},ctnFormName:{paddingHorizontal:10,paddingBottom:10,rowGap:4}})},73264:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(14740),l=n(12638),s=n(21527),u=n(87841),c=i(n(24541)),d=n(35708),f=n(20880),p=i(n(32055)),h=n(31004),y=i(n(63204)),m=n(2884),v=n(32207),g=n(47671);t.default=function(e){var t=e.envelopeId,n=(0,m.useTranslation)().t,i=(0,o.useNavigation)(),S=(0,l.useAppSelector)((function(e){return e.common})).accessToken,x=(0,s.useState)(),j=(0,a.default)(x,2),w=j[0],b=j[1],D=(0,s.useState)([]),T=(0,a.default)(D,2),P=T[0],C=T[1],I=(0,s.useState)(""),k=(0,a.default)(I,2),_=k[0],F=k[1],O=(0,s.useState)(!0),M=(0,a.default)(O,2),E=M[0],R=M[1],z=(0,h.useReviewEcontractServices)();(0,s.useEffect)((function(){B()}),[]);var V,B=(V=(0,r.default)((function*(){try{var e={id:"",refId:null,selector:"flow_processing_kyta_erequest_view_contract",lookup:t,attrs:{},payload:JSON.stringify({envelopeId:t}),body:null},n=yield z.getEnvelopeById(e,S);if(n&&"0"===n.code){var i,r,a=null==(i=JSON.parse(null==n?void 0:n.result))?void 0:i.envelope,o=null==(r=JSON.parse(null==n?void 0:n.result))?void 0:r.webviewInfo;if(o&&F(o.iframeUrl),a){var l,s;b(a);var u=null==a||null==(l=a.header)||null==(s=l.fields)?void 0:s.filter((function(e){return"envSubmittedFrom"!==e.id}));C(u)}}}catch(e){}})),function(){return V.apply(this,arguments)}),A=function(e){var t,r,a;return"envName"===e.id?(0,g.jsx)(u.TouchableOpacity,{style:{flex:1},onPress:function(){return i.navigate(f.NavigationName.ViewFileScreenEcontract,{iframeUrl:_})},children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.default,{style:[y.default.txtValue,{color:"#4583FF",fontWeight:"bold",textDecorationLine:"underline",fontSize:f.FontSize.FontSmall}],children:null!=(r=null==e?void 0:e.value)?r:"---"}),(0,g.jsx)(c.default,{style:{fontSize:f.FontSize.FontTinier,fontStyle:"italic"},children:n("RV.econtract.clickDetail")})]})}):"Date"===e.type||"envDate"===e.id?(0,g.jsx)(c.default,{style:y.default.txtValue,children:null!=(a=d.DateUtils.convertDateToDDMMYYYY_H_M(e.value))?a:"---"}):"Boolean"===e.type?(0,g.jsx)(p.default,{onChange:function(){},checked:"true"===e.value}):(0,g.jsx)(c.default,{style:y.default.txtValue,children:null!=(t=e.value)?t:"---"})};return(0,g.jsxs)(u.View,{style:y.default.ctnMain,children:[(0,g.jsx)(u.View,{children:(0,g.jsxs)(u.Pressable,{style:[y.default.ctnHeader],onPress:function(){return R(!E)},children:[(0,g.jsx)(v.Icon,{fill:"#6F2CED",width:16,height:16,name:E?"arrow-circle-down":"arrow-circle-right"}),(0,g.jsxs)(c.default,{style:y.default.textTitle,children:[n("RV.econtract.infoContract")," ",(0,g.jsx)(c.default,{style:y.default.redDot,children:"*"})]})]})}),E&&(0,g.jsxs)(u.View,{style:y.default.ctnBody,children:[P&&P.map((function(e){return(0,g.jsxs)(u.View,{style:y.default.ctnWrapperItem,children:[(0,g.jsxs)(c.default,{style:y.default.txtTitle,children:[e.name,":"]}),(0,g.jsx)(c.default,{style:y.default.txtValue,children:A(e)})]},e.id)})),(0,g.jsxs)(u.View,{style:y.default.ctnWrapperItem,children:[(0,g.jsxs)(c.default,{style:y.default.txtTitle,children:[n("TK.status"),":"]}),(0,g.jsx)(c.default,{style:y.default.txtValue,children:n(`TK.${null==w?void 0:w.status}`)})]}),"draft"===(null==w?void 0:w.status)&&(0,g.jsx)(u.TouchableOpacity,{onPress:function(){return i.navigate(f.NavigationName.CreateContractScreen)},children:(0,g.jsxs)(c.default,{style:{textAlign:"center"},children:[n("RV.econtract.click")," ",(0,g.jsx)(c.default,{style:y.default.texthere,children:n("RV.econtract.here")})," ",n("RV.econtract.footer")]})})]})]})}},63204:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{padding:(0,r.SizeDP)(16),backgroundColor:"#F8FAFE"},ctnBody:{backgroundColor:"#fff",padding:(0,r.SizeDP)(10),borderRadius:8},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,r.SizeDP)(16),marginBottom:(0,r.SizeDP)(24)},txtTitle:{fontFamily:a.Font.InterSemiBold600,fontSize:r.default.FontTiny,color:a.Color.colorText,flex:.5},txtValue:{fontFamily:a.Font.InterRegular400,fontSize:r.default.FontTiny,color:"#00204DE5",flex:1},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10,backgroundColor:"#FFFFFF",borderRadius:8},textTitle:{color:"#00204D",fontSize:14,fontFamily:a.Font.InterMedium500},redDot:{color:"#E14337"},texthere:{color:"#00f",textDecorationLine:"underline"}})},33542:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(93238)),o=n(88e3),l=n(20880),s=n(21527),u=n(40851),c=n(12638),d=n(47671);t.default=function(e){var t,n,i,f=e.versionForm,p=e.userTaskId,h=e.ticketId,y=(0,s.useRef)(null),m=(0,c.useAppSelector)((function(e){return e.common})).accessToken,v=(0,u.useReviewServices)(),g=(t=(0,r.default)((function*(){var e={userTaskId:p,ticketId:h};return yield v.getFormVersionByTicketAndUserTaskId(e,m)})),function(){return t.apply(this,arguments)}),S=(n=(0,r.default)((function*(e){"e-from"===JSON.parse(e.nativeEvent.data).result&&x()})),function(e){return n.apply(this,arguments)}),x=(i=(0,r.default)((function*(){var e=yield g();if(e){var t,n=JSON.parse(null==e?void 0:e.formData),i="window.postMessage(`"+JSON.stringify({type:"postFormEdit",isReadonly:!0,data:n}).replace(/'/g,"\\'")+'`, "*");';null==y||null==(t=y.current)||t.injectJavaScript(i)}})),function(){return i.apply(this,arguments)});return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(a.default,{style:{height:500},startInLoadingState:!0,scrollEnabled:!0,nestedScrollEnabled:!0,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,injectedJavaScript:l.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,ref:y,onMessage:S,source:{uri:o.BASE_URL_FORM+f}})})}},23392:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(87841),l=n(40851),s=n(21527),u=i(n(84148)),c=n(32207),d=i(n(24541)),f=n(20880),p=n(35708),h=i(n(83032)),y=i(n(41778)),m=n(2884),v=n(47671),g=(t.default=function(e){var t=e.userTaskId,n=e.ticketId,i=(0,m.useTranslation)().t,p=(0,s.useState)(!1),h=(0,a.default)(p,2),y=h[0],x=h[1],j=(0,s.useState)(!1),w=(0,a.default)(j,2),b=w[0],D=w[1],T=(0,s.useState)(!0),P=(0,a.default)(T,2),C=P[0],I=P[1],k=(0,s.useState)(!0),_=(0,a.default)(k,2),F=_[0],O=_[1],M=(0,s.useState)([]),E=(0,a.default)(M,2),R=E[0],z=E[1],V=(0,s.useState)([]),B=(0,a.default)(V,2),A=B[0],L=B[1],N=(0,s.useState)([]),U=(0,a.default)(N,2),W=U[0],H=U[1],G=(0,s.useState)([]),$=(0,a.default)(G,2),Y=$[0],K=$[1],q=(0,s.useState)([]),J=(0,a.default)(q,2),X=J[0],Q=J[1],Z=(0,s.useState)(),ee=(0,a.default)(Z,2),te=ee[0],ne=ee[1],ie=(0,s.useState)(""),re=(0,a.default)(ie,2),ae=re[0],oe=re[1],le=(0,s.useState)(""),se=(0,a.default)(le,2),ue=se[0],ce=se[1],de=(0,s.useState)(!1),fe=(0,a.default)(de,2),pe=fe[0],he=fe[1],ye=(0,s.useState)(!1),me=(0,a.default)(ye,2),ve=me[0],ge=me[1],Se=(0,l.useReviewServices)();(0,s.useEffect)((function(){Ce()}),[]),(0,s.useEffect)((function(){ae&&te&&X.length>0&&be(ae)}),[ae,te,X]),(0,s.useEffect)((function(){ue&&te&&X.length>0&&De(ue)}),[ue,te,X]);var xe,je,we,be=(xe=(0,r.default)((function*(e){try{x(!0);var t=yield Promise.all(X.filter((function(t){return t.includes(e)})).filter((function(e){return e.includes("backSide")||e.includes("frontSide")||e.includes("passport")})).map((function(e){return Se.getDataEkycByType(Object.assign({},te,{order:e.split("_")[2],type:e.split("_")[0]+"_"+e.split("_")[1]}))})));t&&L(t)}catch(e){console.log("Error get data id card by trans id",e)}finally{x(!1)}})),function(e){return xe.apply(this,arguments)}),De=(je=(0,r.default)((function*(e){try{D(!0);var t=yield Promise.all(X.filter((function(t){return null==t?void 0:t.includes(e)})).filter((function(e){return!e.includes("backSide")&&!e.includes("frontSide")&&!e.includes("passport")})).map((function(e){return Se.getDataEkycByType(Object.assign({},te,{order:e.split("_")[2],type:e.split("_")[0]+"_"+e.split("_")[1]}))})));t&&z(t)}catch(e){console.log("Error get data ekyc by trans id",e)}finally{D(!1)}})),function(e){return je.apply(this,arguments)}),Te=function(){he(!pe)},Pe=function(){ge(!ve)},Ce=(we=(0,r.default)((function*(){try{var e={userTaskId:t,tickerId:n},r=yield Se.getHistoryEkycDetail(e);if(r){var a=yield Se.getEkycRepoById(r.ekycRepositoryId);if(a){var l={ekycRepositoryId:r.ekycRepositoryId,id:a.resourceId,recipientId:a.personalId};ne(l);var s=yield Se.getAllTypesOfEkyc(l);if(s){Q(s);var u=s.filter((function(e){return e.includes("backSide")||e.includes("frontSide")||e.includes("passport")})).map((function(e){return e.split("_")[1]})).sort((function(e,t){return e-t})),c=Array.from(new Set(u)).sort((function(e,t){return t.localeCompare(e)}));H(c),oe(c[0]);var d=s.filter((function(e){return!e.includes("backSide")&&!e.includes("frontSide")&&!e.includes("passport")})).map((function(e){return e.split("_")[1]})).sort((function(e,t){return e-t})),f=Array.from(new Set(d)).sort((function(e,t){return t.localeCompare(e)}));K(f),ce(f[0])}}else o.Alert.alert(i("CM.noti"),i("RV.eid.no-ekyc"))}}catch(e){}})),function(){return we.apply(this,arguments)}),Ie=function(e){return A.find((function(t){return null==t?void 0:t[0].type.includes(e)}))};return(0,v.jsxs)(o.View,{children:[(0,v.jsx)(o.View,{style:u.default.ctnBody,children:(0,v.jsxs)(o.View,{style:u.default.ctnSubBody,children:[(0,v.jsxs)(o.View,{style:u.default.ctnOpen,children:[(0,v.jsxs)(o.Pressable,{style:u.default.ctnHeader,onPress:function(){return I(!C)},children:[(0,v.jsx)(c.Icon,{fill:"#6F2CED",width:16,height:16,name:C?"arrow-circle-down":"arrow-circle-right"}),(0,v.jsx)(d.default,{style:u.default.textTitle,children:i("RV.eid.imageId")})]}),(0,v.jsx)(o.View,{style:{},children:(0,v.jsx)(c.OverflowMenu,{anchor:function(){return(0,v.jsx)(o.TouchableOpacity,{onPress:Te,children:(0,v.jsx)(c.Icon,{width:20,height:20,name:"more-vertical"})})},visible:pe,onBackdropPress:Te,children:W.map((function(e,t){return(0,v.jsx)(c.MenuItem,{title:i("CM.step")+" "+(W.length-t),accessoryRight:e===ae?(0,v.jsx)(c.Icon,{fill:f.Color.BgPrimary,name:"checkmark-outline"}):void 0,onPress:function(){oe(e),Te()}},e)}))})})]}),C&&(0,v.jsx)(v.Fragment,{children:y?(0,v.jsx)(o.View,{style:u.default.ctnLoading,children:(0,v.jsx)(c.Spinner,{})}):(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(o.View,{style:{paddingHorizontal:10,paddingBottom:10},children:[Ie("frontSide")&&(0,v.jsx)(g,{data:Ie("frontSide"),title:i("RV.eid.frontSide")}),Ie("backSide")&&(0,v.jsx)(g,{data:Ie("backSide"),title:i("RV.eid.backSide")}),Ie("passport")&&(0,v.jsx)(g,{data:Ie("passport"),title:i("RV.eid.passport")})]})})})]})}),(0,v.jsx)(o.View,{style:u.default.ctnBody,children:(0,v.jsxs)(o.View,{style:u.default.ctnSubBody,children:[(0,v.jsxs)(o.View,{style:u.default.ctnOpen,children:[(0,v.jsxs)(o.Pressable,{style:u.default.ctnHeader,onPress:function(){return O(!F)},children:[(0,v.jsx)(c.Icon,{fill:"#6F2CED",width:16,height:16,name:F?"arrow-circle-down":"arrow-circle-right"}),(0,v.jsx)(d.default,{style:u.default.textTitle,children:i("RV.eid.ekycInfo")})]}),(0,v.jsx)(c.OverflowMenu,{anchor:function(){return(0,v.jsx)(o.TouchableOpacity,{onPress:Pe,children:(0,v.jsx)(c.Icon,{width:20,height:20,name:"more-vertical"})})},visible:ve,onBackdropPress:Pe,children:Y.map((function(e,t){return(0,v.jsx)(c.MenuItem,{title:i("CM.step")+" "+(Y.length-t),accessoryRight:e===ue?(0,v.jsx)(c.Icon,{fill:f.Color.BgPrimary,name:"checkmark-outline"}):void 0,onPress:function(){ce(e),Pe()}},e)}))})]}),F&&(0,v.jsx)(v.Fragment,{children:b?(0,v.jsx)(o.View,{style:u.default.ctnLoading,children:(0,v.jsx)(c.Spinner,{})}):(0,v.jsx)(o.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,v.jsx)(S,{uriVideo:R.filter((function(e){return null==e?void 0:e[0].type.includes("videoEkyc")})).sort((function(e,t){return e[0].order-t[0].order})).map((function(e){return e[0].content})),listData:R.filter((function(e){return!(null!=e&&e[0].type.includes("videoEkyc"))}))})})})]})})]})},function(e){var t=e.title,n=e.data,i=(0,m.useTranslation)().t;return(0,v.jsxs)(o.View,{style:u.default.ctnIdCard,children:[(0,v.jsx)(d.default,{style:u.default.textTitleImage,children:t}),(0,v.jsxs)(d.default,{children:[i("RV.eid.uploadTime")," ",p.DateUtils.convertDateToDDMMYYYY_H_M(null==n?void 0:n[0].createdDate)]}),(0,v.jsxs)(o.View,{style:u.default.ctnViewImage,children:[(0,v.jsx)(o.View,{style:{borderRadius:6,overflow:"hidden"},children:(0,v.jsx)(o.Image,{style:{minHeight:100},resizeMode:"contain",source:{uri:f.String.PREFIX_IMG_BASE64+(null==n?void 0:n[0].content)}})}),(0,v.jsx)(d.default,{style:u.default.textImage,children:null==n?void 0:n[0].name})]})]})}),S=function(e){var t=e.listData,n=e.uriVideo,i=(0,m.useTranslation)().t,l=(0,s.useState)(null),p=(0,a.default)(l,2),g=p[0],S=p[1],x=(0,s.useState)(!1),j=(0,a.default)(x,2),w=j[0],b=j[1];return(0,s.useEffect)((function(){function e(){return(e=(0,r.default)((function*(){if(n.length>0)try{var e=`temp_video_${Date.now()}.mp4`,t=`${y.default.DocumentDirectoryPath}/${e}`;for(var i of n)yield y.default.appendFile(t,i,"base64");S(`file://${t}`)}catch(e){console.error("Error creating video file:",e)}}))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){try{if(g){var e=g.replace("file://","");y.default.unlink(e).then((function(){return console.log("Temporary file deleted")})).catch((function(e){return console.error("Error deleting temporary file:",e)}))}}catch(e){}}}),[n]),(0,v.jsxs)(o.View,{children:[(0,v.jsx)(d.default,{style:[u.default.textTitleImage,{marginBottom:4}],children:i("RV.eid.videoEkyc")}),(0,v.jsx)(o.View,{style:u.default.ctnVideo,children:g&&(0,v.jsx)(v.Fragment,{children:w?(0,v.jsx)(c.Icon,{width:50,height:50,name:"alert-triangle-outline"}):(0,v.jsx)(h.default,{style:u.default.video,controls:!0,resizeMode:"contain",onError:function(e){console.log(e),b(!0)},source:{uri:g}})})}),(0,v.jsx)(d.default,{style:[u.default.textTitleImage,{marginBottom:4}],children:i("RV.eid.imageEkyc")}),(0,v.jsx)(o.FlatList,{horizontal:!0,contentContainerStyle:{gap:10},data:t,renderItem:function(e){var t=e.item;return(0,v.jsx)(o.Image,{width:85,height:85,source:{uri:f.String.PREFIX_IMG_BASE64+(null==t?void 0:t[0].content)}})}})]})}},84148:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:r.Font.InterMedium500},redDot:{color:"#E14337"},ctnViewImage:{borderWidth:.54,borderColor:"#00358059",borderStyle:"dashed",padding:10,borderRadius:6,rowGap:8},textImage:{fontSize:8,color:"#00204D",fontFamily:r.Font.InterSemiBold600,textAlign:"center"},textKb:{fontSize:7,color:"#00204DB2",fontFamily:r.Font.InterRegular400,textAlign:"center"},textTitleImage:{fontSize:14,color:"#00204D",fontFamily:r.Font.InterSemiBold600},ctnOpen:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnLoading:{alignItems:"center",justifyContent:"center",paddingBottom:10},ctnIdCard:{rowGap:6,marginBottom:6},ctnVideo:{marginBottom:10,width:"100%",height:200,alignItems:"center",justifyContent:"center"},video:{width:"100%",height:200}})},46542:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(87841),l=i(n(24541)),s=n(2884),u=i(n(71606)),c=i(n(43184)),d=n(32207),f=n(46317),p=n(12638),h=n(60596),y=n(11671),m=n(21527),v=n(20880),g=n(35708),S=i(n(94196)),x=n(47671);t.default=function(e){var t=e.onClose,n=((0,s.useTranslation)().t,(0,m.useState)([])),i=(0,a.default)(n,2),j=i[0],w=i[1],b=(0,m.useState)(!1),D=(0,a.default)(b,2),T=D[0],P=D[1],C=(0,m.useState)({}),I=(0,a.default)(C,2),k=I[0],_=I[1],F=(0,p.useAppSelector)((function(e){return e.ticket})).dataListRecipientsSLA,O=(0,p.useAppSelector)((function(e){return e.common})).accessToken,M=(0,y.useTicketServices)();(0,m.useEffect)((function(){z()}),[]);var E,R=function(e){return"eID"===e?"Định danh cá nhân":"eContract"===e?"Ký kết điện tử":e||"User task"},z=(E=(0,r.default)((function*(){try{var e=F.map((function(e){return e.owner}));if(e){var t=yield M.getMultiLoginAccount(Array.from(new Set(e)),O);t&&w(t)}}catch(e){}})),function(){return E.apply(this,arguments)}),V=(0,m.useMemo)((function(){var e=j.find((function(e){return e.email===k.owner}));return[{key:"Người thực hiện",type:"avatar",value:{name:(null==e?void 0:e.firstName)+" "+(null==e?void 0:e.lastName)||"---",email:(null==e?void 0:e.email)||"---",avatarUrl:null==e?void 0:e.imageUrl}},{key:"Trạng thái giao dịch",type:"status",value:{status:null==k?void 0:k.status}},{key:"Ngày tiếp nhận",type:"normal",value:{name:g.DateUtils.convertDateToDDMMYYYY_H_M(null==k?void 0:k.startDate)}},{key:"Cam kết hoàn thành",type:"normal",value:{name:null==k?void 0:k.totalTime}},{key:"Hoàn thành dự kiến",type:"normal",value:{name:g.DateUtils.convertDateToDDMMYYYY_H_M(null==k?void 0:k.estimateDate)}},{key:"Hoàn thành thực tế",type:"normal",value:{name:g.DateUtils.convertDateToDDMMYYYY_H_M(null==k?void 0:k.finishDate)}}]}),[k]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:"Form hợp đồng sản xuất",contentStyle:{backgroundColor:"#fff"},onPressIconLeft:t}),(0,x.jsx)(o.FlatList,{style:{backgroundColor:"#F8FAFE"},keyExtractor:function(e){return""+e.id},data:F,renderItem:function(e){var t,n=e.item,i=e.index;return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(o.View,{style:u.default.ctnItem,children:[(0,x.jsxs)(o.View,{style:u.default.ctnIcon,children:[(0,x.jsx)(d.Icon,{fill:n.status!==h.Status.processing?"#39AC6D":"#FC6B03",name:n.status!==h.Status.processing?"checkmark-circle-2":"alert-triangle",width:24,height:24}),(0,x.jsx)(o.View,{style:[u.default.tabHoz,F.length-1===i&&{backgroundColor:"#F8FAFE"}]})]}),(0,x.jsxs)(o.View,{style:{flex:1},children:[(0,x.jsxs)(o.View,{style:[u.default.ctnBody,{borderColor:n.status!==h.Status.processing?"#fff":"#FC6B03"}],children:[(0,x.jsx)(l.default,{style:u.default.textNotion,children:R(n.notionName)}),(0,x.jsxs)(o.View,{style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,x.jsxs)(o.View,{style:u.default.ctnEmail,children:[(0,x.jsx)(d.Avatar,{size:"small",source:{uri:(null==j||null==(t=j.find((function(e){return e.email===n.owner})))?void 0:t.imageUrl)||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,x.jsx)(l.default,{style:u.default.textEmail,children:n.owner})]}),(0,x.jsx)(o.TouchableOpacity,{onPress:function(){_(n),P(!0)},style:[u.default.ctnIconClick,{backgroundColor:n.status!==h.Status.processing?"#E8F7EF":"#FFF3EB"}],children:n.status!==h.Status.processing?(0,x.jsx)(f.IconPersonTime,{width:15,height:15}):(0,x.jsx)(f.IconPersonTimeWait,{width:15,height:15})})]})]}),n.status===h.Status.processing&&(0,x.jsx)(l.default,{style:u.default.textNote,children:"*Lưu ý: Để tiến hành phê duyệt bạn cần thực hiện đẩy đủ các yêu cầu ở bước này"})]})]})})}}),(0,x.jsx)(d.Modal,{backdropStyle:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onBackdropPress:function(){return P(!1)},visible:T,style:{width:"90%"},children:(0,x.jsx)(d.Card,{style:{},header:(0,x.jsx)(l.default,{style:{fontSize:16,color:"#00204D",fontFamily:v.Font.InterSemiBold600},children:R(null==k?void 0:k.notionName)}),disabled:!0,children:(0,x.jsx)(S.default,{dataInfo:V})})})]})}},71606:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({tabHoz:{width:2,height:40,backgroundColor:"rgba(0, 53, 128, 0.15)"},ctnItem:{paddingHorizontal:16,paddingVertical:8,flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:16},ctnAction:{width:24,height:24,backgroundColor:"blue",borderRadius:12,justifyContent:"center",alignItems:"center"},ctnIcon:{alignItems:"center",justifyContent:"center",rowGap:8},ctnBody:{backgroundColor:"#fff",paddingHorizontal:12,paddingVertical:10,flex:1,borderRadius:8,rowGap:10,borderWidth:1},textNotion:{fontSize:13,fontFamily:r.Font.InterSemiBold600,color:"#00204D"},textNote:{fontSize:11,fontFamily:r.Font.InterRegular400,color:"#E14337",marginTop:3,fontStyle:"italic"},ctnIconClick:{width:24,height:24,borderRadius:12,alignItems:"center",justifyContent:"center"},textEmail:{fontSize:12,fontFamily:r.Font.InterRegular400,color:"#00204DF2"},ctnEmail:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:4}})},72060:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.listNoti=void 0;t.listNoti=[{label:"QR Code",value:"qr"},{label:"Email",value:"email"},{label:"SMS",value:"sms"}]},166:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(43693)),o=i(n(85715)),l=n(7005),s=i(n(43184)),u=n(32207),c=n(46317),d=n(87841),f=i(n(24541)),p=i(n(12398)),h=i(n(94516)),y=n(2884),m=n(21527),v=i(n(54813)),g=n(26878),S=i(n(65963)),x=n(72060),j=i(n(94196)),w=i(n(27747)),b=n(2543),D=i(n(76644)),T=i(n(46542)),P=n(12638),C=n(35708),I=n(40851),k=n(14740),_=n(20880),F=i(n(77389)),O=i(n(194)),M=n(88e3),E=n(60596),R=n(97427),z=i(n(33542)),V=i(n(23392)),B=n(47671),A=function(e){return e.name="name",e.phone="phone",e.email="email",e.notiType="notiType",e}(A||{});t.default=function(){var e,t,n=(0,y.useTranslation)().t,i=(0,k.useRoute)(),L=(0,P.useAppDispatch)(),N=null!=(e=null==i||null==(t=i.params)?void 0:t.dataUserTask)?e:{},U=(0,k.useNavigation)(),W=(0,m.useState)(!1),H=(0,o.default)(W,2),G=H[0],$=H[1],Y=(0,m.useState)(!0),K=(0,o.default)(Y,2),q=K[0],J=K[1],X=(0,m.useState)([new u.IndexPath(0)]),Q=(0,o.default)(X,2),Z=Q[0],ee=Q[1],te=(0,m.useState)({}),ne=(0,o.default)(te,2),ie=ne[0],re=ne[1],ae=(0,m.useState)({}),oe=(0,o.default)(ae,2),le=oe[0],se=oe[1],ue=(0,m.useState)(!1),ce=(0,o.default)(ue,2),de=ce[0],fe=ce[1],pe=(0,m.useState)(""),he=(0,o.default)(pe,2),ye=he[0],me=he[1],ve=(0,m.useState)(""),ge=(0,o.default)(ve,2),Se=ge[0],xe=ge[1],je=(0,m.useState)(!1),we=(0,o.default)(je,2),be=we[0],De=we[1],Te=(0,m.useState)(!0),Pe=(0,o.default)(Te,2),Ce=Pe[0],Ie=Pe[1],ke=(0,m.useState)(""),_e=(0,o.default)(ke,2),Fe=_e[0],Oe=_e[1],Me=(0,P.useAppSelector)((function(e){return e.ticket})),Ee=Me.dataTicketRedux,Re=Me.recipientDetaiImpl,ze=Me.formData,Ve=Me.modeler,Be=(0,m.useState)(null==Re?void 0:Re.find((function(e){return e.userTaskId===(null==N?void 0:N._userTaskId)}))),Ae=(0,o.default)(Be,1)[0],Le=(0,P.useAppSelector)((function(e){return e.account})).dataAccount,Ne=(0,P.useAppSelector)((function(e){return e.common})).accessToken,Ue=(0,I.useReviewServices)(),We=(0,m.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:Le.firstName+" "+Le.lastName||"---",email:Ee.createdBy||"---",avatarUrl:null==Le?void 0:Le.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==Ee?void 0:Ee.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==Ee?void 0:Ee.jsonXml)&&JSON.parse(null==Ee?void 0:Ee.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:C.DateUtils.convertDateToDDMMYYYY_H_M(null==Ee?void 0:Ee.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==ze?void 0:ze.formName,funcViewFrom:function(){U.navigate(_.NavigationName.ViewFormScreen,{isOnlyView:!0,readOnly:!0,versionId:null==Ve?void 0:Ve.formVersion,viewFromDoc:!0})}}},{key:"RV.status",type:"status",value:{status:(null==Ae?void 0:Ae.recipientStatus)||E.Status.processing}}]}),[Ee,ze,Ve]);(0,m.useEffect)((function(){var e=ie;0===Z.length?e[`${A.notiType}`]="CM.empty":delete e[`${A.notiType}`],re((function(t){return Object.assign({},t,e)}))}),[Z]);var He,Ge=function(e,t){null!=t&&t.trim()?e!==A.email||C.RegexUtils.FORMAT_EMAIL.test(t)?e!==A.phone||C.RegexUtils.REGEX_PHONE_NUMBER_9.test(t)?re((function(t){var n=Object.assign({},t);return delete n[e],n})):re((function(t){return Object.assign({},t,(0,a.default)({},e,"CM.validPhone"))})):re((function(t){return Object.assign({},t,(0,a.default)({},e,"CM.validEmail"))})):re((function(t){return Object.assign({},t,(0,a.default)({},e,"CM.empty"))})),se((function(n){var i,r,o,l=Object.assign({},n,(0,a.default)({},e,t));return(0,b.isEmpty)(ie)&&null!=(i=l[A.email])&&i.trim()&&null!=(r=l[A.phone])&&r.trim()&&null!=(o=l[A.name])&&o.trim()?fe(!0):fe(!1),l}))},$e=(He=(0,r.default)((function*(e){try{if("reject"===e){if(!ye)return Ie(!0),void xe("CM.empty");xe("");var t=Object.assign({},null==Ae?void 0:Ae.recipient,{reason:ye});(yield Ue.actionTicket(null==Ae?void 0:Ae.id,null==Ae?void 0:Ae.ticketId,null==Ae?void 0:Ae.userTaskId,t,Ne,"reject"))?(F.default.show({type:"success",text1:n("CM.noti"),text2:n("CM.rejectSucesss")}),L(R.ticketActions.setDataTicket(Object.assign({},Ee,{ticketStatus:E.Status.rejected}))),U.goBack()):F.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.rejectFailed")})}else{var i={name:null==Ve?void 0:Ve.mailTemplate},r=Z.map((function(e){return x.listNoti[e.row].value})).join(","),a={ticketId:Ee.id,userTaskId:null==N?void 0:N._userTaskId,recipientDetailsId:null==N?void 0:N._recipientDetailsId,fullName:le[A.name],phoneNumber:le[A.phone],email:le[A.email],notifyType:r},o=yield Ue.createPersonalEkyc({personalName:le[A.name],telephoneNumber:le[A.phone],email:le[A.email],messageType:r,resourceType:"internal",recipientDetailId:null==N?void 0:N._recipientDetailsId,identifierType:"2",ticketId:Ee.id,userTaskId:null==N?void 0:N._userTaskId,usesContent:{},syncToPartner:"0",versionId:null==Ve?void 0:Ve.formVersion,formId:null==ze?void 0:ze.formId},i);o&&((yield Ue.createInformationOCR(a))?(F.default.show({type:"success",text1:n("CM.noti"),text2:n("RV.eid.submitSuccess")}),Oe(o.urlSuffix)):F.default.show({type:"error",text1:n("CM.noti"),text2:n("RV.eid.submitError")}))}}catch(t){"reject"===e?F.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.rejectFailed")}):F.default.show({type:"error",text1:n("CM.noti"),text2:n("RV.eid.submitError")})}})),function(e){return He.apply(this,arguments)}),Ye=function(){return null!==(null==Ae?void 0:Ae.recipientStatus)&&(null==Ae?void 0:Ae.recipientStatus)!==E.Status.processing},Ke=function(){return(null==Ae?void 0:Ae.recipientStatus)===E.Status.completed||(null==Ae?void 0:Ae.recipientStatus)===E.Status.accepted};return(0,B.jsxs)(l.SafeAreaView,{style:{flex:1,backgroundColor:"#fff"},edges:["bottom"],children:[(0,B.jsx)(s.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:n("RV.eid.idPerson"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,B.jsx)(u.TopNavigationAction,{onPress:function(){return De(!0)},icon:(0,B.jsx)(c.IconWorkflow,{width:20,height:20})})}}),(0,B.jsxs)(g.KeyboardAwareScrollView,{children:[(0,B.jsx)(d.View,{style:p.default.ctnBody,children:(0,B.jsxs)(d.View,{style:p.default.ctnSubBody,children:[(0,B.jsxs)(d.Pressable,{style:p.default.ctnHeader,onPress:function(){return $(!G)},children:[(0,B.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:G?"arrow-circle-down":"arrow-circle-right"}),(0,B.jsx)(f.default,{style:p.default.textTitle,children:n("CM.infoCommon")})]}),G&&(0,B.jsx)(d.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,B.jsx)(j.default,{dataInfo:We})})]})}),(0,B.jsx)(d.View,{style:p.default.ctnBody,children:(0,B.jsxs)(d.View,{style:[p.default.ctnSubBody,Ye()&&{marginBottom:16}],children:[(0,B.jsxs)(d.Pressable,{style:[p.default.ctnHeader],onPress:function(){return J(!q)},children:[(0,B.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:q?"arrow-circle-down":"arrow-circle-right"}),(0,B.jsxs)(f.default,{style:p.default.textTitle,children:[n("RV.eid.infoPerson")," ",(0,B.jsx)(f.default,{style:p.default.redDot,children:"*"})]})]}),q&&(0,B.jsxs)(d.View,{style:p.default.ctnInput,children:[!Ye()&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(v.default,{isRequired:!0,label:n("RV.eid.name"),placeholder:n("RV.eid.fillName"),value:le[`${A.name}`],onChangeText:function(e){return Ge(A.name,e)},captionText:n(ie[`${A.name}`]),status:ie[`${A.name}`]?"danger":"basic",type:A.name}),(0,B.jsx)(v.default,{isRequired:!0,label:n("RV.eid.phone"),placeholder:n("RV.eid.fillPhone"),value:le[`${A.phone}`],onChangeText:function(e){return Ge(A.phone,e)},captionText:n(ie[A.phone]),status:ie[`${A.phone}`]?"danger":"basic",type:A.phone,keyBoardType:"numeric"}),(0,B.jsx)(v.default,{isRequired:!0,label:"Email",placeholder:n("RV.eid.fillEmail"),value:le[`${A.email}`],onChangeText:function(e){return Ge(A.email,e)},captionText:n(ie[`${A.email}`]),status:ie[`${A.email}`]?"danger":"basic",type:A.email}),(0,B.jsx)(S.default,{onSelect:ee,valueSelect:Z,placeholder:n("RV.eid.fill-notify-type"),label:n("RV.eid.notify-type"),isRequired:!0,size:"medium",listData:x.listNoti,multiple:!0,caption:n(ie[`${A.notiType}`]),status:ie[`${A.notiType}`]?"danger":"primary"}),Fe&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(f.default,{style:p.default.title,children:n("RV.eid.qr")}),(0,B.jsx)(d.View,{style:p.default.ctnQr,children:(0,B.jsx)(O.default,{onError:function(e){return console.log(e)},value:M.BASE_URL_EKYC+Fe})})]})]}),Ke()&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(u.Divider,{style:{height:3}}),(0,B.jsx)(z.default,{ticketId:Ee.id,userTaskId:null==Ae?void 0:Ae.userTaskId,versionForm:null==Ae?void 0:Ae.versionFormId})]})]})]})}),Ke()&&(0,B.jsx)(V.default,{ticketId:Ee.id,userTaskId:null==Ae?void 0:Ae.userTaskId}),!Ye()&&(0,B.jsx)(d.View,{style:p.default.ctnBody,children:(0,B.jsxs)(d.View,{style:[p.default.ctnSubBody,{marginBottom:16}],children:[(0,B.jsxs)(d.Pressable,{style:p.default.ctnHeader,onPress:function(){return Ie(!Ce)},children:[(0,B.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:Ce?"arrow-circle-down":"arrow-circle-right"}),(0,B.jsx)(f.default,{style:p.default.textTitle,children:n("CM.note")})]}),Ce&&(0,B.jsx)(d.View,{style:{paddingHorizontal:10,paddingBottom:10,rowGap:4},children:(0,B.jsx)(w.default,{isRequired:!0,label:n("CM.fillNote"),value:ye,onChangeText:function(e){me(e),xe("")},multiline:!0,maxLength:400,errorMessage:n(Se)})})]})})]}),(0,B.jsx)(d.View,{style:p.default.ctnFooter,children:!Ye()&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(d.TouchableOpacity,{onPress:function(){return $e("reject")},children:(0,B.jsx)(c.IconRejectReview,{width:36,height:36})}),(0,B.jsx)(h.default,{disabled:!(0,b.isEmpty)(ie)||!de,style:{flex:1},label:n("CM.confirm"),onPress:function(){return $e("finish")}})]})}),(0,B.jsx)(D.default,{isVisible:be,children:(0,B.jsx)(T.default,{onClose:function(){return De(!1)}})})]})}},12398:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:r.Font.InterMedium500},redDot:{color:"#E14337"},ctnFooter:{flexDirection:"row",paddingHorizontal:16,columnGap:16,marginTop:8},ctnInput:{gap:10,padding:10},title:{fontSize:12,fontFamily:r.Font.InterMedium500,color:"#00204DF2"},ctnQr:{alignItems:"center",justifyContent:"center"}})},92552:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(7005),l=i(n(43184)),s=n(87841),u=i(n(94516)),c=n(46317),d=i(n(89052)),f=i(n(59902)),p=n(21527),h=i(n(69290)),y=i(n(88610)),m=n(41995),v=n(14740),g=n(12638),S=n(19867),x=i(n(80671)),j=n(2884),w=n(40851),b=n(32207),D=i(n(76644)),T=i(n(46542)),P=n(47671);t.default=function(){var e,t,n=(0,v.useRoute)(),i=(0,j.useTranslation)().t,C=(0,v.useNavigation)(),I=null!=(e=null==n||null==(t=n.params)?void 0:t.dataUserTask)?e:{},k=(0,p.useState)(!1),_=(0,a.default)(k,2),F=_[0],O=_[1],M=(0,p.useState)(!1),E=(0,a.default)(M,2),R=E[0],z=E[1],V=(0,p.useState)(),B=(0,a.default)(V,2),A=B[0],L=B[1],N=(0,p.useState)(),U=(0,a.default)(N,2),W=U[0],H=U[1],G=(0,p.useState)(!1),$=(0,a.default)(G,2),Y=$[0],K=$[1],q=(0,g.useAppSelector)((function(e){return e.common})).accessToken,J=(0,g.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,X=(0,w.useReviewServices)();(0,p.useEffect)((function(){ne(),te()}),[]);var Q,Z,ee,te=(Q=(0,r.default)((function*(){try{var e=yield X.getRecipientDetaiImpl(J.id,q);H(e.find((function(e){return e.userTaskId===I._userTaskId})))}catch(e){}})),function(){return Q.apply(this,arguments)}),ne=(Z=(0,r.default)((function*(){try{var e,t=yield X.getFromByUserTaskId(I._userTaskId,q);L(null!=(e=null==t?void 0:t.data)?e:{})}catch(e){}})),function(){return Z.apply(this,arguments)}),ie=(ee=(0,r.default)((function*(e){var t={userTaskId:I._userTaskId,ticketId:J.id,version:e},n=yield X.getFormVersionByTicketAndUserTaskId(t,q);null==A||!A.versionId||n?O(!0):C.navigate(x.default.ViewFormScreen,{versionId:A.versionId,readOnly:I._status===S.STATUS_TASK.TASK_SUCCESS,isShowNoti:!0,data:{_userTaskId:I._userTaskId,_ticketId:J.id,formId:A.formId}})})),function(e){return ee.apply(this,arguments)});return(0,P.jsxs)(o.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,P.jsx)(l.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:i("RV.infoDoc"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,P.jsx)(b.TopNavigationAction,{onPress:function(){return K(!0)},icon:(0,P.jsx)(c.IconWorkflow,{width:20,height:20})})}}),(0,P.jsx)(b.Divider,{}),(0,P.jsx)(s.View,{style:d.default.ctnBody,children:A&&W&&(0,P.jsx)(f.default,{dataFormByUsertaskId:A,dataRecipientImpl:W,dataUserTask:I})}),(0,P.jsx)(s.View,{style:d.default.ctnFooter,children:I._status===S.STATUS_TASK.TASK_SEARCH&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(s.TouchableOpacity,{onPress:function(){return z(!0)},children:(0,P.jsx)(c.IconRejectReview,{width:(0,m.SizeDP)(36),height:(0,m.SizeDP)(36)})}),(0,P.jsx)(u.default,{style:{flex:1},label:i("CM.confirm"),onPress:function(){return ie(null)}})]})}),W&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(h.default,{title:i("CM.confirm"),isVisible:F,onClose:function(){return O(!1)},withKeyboardAvoidingView:!0,renderContent:(0,P.jsx)(y.default,{dataRecipientImpl:W,onClose:function(){return O(!1)}})}),(0,P.jsx)(h.default,{title:i("RV.reject"),isVisible:R,onClose:function(){return z(!1)},withKeyboardAvoidingView:!0,renderContent:(0,P.jsx)(y.default,{dataRecipientImpl:W,onClose:function(){return z(!1)},type:"reject"})})]}),(0,P.jsx)(D.default,{isVisible:Y,children:(0,P.jsx)(T.default,{onClose:function(){return K(!1)}})})]})}},19867:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_TASK=t.ACTION_TYPES=void 0;t.ACTION_TYPES=function(e){return e.SHOW_EXECUTOR_USER="SHOW_EXECUTOR_USER",e.SHOW_EID_INFO="SHOW_EID_INFO",e.SHOW_ELMS_INFO="SHOW_ELMS_INFO",e.SHOW_ECONTRACT_INFO="SHOW_ECONTRACT_INFO",e.CREATE_ECONTRACT_ENV="CREATE_ECONTRACT_ENV",e.SHOW_USERTASK_INFO="SHOW_USERTASK_INFO",e.SHOW_COLLABO_INFO="SHOW_COLLABO_INFO",e}({}),t.STATUS_TASK=function(e){return e.TASK_SEARCH="task-search",e.TASK_SUCCESS="task-success",e.TASK_REJECTED="task-reject",e}({})},88610:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(87841),l=i(n(94516)),s=i(n(31706)),u=i(n(27747)),c=n(7005),d=n(41995),f=n(21527),p=n(2543),h=n(12638),y=i(n(77389)),m=n(14740),v=n(2884),g=n(40851),S=n(47671);t.default=function(e){var t,n=e.type,i=void 0===n?"submit":n,x=e.onClose,j=e.dataRecipientImpl,w=((0,h.useAppDispatch)(),(0,v.useTranslation)().t),b=(0,m.useNavigation)(),D=(0,f.useState)(""),T=(0,a.default)(D,2),P=T[0],C=T[1],I=(0,f.useState)(""),k=(0,a.default)(I,2),_=k[0],F=k[1],O=(0,f.useState)(""),M=(0,a.default)(O,2),E=M[0],R=M[1],z=(0,h.useAppSelector)((function(e){return e.common})).accessToken,V=(0,g.useReviewServices)(),B=(t=(0,r.default)((function*(){try{if("reject"===i){var e=Object.assign({},j.recipient,{reason:_});(yield V.actionTicket(j.id,j.ticketId,j.userTaskId,e,z,"reject"))?y.default.show({type:"success",text1:w("CM.noti"),text2:"Từ chối yêu cầu thành công"}):y.default.show({type:"error",text1:w("CM.noti"),text2:"Từ chối yêu cầu thất bại"})}else{var t=Object.assign({},j.recipient,{reason:E,risk:E});(yield V.actionTicket(j.id,j.ticketId,j.userTaskId,t,z,"finish"))?(y.default.show({type:"success",text1:w("CM.noti"),text2:"Xét duyệt thành công"}),x(),b.goBack()):y.default.show({type:"error",text1:w("CM.noti"),text2:"Xét duyệt thất bại"})}}catch(e){console.log(e),"reject"===i?y.default.show({type:"error",text1:w("CM.noti"),text2:"Từ chối yêu cầu thất bại"}):y.default.show({type:"error",text1:w("CM.noti"),text2:"Xét duyệt thất bại"})}})),function(){return t.apply(this,arguments)});return(0,f.useEffect)((function(){(0,p.isEmpty)(_)?C("Yêu cầu nhập lý do từ chối"):C("")}),[_]),(0,S.jsxs)(c.SafeAreaView,{edges:["bottom"],children:["reject"===i&&(0,S.jsx)(u.default,{isRequired:!0,multiline:!0,isFloatingLabel:!0,label:"Nhập lý do từ chối",maxLength:400,errorMessage:P,value:_,onChangeText:F}),"submit"===i&&(0,S.jsx)(o.View,{style:{rowGap:(0,d.SizeDP)(10)},children:(0,S.jsx)(u.default,{value:E,onChangeText:R,multiline:!0,label:"Nhập ghi chú",maxLength:400})}),(0,S.jsxs)(o.View,{style:s.default.ctnFooter,children:[(0,S.jsx)(l.default,{styleLabel:s.default.labelBack,style:s.default.btnBack,label:"Quay lại",onPress:x}),(0,S.jsx)(l.default,{style:[s.default.btnNext,"reject"===i&&s.default.btnReject],label:"Xác nhận",onPress:B})]})]})}},31706:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995);t.default=i.StyleSheet.create({ctnFooter:{flexDirection:"row",paddingHorizontal:(0,r.SizeDP)(16),columnGap:(0,r.SizeDP)(16),marginTop:(0,r.SizeDP)(16)},btnBack:{flex:1,backgroundColor:"#F2F5F8"},labelBack:{color:"#00204DB2"},btnNext:{flex:1},btnReject:{flex:1,backgroundColor:"#E14337"}})},89052:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995);t.default=i.StyleSheet.create({ctnFooter:{flexDirection:"row",paddingHorizontal:(0,r.SizeDP)(16),columnGap:(0,r.SizeDP)(16),marginTop:(0,r.SizeDP)(8)},ctnBody:{flex:1,backgroundColor:"#F8FAFE"}})},83880:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=x(n(21527)),l=n(87841),s=x(n(41995)),u=i(n(24541)),c=i(n(66332)),d=n(12638),f=n(19867),p=n(2884),h=n(14740),y=n(20880),m=n(11671),v=n(40851),g=n(47671);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}t.default=function(e){var t,n,i,S,x,j,w=e.dataUserTask,b=e.dataFormByUsertaskId,D=e.dataRecipientImpl,T=(0,p.useTranslation)().t,P=(0,h.useNavigation)(),C=(0,d.useAppSelector)((function(e){return e.common})).accessToken,I=(0,d.useAppSelector)((function(e){return e.account})).dataAccount,k=(0,d.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,_=(0,o.useState)(),F=(0,a.default)(_,2),O=F[0],M=F[1],E=(0,o.useState)(),R=(0,a.default)(E,2),z=R[0],V=R[1],B=(0,o.useState)(),A=(0,a.default)(B,2),L=A[0],N=A[1],U=(0,o.useState)(),W=(0,a.default)(U,2),H=W[0],G=W[1],$=(0,o.useState)(),Y=(0,a.default)($,2),K=Y[0],q=Y[1],J=(0,o.useState)([]),X=(0,a.default)(J,2),Q=X[0],Z=X[1],ee=(0,m.useTicketServices)(),te=(0,v.useReviewServices)();(0,o.useEffect)((function(){Promise.all([ce(),se(),ue(),de(),le()])}),[]);var ne,ie,re,ae,oe,le=(ne=(0,r.default)((function*(){var e=yield te.getListTaskByTicketIdAndUsertaskId(k.id,w._userTaskId);e&&Z(e)})),function(){return ne.apply(this,arguments)}),se=(ie=(0,r.default)((function*(){try{var e=yield te.getStatusParty(null==k?void 0:k.id,C);M(e)}catch(e){}})),function(){return ie.apply(this,arguments)}),ue=(re=(0,r.default)((function*(){try{var e=yield ee.getModeler(k.modelerId,C);q(e)}catch(e){}})),function(){return re.apply(this,arguments)}),ce=(ae=(0,r.default)((function*(){try{var e={versionId:null==b?void 0:b.versionId},t=yield te.getFormERequest(e,C);V(t)}catch(e){}})),function(){return ae.apply(this,arguments)}),de=(oe=(0,r.default)((function*(){try{var e={modelerId:k.modelerId,attachedUserTaskId:w._userTaskId},t=yield te.getFormDataByUserTaskId(e,C);if(t){var n;G(null==t?void 0:t.data);var i={versionId:null==t||null==(n=t.data)?void 0:n.versionId},r=yield te.getFormERequest(i,C);N(r)}}catch(e){}})),function(){return oe.apply(this,arguments)}),fe=function(e){(z||e)&&(!L&&e||P.navigate(y.NavigationName.ViewFormScreen,{versionId:e?null==H?void 0:H.versionId:b.versionId,readOnly:w._status!==f.STATUS_TASK.TASK_SEARCH,data:{_userTaskId:w._userTaskId,_ticketId:k.id,formId:e?null==H?void 0:H.formId:b.formId},isOnlyView:e}))};return(0,g.jsx)(l.View,{style:c.default.ctnMain,children:(0,g.jsxs)(l.ScrollView,{style:c.default.ctnBody,children:[(0,g.jsxs)(l.View,{style:c.default.ctnWrapperItem,children:[(0,g.jsxs)(u.default,{style:c.default.txtTitle,children:[T("RV.nameJob"),":"]}),(0,g.jsx)(u.default,{style:c.default.txtValue,children:null!=(t=null==O?void 0:O.ticketName)?t:"---"})]}),(0,g.jsxs)(l.View,{style:c.default.ctnWrapperItem,children:[(0,g.jsxs)(u.default,{style:c.default.txtTitle,children:[T("RV.nameService"),":"]}),(0,g.jsx)(u.default,{style:c.default.txtValue,children:null!=(n=null==K?void 0:K.name)?n:"---"})]}),z&&(0,g.jsxs)(l.View,{style:c.default.ctnWrapperItem,children:[(0,g.jsxs)(u.default,{style:c.default.txtTitle,children:[T("RV.form"),":"]}),(0,g.jsx)(l.TouchableOpacity,{style:{flex:1},onPress:function(){return fe(!1)},children:z?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.default,{style:[c.default.txtValue,c.default.formName],children:null!=(i=null==z?void 0:z.formName)?i:"---"}),(0,g.jsx)(u.default,{style:{fontSize:s.default.FontTinier,fontStyle:"italic"},children:T("RV.viewDetail")})]}):(0,g.jsx)(u.default,{style:c.default.txtValue,children:"---"})})]}),L&&(0,g.jsxs)(l.View,{style:c.default.ctnWrapperItem,children:[(0,g.jsxs)(u.default,{style:c.default.txtTitle,children:[T("RV.formView"),":"]}),(0,g.jsx)(l.TouchableOpacity,{style:{flex:1},onPress:function(){return fe(!0)},children:L?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.default,{style:[c.default.txtValue,c.default.formName],children:null!=(S=null==L?void 0:L.formName)?S:"---"}),(0,g.jsx)(u.default,{style:{fontSize:s.default.FontTinier,fontStyle:"italic"},children:T("RV.fromViewDetail")})]}):(0,g.jsx)(u.default,{style:c.default.txtValue,children:"---"})})]}),(0,g.jsxs)(l.View,{style:c.default.ctnWrapperItem,children:[(0,g.jsxs)(u.default,{style:c.default.txtTitle,children:[T("RV.userAction"),":"]}),(0,g.jsxs)(l.View,{style:c.default.ctnView,children:[(0,g.jsx)(l.Image,{width:(0,s.SizeDP)(24),height:(0,s.SizeDP)(24),borderRadius:(0,s.SizeDP)(12),source:{uri:null!=I&&I.imageUrl?null==I?void 0:I.imageUrl:"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,g.jsxs)(l.View,{style:{flex:1},children:[(0,g.jsx)(u.default,{style:c.default.txtValue,children:(null==I?void 0:I.firstName)+" "+(null==I?void 0:I.lastName)||"---"}),(0,g.jsx)(u.default,{style:c.default.txtValue,children:null!=(x=null==I?void 0:I.email)?x:"---"})]})]})]}),Q.length>0&&(0,g.jsxs)(l.View,{style:c.default.ctnWrapperItem,children:[(0,g.jsxs)(u.default,{style:c.default.txtTitle,children:[T("RV.jobNeedAction"),":"]}),(0,g.jsx)(u.default,{style:c.default.txtValue,children:"---"})]}),w._status===f.STATUS_TASK.TASK_REJECTED&&(0,g.jsxs)(l.View,{style:c.default.ctnWrapperItem,children:[(0,g.jsxs)(u.default,{style:c.default.txtTitle,children:[T("RV.reason"),":"]}),(0,g.jsx)(u.default,{style:c.default.txtValue,children:(null==D||null==(j=D.recipient)?void 0:j.reason)||"---"})]}),w._status===f.STATUS_TASK.TASK_SUCCESS&&(0,g.jsxs)(l.View,{style:c.default.ctnWrapperItem,children:[(0,g.jsxs)(u.default,{style:c.default.txtTitle,children:[T("RV.submit"),":"]}),(0,g.jsx)(u.default,{style:c.default.txtValue,children:(null==w?void 0:w.reason)||"---"})]}),(0,g.jsxs)(l.View,{style:[c.default.ctnWrapperItem,{justifyContent:"flex-start",columnGap:0}],children:[(0,g.jsxs)(u.default,{style:c.default.txtTitle,children:[T("TK.status"),":"]}),(0,g.jsx)(l.View,{style:c.default.ctnStatus,children:(0,g.jsx)(u.default,{style:[c.default.txtValue,{color:"#EF5DA8"}],children:T(`TK.${null==w?void 0:w._status}`)})})]})]})})}},66332:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{padding:(0,r.SizeDP)(16),backgroundColor:"#F8FAFE",flex:1},ctnBody:{backgroundColor:"#fff",flex:1,padding:(0,r.SizeDP)(16)},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,r.SizeDP)(16),marginBottom:(0,r.SizeDP)(24)},txtTitle:{fontFamily:a.Font.InterSemiBold600,fontSize:r.default.FontTiny,color:a.Color.colorText,flex:.5},txtValue:{fontFamily:a.Font.InterRegular400,fontSize:r.default.FontTiny,color:"#00204DE5",flex:1},ctnView:{flexDirection:"row",columnGap:(0,r.SizeDP)(6),alignItems:"center",justifyContent:"flex-start",flex:1},ctnStatus:{paddingHorizontal:(0,r.SizeDP)(8),paddingVertical:(0,r.SizeDP)(4),borderRadius:(0,r.SizeDP)(4),backgroundColor:"#EF5DA81A"},formName:{color:"#4583FF",fontWeight:"bold",textDecorationLine:"underline",fontSize:r.default.FontSmall}})},93183:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),l=n(87841),s=i(n(14507)),u=n(12638),c=n(19867),d=i(n(75672)),f=n(41995),p=i(n(24541)),h=n(46317),y=i(n(81924)),m=n(14740),v=n(35708),g=i(n(77389)),S=i(n(80671)),x=n(2884),j=n(40851),w=n(47671);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}t.default=function(e){var t=e.dataUserTask,n=(0,x.useTranslation)().t,i=(0,m.useNavigation)(),b=(0,o.useState)(1),D=(0,a.default)(b,2),T=D[0],P=D[1],C=(0,o.useState)(0),I=(0,a.default)(C,2),k=I[0],_=I[1],F=(0,o.useState)([]),O=(0,a.default)(F,2),M=O[0],E=O[1],R=(0,u.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,z=(0,u.useAppSelector)((function(e){return e.common})).accessToken,V=(0,j.useReviewServices)();(0,o.useEffect)((function(){W(T)}),[T]);var B,A,L,N,U,W=(B=(0,r.default)((function*(e){try{var n={page:e-1,size:3,sort:"createdDate,desc"},i=yield V.getListAttachmentsUserTask(R.id,t._userTaskId,n,z);if(i){var r;if(0===(null==i||null==(r=i.data)?void 0:r.length))return void(e>1?P(e-1):(E([]),_(0)));_(null==i?void 0:i.totalRecords),Y(null==i?void 0:i.data)}}catch(e){}})),function(e){return B.apply(this,arguments)}),H=(A=(0,r.default)((function*(){try{yield V.getListFileReview(R.id,t._userTaskId,z)}catch(e){}})),function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0;return(0,w.jsxs)(l.View,{style:s.default.ctnAction,children:[(0,w.jsx)(l.TouchableOpacity,{onPress:function(){return G(e,n)},hitSlop:(0,f.SizeDP)(15),children:(0,w.jsx)(h.IconView,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})}),(0,w.jsx)(l.TouchableOpacity,{hitSlop:(0,f.SizeDP)(15),children:(0,w.jsx)(h.IconDownload,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})}),!e&&t._status===c.STATUS_TASK.TASK_SEARCH&&(0,w.jsx)(l.TouchableOpacity,{onPress:function(){var e;return $(null==n||null==(e=n.id)?void 0:e.toString())},hitSlop:(0,f.SizeDP)(15),children:(0,w.jsx)(h.IconTrash,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})})]})}),G=(L=(0,r.default)((function*(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;try{g.default.show({type:"info",text1:n("CM.info"),text2:n("TK.viewFile")});var r=new FormData,a=t.name;a=e?t.keyName:t.name;var o=t.bucketName;if(!t.bucketName){var l,s=null==t||null==(l=t.name)?void 0:l.split(".s3-hfx03.fptcloud.com:443/");a=s[1],o=s[0].split("https://")[1]}r.append("keyName",a),r.append("bucketName",o);var u=yield V.viewFile(r,z);1==(null==u?void 0:u.code)?i.navigate(S.default.ViewFileScreen,{url:u.message}):g.default.show({type:"error",text1:n("CM.info"),text2:n("CM.error")})}catch(e){g.default.show({type:"error",text1:n("CM.info"),text2:n("CM.error")})}})),function(){return L.apply(this,arguments)}),$=(N=(0,r.default)((function*(e){try{yield V.deleteFileRelative(e,z),yield W(T),g.default.show({type:"success",text1:n("CM.info"),text2:n("TK.deleteFileSuccess")})}catch(e){console.log(e),g.default.show({type:"error",text1:n("CM.info"),text2:n("TK.deleteFileErr")})}})),function(e){return N.apply(this,arguments)}),Y=function(e){var t=e.map((function(e,t){var n,i;return{STT:String(3*(T-1)+1+t),keyName:(0,w.jsx)(p.default,{style:s.default.txtText,numberOfLines:1,children:null==e?void 0:e.fileName}),createdBy:e.createdBy,documentSize:v.CommonUtils.getSize(e.size),type:null==e||null==(n=e.fileName)||null==(i=n.split("."))?void 0:i.pop(),lastModifiedDate:v.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate),action:H(!1,e)}}));E(t)},K=(U=(0,r.default)((function*(){try{var e=yield v.CommonUtils.handleGetFile();if(!e)return;var i=new FormData;i.append("uploadFile",e),i.append("attachmentJson",JSON.stringify({ticketId:null==R?void 0:R.id,userTaskId:t._userTaskId})),(yield V.uploadFileRelative(i,z))?(yield W(T),g.default.show({type:"success",text1:n("CM.info"),text2:n("TK.uploadFileSuccess")})):g.default.show({type:"error",text1:n("CM.info"),text2:n("TK.uploadFileErr")})}catch(e){console.log(e),g.default.show({type:"error",text1:n("CM.info"),text2:n("TK.uploadFileErr")})}})),function(){return U.apply(this,arguments)});return(0,w.jsx)(l.View,{style:s.default.ctnMain,children:(0,w.jsxs)(l.ScrollView,{style:s.default.ctnBody,children:[(0,w.jsxs)(l.View,{style:s.default.ctnForm,children:[(0,w.jsxs)(l.View,{style:s.default.viewForm,children:[(0,w.jsx)(p.default,{style:s.default.txtTitle,children:n("RV.document")}),t._status===c.STATUS_TASK.TASK_SEARCH&&(0,w.jsx)(l.TouchableOpacity,{onPress:K,hitSlop:(0,f.SizeDP)(15),children:(0,w.jsx)(h.IconUpload,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})})]}),(0,w.jsx)(d.default,{stickyLeft:!0,stickyColumnLeftIndex:1,tableHeaders:["STT","keyName","createdBy","documentSize","type","lastModifiedDate","action"],tableData:M}),k>0&&(0,w.jsx)(y.default,{collectionSize:k,currentPage:T,pageSize:3,onPageChange:function(e){return P(e)}})]}),(0,w.jsxs)(l.View,{style:s.default.ctnForm,children:[(0,w.jsx)(p.default,{style:s.default.txtTitle,children:n("TK.templateInfo")}),(0,w.jsx)(d.default,{stickyLeft:!0,stickyColumnLeftIndex:1,tableHeaders:["STT","keyName","createdBy","documentSize","type","lastModifiedDate","action"],tableData:[]})]})]})})}},14507:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{padding:(0,r.SizeDP)(16),backgroundColor:"#F8FAFE",flex:1},ctnBody:{backgroundColor:"#fff",flex:1,padding:(0,r.SizeDP)(16)},txtTitle:{fontSize:r.default.FontBase,fontFamily:a.Font.InterSemiBold600,color:a.Color.colorText},ctnForm:{rowGap:(0,r.SizeDP)(15),marginBottom:(0,r.SizeDP)(20)},ctnAction:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,r.SizeDP)(10)},txtText:{fontSize:r.default.FontTiny,fontFamily:a.Font.InterRegular400,color:"#00204DCC"},viewForm:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginRight:(0,r.SizeDP)(12)}})},59902:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=n(21527),o=n(87841),l=i(n(24541)),s=i(n(13446)),u=i(n(83880)),c=i(n(93183)),d=n(2884),f=n(47671);t.default=function(e){var t=e.dataUserTask,n=e.dataFormByUsertaskId,i=e.dataRecipientImpl,p=(0,d.useTranslation)().t,h=(0,a.useState)({key:"background",title:"Thông tin chung"}),y=(0,r.default)(h,2),m=y[0],v=y[1],g=(0,a.useState)([{key:"background",title:"Thông tin chung"},{key:"document",title:"Tài liệu đính kèm"}]),S=(0,r.default)(g,1)[0];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.View,{children:(0,f.jsx)(o.FlatList,{horizontal:!0,scrollEnabled:!1,data:S,keyExtractor:function(e,t){return String(e.key)},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,contentContainerStyle:s.default.ctnTabView,renderItem:function(e){var t=e.item;return(0,f.jsx)(o.TouchableOpacity,{style:[s.default.ctnMainTab,m.key===t.key&&s.default.activeTab],onPress:function(){return v(t)},children:(0,f.jsx)(l.default,{style:[s.default.tabBar,m.key===t.key&&s.default.colorActive],children:p(`RV.${t.key}`)})})}})}),function(e){switch(e.key){case"background":return(0,f.jsx)(u.default,{dataFormByUsertaskId:n,dataUserTask:t,dataRecipientImpl:i});case"document":return(0,f.jsx)(c.default,{dataUserTask:t});default:return(0,f.jsx)(o.View,{})}}(m)]})}},13446:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({tabBar:{fontSize:r.FontSize.FontSmall,fontFamily:r.Font.InterRegular400,textAlign:"center",lineHeight:(0,a.SizeDP)(16)},ctnMainTab:{paddingHorizontal:(0,a.SizeDP)(16),paddingVertical:(0,a.SizeDP)(12),alignItems:"center",justifyContent:"center"},activeTab:{borderBottomWidth:(0,a.SizeDP)(2),borderBottomColor:r.Color.BgPrimary},colorActive:{color:r.Color.BgPrimary},ctnTabView:{width:"100%",justifyContent:"center",columnGap:(0,a.SizeDP)(15),borderBottomColor:"#00358026",borderBottomWidth:(0,a.SizeDP)(1),backgroundColor:"#fff"}})},30019:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=n(32207),s=n(21527),u=n(87841),c=i(n(66771)),d=i(n(24541)),f=n(2884),p=n(47671);t.default=function(e){var t=e.data,n=e.dataSelect,i=e.setDataSelect,h=e.isSearch,y=void 0!==h&&h,m=e.onRefresh,v=e.getMore,g=e.placeholder,S=e.isi18n,x=void 0!==S&&S,j=(0,f.useTranslation)().t,w=(0,s.useState)(!1),b=(0,o.default)(w,2),D=b[0],T=b[1],P=(0,s.useState)(t),C=(0,o.default)(P,2),I=C[0],k=C[1],_=(0,s.useState)(""),F=(0,o.default)(_,2),O=F[0],M=F[1],E=(0,c.default)(O,500),R=(0,s.useState)({width:u.Dimensions.get("window").width,height:u.Dimensions.get("window").height}),z=(0,o.default)(R,2),V=z[0],B=z[1];(0,s.useEffect)((function(){var e=u.Dimensions.addEventListener("change",(function(e){var t=e.window;B({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]),(0,s.useEffect)((function(){L(E)}),[E]);var A,L=function(e){k(t.filter((function(t){return t.label.toLowerCase().includes(e.toLowerCase())})))},N=(A=(0,a.default)((function*(){y&&(T(!0),null==m||m((function(){return T(!1)})))})),function(){return A.apply(this,arguments)});return(0,p.jsxs)(p.Fragment,{children:[y&&(0,p.jsx)(l.Input,{allowFontScaling:!1,value:O,onChangeText:M,placeholder:g,style:{backgroundColor:"#fff"},accessoryRight:O?(0,p.jsx)(u.TouchableOpacity,{hitSlop:15,onPress:function(){return M("")},children:(0,p.jsx)(l.Icon,{name:"close-outline"})}):void 0}),(0,p.jsx)(l.List,{showsVerticalScrollIndicator:!1,style:{backgroundColor:"#fff",height:V.height/3*2},data:I,onEndReachedThreshold:.5,onRefresh:N,refreshing:D,onEndReached:function(){y&&(null==v||v())},renderItem:function(e){var t=e.item;return(0,p.jsx)(l.ListItem,{onPress:function(){n.includes(t.value)?i(n.filter((function(e){return e!==t.value}))):i([].concat((0,r.default)(n),[t.value]))},title:function(e){return(0,p.jsx)(d.default,Object.assign({},e,{children:x?j(`${t.label}`):t.label}))},accessoryRight:n.includes(t.value)?(0,p.jsx)(l.Icon,{fill:"#06B7E8",width:14,height:14,name:"checkmark-outline"}):void 0})}})]})}},62921:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(32207),a=n(87841),o=i(n(95556)),l=i(n(24541)),s=n(2884),u=n(47671);t.default=function(e){var t=e.onClose,n=e.visible,i=e.rangeDate,c=e.onConfirm,d=(0,s.useTranslation)().t;return(0,u.jsx)(r.Modal,{backdropStyle:o.default.backdrop,onBackdropPress:t,visible:n,children:(0,u.jsx)(r.RangeCalendar,{style:{backgroundColor:"#fff"},range:i,onSelect:function(e){return c(e)},min:new Date(1900,0,0),max:new Date,renderFooter:function(){return(0,u.jsxs)(a.View,{style:{alignItems:"center",justifyContent:"flex-end",flexDirection:"row",columnGap:6,marginRight:16,marginTop:16},children:[(0,u.jsx)(r.Button,{onPress:function(){return c({})},size:"small",status:"info",appearance:"outline",children:function(e){return(0,u.jsx)(l.default,Object.assign({},e,{children:d("CM.undo")}))}}),(0,u.jsx)(r.Button,{onPress:t,size:"small",appearance:"outline",status:"primary",children:function(e){return(0,u.jsx)(l.default,Object.assign({},e,{children:d("CM.select")}))}})]})}})})}},7241:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.listFilter=void 0;t.listFilter=[{label:"Trạng thái giao dịch",value:"status"},{label:"Nhóm dịch vụ",value:"group"},{label:"Quy trình",value:"modeler"},{label:"Mức độ ưu tiên",value:"priority"},{label:"Ngày tạo",value:"created_at"},{label:"Hạn hoàn thành",value:"due_date"},{label:"Trễ hạn",value:"late"}]},81584:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=n(32207),s=n(7005),u=n(87841),c=n(21527),d=n(14740),f=n(20880),p=n(12638),h=n(2543),y=n(72676),m=n(2884),v=i(n(69290)),g=i(n(24541)),S=n(98884),x=n(7241),j=n(60596),w=i(n(62921)),b=i(n(30019)),D=n(11595),T=n(35708),P=i(n(95556)),C=n(41995),I=n(11671),k=n(47671);t.default=function(){var e,t=(0,m.useTranslation)().t,n=(0,d.useRoute)(),i=null==n||null==(e=n.params)?void 0:e.type,_=(0,d.useNavigation)(),F=(0,s.useSafeAreaInsets)(),O=(0,c.useRef)(null),M=(0,c.useState)([]),E=(0,o.default)(M,2),R=E[0],z=E[1],V=(0,c.useState)(""),B=(0,o.default)(V,2),A=B[0],L=B[1],N=(0,c.useState)(0),U=(0,o.default)(N,2),W=U[0],H=U[1],G=(0,c.useState)(0),$=(0,o.default)(G,2),Y=$[0],K=$[1],q=(0,c.useState)(0),J=(0,o.default)(q,2),X=J[0],Q=J[1],Z=(0,c.useState)(0),ee=(0,o.default)(Z,2),te=ee[0],ne=ee[1],ie=(0,c.useState)(!1),re=(0,o.default)(ie,2),ae=re[0],oe=re[1],le=(0,p.useAppSelector)((function(e){return e.account})).dataAccount,se=(0,p.useAppSelector)((function(e){return e.common})).accessToken,ue=(0,c.useState)(""),ce=(0,o.default)(ue,2),de=ce[0],fe=ce[1],pe=(0,I.useTicketServices)(),he=(0,h.debounce)((function(e){fe(e)}),300),ye=(0,c.useState)({width:u.Dimensions.get("window").width,height:u.Dimensions.get("window").height}),me=(0,o.default)(ye,2),ve=me[0],ge=me[1],Se=(0,c.useState)(""),xe=(0,o.default)(Se,2),je=xe[0],we=xe[1],be=(0,c.useState)([]),De=(0,o.default)(be,2),Te=De[0],Pe=De[1],Ce=(0,c.useState)([]),Ie=(0,o.default)(Ce,2),ke=Ie[0],_e=Ie[1],Fe=(0,c.useState)([]),Oe=(0,o.default)(Fe,2),Me=Oe[0],Ee=Oe[1],Re=(0,c.useState)([]),ze=(0,o.default)(Re,2),Ve=ze[0],Be=ze[1],Ae=(0,c.useState)([]),Le=(0,o.default)(Ae,2),Ne=Le[0],Ue=Le[1],We=(0,c.useState)([]),He=(0,o.default)(We,2),Ge=He[0],$e=He[1],Ye=(0,c.useState)({}),Ke=(0,o.default)(Ye,2),qe=Ke[0],Je=Ke[1],Xe=(0,c.useState)({}),Qe=(0,o.default)(Xe,2),Ze=Qe[0],et=Qe[1],tt=(0,c.useState)({}),nt=(0,o.default)(tt,2),it=nt[0],rt=nt[1];(0,c.useEffect)((function(){var e=u.Dimensions.addEventListener("change",(function(e){var t=e.window;ge({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]),(0,c.useEffect)((function(){yt()}),[]),(0,c.useEffect)((function(){Q(0),mt(0,Te)}),[Te]),(0,c.useEffect)((function(){return he(A),function(){he.cancel()}}),[A]),(0,c.useEffect)((function(){if(ft())return z([]),H(0),void ne(0);"my-ticket"===i?pt(de,ke,Ge,Te,qe,it,Ze,Ve):ht(de,ke,qe,Ve,Te),ne(0)}),[de,ke,Ge,Te,qe,it,Ze,Ve]);var at,ot,lt,st,ut,ct,dt,ft=function(){return 0==ke.length&&0==Ge.length&&0==Te.length&&0==Object.keys(qe).length&&0==Object.keys(Ze).length&&0==Object.keys(it).length&&0==Ve.length&&!de},pt=function(e,t,n,i,r,a,o,l){t.length>0||n.length>0||i.length>0||Object.keys(r).length>0||Object.keys(o).length>0||Object.keys(a).length>0||l.length>0||!(0,h.isEmpty)(e)?St(0,e,t,n,i,r,a,o,l):z([])},ht=function(e,t,n,i,r){r.length>0||t.length>0||Object.keys(n).length>0||i.length>0||!(0,h.isEmpty)(e)?xt(0,e,t,n,i,r):z([])},yt=(at=(0,a.default)((function*(){try{var e={sort:"displayOrder,asc",page:te,size:20},t=(yield pe.getListServives({isAdmin:!1,status:["display"],textSearch:""},e,se)).content.map((function(e){return{label:e.serviceName,value:e.id}}));Ee(t)}catch(e){}})),function(){return at.apply(this,arguments)}),mt=(ot=(0,a.default)((function*(e,t){try{var n={page:e,size:1e3,sort:"createdDate,desc"},i={serviceId:t||[]},a=yield pe.getListModelerByListServiceId(n,i);if(a){var o;K(null==a?void 0:a.totalPages);var l=null==a||null==(o=a.content)?void 0:o.map((function(e){return{label:e.name,value:e.id}}));Ue(0===e?l:[].concat((0,r.default)(Ne),(0,r.default)(l)))}}catch(e){}})),function(e,t){return ot.apply(this,arguments)}),vt=(lt=(0,a.default)((function*(e){Q(0),yield mt(0,Ve),e()})),function(e){return lt.apply(this,arguments)}),gt=(st=(0,a.default)((function*(){X<Y&&(yield mt(X+1,Ve),Q((function(e){return e+1})))})),function(){return st.apply(this,arguments)}),St=(ut=(0,a.default)((function*(e,t,n,i,a,o,l,s,u){try{var c,d,f={createdBy:null!=(c=null==le?void 0:le.email)?c:"elmstest7@gmail.com",myTicket:!0,textSearch:t,ticketStatus:n||[],priority:i||[],service:a||[],delayDateFrom:l.startDate||null,delayDateTo:l.endDate||null,endDate:o.endDate||null,estimateDateFrom:s.startDate||null,estimateDateTo:s.endDate||null,startDate:o.startDate||null,workflow:u||[]},p=yield pe.getTicketList(e,50,"createdDate,desc",se,f);z(0===e?null==p?void 0:p.content:[].concat((0,r.default)(R),(0,r.default)(null==p?void 0:p.content))),H(Number(null==p||null==(d=p.page)?void 0:d.totalRecords))}catch(e){}finally{oe(!1)}})),function(e,t,n,i,r,a,o,l,s){return ut.apply(this,arguments)}),xt=(ct=(0,a.default)((function*(e,t,n,i,a,o){try{var l={keyWord:t,terms:{status:n.length>0?n:[j.Status.processing,j.Status.accepted]},from:i.startDate||null,to:i.endDate||null,id:null,field:"createdDate"};a&&a.length>0&&(l.terms.modelerId=a),o&&o.length>0&&(l.terms.serviceId=o);var s,u=yield pe.getTicketListFollow(e,50,"createdDate,desc",l,se);u&&(z(0===e?null==u?void 0:u.content:[].concat((0,r.default)(R),(0,r.default)(null==u?void 0:u.content))),H(Number(null==u||null==(s=u.page)?void 0:s.totalRecords)))}catch(e){}finally{oe(!1)}})),function(e,t,n,i,r,a){return ct.apply(this,arguments)}),jt=function(e){switch(e){case"status":return 0==ke.length?f.Color.borderColor:"#048EC7";case"group":return 0===Te.length?f.Color.borderColor:"#048EC7";case"priority":return 0==Ge.length?f.Color.borderColor:"#048EC7";case"modeler":return 0==Ve.length?f.Color.borderColor:"#048EC7";case"created_at":return Object.keys(qe).length>0?"#048EC7":f.Color.borderColor;case"due_date":return Object.keys(Ze).length>0?"#048EC7":f.Color.borderColor;case"late":return Object.keys(it).length>0?"#048EC7":f.Color.borderColor;default:return f.Color.borderColor}},wt=function(e){switch(e.value){case"created_at":return Tt(qe,e.value);case"due_date":return Tt(Ze,e.value);case"late":return Tt(it,e.value);case"group":return bt(Te,e.value,e.value);case"priority":return Dt(Ge,e.value);case"modeler":return bt(Ve,e.value,e.value);case"status":return Dt(ke,e.value);default:return""}},bt=function(e,n,i){return 0===(null==e?void 0:e.length)?t(`SR.${n}`):1===(null==e?void 0:e.length)?"modeler"===i?null==Ne||null==(r=Ne.find((function(t){return t.value===e[0]})))?void 0:r.label:null==Me||null==(a=Me.find((function(t){return t.value===e[0]})))?void 0:a.label:(null==e?void 0:e.length)>1?"modeler"===i?`${null==Ne||null==(o=Ne.find((function(t){return t.value===e[0]})))?void 0:o.label} + ${(e.length-1).toString()}`:`${null==Me||null==(l=Me.find((function(t){return t.value===e[0]})))?void 0:l.label} + ${(e.length-1).toString()}`:void 0;var r,a,o,l},Dt=function(e,n){return 0===(null==e?void 0:e.length)?t(`SR.${n}`):1===(null==e?void 0:e.length)?t(`TK.${e[0]}`):(null==e?void 0:e.length)>1?t(`TK.${e[0]}`)+" + "+((null==e?void 0:e.length)-1):void 0},Tt=function(e,n){return 0===Object.keys(e).length?t(`SR.${n}`):e.endDate?`${T.DateUtils.convertDateToDDMMYYYY(e.startDate)} - ${T.DateUtils.convertDateToDDMMYYYY(e.endDate)}`:`${T.DateUtils.convertDateToDDMMYYYY(e.startDate)} - now`};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(u.StatusBar,{barStyle:"dark-content",backgroundColor:f.Color.Transparent}),(0,k.jsx)(u.TouchableWithoutFeedback,{onPress:function(){return u.Keyboard.dismiss()},children:(0,k.jsx)(s.SafeAreaView,{edges:["top"],style:{backgroundColor:f.Color.BgPrimary,flex:1},children:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.Input,{style:{backgroundColor:f.Color.BgPrimary,borderWidth:0},textStyle:{color:"#fff"},placeholderTextColor:"#fff",ref:O,placeholder:t("SR.searchTicket"),value:A,status:"basic",autoFocus:!0,allowFontScaling:!1,onChangeText:function(e){return L(e)},accessoryLeft:(0,k.jsx)(u.TouchableOpacity,{onPress:function(){return _.goBack()},children:(0,k.jsx)(l.Icon,{name:"arrow-back",fill:"#ffffff"})}),accessoryRight:A?(0,k.jsx)(u.TouchableOpacity,{onPress:function(){return L("")},children:(0,k.jsx)(l.Icon,{name:"close-outline",fill:"#ffffff"})}):void 0}),(0,k.jsx)(l.Divider,{}),(0,k.jsxs)(l.Layout,{style:{flex:1,paddingBottom:F.bottom,backgroundColor:"#fff"},level:"1",children:[(0,k.jsx)(u.View,{children:(0,k.jsx)(u.ScrollView,{showsHorizontalScrollIndicator:!1,contentContainerStyle:{columnGap:10,padding:10},horizontal:!0,children:("my-ticket"===i?x.listFilter:x.listFilter.filter((function(e){return"status"===e.value||"created_at"===e.value||"group"===e.value||"modeler"===e.value}))).map((function(e){return(0,k.jsxs)(u.TouchableOpacity,{onPress:function(){we(e.value)},style:[{borderColor:jt(e.value)},P.default.ctnFilter],children:[(0,k.jsx)(g.default,{children:wt(e)}),(0,k.jsx)(l.Icon,{width:16,height:16,name:je===e.value?"chevron-up-outline":"chevron-down-outline"})]},e.label)}))})}),(0,k.jsx)(l.List,{style:{backgroundColor:"#fff",flex:1},showsVerticalScrollIndicator:!1,data:R,renderItem:function(e){var n=e.item,r=(e.index,"my-ticket"===i?y.dataListStatusTicket.find((function(e){return e.status===n.ticketStatus})):D.dataListStatusTicketFollow.find((function(e){return e.status===n.status})));return(0,k.jsx)(l.ListItem,{onPress:function(){var e;_.navigate(f.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:"my-ticket"===i?null==n?void 0:n.id:null==n||null==(e=n.resourceId)?void 0:e.substr(4),email:"my-ticket"===i?n.createdBy:n.owner,status:"my-ticket"===i?n.ticketStatus:n.status,selectTabBottom:"my-ticket"===i?1:2,recipientDetailsId:n.implementId,userTaskId:n.recipientId})},children:(0,k.jsxs)(u.View,{style:P.default.ctnMain,children:[(0,k.jsxs)(u.View,{style:P.default.ctnBody,children:[(0,k.jsx)(l.Icon,{width:30,height:30,fill:null==r?void 0:r.color,name:"credit-card-outline"}),(0,k.jsxs)(u.View,{style:{flex:1,gap:4},children:[(0,k.jsx)(g.default,{style:{fontFamily:f.Font.InterSemiBold600,fontSize:16},children:`${"my-ticket"===i?n.title:n.resourceName}`}),(0,k.jsx)(g.default,{children:""+("my-ticket"===i?`${t("SR.modeler")}: ${n.serviceName||"---"}`:`${t("TK.step")}: `+n.notionName)}),(0,k.jsxs)(u.View,{style:{flexDirection:"row",alignItems:"center",justifyContent:ve.width>=C.TYPE_SCREEN.mobile?"flex-start":"space-between",columnGap:ve.width>=C.TYPE_SCREEN.mobile?20:0},children:[(0,k.jsx)(g.default,{style:{fontStyle:"italic",fontSize:12},children:`${t("SR.created_at")}: `+T.DateUtils.convertDateToDDMMYYYY_H_M(n.createdDate)}),(0,k.jsx)(u.View,{style:{backgroundColor:null==r?void 0:r.bgColor,borderRadius:4,paddingHorizontal:4,paddingVertical:2,minWidth:100},children:(0,k.jsx)(g.default,{style:{color:null==r?void 0:r.color,fontSize:12,textAlign:"center"},children:t(`TK.${"my-ticket"===i?n.ticketStatus:n.status}`)})})]})]})]}),(0,k.jsx)(u.View,{children:(0,k.jsx)(l.Icon,{width:20,height:20,name:"chevron-right-outline"})})]})})},refreshing:ae,onRefresh:function(){ne(0),"my-ticket"===i?St(te+1,de,ke,Ge,Te,qe,it,Ze,Ve):xt(te+1,de,ke,qe,Ve,Te)},onEndReached:function(){R.length<W&&(ne(te+1),"my-ticket"===i?St(te+1,de,ke,Ge,Te,qe,it,Ze,Ve):xt(te+1,de,ke,qe,Ve,Te))},onEndReachedThreshold:.5,ListEmptyComponent:function(){return(0,k.jsx)(u.View,{style:{margin:10,flex:1},children:(0,k.jsx)(g.default,{children:t("CM.emptyData")})})}})]})]})})}),(0,k.jsx)(v.default,{isVisible:"status"===je,title:t("SR.selectStatus"),onClose:function(){return we("")},renderContent:(dt="my-ticket"===i?S.dataStatus:[{label:"Đang thực hiện",value:j.Status.processing},{label:"Hoàn thành",value:j.Status.accepted}],(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(b.default,{isi18n:!0,data:dt,dataSelect:ke,setDataSelect:_e})}))}),(0,k.jsx)(v.default,{isVisible:"priority"===je,title:t("HM.priotitySelect"),onClose:function(){return we("")},renderContent:(0,k.jsx)(b.default,{isi18n:!0,data:S.dataPrioritySelect,dataSelect:Ge,setDataSelect:$e})}),(0,k.jsx)(v.default,{isVisible:"group"===je,title:t("SR.selectGroup"),onClose:function(){return we("")},renderContent:(0,k.jsx)(b.default,{data:Me,dataSelect:Te,setDataSelect:Pe})}),"modeler"===je&&(0,k.jsx)(v.default,{isVisible:"modeler"===je,title:t("SR.selectService"),onClose:function(){return we("")},renderContent:(0,k.jsx)(b.default,{data:Ne,dataSelect:Ve,setDataSelect:Be,isSearch:!0,placeholder:t("SR.selectService"),onRefresh:vt,getMore:gt})}),(0,k.jsx)(w.default,{onClose:function(){return we("")},visible:"created_at"===je,onConfirm:Je,rangeDate:qe}),(0,k.jsx)(w.default,{onClose:function(){return we("")},visible:"due_date"===je,onConfirm:et,rangeDate:Ze}),(0,k.jsx)(w.default,{onClose:function(){return we("")},visible:"late"===je,onConfirm:rt,rangeDate:it})]})}},95556:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({backdrop:{backgroundColor:"rgba(0, 0, 0, 0.5)"},ctnMain:{flexDirection:"row",alignItems:"center",flex:1,gap:10},ctnBody:{flex:1,flexDirection:"row",alignItems:"center",gap:10},ctnFilter:{flexDirection:"row",columnGap:6,alignItems:"center",justifyContent:"center",borderWidth:1,paddingHorizontal:10,paddingVertical:6,borderRadius:6}})},86288:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(87841),l=i(n(24541)),s=i(n(88420)),u=n(41995),c=n(35708),d=n(46317),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),p=n(32207),h=n(68289),y=n(40851),m=n(12638),v=i(n(77389)),g=n(2884),S=i(n(76644)),x=i(n(93238)),j=n(88e3),w=n(47671);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}var D=[{id:1,key:"TK.editAction",value:"edit",icon:(0,w.jsx)(d.IconEdit,{width:(0,u.SizeDP)(20),height:(0,u.SizeDP)(20)})},{id:2,key:"TK.deleteComment",value:"trash",icon:(0,w.jsx)(d.IconTrash,{width:(0,u.SizeDP)(20),height:(0,u.SizeDP)(20)})}],T=f.default.memo((function(e){var t,n,i=e.data,d=e.user,b=e.setComment,P=e.deleteComment,C=e.allComments,I=e.onReplyClick,k=e.level,_=e.listDataUser,F=(0,g.useTranslation)().t,O=(0,f.useState)(!1),M=(0,a.default)(O,2),E=M[0],R=M[1],z=(0,f.useState)(!1),V=(0,a.default)(z,2),B=V[0],A=V[1],L=(0,f.useState)(!1),N=(0,a.default)(L,2),U=N[0],W=N[1],H=(0,f.useState)(!1),G=(0,a.default)(H,2),$=G[0],Y=G[1],K=(0,f.useState)(""),q=(0,a.default)(K,2),J=q[0],X=q[1],Q=(0,f.useState)(d),Z=(0,a.default)(Q,1)[0],ee=(0,y.useReviewServices)(),te=(0,m.useAppSelector)((function(e){return e.common})).accessToken,ne=C.get(i.id)||[],ie=function(){W(!U)},re=(t=(0,r.default)((function*(){try{Y(!0);var e=new FormData;e.append("keyName",i.attachment),e.append("bucketName",i.bucketName);var t=yield ee.viewFile(e,te);1==(null==t?void 0:t.code)?(X(t.message),A(!0)):o.Alert.alert(F("CM.info"),F("CM.error"))}catch(e){}finally{Y(!1)}})),function(){return t.apply(this,arguments)}),ae=(n=(0,r.default)((function*(){try{Y(!0);var e=`${j.BASE_URL}/services/erequest/api/comments/download-file?commentId=${i.id}`,t=yield c.CommonUtils.downloadFile(i.fileName,e);"success"===t.status?v.default.show({type:"success",text1:F("CM.downloadSuccess")}):"error"===t.status&&v.default.show({type:"error",text1:F("CM.downloadFail")})}catch(e){v.default.show({type:"error",text1:F("CM.downloadFail")})}finally{Y(!1)}})),function(){return n.apply(this,arguments)}),oe=function(){R(!E)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(o.View,{style:s.default.ctnMain,children:[(0,w.jsx)(o.View,{style:s.default.ctnImage,children:(0,w.jsx)(o.Image,{width:(0,u.SizeDP)(24),height:(0,u.SizeDP)(24),borderRadius:(0,u.SizeDP)(12),source:{uri:null!=Z&&Z.imageUrl?null==Z?void 0:Z.imageUrl:"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}})}),(0,w.jsxs)(o.View,{style:{flex:1},children:[(0,w.jsxs)(o.View,{style:s.default.ctnSecond,children:[(0,w.jsx)(l.default,{style:s.default.ctnName,children:null!=Z&&Z.firstName?(null==Z?void 0:Z.firstName)+" "+(null==Z?void 0:Z.lastName)+"• ":"---"}),(0,w.jsx)(l.default,{style:s.default.ctnEmail,children:null==Z?void 0:Z.email})]}),(0,w.jsx)(l.default,{style:s.default.ctnTime,children:c.DateUtils.convertDateToDDMMYYYY_H_M(i.lastModifiedDate)}),function(e){var t=(0,h.decodeUnicodeToEmoji)(e);if(!t)return i.fileName?(0,w.jsxs)(o.View,{style:s.default.ctnViewFile,children:[(0,w.jsxs)(o.Pressable,{onPress:re,style:s.default.styleFile,children:[(0,w.jsx)(l.default,{numberOfLines:1,style:s.default.content,children:""+i.fileName}),$&&(0,w.jsx)(p.Spinner,{size:"tiny"})]}),(0,w.jsx)(o.Pressable,{onPress:ae,children:(0,w.jsx)(p.Icon,{name:"download-outline",width:24,height:24})})]}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(l.default,{style:s.default.content,children:"'---'"})});if(!t.includes('class="user_tag"'))return i.fileName?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.default,{style:s.default.content,children:(0,h.decodeUnicodeToEmoji)(t)}),(0,w.jsxs)(o.View,{style:s.default.ctnViewFile,children:[(0,w.jsxs)(o.Pressable,{onPress:re,style:s.default.styleFile,children:[(0,w.jsx)(l.default,{numberOfLines:1,style:s.default.content,children:""+i.fileName}),$&&(0,w.jsx)(p.Spinner,{size:"tiny"})]}),(0,w.jsx)(o.Pressable,{onPress:ae,children:(0,w.jsx)(p.Icon,{name:"download-outline",width:24,height:24})})]})]}):(0,w.jsx)(l.default,{style:s.default.content,children:(0,h.decodeUnicodeToEmoji)(t)});if(t.includes('class="user_tag"')){var n=(0,h.splitStringWithSpans)(t).map((function(e){var t,n;return e.includes('class="user_tag"')?`${null==(t=(0,h.extractSpanList)(e))||null==(n=t[0])?void 0:n.textContent}`:e}));return(0,w.jsx)(o.View,{style:s.default.bodyView,children:n.map((function(e){return e.startsWith("@")?(0,w.jsx)(l.default,{style:s.default.tag,children:e.slice(1)}):(0,w.jsx)(l.default,{style:s.default.content,children:e})}))})}}(i.content),(0,w.jsxs)(o.View,{style:s.default.ctnReplyView,children:[(0,w.jsx)(o.Pressable,{onPress:function(){return function(e){I("reply",e),W(!0)}(i)},hitSlop:(0,u.SizeDP)(15),children:(0,w.jsx)(l.default,{style:s.default.ctnReply,children:F("CM.reply")})}),ne.length>0&&(0,w.jsx)(w.Fragment,{children:U?(0,w.jsx)(o.Pressable,{onPress:ie,style:s.default.ctnToggleShow,children:(0,w.jsx)(l.default,{style:{fontSize:12},children:F("CM.thugon")})}):(0,w.jsxs)(o.Pressable,{onPress:ie,style:s.default.ctnToggleShow,children:[(0,w.jsx)(p.Icon,{fill:"#00204DE5",name:"message-circle-outline",width:16,height:16}),(0,w.jsxs)(l.default,{style:{fontSize:12},children:[F("CM.view")," ",null==ne?void 0:ne.length," ",F("CM.comment")]})]})})]})]}),(0,w.jsx)(o.View,{style:{},children:(0,w.jsx)(p.OverflowMenu,{anchor:function(){return(0,w.jsx)(o.TouchableOpacity,{onPress:oe,children:(0,w.jsx)(p.Icon,{width:20,height:20,name:"more-vertical"})})},visible:E,onBackdropPress:oe,children:D.map((function(e){return(0,w.jsx)(p.MenuItem,{accessoryLeft:(0,w.jsx)(p.Icon,{name:e.value}),title:F(e.key),onPress:function(){return function(e){switch(e.value){case"edit":oe(),I("edit",i),console.log("Edit");break;case"trash":oe(),P(i.id),console.log("Delete")}}(e)}},e.value)}))})})]}),U&&(0,w.jsx)(o.View,{style:{marginLeft:30,marginTop:10},children:null==ne?void 0:ne.map((function(e){return(0,w.jsx)(T,{data:e,user:null==_?void 0:_.find((function(t){return t.email===e.createdBy})),listDataUser:_,setComment:b,deleteComment:P,allComments:C,onReplyClick:I,level:k+1},e.id)}))}),(0,w.jsx)(S.default,{isVisible:B,children:(0,w.jsxs)(o.View,{style:s.default.ctnView,children:[(0,w.jsx)(o.View,{style:s.default.ctnBodyView,children:(0,w.jsx)(o.Pressable,{onPress:function(){return A(!1)},children:(0,w.jsx)(p.Icon,{name:"close",width:24,height:24})})}),(0,w.jsx)(o.View,{style:{flex:1},children:J&&(0,w.jsx)(x.default,{startInLoadingState:!0,source:{uri:J}})})]})})]})}));t.default=T},88420:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnImage:{width:(0,r.SizeDP)(24),height:(0,r.SizeDP)(24),borderRadius:(0,r.SizeDP)(12),overflow:"hidden",backgroundColor:a.Color.BgPrimary},ctnTime:{color:"#00204DB2",fontSize:r.default.FontTinier,fontFamily:a.Font.InterRegular400},ctnEmail:{color:"#00204DB2",fontSize:r.default.FontTiny,fontFamily:a.Font.InterSemiBold600},ctnName:{fontSize:r.default.FontTiny,color:"#00204D",fontFamily:a.Font.InterSemiBold600},ctnMain:{flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",columnGap:"ios"==i.Platform.OS?16:12,marginBottom:10},ctnSecond:{flex:1,flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",flexWrap:"wrap"},ctnReply:{color:"#366AE2",fontSize:r.default.FontTiny,fontFamily:a.Font.InterMedium500},content:{color:"#00204DE5",fontSize:r.default.FontSmallest,fontFamily:a.Font.InterRegular400,marginTop:(0,r.SizeDP)(8),marginBottom:(0,r.SizeDP)(8)},tag:{color:"#62248F",fontSize:r.default.FontSmall,fontFamily:a.Font.InterRegular400},contentTag:{color:"#00204DE5",fontSize:r.default.FontSmallest,fontFamily:a.Font.InterRegular400},bodyView:{flexDirection:"row",columnGap:(0,r.SizeDP)(6),alignItems:"center",flexWrap:"wrap",marginTop:(0,r.SizeDP)(8),marginBottom:(0,r.SizeDP)(8)},styleFile:{paddingHorizontal:10,paddingVertical:6,backgroundColor:"#e8e5e5de",borderRadius:8,marginVertical:3,maxWidth:130,justifyContent:"space-between",alignItems:"center",flexDirection:"row"},ctnViewFile:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8},ctnReplyView:{flexDirection:"row-reverse",alignItems:"center",justifyContent:"flex-end",columnGap:10},ctnToggleShow:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:6,paddingVertical:3},ctnView:{backgroundColor:"#fff",height:"100%"},ctnBodyView:{justifyContent:"flex-end",alignItems:"flex-end",marginRight:16,marginBottom:10}})},68289:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.extractSpanList=t.encodeEmojiToUnicode=t.decodeUnicodeToEmoji=void 0,t.filterCommentsByParentId=function(e){var t=new Map;return e.forEach((function(e){var n=null===e.commentId?"root":e.commentId;t.has(n)||t.set(n,[]),t.get(n).push(e)})),t},t.splitStringWithSpans=void 0;t.decodeUnicodeToEmoji=function(e){return e.replace(/\\u\{([0-9A-F]{1,6})\}/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/\\u([0-9A-F]{4})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))}))},t.encodeEmojiToUnicode=function(e){return e.replace(/([\uD800-\uDBFF][\uDC00-\uDFFF])|([^\n])/g,(function(e,t,n){return t?"\\u{"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536).toString(16).toUpperCase()+"}":n?"\\u"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0"):e}))},t.extractSpanList=function(e){for(var t,n=/<span(?: [^>]*id="([^"]*)")?(?: [^>]*data-user-id="([^"]*)")?(?: [^>]*data-email="([^"]*)")?(?: [^>]*data-org-in="([^"]*)")?(?: [^>]*data-cust-id="([^"]*)")?[^>]*>(.*?)<\/span>/g,i=[];null!==(t=n.exec(e));)i.push({id:t[1],userId:t[2],email:t[3],orgIn:t[4],custId:t[5],textContent:t[6].trim()});return i},t.splitStringWithSpans=function(e){var t=/<span[^>]*>.*?<\/span>/g,n=e.match(t),i=e.split(t),r=[];return i.forEach((function(e,t){e.trim()&&r.push(e.trim()),n&&n[t]&&r.push(n[t])})),r}},55087:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=n(21527),s=n(14740),u=n(41995),c=n(46317),d=n(87841),f=i(n(7259)),p=i(n(86288)),h=n(12638),y=n(68289),m=i(n(31263)),v=n(11671),g=n(32207),S=i(n(43184)),x=n(2884),j=i(n(24541)),w=n(47671);t.default=function(e){var t=e.onClose,n=(0,x.useTranslation)().t,i=(0,l.useState)([]),b=(0,o.default)(i,2),D=b[0],T=b[1],P=(0,l.useState)([]),C=(0,o.default)(P,2),I=C[0],k=C[1],_=(0,l.useState)([]),F=(0,o.default)(_,2),O=F[0],M=F[1],E=(0,l.useState)([]),R=(0,o.default)(E,2),z=R[0],V=R[1],B=(0,l.useState)(""),A=(0,o.default)(B,2),L=A[0],N=A[1],U=(0,l.useState)(!1),W=(0,o.default)(U,2),H=W[0],G=W[1],$=(0,l.useState)(),Y=(0,o.default)($,2),K=Y[0],q=Y[1],J=(0,l.useState)(null),X=(0,o.default)(J,2),Q=X[0],Z=X[1],ee=(0,l.useState)("new"),te=(0,o.default)(ee,2),ne=te[0],ie=te[1],re=(0,l.useState)(!1),ae=(0,o.default)(re,2),oe=ae[0],le=ae[1],se=(0,l.useState)("loading"),ue=(0,o.default)(se,2),ce=ue[0],de=ue[1],fe=(0,l.useState)([]),pe=(0,o.default)(fe,2),he=pe[0],ye=pe[1],me=(0,l.useRef)(null),ve=(0,h.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,ge=(0,h.useAppSelector)((function(e){return e.account})).dataAccount,Se=(0,v.useTicketServices)();(0,s.useFocusEffect)((0,l.useCallback)((function(){Pe()}),[]));var xe,je,we,be,De,Te,Pe=(xe=(0,a.default)((function*(){try{de("loading");var e={userTaskId:"all",ticketId:ve.id,sort:"lastModifiedDate,desc",page:0,size:1e5},t=yield Se.getListComments(e);if(t&&t.content){T(t.content);var n=t.content.map((function(e){return e.createdBy})),i=ge.email||"",a=(0,r.default)(new Set([].concat((0,r.default)(n),[i]))).filter((function(e){return e.length>0})),o=yield Se.getMultiLoginAccount(a);M(o||[]),yield Ee()}}catch(e){console.log("Error get list comments:",e),de("error")}})),function(){return xe.apply(this,arguments)}),Ce=(0,l.useMemo)((function(){var e=new Map;return D.forEach((function(t){var n,i=null!=(n=t.commentId)?n:"root",a=e.get(i)||[];e.set(i,[].concat((0,r.default)(a),[t]))})),e}),[D]),Ie=function(e){var t=e.split(" "),n=t.filter((function(e){return!e.startsWith("@")})).join(" "),i=t.filter((function(e){return e.startsWith("@")})).map((function(e){var t,n,i;return`<span id="#${(new Date).getTime()}" class="user_tag" contenteditable="false" data-user-id="${null!=(t=ge.id)?t:5845}" data-email="${e.slice(1)}" data-org-in="${null!=(n=ge.orgIn)?n:"/1833/5390/5392"}" data-cust-id="${null!=(i=ge.custId)?i:1833}">${e}</span>`})).join(" ");return(0,y.encodeEmojiToUnicode)(`${i} ${n}`)},ke=(je=(0,a.default)((function*(e,t,n){try{var i={content:Ie(L),userTaskId:"all",ticketId:ve.id,name:`${ge.firstName} ${ge.lastName}`,createdBy:ge.email,commentType:"comment",avatar:ge.imageUrl,commentId:e,userId:ge.id,orgIn:ge.orgIn,custId:ge.custId,contactDTO:he,isPrivate:n},a=new FormData;a.append("uploadFile",t?{uri:null==t?void 0:t.path,type:null==t?void 0:t.mime,name:null==t?void 0:t.path.split("/").pop()}:null),a.append("commentJson",JSON.stringify(i));var o=yield Se.sendComment(a);o&&(ye([]),T([o].concat((0,r.default)(D))),q(null),d.Keyboard.dismiss())}catch(e){}})),function(e,t,n){return je.apply(this,arguments)}),_e=(0,l.useCallback)((0,a.default)((function*(){if("reply"===ne||"new"===ne){if(L.trim()||K){var e=Q&&null!=Q&&Q.commentId?null==Q?void 0:Q.commentId:null==Q?void 0:Q.id;yield ke(e,K,H)}}else"edit"===ne&&L.trim()&&Q&&(yield Me(null==Q?void 0:Q.id,null==Q?void 0:Q.commentId,K,H));N(""),ie("new"),Z(null)})),[L,ne,Q,K,H]),Fe=(we=(0,a.default)((function*(e){try{204===(yield Se.deleteComment(e))&&Oe(e)}catch(e){}})),function(e){return we.apply(this,arguments)}),Oe=(0,l.useCallback)((function(e){T((function(t){return t.filter((function(t){return t.id!==e}))}))}),[]),Me=(be=(0,a.default)((function*(e,t,n,i){try{var r=Object.assign({},Q,{content:Ie(L),isPrivate:i,lastModifiedDate:(new Date).toISOString()}),a=new FormData;a.append("uploadFile",n?{uri:null==n?void 0:n.path,type:null==n?void 0:n.mime,name:null==n?void 0:n.path.split("/").pop()}:null),a.append("commentJson",JSON.stringify(r));var o=yield Se.updateComment(a);o&&(T((function(t){return t.map((function(t){return t.id===e?o:t}))})),d.Keyboard.dismiss())}catch(e){}})),function(e,t,n,i){return be.apply(this,arguments)}),Ee=(De=(0,a.default)((function*(){try{var e=yield Se.getListUserFromComment({advanced:!0,orgIns:[],q:""});e&&(k(e),de("done"))}catch(e){console.log("Error get list users:",e),de("error")}})),function(){return De.apply(this,arguments)}),Re=function(e){N(e);var t,n=e.split(" ").pop();if(null!=n&&n.startsWith("@")&&n.length>0)if((null==n||null==(t=n.slice(1))?void 0:t.length)<=0)V(I),le(!0);else{var i,r=null==n||null==(i=n.slice(1))?void 0:i.toLowerCase();V(I.filter((function(e){var t;return null==e||null==(t=e.email)?void 0:t.toLowerCase().includes(r)}))),le(!0)}else le(!1)},ze=(0,l.useCallback)((function(e,t){var n;if(ie(e),"reply"===e){var i=I.find((function(e){return e.email==t.createdBy})),a={id:null==i?void 0:i.resourceId,name:null==i?void 0:i.personalName,email:null==i?void 0:i.email,orgIn:null==i?void 0:i.orgIn,custId:null==i?void 0:i.custId,haveAvatar:!(null==i||!i.imageUrl),avatar:null==i?void 0:i.imageUrl,disabled:(null==i?void 0:i.resourceId)===ge.id||he.some((function(e){return(null==e?void 0:e.id)===(null==i?void 0:i.resourceId)}))};ye((function(e){return[].concat((0,r.default)(e),[a])})),Re(`@${t.createdBy} `)}else Re(Ve((0,y.decodeUnicodeToEmoji)(t.content)));Z(t),null==(n=me.current)||n.focus()}),[]),Ve=function(e){return(0,y.splitStringWithSpans)(e).map((function(e){var t,n;return e.includes('class="user_tag"')?`${null==(t=(0,y.extractSpanList)(e))||null==(n=t[0])?void 0:n.textContent}`:e})).join(" ")},Be=(Te=(0,a.default)((function*(){try{var e=yield m.default.ChoosePhoto({width:500,height:500});q(e)}catch(e){console.log(e)}})),function(){return Te.apply(this,arguments)});return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(d.KeyboardAvoidingView,{keyboardVerticalOffset:50,behavior:"ios"===d.Platform.OS?"padding":"height",style:{flex:1},children:(0,w.jsx)(d.TouchableWithoutFeedback,{children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(S.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:n("TK.comment"),onPressIconLeft:t}),(0,w.jsxs)(d.View,{style:{flex:1,padding:16},children:[(0,w.jsxs)(d.View,{style:{flex:1,position:"relative"},children:["done"===ce&&(0,w.jsx)(d.FlatList,{style:{flex:1},showsVerticalScrollIndicator:!1,contentContainerStyle:{rowGap:(0,u.SizeDP)(16)},data:(null==Ce?void 0:Ce.get("root"))||[],renderItem:function(e){var t=e.item;return(0,w.jsx)(p.default,{data:t,user:O.find((function(e){return e.email===t.createdBy})),listDataUser:O,setComment:N,deleteComment:Fe,allComments:Ce,onReplyClick:ze,level:0})}}),"loading"===ce&&(0,w.jsx)(g.Spinner,{size:"small"}),"error"===ce&&(0,w.jsx)(d.View,{children:(0,w.jsx)(j.default,{children:n("CM.emptyData")})}),oe&&(0,w.jsx)(d.View,{style:f.default.ctnModalListUser,children:(0,w.jsx)(d.View,{style:f.default.bodyModalListUser,children:(0,w.jsx)(g.List,{keyboardShouldPersistTaps:"handled",data:z,renderItem:function(e){var t=e.item;return(0,w.jsx)(g.ListItem,{title:t.personalName,description:t.email,onPress:function(){return function(e){var t,n={id:e.resourceId,name:e.personalName,email:e.email,orgIn:e.orgIn,custId:e.custId,haveAvatar:!!e.imageUrl,avatar:e.imageUrl,disabled:e.resourceId===ge.id||he.some((function(t){return t.id===e.resourceId}))};ye((function(e){return[].concat((0,r.default)(e),[n])}));var i=L.split(" ");i[i.length-1]=`@${e.email} `,N(i.join(" ")),le(!1),null==(t=me.current)||t.focus()}(t)},accessoryLeft:(0,w.jsx)(g.Avatar,{borderRadius:(0,u.SizeDP)(12),source:{uri:null!=t&&t.avatar?null==t?void 0:t.avatar:"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}})})}})})})]}),(0,w.jsxs)(d.View,{style:[f.default.ctnSend],children:[(0,w.jsxs)(d.View,{style:f.default.ctnImg,children:[K&&(0,w.jsx)(w.Fragment,{children:K.mime.includes("image")&&(0,w.jsxs)(d.View,{style:f.default.ctnImage,children:[(0,w.jsx)(d.Image,{style:f.default.image,source:{uri:K.sourceURL}}),(0,w.jsx)(d.Pressable,{onPress:function(){return q(null)},style:f.default.closeImage,children:(0,w.jsx)(g.Icon,{width:12,height:12,name:"close-outline"})})]})}),(0,w.jsxs)(d.View,{style:f.default.ctnInput,children:[(0,w.jsx)(d.TextInput,{ref:me,style:{padding:(0,u.SizeDP)(12),flex:1},allowFontScaling:!1,multiline:!0,placeholder:n("new"===ne?"TK.addComment":"reply"===ne?"TK.replyComment":"TK.editComment"),value:L,onChangeText:Re,onFocus:function(e){return t=e.nativeEvent.text,void(null!=(n=null==t?void 0:t.split(" ").pop())&&n.startsWith("@")&&le(!0));var t,n}}),(0,w.jsx)(d.TouchableOpacity,{onPress:Be,hitSlop:(0,u.SizeDP)(15),children:(0,w.jsx)(c.IconGetRelative,{width:(0,u.SizeDP)(20),height:(0,u.SizeDP)(20)})}),(0,w.jsx)(d.Pressable,{style:{marginHorizontal:12},onPress:function(){return G(!H)},children:(0,w.jsx)(g.Icon,{width:20,height:20,fill:"#39AC6D",name:H?"people-outline":"globe-outline"})})]})]}),(0,w.jsx)(d.TouchableOpacity,{onPress:_e,hitSlop:(0,u.SizeDP)(15),children:(0,w.jsx)(c.IconSend,{width:(0,u.SizeDP)(24),height:(0,u.SizeDP)(24)})})]})]})]})})})})}},7259:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(41995);t.default=i.StyleSheet.create({ctnSend:{flexDirection:"row",alignItems:"center",columnGap:(0,r.SizeDP)(10),zIndex:1,backgroundColor:"#fff",paddingVertical:10},ctnImage:{marginLeft:4,marginTop:6,position:"relative",width:100,height:100},closeImage:{position:"absolute",top:-4,right:-4,padding:2,borderRadius:20,backgroundColor:"#fff",borderWidth:.5,borderColor:"#00358090"},image:{width:100,height:100,borderRadius:(0,r.SizeDP)(8)},ctnImg:{flex:1,borderWidth:(0,r.SizeDP)(.5),borderColor:"#00358026",borderRadius:(0,r.SizeDP)(8)},backdrop:{backgroundColor:"rgba(0, 0, 0, 0.5)"},menu:{width:250,maxHeight:300,position:"absolute",borderRadius:8,overflow:"hidden"},menuTitle:{padding:8,fontWeight:"bold"},ctnModalListUser:{alignItems:"center",justifyContent:"center",width:"100%",bottom:0,position:"absolute"},bodyModalListUser:{width:"90%",maxHeight:180,borderRadius:8,overflow:"hidden",borderWidth:.5,borderColor:"#a2b3cfe6"},ctnInput:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}})},84478:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(21527));var r=n(87841),a=n(2543),o=n(32207),l=n(14740),s=i(n(24541)),u=n(47671);t.default=function(e){var t=e.style,n=e.onPressIconLeft,i=e.viewIconLeft,c=void 0===i?"arrow-back":i,d=e.title,f=void 0===d?"quangnh39":d,p=e.contentStyle,h=e.renderContentRight,y=e.appearance,m=void 0===y?"default":y,v=e.alignment,g=void 0===v?"center":v,S=e.subtitle,x=void 0===S?"":S,j=e.fillIconBackLeft,w=(0,l.useNavigation)(),b=function(){(0,a.isUndefined)(n)?w.goBack():n()};return(0,u.jsx)(r.View,{style:[t],children:(0,u.jsx)(o.TopNavigation,{title:function(e){return(0,u.jsx)(s.default,Object.assign({},e,{children:f}))},appearance:m,accessoryLeft:function(){return(0,u.jsx)(o.TopNavigationAction,{hitSlop:15,onPress:b,icon:(0,u.jsx)(o.Icon,{name:c,fill:j})})},accessoryRight:h,alignment:g,subtitle:x,style:[p]})})}},73639:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),l=n(87841),s=i(n(93238)),u=n(12638),c=n(14740),d=n(20880),f=n(88e3),p=n(19867),h=i(n(69290)),y=n(32207),m=i(n(24541)),v=n(2884),g=n(40851),S=n(97427),x=n(11671),j=n(47671);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}t.default=function(e){var t=e.selectTabBottom,n=e.userTaskId,i=e.recipientDetailsId,w=e.isRealoadWebview,b=(0,v.useTranslation)().t,D=(0,c.useNavigation)(),T=(0,u.useAppDispatch)(),P=(0,u.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,C=(0,u.useAppSelector)((function(e){return e.common})).accessToken,I=(0,o.useState)(!1),k=(0,a.default)(I,2),_=k[0],F=k[1],O=(0,o.useState)([]),M=(0,a.default)(O,2),E=M[0],R=M[1],z=(0,o.useState)({width:l.Dimensions.get("screen").width,height:l.Dimensions.get("screen").height}),V=(0,a.default)(z,2),B=(V[0],V[1]),A=(0,o.useState)(0),L=(0,a.default)(A,2),N=L[0],U=L[1],W=(0,g.useReviewServices)(),H=(0,x.useTicketServices)();(0,c.useFocusEffect)((0,o.useCallback)((function(){U((function(e){return e+1}))}),[w])),(0,o.useEffect)((function(){Promise.all([q(),J(),X(),Q()])}),[]),(0,o.useEffect)((function(){var e=l.Dimensions.addEventListener("change",(function(e){var t=e.screen,n={width:t.width,height:t.height};B(n)}));return function(){return e.remove()}}),[]);var G,$,Y,K,q=(G=(0,r.default)((function*(){try{var e=yield W.getRecipientDetaiImpl(P.id,C);e&&T(S.ticketActions.setDataRecipientDetailImpl(e))}catch(e){}})),function(){return G.apply(this,arguments)}),J=($=(0,r.default)((function*(){try{var e=yield W.getListTaskSLA(P.id);e&&T(S.ticketActions.setDataListRecipientsSLA(e))}catch(e){}})),function(){return $.apply(this,arguments)}),X=(Y=(0,r.default)((function*(){try{if(!P.modelerId)return;var e=null==P?void 0:P.formData.find((function(e){return!e.userTaskId})),t=yield W.getFormDetailById(null==e?void 0:e.eformId,C);t&&T(S.ticketActions.setFormData(t))}catch(e){}})),function(){return Y.apply(this,arguments)}),Q=(K=(0,r.default)((function*(){try{var e=yield H.getModeler(P.modelerId,C);e&&T(S.ticketActions.setModeler(e))}catch(e){}})),function(){return K.apply(this,arguments)}),Z=function(e){var t=JSON.parse(e.nativeEvent.data);switch(console.log(t),null==t?void 0:t.action){case p.ACTION_TYPES.SHOW_USERTASK_INFO:return void D.navigate(d.NavigationName.ReviewFlow,{dataUserTask:t.data});case p.ACTION_TYPES.SHOW_ECONTRACT_INFO:return void D.navigate(d.NavigationName.ReviewEcontractFlow,{dataUserTask:t.data,isFinish:!0});case p.ACTION_TYPES.SHOW_EXECUTOR_USER:return R(t.data),void F(!0);case p.ACTION_TYPES.SHOW_EID_INFO:return void D.navigate(d.NavigationName.ReviewEIDScreen,{dataUserTask:t.data});case p.ACTION_TYPES.CREATE_ECONTRACT_ENV:return void D.navigate(d.NavigationName.ReviewEcontractFlow,{dataUserTask:t.data,isFinish:!1});case p.ACTION_TYPES.SHOW_COLLABO_INFO:return void D.navigate(d.NavigationName.ReviewEcollaboFlow,{dataUserTask:t.data});default:return}},ee=function(){return 1===t?`${null==P?void 0:P.id}?_typeView=mine&access_token=${C}`:`${null==P?void 0:P.id}?_recipientDetailsId=${i}&_userTaskId=${n}&_typeView=required&access_token=${C}`};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(l.View,{style:{flex:1},children:1===t?(0,j.jsx)(s.default,{startInLoadingState:!0,source:{uri:f.BASE_URL_TICKET+ee()},onMessage:Z},N):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(s.default,{startInLoadingState:!0,source:{uri:f.BASE_URL_TICKET+ee()},onMessage:Z},N)})}),(0,j.jsx)(h.default,{title:b("TK.listUser"),isVisible:_,onClose:function(){return F(!1)},renderContent:(0,j.jsx)(l.FlatList,{data:E,keyExtractor:function(e){return e.id},renderItem:function(e){var t,n,i=e.item;return(0,j.jsxs)(l.View,{style:{flexDirection:"row",columnGap:10,alignItems:"center",marginBottom:20},children:[(0,j.jsx)(y.Avatar,{source:{uri:i.avatar||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,j.jsxs)(l.View,{style:{flex:1},children:[(0,j.jsx)(m.default,{style:{flex:1},children:""+i.firstName+i.lastName}),(0,j.jsx)(m.default,{children:(null==i||null==(t=i.recipient)||null==(n=t.contact)?void 0:n.email)||"---"})]})]})}})})]})}},7006:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(7005),a=i(n(93238)),o=n(20880),l=n(14740),s=n(47671);t.default=function(){var e,t,n=(0,l.useRoute)(),i=null!=(e=null==n||null==(t=n.params)?void 0:t.url)?e:"";return(0,s.jsx)(r.SafeAreaView,{edges:["bottom","top"],style:{flex:1,backgroundColor:"#fff"},children:(0,s.jsx)(a.default,{startInLoadingState:!0,injectedJavaScript:o.String.SCRIPT_SCALE_WEBVIEW,source:{uri:i}})})}},89076:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),l=n(87841),s=i(n(76456)),u=n(7005),c=n(41995),d=n(46317),f=i(n(75672)),p=n(35708),h=i(n(24541)),y=i(n(81924)),m=n(14740),v=n(20880),g=i(n(77389)),S=n(12638),x=n(60596),j=n(2884),w=n(40851),b=i(n(41778)),D=i(n(99746)),T=n(88e3),P=n(47671);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}t.default=function(){var e=(0,j.useTranslation)().t,t=(0,m.useNavigation)(),n=(0,o.useState)(1),i=(0,a.default)(n,2),C=i[0],I=i[1],k=(0,o.useState)(0),_=(0,a.default)(k,2),F=_[0],O=_[1],M=(0,o.useState)([]),E=(0,a.default)(M,2),R=E[0],z=E[1],V=(0,o.useState)([]),B=(0,a.default)(V,2),A=B[0],L=B[1],N=(0,o.useState)([]),U=(0,a.default)(N,2),W=U[0],H=U[1],G=(0,S.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,$=(0,S.useAppSelector)((function(e){return e.common})).accessToken,Y=(0,w.useReviewServices)();(0,o.useEffect)((function(){re(),ae()}),[]),(0,o.useEffect)((function(){oe(C)}),[C]);var K,q,J,X,Q,Z,ee,te,ne,ie,re=(K=(0,r.default)((function*(){try{var e=yield Y.getListFileByTicketId(G.id);if((null==e?void 0:e.length)>0){var t={ticketId:null==G?void 0:G.id,fileId:null},n=yield Y.getInfoFile(t,$);if(n){var i=n.map((function(t){var n=e.find((function(e){return e.id===t.resourceId}));return n?Object.assign({},t,{notionId:n.notionId,name:n.name,id:n.id}):t}));le(i)}}}catch(e){}})),function(){return K.apply(this,arguments)}),ae=(q=(0,r.default)((function*(){try{var e=yield Y.getStatusParty(null==G?void 0:G.id,$);if(e){var t,n=null==(t=e.party)?void 0:t.recipients,i=yield Y.getListFormIdByTicketId(null==G?void 0:G.id);if(!i)return;Promise.all(i.map((function(e){return Y.getFormERequest({versionId:e.versionId},$)}))).then((function(e){se(null==e?void 0:e.map((function(e){var t;return Object.assign({},e,{userTaskId:null==i||null==(t=i.find((function(t){return t.versionId===e.versionId})))?void 0:t.userTaskId})})),n)}))}}catch(e){console.log("error",e)}})),function(){return q.apply(this,arguments)}),oe=(J=(0,r.default)((function*(e){try{var t={size:3,page:e-1,sort:"createdDate,desc",ticketId:null==G?void 0:G.id},n=yield Y.getListFileRelative(t,$);if(n){var i;if(0===(null==n||null==(i=n.data)?void 0:i.length))return void(e>1?I(e-1):(H([]),O(0)));O(null==n?void 0:n.totalRecords),ue(null==n?void 0:n.data)}}catch(e){}})),function(e){return J.apply(this,arguments)}),le=function(e){var t=e.map((function(e,t){var n;return{STT:String(t+1),keyName:(0,P.jsx)(h.default,{style:s.default.txtText,numberOfLines:1,children:null==e?void 0:e.name}),createdBy:e.createdBy,documentSize:p.CommonUtils.getSize(e.documentSize),type:null==e||null==(n=e.keyName)?void 0:n.split(".").slice(-1)[0],lastModifiedDate:p.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate),action:ve(!0,e)}}));z(t)},se=function(e,n){var i=e.map((function(e,i){var r,a;return{STT:String(i+1),keyName:(0,P.jsx)(l.TouchableOpacity,{onPress:function(){return t.navigate(v.NavigationName.ViewFormScreen,{isOnlyView:!0,readOnly:!0,versionId:e.versionId,data:{_userTaskId:e.userTaskId,_ticketId:G.id,formId:e.formId}})},children:(0,P.jsx)(h.default,{style:s.default.txtText,numberOfLines:1,children:null==e?void 0:e.formName})}),createdBy:e.createdBy,notionName:null!=(r=null==n||null==(a=n.find((function(t){return e.userTaskId==t.id})))?void 0:a.notionName)?r:"Form quy trình"}}));L(i)},ue=function(e){var t=e.map((function(e,t){var n,i;return{STT:String(3*(C-1)+1+t),keyName:(0,P.jsx)(h.default,{style:s.default.txtText,numberOfLines:1,children:null==e?void 0:e.fileName}),createdBy:e.createdBy,documentSize:p.CommonUtils.getSize(e.size),type:null==e||null==(n=e.fileName)||null==(i=n.split("."))?void 0:i.pop(),lastModifiedDate:p.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate),action:ve(!1,e)}}));H(t)},ce=(X=(0,r.default)((function*(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1?arguments[1]:void 0;try{g.default.show({type:"info",text1:e("CM.noti"),text2:e("TK.viewFile")});var r=new FormData,a=i.name;a=n?i.keyName:i.name;var o=i.bucketName;if(!i.bucketName){var l,s=null==i||null==(l=i.name)?void 0:l.split(".s3-hfx03.fptcloud.com:443/");a=s[1],o=s[0].split("https://")[1]}r.append("keyName",a),r.append("bucketName",o);var u=yield Y.viewFile(r,$);1==(null==u?void 0:u.code)?t.navigate(v.NavigationName.ViewFileScreen,{url:u.message}):g.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.error")})}catch(t){g.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.error")})}})),function(){return X.apply(this,arguments)}),de=(Q=(0,r.default)((function*(t){try{yield Y.deleteFileRelative(t,$),yield oe(C),g.default.show({type:"success",text1:e("CM.noti"),text2:e("TK.deleteFileSuccess")})}catch(t){console.log(t),g.default.show({type:"error",text1:e("CM.noti"),text2:e("TK.deleteFileErr")})}})),function(e){return Q.apply(this,arguments)}),fe=(Z=(0,r.default)((function*(){try{var t=yield p.CommonUtils.handleGetFile();if(!t)return;var n=new FormData;n.append("uploadFile",t),n.append("attachmentJson",JSON.stringify({ticketId:null==G?void 0:G.id})),g.default.show({type:"info",text1:e("CM.noti"),text2:e("Đang tải file, vui lòng chờ")}),(yield Y.uploadFileRelative(n,$))?(yield oe(C),g.default.show({type:"success",text1:e("CM.noti"),text2:e("TK.uploadFileSuccess")})):g.default.show({type:"error",text1:e("CM.noti"),text2:e("TK.uploadFileErr")})}catch(t){console.log(t),g.default.show({type:"error",text1:e("CM.noti"),text2:e("TK.uploadFileErr")})}})),function(){return Z.apply(this,arguments)}),pe=(ee=(0,r.default)((function*(e,t){var n=e.fileName;n=t?e.keyName.replace("/","_"):e.fileName;var i=`${"android"===l.Platform.OS?b.default.DownloadDirectoryPath:b.default.DocumentDirectoryPath}/${n}`;t?yield me(i,e.id,null==e?void 0:e.notionId):e.bucketName?yield ye(i,e.id):yield he(i,e.name)})),function(e,t){return ee.apply(this,arguments)}),he=(te=(0,r.default)((function*(t,n){var i={fromUrl:n,toFile:t,background:!0,begin:function(e){console.log("Download has begun",e)},progress:function(e){e.bytesWritten,e.contentLength},connectionTimeout:5e3};try{200===(yield b.default.downloadFile(i).promise).statusCode?(yield l.Share.share({url:t})).action==l.Share.dismissedAction?g.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")}):g.default.show({type:"success",text1:e("CM.noti"),text2:e("CM.downloadSuccess")}):g.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}catch(t){g.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}})),function(e,t){return te.apply(this,arguments)}),ye=(ne=(0,r.default)((function*(t,n){try{var i=yield D.default.fetch("GET",`${T.BASE_URL}/services/erequest/api/attachments/download-file?attachmentId=${n}`).then((function(e){return 200==e.info().status?e.base64():null})).catch((function(){return null}));i?(yield b.default.writeFile(t,i,"base64"),(yield l.Share.share({url:t})).action==l.Share.dismissedAction?g.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")}):g.default.show({type:"success",text1:e("CM.noti"),text2:e("CM.downloadSuccess")})):g.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}catch(t){g.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}})),function(e,t){return ne.apply(this,arguments)}),me=(ie=(0,r.default)((function*(t,n,i){try{var r=yield D.default.fetch("GET",`${T.BASE_URL}/services/erequest/api/tickets/${G.id}/userTaskId/${i}/fileId/${n}/content`).then((function(e){return 200==e.info().status?e.base64():null})).catch((function(){return null}));r?(yield b.default.writeFile(t,r,"base64"),(yield l.Share.share({url:t})).action==l.Share.dismissedAction?g.default.show({type:"error",text2:e("CM.downloadFail")}):g.default.show({type:"success",text2:e("CM.downloadSuccess")})):g.default.show({type:"error",text2:e("CM.downloadFail")})}catch(t){g.default.show({type:"error",text2:e("CM.downloadFail")})}})),function(e,t,n){return ie.apply(this,arguments)}),ve=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return(0,P.jsxs)(l.View,{style:s.default.ctnAction,children:[(0,P.jsx)(l.TouchableOpacity,{onPress:function(){return ce(e,t)},hitSlop:(0,c.SizeDP)(15),children:(0,P.jsx)(d.IconView,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)})}),(0,P.jsx)(l.TouchableOpacity,{onPress:function(){return pe(t,e)},hitSlop:(0,c.SizeDP)(15),children:(0,P.jsx)(d.IconDownload,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)})}),!e&&t.allowDeleted&&(0,P.jsx)(l.TouchableOpacity,{onPress:function(){var e;return de(null==t||null==(e=t.id)?void 0:e.toString())},hitSlop:(0,c.SizeDP)(15),children:(0,P.jsx)(d.IconTrash,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)})})]})};return(0,P.jsx)(u.SafeAreaView,{style:{flex:1},edges:[],children:(0,P.jsxs)(l.ScrollView,{showsVerticalScrollIndicator:!1,children:[(0,P.jsxs)(l.View,{style:s.default.ctnForm,children:[(0,P.jsxs)(l.View,{style:s.default.ctnView,children:[(0,P.jsx)(h.default,{style:s.default.txtTitle,children:e("TK.docRelative")}),(G.status===x.Status.processing||G.ticketStatus===x.Status.processing)&&(0,P.jsx)(l.TouchableOpacity,{onPress:fe,hitSlop:(0,c.SizeDP)(15),children:(0,P.jsx)(d.IconUpload,{width:(0,c.SizeDP)(24),height:(0,c.SizeDP)(24)})})]}),(0,P.jsx)(f.default,{stickyLeft:!0,stickyColumnLeftIndex:1,tableHeaders:["STT","keyName","createdBy","documentSize","type","lastModifiedDate","action"],tableData:W}),F>0&&(0,P.jsx)(y.default,{collectionSize:F,currentPage:C,pageSize:3,onPageChange:function(e){return I(e)}})]}),(0,P.jsxs)(l.View,{style:s.default.ctnForm,children:[(0,P.jsx)(h.default,{style:s.default.txtTitle,children:e("TK.templateInfo")}),(0,P.jsx)(f.default,{stickyLeft:!0,stickyColumnLeftIndex:1,tableHeaders:["STT","keyName","createdBy","documentSize","type","lastModifiedDate","action"],tableData:R})]}),(0,P.jsxs)(l.View,{style:s.default.ctnForm,children:[(0,P.jsx)(h.default,{style:s.default.txtTitle,children:e("TK.templateForm")}),(0,P.jsx)(f.default,{stickyLeft:!1,tableHeaders:["STT","keyName","createdBy","notionName"],tableData:A})]})]})})}},76456:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({container:{justifyContent:"center",alignItems:"center"},txtTitle:{fontSize:r.FontSize.FontBase,fontFamily:r.Font.InterSemiBold600,color:r.Color.colorText},ctnForm:{marginLeft:(0,a.SizeDP)(8),marginTop:(0,a.SizeDP)(8),rowGap:(0,a.SizeDP)(15)},ctnAction:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,a.SizeDP)(10)},txtText:{fontSize:r.FontSize.FontTiny,fontFamily:r.Font.InterRegular400,color:"#366ae2"},ctnView:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginRight:(0,a.SizeDP)(12)}})},27163:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),o=i(n(93238)),l=n(88e3),s=n(12638),u=n(7005),c=n(20880),d=n(87841),f=n(2543),p=n(47671);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}t.default=function(){var e,t,n=(0,a.useRef)(null),i=(0,s.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,h=(0,a.useState)({width:d.Dimensions.get("screen").width,height:d.Dimensions.get("screen").height}),y=(0,r.default)(h,2),m=(y[0],y[1]);(0,a.useEffect)((function(){var e=d.Dimensions.addEventListener("change",(function(e){var t=e.screen,n={width:t.width,height:t.height};m(n)}));return function(){return e.remove()}}),[]);var v=function(){var e,t=(0,f.get)(i,"formData[0].formData",null),r=`window.postMessage('${JSON.stringify({type:"postFormEdit",data:t?JSON.parse(t):null,isReadonly:!0}).replace(/'/g,"\\'")}', '*');`;null==n||null==(e=n.current)||e.injectJavaScript(r)};return(0,p.jsx)(u.SafeAreaView,{style:{flex:1},edges:[],children:(0,p.jsx)(o.default,{nestedScrollEnabled:!0,ref:n,startInLoadingState:!0,onMessage:function(e){var t=JSON.parse(e.nativeEvent.data);"e-from"===(null==t?void 0:t.result)&&v()},javaScriptEnabled:!0,injectedJavaScript:c.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,webviewDebuggingEnabled:!0,source:{uri:l.BASE_URL_FORM+(null==i||null==(e=i.formData)||null==(t=e.filter((function(e){return(0,f.isNull)(e.userTaskId)}))[0])?void 0:t.version)}})})}},96237:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HISTORY_ACTION=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),s=n(87841),u=i(n(24997)),c=i(n(24541)),d=n(12638),f=n(35708),p=n(7005),h=n(41995),y=n(2884),m=n(2543),v=n(11671),g=n(32207),S=n(47671);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}var j=t.HISTORY_ACTION={CREATE:"add",PUBLIC:"public",UNPUBLIC:"unpublic",ACTIVE:"active",INACTIVE:"inactive",UPDATE:"edit",DELETE:"delete",ASSIGN:"assign",REQUEST_APP:"request_approve",COMMENT:"comment",REJECT:"reject_approve",REJECT_CONSIDER:"reject_consider",AUTHORITY:"authority",REQUEST_UPDATE:"request_update",SIGNING:"signing",UPLOAD:"upload",CANCEL:"cancel",EDIT_COMMENT:"edit_comment",REJECT_APPROVE:"reject_approve",REVIEW_CONDUCT:"review_conduct"};t.default=function(){var e=(0,y.useTranslation)().t,t=(0,d.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,n=(0,l.useState)(0),i=(0,o.default)(n,2),x=i[0],w=i[1],b=(0,l.useState)(0),D=(0,o.default)(b,2),T=D[0],P=D[1],C=(0,l.useState)(!1),I=(0,o.default)(C,2),k=I[0],_=I[1],F=(0,l.useState)([]),O=(0,o.default)(F,2),M=O[0],E=O[1],R=(0,d.useAppSelector)((function(e){return e.common})).accessToken,z=(0,v.useTicketServices)();(0,l.useEffect)((function(){(0,a.default)((function*(){yield B(x)}))()}),[x]);var V,B=(V=(0,a.default)((function*(e){try{var n=yield z.getTicketHistories(e,t.id,R);E(0===e?null==n?void 0:n.data:[].concat((0,r.default)(M),(0,r.default)(null==n?void 0:n.data))),P(n.totalRecords)}catch(e){console.error(e)}})),function(e){return V.apply(this,arguments)}),A=function(e,t,n){return(0,S.jsx)(s.View,{style:[{backgroundColor:e},u.default.ctnViewIcon],children:(0,S.jsx)(g.Icon,{fill:n,name:t,width:15,height:15})})},L=function(e){switch(e){case j.CREATE:return A("#F2ECFD","plus","#6F2CED");case j.REQUEST_APP:return A("#E8F7EF","file","#39AC6D");case j.COMMENT:return A("#f3f5f8","message-circle","");case j.REJECT:return A("#FCEEED","close","#E14337");case j.REJECT_CONSIDER:return A("#FCEEED","minus","#E14337");case j.AUTHORITY:return A("#F2ECFD","swap","#6F2CED");case j.REQUEST_UPDATE:return A("#FFF3EB","arrow-circle-left","#FC6B03");case j.SIGNING:return A("#E8F7EF","edit","#39AC6D");case j.UPLOAD:return A("#FFF3EB","cloud-upload-outline","#FC6B03");case j.EDIT_COMMENT:return A("#f3f5f8","edit-2-outline","");case j.REJECT_APPROVE:return A("#FCEEED","close","#E14337");case j.REVIEW_CONDUCT:return A("#E8F7EF","checkmark","#39AC6D");default:return(0,S.jsx)(s.View,{style:u.default.ctnViewIcon})}};return(0,S.jsx)(p.SafeAreaView,{style:u.default.container,edges:["bottom"],children:M.length>0&&(0,S.jsx)(s.View,{children:(0,S.jsx)(s.FlatList,{keyExtractor:function(e){return e.id},refreshing:k,onRefresh:function(){0!==x&&_(!0),w(0)},data:M,onEndReached:function(){M.length<T&&w(x+1)},onEndReachedThreshold:.5,renderItem:function(t){var n=t.item,i=t.index;return(0,S.jsx)(S.Fragment,{children:!(0,m.isNull)(n.createdBy)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(s.View,{style:u.default.ctnItem,children:[L(n.action),(0,S.jsxs)(s.View,{style:{rowGap:(0,h.SizeDP)(4)},children:[(0,S.jsx)(c.default,{style:u.default.title,children:e(`TK.transaction-history.action.${n.action}`)}),(0,S.jsx)(s.View,{style:u.default.ctnDes,children:(0,S.jsx)(c.default,{style:u.default.Des,children:`${f.DateUtils.convertDateToDDMMYYYY_H_M(n.createdDate)} ${e("TK.by")} ${n.createdBy}`})})]})]}),M.length-1!==i&&(0,S.jsx)(s.View,{style:u.default.tabHoz})]})})}})})})}},24997:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({container:{flex:1},ctnItem:{paddingHorizontal:(0,r.SizeDP)(16),paddingVertical:(0,r.SizeDP)(8),flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:(0,r.SizeDP)(16)},ctnDes:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:(0,r.SizeDP)(10)},ctnAction:{width:(0,r.SizeDP)(24),height:(0,r.SizeDP)(24),backgroundColor:"blue",borderRadius:(0,r.SizeDP)(12),justifyContent:"center",alignItems:"center"},tabHoz:{width:(0,r.SizeDP)(2),height:(0,r.SizeDP)(26),backgroundColor:"rgba(0, 53, 128, 0.15)",marginLeft:(0,r.SizeDP)(28)},title:{fontSize:r.default.FontSmall,fontFamily:a.Font.InterSemiBold600,color:a.Color.colorText},Des:{fontSize:r.default.FontTiny,fontFamily:a.Font.InterRegular400,color:a.Color.Text07},ctnViewIcon:{width:24,height:24,borderRadius:12,alignItems:"center",justifyContent:"center"}})},32251:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),l=n(87841),s=n(12638),u=i(n(75672)),c=n(35708),d=n(2884),f=n(32207),p=i(n(24541)),h=i(n(19767)),y=n(60596),m=n(11671),v=n(47671);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}t.default=function(){var e=(0,d.useTranslation)().t,t=(0,o.useState)(),n=(0,a.default)(t,2),i=n[0],g=n[1],S=(0,o.useState)(0),x=(0,a.default)(S,2),j=x[0],w=x[1],b=(0,s.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,D=(0,m.useTicketServices)(),T=(0,o.useState)({width:l.Dimensions.get("window").width,height:l.Dimensions.get("window").height}),P=(0,a.default)(T,2),C=P[0],I=P[1];(0,o.useEffect)((function(){var e=l.Dimensions.addEventListener("change",(function(e){var t=e.window;I({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]),(0,o.useEffect)((function(){_()}),[]);var k,_=(k=(0,r.default)((function*(){var e=yield D.getSla(b.id);e&&O(e)})),function(){return k.apply(this,arguments)}),F=function(e){switch(M(e)){case y.Status.processing:return{color:"#7F43EF",bgColor:"#F2ECFD"};case y.Status.accepted:case y.Status.completed:case"onTime":return{color:"#39AC6D",bgColor:"#E8F7EF"};case y.Status.voided:case y.Status.rejected:case"late":return{color:"#F05959",bgColor:"rgba(251, 213, 213, 1)"};default:return{}}},O=function(t){var n=t.map((function(t,n){var i,r,a;return{STT:String(n+1),notionName:t.notionName||"---",createdBy:t.owner,status:(0,v.jsx)(l.View,{style:{backgroundColor:null==(i=F(t))?void 0:i.bgColor,borderRadius:4,paddingHorizontal:4,paddingVertical:2},children:(0,v.jsx)(p.default,{style:{color:null==(r=F(t))?void 0:r.color,fontSize:12},children:e(`TK.${M(t)}`)})}),actualStartSate:t.estimateDate?c.DateUtils.convertDateToDDMMYYYY_H_M(t.estimateDate):"---",eventStartDate:t.startDate?c.DateUtils.convertDateToDDMMYYYY_H_M(t.startDate):"---",executionTime:t.totalTime?t.totalTime:"---",sla:(0,v.jsx)(p.default,{style:{color:null==(a=F(t))?void 0:a.color,fontSize:12},children:z(null==t?void 0:t.estimateDate,null==t?void 0:t.startDate,null==t?void 0:t.finishDate)})}}));g(n)},M=function(e){return"accepted"!=e.status&&"rejected"==b.status?"rejected":"accepted"==e.status&&e.delayTime?"late":"accepted"==e.status&&e.estimateDate?"onTime":e.status},E=function(){if(new Date(b.finishDate)<new Date(b.estimateDate)){var e=R(b.finishDate,b.createdDate)/R(b.estimateDate,b.createdDate);return{positionOfEstimateDate:{top:-20,right:.1*C.width/2-10},positionOfPopupEstimateDate:{top:-58,right:.1*C.width/2-10},positionOfFinishDate:{bottom:-20,right:.95*C.width-.1*C.width/2-e*C.width*.85-10},positionOfPopupFinishDate:{bottom:-58,right:e<.6?.95*C.width-.1*C.width/2-e*C.width*.85-10-j+30:.95*C.width-.1*C.width/2-e*C.width*.85-10},width:e*C.width*.85,bgColor:"completed"===b.ticketStatus?"#d9f2e4":"#40bf79",typeOfArrow:{estimateDate:"arrow-down",finishDate:"arrow-up"}}}var t=R(b.estimateDate,b.createdDate)/R(b.finishDate,b.createdDate);return{positionOfEstimateDate:{bottom:-20,right:.95*C.width-.1*C.width/2-t*C.width*.85-10},positionOfPopupEstimateDate:{bottom:-58,right:t<.6?.95*C.width-.1*C.width/2-t*C.width*.85-10-j+30:.95*C.width-.1*C.width/2-t*C.width*.85-10},positionOfFinishDate:{top:-20,right:.1*C.width/2-10},positionOfPopupFinishDate:{top:-58,right:.1*C.width/2-10},width:t*C.width*.85,bgColor:"completed"===b.ticketStatus?"#d9f2e4":"#40bf79",typeOfArrow:{estimateDate:"arrow-up",finishDate:"arrow-down"}}},R=function(e,t){var n=0;if(e&&t){var i=new Date(e);n=new Date(t).getTime()-i.getTime()}return n},z=function(e,t,n){var i,r=R(t,n),a=R(t,e);i=Math.abs(a-r);var o=Math.floor(i/864e5),l=Math.floor((i-24*o*60*60*1e3)/36e5),s=Math.floor((i-24*o*60*60*1e3-60*l*60*1e3)/6e4),u=Math.floor((i-24*o*60*60*1e3-60*l*60*1e3-60*s*1e3)/1e3);return i?o+"d"+l%60+"h"+s%60+"m"+u+"s":"---"};return(0,v.jsx)(l.View,{style:{flex:1},children:(0,v.jsx)(l.ScrollView,{children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.View,{style:h.default.ctnSLA,children:(0,v.jsxs)(l.View,{style:[{width:.95*C.width},h.default.ctnBody],children:[(0,v.jsx)(l.TouchableOpacity,{style:{position:"absolute",top:-20,left:.1*C.width/2-10,zIndex:1},children:(0,v.jsx)(f.Icon,{width:20,height:20,name:"arrow-down"})}),(0,v.jsxs)(l.View,{style:[{top:-58,left:.1*C.width/2-20},h.default.ctnDate],children:[(0,v.jsxs)(p.default,{style:h.default.size,children:[e("SR.created_at"),": "]}),(0,v.jsx)(p.default,{style:h.default.size,children:c.DateUtils.convertDateToDDMMYYYY_H_M(b.createdDate)})]}),(0,v.jsx)(l.TouchableOpacity,{style:[{position:"absolute",zIndex:1},E().positionOfEstimateDate],children:(0,v.jsx)(f.Icon,{width:20,height:20,name:E().typeOfArrow.estimateDate})}),(0,v.jsxs)(l.View,{style:[E().positionOfPopupEstimateDate,h.default.ctnDate],children:[(0,v.jsxs)(p.default,{style:h.default.size,children:[e("TK.estimateDate"),": "]}),(0,v.jsx)(p.default,{style:h.default.size,children:c.DateUtils.convertDateToDDMMYYYY_H_M(b.estimateDate)})]}),"completed"===b.ticketStatus&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.TouchableOpacity,{style:[{position:"absolute",zIndex:1},E().positionOfFinishDate],children:(0,v.jsx)(f.Icon,{width:20,height:20,name:E().typeOfArrow.finishDate})}),(0,v.jsxs)(l.View,{onLayout:function(e){w(e.nativeEvent.layout.width),console.log(e.nativeEvent.layout.width)},style:[E().positionOfPopupFinishDate,h.default.ctnDate],children:[(0,v.jsxs)(p.default,{style:h.default.size,children:[e("TK.finishDate"),": "]}),(0,v.jsx)(p.default,{style:h.default.size,children:c.DateUtils.convertDateToDDMMYYYY_H_M(b.finishDate)})]})]}),(0,v.jsx)(l.View,{style:h.default.line}),(0,v.jsx)(l.View,{style:{height:30,backgroundColor:"#40bf79",width:.85*C.width},children:(0,v.jsx)(l.View,{style:{height:30,backgroundColor:E().bgColor,width:E().width}})}),(0,v.jsx)(l.View,{style:h.default.line})]})}),(0,v.jsx)(f.Divider,{style:{marginVertical:10}}),(0,v.jsx)(u.default,{tableHeaders:["STT","notionName","createdBy","status","actualStartSate","eventStartDate","executionTime","sla"],tableData:i||[],stickyLeft:!0,stickyColumnLeftIndex:1})]})})})}},19767:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({container:{justifyContent:"center",alignItems:"center",backgroundColor:"#2c3e50"},line:{height:30,backgroundColor:"#fff",width:3},ctnSLA:{alignItems:"center",justifyContent:"center",marginTop:80,marginBottom:80},ctnBody:{height:30,backgroundColor:"#d9d9d9",borderRadius:8,alignItems:"center",justifyContent:"center",flexDirection:"row",position:"relative"},ctnDate:{position:"absolute",zIndex:1,borderRadius:8,borderWidth:1,borderColor:"#cfb9f9",paddingHorizontal:6,paddingVertical:8,backgroundColor:"#f2ecfd"},size:{fontSize:11}})},90487:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),l=n(87841),s=n(35708),u=n(12638),c=n(46317),d=n(41995),f=i(n(75672)),p=i(n(81924)),h=n(2884),y=n(11671),m=i(n(24541)),v=i(n(37899)),g=n(60596),S=i(n(97667)),x=n(47671);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}t.default=function(){var e=(0,h.useTranslation)().t,t=(0,o.useState)([]),n=(0,a.default)(t,2),i=n[0],j=n[1],w=(0,o.useState)(1),b=(0,a.default)(w,2),D=b[0],T=b[1],P=(0,u.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,C=(0,y.useTicketServices)(),I=(0,o.useState)(1),k=(0,a.default)(I,2),_=k[0],F=k[1],O=(0,u.useAppSelector)((function(e){return e.common})).accessToken;(0,o.useEffect)((function(){E(_)}),[_]);var M,E=(M=(0,r.default)((function*(e){try{var t=yield C.getTicketRelatives(P.id,e-1,8,O);V(t.content),T(t.totalElements)}catch(e){}})),function(e){return M.apply(this,arguments)}),R=function(e){switch(e){case g.Status.completed:return z(v.default.completed,v.default.completed01,g.Status.completed);case g.Status.draft:return z(v.default.draft,v.default.draft01,g.Status.draft);case g.Status.voided:return z(v.default.voided,v.default.voided01,g.Status.voided);case g.Status.rejected:return z(v.default.rejected,v.default.rejected01,g.Status.rejected);case g.Status.processing:return z(v.default.processing,v.default.processing01,g.Status.processing)}},z=function(t,n,i){return(0,x.jsx)(l.View,{style:[{backgroundColor:n},S.default.ctnContent],children:(0,x.jsx)(m.default,{style:{color:t},children:e(`TK.${i}`)})})},V=function(e){var t=e.map((function(e,t){return{STT:String(8*(_-1)+1+t),title:null==e?void 0:e.title,serviceName:e.serviceName,ticketStatus:R(e.ticketStatus),createdBy:null==e?void 0:e.createdBy,createdDate:s.DateUtils.convertDateToDDMMYYYY_H_M(e.createdDate),lastModifiedDate:s.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate)}}));j(t)};return(0,x.jsx)(l.View,{style:{flex:1},children:i.length>0?(0,x.jsx)(l.ScrollView,{children:(0,x.jsxs)(l.View,{style:{flex:1},children:[(0,x.jsx)(l.View,{style:{flex:1,paddingVertical:(0,d.SizeDP)(10),marginLeft:(0,d.SizeDP)(10)},children:(0,x.jsx)(f.default,{tableData:i,tableHeaders:["STT","title","serviceName","ticketStatus","createdBy","createdDate","lastModifiedDate"]})}),D>0&&(0,x.jsx)(p.default,{collectionSize:D,currentPage:_,pageSize:8,onPageChange:function(e){return F(e)}})]})}):(0,x.jsxs)(l.View,{style:{alignItems:"center",justifyContent:"center",flex:1},children:[(0,x.jsx)(c.IconEmpty,{width:(0,d.SizeDP)(100),height:(0,d.SizeDP)(100)}),(0,x.jsx)(m.default,{children:e("CM.emptyData")})]})})}},97667:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841);t.default=i.StyleSheet.create({ctnContent:{paddingHorizontal:8,paddingVertical:4,borderRadius:4,alignItems:"center",justifyContent:"center"}})},36913:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=n(21527),o=i(n(73639)),l=i(n(27163)),s=i(n(96237)),u=i(n(90487)),c=i(n(97433)),d=i(n(89076)),f=i(n(32251)),p=i(n(24541)),h=n(87841),y=n(41995),m=n(2884),v=n(47671);t.default=function(e){var t=e.selectTabBottom,n=e.userTaskId,i=e.recipientDetailsId,g=e.isRealoadWebview,S=(0,a.useState)({key:"background",title:"Tổng quan"}),x=(0,r.default)(S,2),j=x[0],w=x[1],b=(0,a.useRef)(null),D=(0,a.useState)({width:h.Dimensions.get("screen").width,height:h.Dimensions.get("screen").height}),T=(0,r.default)(D,2),P=T[0],C=T[1];(0,a.useEffect)((function(){var e=h.Dimensions.addEventListener("change",(function(e){var t=e.screen;C({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]);var I=(0,m.useTranslation)().t,k=(0,a.useState)([{key:"background",title:"Tổng quan"},{key:"flow",title:"Thông tin giao dịch"},{key:"document",title:"Tài liệu đính kèm"},{key:"hsitoryTicket",title:"Lịch sử giao dịch"},{key:"ticketRelative",title:"Giao dịch liên quan"},{key:"sla",title:"Thông tin SLA"}]),_=(0,r.default)(k,1)[0],F=function(e){var t,n=Math.floor(e);null==b||null==(t=b.current)||t.scrollToIndex({animated:!0,index:""+n,viewOffset:P.width/3})};return(0,v.jsxs)(h.View,{style:{flex:1},children:[(0,v.jsx)(h.View,{children:(0,v.jsx)(h.FlatList,{ref:b,horizontal:!0,data:_,keyExtractor:function(e,t){return String(e.key)},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,initialScrollIndex:0,renderItem:function(e){var t=e.item,n=e.index;return(0,v.jsx)(h.TouchableOpacity,{style:[c.default.ctnMainTab,j.key===t.key&&c.default.activeTab],onPress:function(){w(t),F(n)},children:(0,v.jsx)(p.default,{style:[c.default.tabBar,j.key===t.key&&c.default.colorActive],children:I(`TK.${t.key}`)})})}})}),(0,v.jsx)(h.View,{style:{height:(0,y.SizeDP)(6),backgroundColor:"#F8FAFE"}}),(0,v.jsx)(h.View,{style:{flex:1},children:function(e){switch(e.key){case"background":return(0,v.jsx)(o.default,{userTaskId:n,recipientDetailsId:i,selectTabBottom:t,isRealoadWebview:g});case"flow":return(0,v.jsx)(l.default,{});case"document":return(0,v.jsx)(d.default,{});case"hsitoryTicket":return(0,v.jsx)(s.default,{});case"ticketRelative":return(0,v.jsx)(u.default,{});case"sla":return(0,v.jsx)(f.default,{});default:return(0,v.jsx)(h.View,{})}}(j)})]})}},97433:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=n(41995);t.default=i.StyleSheet.create({tabBar:{fontSize:r.FontSize.FontSmall,fontFamily:r.Font.InterRegular400,textAlign:"center",lineHeight:(0,a.SizeDP)(16)},ctnMainTab:{paddingHorizontal:(0,a.SizeDP)(16),paddingVertical:(0,a.SizeDP)(12)},activeTab:{borderBottomWidth:(0,a.SizeDP)(4),borderBottomColor:r.Color.BgPrimary},colorActive:{color:r.Color.BgPrimary}})},74821:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(7005),a=i(n(93238)),o=n(88e3),l=n(12638),s=n(20880),u=n(14740),c=n(47671);t.default=function(){var e,t,n,i,d,f,p=(0,u.useRoute)(),h=null!=(e=null==p||null==(t=p.params)?void 0:t.selectTabBottom)?e:1,y=null!=(n=null==p||null==(i=p.params)?void 0:i.dataTicket)?n:{},m=(0,l.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,v=(0,l.useAppSelector)((function(e){return e.common})).accessToken;return(0,c.jsx)(r.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:(0,c.jsx)(a.default,{startInLoadingState:!0,injectedJavaScript:s.String.SCRIPT_SCALE_WEBVIEW,source:{uri:o.BASE_URL_TICKET+(1===h?`${m.id}?_typeView=mine&access_token=${v}`:`${m.id}?_recipientDetailsId=${null==y?void 0:y.implementId}&_userTaskId=${null==y||null==(d=y.recipients)||null==(f=d[0])?void 0:f.id}&_typeView=required&access_token=${v}`)}})})}},35648:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),s=n(87841),u=n(2884),c=n(40851),d=i(n(66771)),f=i(n(6663)),p=n(32207),h=i(n(24541)),y=n(12638),m=n(47671);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}t.default=function(e){var t=e.onSelect,n=e.placeholder,i=void 0===n?"TK.select":n,v=(0,u.useTranslation)().t,g=(0,l.useState)(!1),S=(0,o.default)(g,2),x=S[0],j=S[1],w=(0,l.useState)(null),b=(0,o.default)(w,2),D=b[0],T=b[1],P=(0,l.useState)(""),C=(0,o.default)(P,2),I=C[0],k=C[1],_=(0,l.useState)([]),F=(0,o.default)(_,2),O=F[0],M=F[1],E=(0,l.useState)(0),R=(0,o.default)(E,2),z=R[0],V=R[1],B=(0,l.useState)(0),A=(0,o.default)(B,2),L=A[0],N=A[1],U=(0,l.useState)(!1),W=(0,o.default)(U,2),H=W[0],G=W[1],$=(0,y.useAppSelector)((function(e){return e.account})).dataAccount,Y=(0,d.default)(I,500),K=(0,c.useReviewServices)();(0,l.useEffect)((function(){J(0,Y)}),[Y]);var q,J=(q=(0,a.default)((function*(e,t){try{var n={page:e,size:20},i={advanced:!0,orgIn:"/1833/5390/5392/5943",q:t.trim().toLowerCase(),resource:"table_user"},a=yield K.getUserInfoModel(n,i);a&&(M(0===e?a.data.filter((function(e){return e.email!==$.email})):[].concat((0,r.default)(O),(0,r.default)(a.data)).filter((function(e){return e.email!==$.email}))),N(a.totalRecords))}catch(e){}finally{G(!1)}})),function(e,t){return q.apply(this,arguments)});return(0,m.jsxs)(s.View,{style:f.default.container,children:[(0,m.jsxs)(s.View,{style:f.default.selectContainer,children:[(0,m.jsx)(s.TouchableOpacity,{style:f.default.select,onPress:function(){j(!0),k("")},children:(0,m.jsx)(s.Text,{style:f.default.selectText,children:(null==D?void 0:D.email)||v(i)})}),D&&(0,m.jsx)(s.TouchableOpacity,{style:f.default.clearButton,onPress:function(){T(null),t(null)},children:(0,m.jsx)(p.Icon,{name:"close",width:20,height:20})})]}),(0,m.jsx)(s.Modal,{visible:x,animationType:"slide",transparent:!0,children:(0,m.jsx)(s.SafeAreaView,{style:f.default.modalContainer,children:(0,m.jsxs)(s.View,{style:f.default.modalContent,children:[(0,m.jsx)(s.TextInput,{style:f.default.searchInput,placeholder:v("CM.search"),value:I,onChangeText:k}),(0,m.jsx)(s.FlatList,{refreshing:H,onRefresh:function(){G(!0),V(0),J(0,Y)},data:O,renderItem:function(e){var n=e.item;return(0,m.jsxs)(s.TouchableOpacity,{style:f.default.item,onPress:function(){return function(e){T(e),t(e),j(!1)}(n)},children:[(0,m.jsx)(s.Image,{width:32,height:32,borderRadius:16,source:{uri:n.imageUrl||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,m.jsxs)(s.View,{children:[(0,m.jsx)(h.default,{style:f.default.textname,children:n.personalName}),(0,m.jsx)(h.default,{style:f.default.textEmail,children:n.email})]})]})},keyExtractor:function(e){return e.email},onEndReached:function(){O.length<L&&(J(z+1,Y),V(z+1))},onEndReachedThreshold:.5,initialNumToRender:20}),(0,m.jsx)(s.TouchableOpacity,{style:f.default.closeButton,onPress:function(){return j(!1)},children:(0,m.jsx)(s.Text,{style:f.default.closeButtonText,children:v("CM.close")})})]})})})]})}},6859:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(87841),l=i(n(43184)),s=n(2884),u=i(n(54813)),c=i(n(24541)),d=n(12638),f=i(n(94516)),p=i(n(35648)),h=n(11671),y=n(21527),m=i(n(6663)),v=i(n(77389)),g=n(47671);t.default=function(e){var t=e.onClose,n=e.userTaskId,i=e.recipientDetailsId,S=(0,s.useTranslation)().t,x=(0,y.useState)(null),j=(0,a.default)(x,2),w=j[0],b=j[1],D=(0,d.useAppSelector)((function(e){return e.account})).dataAccount,T=(0,d.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,P=(0,h.useTicketServices)(),C=(0,y.useState)(),I=(0,a.default)(C,2),k=I[0],_=I[1];(0,y.useEffect)((function(){M()}),[]);var F,O,M=(F=(0,r.default)((function*(){var e=yield P.getSla(T.id);if(e){var t=e.find((function(e){return e.recipientId==n}));_(t)}})),function(){return F.apply(this,arguments)}),E=(O=(0,r.default)((function*(){var e={ticketId:T.id,recipientId:null,contactId:null,email:null==w?void 0:w.email,name:null==w?void 0:w.personalName,phone:null==w?void 0:w.phone,reason:"null"};(yield P.forwardActionUser(T.id,n,i,e))?(t(),v.default.show({type:"success",text1:S("CM.info"),text2:S("CM.forwardSuccessfully")})):v.default.show({type:"error",text1:S("CM.info"),text2:S("CM.forwardFail")})})),function(){return O.apply(this,arguments)});return(0,g.jsxs)(o.View,{style:{flex:1},children:[(0,g.jsx)(l.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:S("CM.authority"),onPressIconLeft:t}),(0,g.jsxs)(o.View,{style:m.default.ctnBody,children:[(0,g.jsx)(u.default,{label:S("TK.nameJob"),value:null==k?void 0:k.notionName,onChangeText:function(){},disabled:!0}),(0,g.jsxs)(o.View,{style:m.default.group,children:[(0,g.jsx)(c.default,{style:m.default.textTitle,children:S("TK.userAction")}),(0,g.jsxs)(o.View,{style:m.default.ctnImage,children:[(0,g.jsx)(o.Image,{width:32,height:32,borderRadius:16,source:{uri:(null==D?void 0:D.imageUrl)||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,g.jsxs)(o.View,{style:{flex:1},children:[(0,g.jsx)(c.default,{style:m.default.textname,children:`${D.firstName} ${D.lastName}`}),(0,g.jsx)(c.default,{style:m.default.textEmail,children:D.email})]})]})]}),(0,g.jsxs)(o.View,{style:m.default.group,children:[(0,g.jsxs)(c.default,{style:m.default.textTitle,children:[S("TK.selectUserAuthor")," ",(0,g.jsx)(c.default,{style:{color:"#e14337"},children:"*"})]}),(0,g.jsx)(p.default,{onSelect:function(e){b(e)}})]})]}),(0,g.jsxs)(o.View,{style:m.default.ctnFooter,children:[(0,g.jsx)(f.default,{style:{flex:1,backgroundColor:"#F2F5F8"},label:S("CM.labelCancel"),styleLabel:{color:"#00204DB2"},onPress:t}),(0,g.jsx)(f.default,{style:{flex:1},label:S("CM.confirm"),onPress:E})]})]})}},6663:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({ctnBody:{padding:10,flex:1},ctnFooter:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:8,paddingHorizontal:10},group:{rowGap:8,paddingVertical:8},textTitle:{fontSize:12,fontFamily:r.Font.InterMedium500,color:"#00204DF2"},ctnImage:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8,paddingHorizontal:16,paddingVertical:10,backgroundColor:"#e6eaf0",borderRadius:8},textname:{color:"#0b2b55",fontSize:14,fontFamily:r.Font.InterRegular400},textEmail:{color:"#465d7e",fontSize:12,fontFamily:r.Font.InterRegular400},container:{width:"100%"},selectContainer:{flexDirection:"row",alignItems:"center"},select:{flex:1,borderWidth:1,borderColor:"#ccc",borderRadius:8,padding:10,backgroundColor:"#fff"},selectText:{fontSize:14,fontFamily:r.Font.InterRegular400},clearButton:{marginLeft:10,padding:5,backgroundColor:"#f0f0f0",borderRadius:15,width:30,height:30,justifyContent:"center",alignItems:"center"},clearButtonText:{fontSize:16,color:"#333"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalContent:{backgroundColor:"#fff",borderRadius:10,padding:20,width:"90%",maxHeight:"80%"},searchInput:{borderWidth:1,borderColor:"#ccc",borderRadius:5,padding:10,marginBottom:10},item:{padding:10,borderBottomWidth:1,borderBottomColor:"#eee",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",columnGap:10},closeButton:{marginTop:10,padding:10,backgroundColor:"#f0f0f0",borderRadius:5,alignItems:"center"},closeButtonText:{fontSize:14,color:"#333",fontFamily:r.Font.InterSemiBold600}})},7037:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ListAction=void 0;t.ListAction=[{title:"comments",description:"Description for Item",iconName:"message-circle",navigationName:"comments"},{title:"reasonsEdit",description:"Description for Item",iconName:"file",navigationName:""},{title:"authority",description:"Description for Item",iconName:"swap",navigationName:"authority"}]},19691:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(14740),l=n(87841),s=i(n(64455)),u=i(n(24541)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),d=n(21527),f=n(46317),p=i(n(84478)),h=i(n(36913)),y=n(20880),m=n(12638),v=n(97427),g=n(7005),S=(n(60596),n(2884)),x=n(32207),j=i(n(69290)),w=n(7037),b=n(72676),D=n(11595),T=n(45335),P=i(n(55087)),C=n(85653),I=n(11671),k=n(40851),_=i(n(76644)),F=i(n(6859)),O=n(47671);function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}t.default=function(){var e,t,n,i,M,E,R=(0,o.useNavigation)(),z=(0,o.useRoute)(),V=(0,S.useTranslation)().t,B=(0,m.useAppDispatch)(),A=null==z?void 0:z.params,L=A.dataTicketId,N=A.email,U=A.status,W=A.selectTabBottom,H=null!=(e=null==z||null==(t=z.params)?void 0:t.recipientDetailsId)?e:"",G=null!=(n=null==z||null==(i=z.params)?void 0:i.userTaskId)?n:"",$=null!=(M=null==z||null==(E=z.params)?void 0:E.notifyActionType)?M:"",Y=(0,d.useState)(!1),K=(0,a.default)(Y,2),q=K[0],J=K[1],X=(0,d.useState)(1===W?b.dataListStatusTicket.find((function(e){return e.status===U})):D.dataListStatusTicketFollow.find((function(e){return e.status===U}))),Q=(0,a.default)(X,2),Z=Q[0],ee=(Q[1],(0,d.useState)("")),te=(0,a.default)(ee,2),ne=te[0],ie=te[1],re=(0,d.useState)(!1),ae=(0,a.default)(re,2),oe=ae[0],le=ae[1],se=(0,d.useState)(!1),ue=(0,a.default)(se,2),ce=ue[0],de=ue[1],fe=(0,d.useState)(),pe=(0,a.default)(fe,2),he=pe[0],ye=pe[1],me=(0,o.useIsFocused)(),ve=(0,m.useAppSelector)((function(e){return e.ticket})),ge=ve.dataTicketRedux,Se=ve.dataUserTicket,xe=ve.dataOrgin,je=(0,m.useAppSelector)((function(e){return e.account})).dataAccount,we=(0,m.useAppSelector)((function(e){return e.common})).accessToken,be=(0,C.useOriginServices)(),De=(0,I.useTicketServices)(),Te=(0,k.useReviewServices)(),Pe=(0,d.useState)({width:l.Dimensions.get("screen").width,height:l.Dimensions.get("screen").height}),Ce=(0,a.default)(Pe,2),Ie=Ce[0],ke=Ce[1];(0,d.useEffect)((function(){var e=l.Dimensions.addEventListener("change",(function(e){var t=e.screen;ke({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]),(0,d.useEffect)((function(){(0,r.default)((function*(){yield Fe()}))()}),[W]);var _e,Fe=(_e=(0,r.default)((function*(){try{Promise.all([De.getTicketById(L,we),De.getMultiLoginAccount([N],we),Te.getStatusParty(L,we)]).then((e=(0,r.default)((function*(e){var t,n,i,r,a,o=null==(t=e[0])||null==(n=t.orgIn)?void 0:n.split("/")[(null==(i=e[0])||null==(r=i.orgIn)||null==(a=r.split("/"))?void 0:a.length)-1],l=yield be.getOrigin(o,we),s=yield De.getImplementByModelerId(e[0].modelerId);ye(null==s?void 0:s.data.filter((function(e){return e.userTaskId==G})).find((function(e){return"gis08407@vogco.com"==e.email}))),B(v.ticketActions.setDataTicket(e[0])),B(v.ticketActions.setDataUserTicket(e[1][0])),B(v.ticketActions.setDataOrgin(l)),B(v.ticketActions.setStatusPartyRaw(e[2])),"ticket_tag_comment"===$&&ie("comments")})),function(t){return e.apply(this,arguments)})).catch((function(e){console.log(e)}))}catch(e){console.log(e)}var e})),function(){return _e.apply(this,arguments)}),Oe=function(){J(!0)};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(g.SafeAreaView,{style:{backgroundColor:"#fff",flex:1},children:[(0,O.jsx)(l.StatusBar,{barStyle:"dark-content",backgroundColor:y.Color.Transparent}),(0,O.jsx)(p.default,{onPressIconLeft:function(){R.navigate(y.NavigationName.BottomTabs)},contentStyle:{backgroundColor:"#fff"},title:null!=ge&&ge.title?null==ge?void 0:ge.title:"---",renderContentRight:function(){return(0,O.jsx)(l.View,{style:{alignItems:"center",flexDirection:"row"},children:(0,O.jsx)(x.TopNavigationAction,{hitSlop:15,onPress:Oe,icon:(0,O.jsx)(x.Icon,{fill:"#00204D",name:"more-vertical"})})})}}),(0,O.jsx)(x.Divider,{}),(0,O.jsx)(l.View,{style:{flex:1},children:(null==ge?void 0:ge.id)===L&&(0,O.jsx)(h.default,{userTaskId:G,recipientDetailsId:H,selectTabBottom:W,isRealoadWebview:ce})}),me&&(0,O.jsx)(l.View,{children:(0,O.jsx)(T.Portal,{children:(0,O.jsx)(T.FAB.Group,{open:oe,visible:!0,variant:"primary",style:{paddingRight:Ie.width-100},fabStyle:s.default.fabStyle,icon:oe?function(){return(0,O.jsx)(x.Icon,{name:"more-horizontal"})}:function(){return(0,O.jsx)(x.Icon,{name:"more-vertical"})},actions:function(e){if(1===W||!e)return w.ListAction.filter((function(e){return"authority"!==e.navigationName})).map((function(e){return{icon:function(){return(0,O.jsx)(x.Icon,{fill:"#985FF4",name:e.iconName})},label:V(`CM.${e.title}`),labelStyle:s.default.iconStyle,onPress:function(){return ie(e.navigationName)}}}));var t=JSON.parse(null==e?void 0:e.authorizationType),n=w.ListAction;return(null==t?void 0:t.length)>0||(n=w.ListAction.filter((function(e){return"authority"!==e.navigationName}))),n.map((function(e){return{icon:function(){return(0,O.jsx)(x.Icon,{fill:"#985FF4",name:e.iconName})},label:V(`CM.${e.title}`),labelStyle:s.default.iconStyle,onPress:function(){return ie(e.navigationName)}}}))}(he),onStateChange:function(){return le(!oe)},onPress:function(){}})})})]}),(0,O.jsx)(j.default,{isVisible:q,onClose:function(){return J(!1)},title:V("CM.info"),renderContent:(0,O.jsxs)(l.View,{style:{rowGap:10},children:[(0,O.jsxs)(l.View,{style:[s.default.columnCenter],children:[(0,O.jsxs)(l.View,{style:[s.default.columnSubCenter],children:[(0,O.jsx)(x.Icon,{fill:"#00204D",width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16),name:"person"}),(0,O.jsx)(u.default,{style:s.default.textTit,children:V("TK.staff")})]}),(0,O.jsxs)(l.View,{style:[{columnGap:10,flexDirection:"row",alignItems:"center",justifyContent:"flex-start",flex:1}],children:[(0,O.jsx)(l.Image,{width:(0,c.SizeDP)(24),height:(0,c.SizeDP)(24),borderRadius:(0,c.SizeDP)(12),source:{uri:null!=je&&je.imageUrl?null==je?void 0:je.imageUrl:"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,O.jsx)(u.default,{style:s.default.textDes,children:""+(null==Se?void 0:Se.firstName)+(null==Se?void 0:Se.lastName)})]})]}),(0,O.jsxs)(l.View,{style:[s.default.columnCenter],children:[(0,O.jsxs)(l.View,{style:[s.default.columnSubCenter],children:[(0,O.jsx)(f.IconMailFill,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)}),(0,O.jsx)(u.default,{style:s.default.textTit,children:V("CM.email")})]}),(0,O.jsx)(u.default,{style:s.default.textDes,children:null==Se?void 0:Se.email})]}),(0,O.jsxs)(l.View,{style:[s.default.columnCenter],children:[(0,O.jsxs)(l.View,{style:[s.default.columnSubCenter],children:[(0,O.jsx)(f.IconPeople,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)}),(0,O.jsx)(u.default,{style:s.default.textTit,children:V("CM.orgIn")})]}),(0,O.jsx)(u.default,{style:s.default.textDes,children:null==xe?void 0:xe.name})]}),(0,O.jsxs)(l.View,{style:[s.default.columnCenter],children:[(0,O.jsxs)(l.View,{style:[s.default.columnSubCenter],children:[(0,O.jsx)(x.Icon,{name:"bookmark",width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)}),(0,O.jsx)(u.default,{style:s.default.textTit,children:V("CM.status")})]}),(0,O.jsxs)(l.View,{style:[{flex:1,flexDirection:"row"}],children:[(0,O.jsx)(l.View,{style:{backgroundColor:null==Z?void 0:Z.bgColor,paddingHorizontal:5,paddingVertical:3,flex:1,borderRadius:4},children:(0,O.jsx)(u.default,{style:[{color:null==Z?void 0:Z.color,textAlign:"center",fontSize:c.default.FontTinier,fontFamily:y.Font.InterMedium500}],children:V(`TK.${null==ge?void 0:ge.ticketStatus}`)})}),(0,O.jsx)(l.View,{style:{flex:1}})]})]})]})}),(0,O.jsx)(_.default,{isVisible:"comments"===ne,children:(0,O.jsx)(P.default,{onClose:function(){return ie("")}})}),(0,O.jsx)(_.default,{isVisible:"authority"===ne,children:(0,O.jsx)(F.default,{userTaskId:G,recipientDetailsId:H,onClose:function(){ie(""),de(!ce)}})})]})}},64455:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{backgroundColor:a.Color.White},ctnBody:{backgroundColor:a.Color.White},ctnbodyDetail:{margin:(0,r.SizeDP)(16),position:"relative",backgroundColor:a.Color.White,borderRadius:(0,r.SizeDP)(16),padding:(0,r.SizeDP)(16),shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:5,elevation:2},textTitle:{textAlign:"center",fontFamily:a.Font.InterSemiBold600,fontSize:r.default.FontBase,color:a.Color.Text},priority:{alignItems:"center",justifyContent:"center",paddingVertical:(0,r.SizeDP)(16)},priorityDetail:{borderRadius:(0,r.SizeDP)(16),paddingHorizontal:(0,r.SizeDP)(8),paddingVertical:(0,r.SizeDP)(4),backgroundColor:"#FCEEED"},priorityText:{fontFamily:a.Font.InterRegular400,fontSize:r.default.FontTiny},rowCenterStart:{flexDirection:"row",justifyContent:"center",alignItems:"flex-start",columnGap:(0,r.SizeDP)(10),marginTop:(0,r.SizeDP)(10),borderTopWidth:(0,r.SizeDP)(.5),borderTopColor:a.Color.borderColor,paddingTop:(0,r.SizeDP)(10)},columnCenter:{justifyContent:"space-around",alignItems:"center",gap:(0,r.SizeDP)(6),flexDirection:"row"},columnSubCenter:{justifyContent:"flex-start",alignItems:"center",gap:(0,r.SizeDP)(10),flexDirection:"row",flex:.5},textDes:{fontSize:r.default.FontTiny,fontFamily:a.Font.InterMedium500,color:a.Color.colorText,flex:1},ctnImage:{width:(0,r.SizeDP)(24),height:(0,r.SizeDP)(24),borderRadius:(0,r.SizeDP)(12),overflow:"hidden",backgroundColor:a.Color.BgPrimary},borderStyle:{height:"100%",width:(0,r.SizeDP)(1),backgroundColor:a.Color.borderColor},textTit:{fontFamily:a.Font.InterRegular400,fontSize:r.default.FontTinier,color:a.Color.Text07},ctnStatus:{borderRadius:(0,r.SizeDP)(4),paddingHorizontal:(0,r.SizeDP)(8),flex:1},fabStyle:{borderRadius:25,width:50,height:50,alignItems:"center",justifyContent:"center"},iconStyle:{left:100,position:"absolute",top:-10,fontFamily:a.Font.InterMedium500}})},84556:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41132)),a=i(n(29293)),o=i(n(85715)),l=n(87841),s=n(7005),u=i(n(24541)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(21527)),d=i(n(87456)),f=i(n(12845)),p=n(20880),h=n(12638),y=i(n(77389)),m=n(2884),v=n(11671),g=n(47671);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}t.default=function(e){var t=e.dataListStatus,n=(0,m.useTranslation)().t,i=(0,c.useState)([]),S=(0,o.default)(i,2),x=S[0],j=S[1],w=(0,c.useState)(0),b=(0,o.default)(w,2),D=b[0],T=b[1],P=(0,c.useState)(0),C=(0,o.default)(P,2),I=C[0],k=C[1],_=(0,c.useState)(!1),F=(0,o.default)(_,2),O=F[0],M=F[1],E=(0,h.useAppSelector)((function(e){return e.common})).accessToken,R=(0,v.useTicketServices)(),z=(0,c.useState)({width:l.Dimensions.get("window").width,height:l.Dimensions.get("window").height}),V=(0,o.default)(z,2),B=V[0],A=V[1];(0,c.useEffect)((function(){var e=l.Dimensions.addEventListener("change",(function(e){var t=e.window;A({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]),(0,c.useEffect)((function(){U(I)}),[I]);var L,N,U=(L=(0,a.default)((function*(e){try{var n,i={keyWord:"",terms:{status:t.status},id:null},a=yield R.getTicketListFollow(e,20,"createdDate,desc",i,E);j(0===e?null==a?void 0:a.content:[].concat((0,r.default)(x),(0,r.default)(null==a?void 0:a.content))),T(Number(null==a||null==(n=a.page)?void 0:n.totalRecords))}catch(e){}finally{M(!1)}})),function(e){return L.apply(this,arguments)}),W=(N=(0,a.default)((function*(e){try{var t,i,r={ticketId:null!=(t=null==e||null==(i=e.resourceId)?void 0:i.split("sid_")[1])?t:"",reason:""};(yield R.cancelTicket(r,E))?(y.default.show({text1:n("CM.noti"),type:"success",text2:n("TK.rejectSuccess")}),k(0)):y.default.show({text1:n("CM.noti"),type:"error",text2:n("TK.rejectFailure")})}catch(e){}})),function(e){return N.apply(this,arguments)});return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(s.SafeAreaView,{style:[d.default.ctnMain,{width:B.width-40}],edges:["left","right"],children:[(0,g.jsxs)(l.View,{style:d.default.ctnHeader,children:[(0,g.jsx)(l.View,{style:[d.default.ctnNumber,{backgroundColor:t.color}],children:(0,g.jsx)(u.default,{style:d.default.text,children:D})}),(0,g.jsx)(l.View,{style:[d.default.ctnText,{backgroundColor:t.color}],children:(0,g.jsx)(u.default,{style:d.default.text,children:n(`TK.name_${t.status}`)})})]}),x?(0,g.jsx)(l.FlatList,{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,data:x,refreshing:O,onRefresh:function(){0!==I?(M(!0),k(0)):U(0)},onEndReached:function(){x.length<D&&k(I+1)},onEndReachedThreshold:.5,keyExtractor:function(e){return""+e.id},renderItem:function(e){var n=e.item;return(0,g.jsx)(f.default,{item:n,dataListStatus:t,handleCancelTicket:W})}}):(0,g.jsx)(l.View,{style:{alignItems:"center",justifyContent:"center",flex:1},children:(0,g.jsx)(l.ActivityIndicator,{size:"large",color:p.Color.BgPrimary})})]})})}},87456:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{flex:1},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",marginTop:(0,r.SizeDP)(12),marginLeft:(0,r.SizeDP)(16),columnGap:(0,r.SizeDP)(8),paddingBottom:(0,r.SizeDP)(10)},ctnNumber:{paddingHorizontal:(0,r.SizeDP)(4),height:(0,r.SizeDP)(24),minWidth:(0,r.SizeDP)(24),borderRadius:(0,r.SizeDP)(4),justifyContent:"center",alignItems:"center"},ctnText:{height:(0,r.SizeDP)(24),justifyContent:"center",alignItems:"center",paddingHorizontal:(0,r.SizeDP)(4),borderRadius:(0,r.SizeDP)(5)},text:{fontFamily:a.Font.InterSemiBold600,fontSize:r.default.FontSmall,color:a.Color.White},ctnIcon:{transform:[{rotate:"90deg"}],width:(0,r.SizeDP)(16),height:(0,r.SizeDP)(16),alignItems:"center",justifyContent:"center",marginLeft:(0,r.SizeDP)(8)}})},83629:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getListAction=void 0;var i=n(46317),r=n(41995),a=n(60596),o=n(47671);t.getListAction=function(e,t){return e===a.Status.processing?t?[{id:1,key:"TK.review",value:"review",icon:(0,o.jsx)(i.IconPerson,{width:(0,r.SizeDP)(18),height:(0,r.SizeDP)(18)})},{id:2,key:"TK.cancel",value:"cancel",icon:(0,o.jsx)(i.IconTrash,{width:(0,r.SizeDP)(18),height:(0,r.SizeDP)(18)})}]:[{id:1,key:"TK.review",value:"review",icon:(0,o.jsx)(i.IconPerson,{width:(0,r.SizeDP)(18),height:(0,r.SizeDP)(18)})}]:[]}},12845:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),a=i(n(24541)),o=i(n(82949)),l=n(46317),s=n(41995),u=n(35708),c=n(2543),d=n(14740),f=n(20880),p=n(2884),h=i(n(85555)),y=n(83629),m=n(60596),v=n(45335),g=n(12638),S=n(47671);t.default=function(e){var t=e.item,n=e.dataListStatus,i=e.handleCancelTicket,x=(0,d.useNavigation)(),j=(0,p.useTranslation)().t,w=(0,g.useAppSelector)((function(e){return e.account})).dataAccount,b=function(){var e;x.navigate(f.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:null==t||null==(e=t.resourceId)?void 0:e.substr(4),email:t.owner,status:n.status,selectTabBottom:2,recipientDetailsId:t.implementId,userTaskId:t.recipientId})},D=function(){if(t.status===m.Status.processing){if(T(t.remindTime,t.estimateDate))return`${j("TK.before")} `+I(null==t?void 0:t.remindTime,null==t?void 0:t.estimateDate);if(P(t.estimateDate,null))return`${j("TK.late")} `+C(null==t?void 0:t.estimateDate,null)}return t.status!==m.Status.completed&&t.status!==m.Status.accepted||!P(t.estimateDate,t.finishDate)?"":`${j("TK.late")} `+C(null==t?void 0:t.estimateDate,null==t?void 0:t.finishDate)},T=function(e,t){if(!e)return!1;if(Number(e)>0){var n=Math.floor(new Date(t).getTime()/1e3),i=n-60*Number(e),r=Math.floor((new Date).getTime()/1e3);return i<r&&r<n}},P=function(e,t){if(e){if(t){var n=Math.floor(new Date(e).getTime()/1e3);return Math.floor(new Date(t).getTime()/1e3)>n}var i=Math.floor(new Date(e).getTime()/1e3);return Math.floor((new Date).getTime()/1e3)>i}return!1},C=function(e,t){if(t){var n=Math.floor(new Date(e).getTime()),i=Math.floor(new Date(t).getTime());return k(i-n)}var r=Math.floor(new Date(e).getTime()),a=Math.floor((new Date).getTime());return k(a-r)},I=function(e,t){if(Number(e)>0){var n=Math.floor(new Date(t).getTime()),i=Math.floor((new Date).getTime());return k(n-i)}},k=function(e){var t=Math.floor(e/1e3),n=t%86400,i=n%3600;return`${Math.floor(t/86400)}d${Math.floor(n/3600)}h${Math.floor(i/60)}m`},_=function(e){switch(e.value){case"review":return void b();case"cancel":return void i(t)}};return(0,S.jsxs)(r.TouchableOpacity,{onPress:b,style:o.default.ctnMain,children:[(0,S.jsxs)(r.View,{style:o.default.ctnHeader,children:[(0,S.jsx)(a.default,{style:[o.default.title,{flex:1,marginRight:(0,s.SizeDP)(12)}],children:(0,c.isEmpty)(t.resourceName)?"---":t.resourceName}),(0,S.jsx)(r.View,{style:o.default.time,children:(0,S.jsxs)(r.View,{style:o.default.center,children:[!(0,c.isEmpty)(D())&&(0,S.jsx)(v.Tooltip,{title:D(),children:(0,S.jsx)(l.IconClock,{width:(0,s.SizeDP)(16),height:(0,s.SizeDP)(16)})}),t.status!==m.Status.accepted&&(0,S.jsx)(h.default,{listDropdown:(0,y.getListAction)(t.status,!t.sendFrom||t.sendFrom===w.email),onChangeItem:function(e){return _(e)},containerStyle:{width:(0,s.SizeDP)(12)}})]})})]}),(0,S.jsxs)(a.default,{style:{marginBottom:(0,s.SizeDP)(10),color:"#6f2ced"},children:[j("TK.step"),": ",t.notionName]}),(0,S.jsxs)(a.default,{children:[j("TK.createDate"),":"," ",u.DateUtils.convertDateToDDMMYYYY_H_M(t.createdDate)]}),!(0,c.isEmpty)(D())&&(0,S.jsx)(a.default,{style:o.default.styleClock,children:D()}),(0,S.jsx)(r.View,{style:o.default.ctnFooter,children:(0,S.jsxs)(r.View,{style:[o.default.rowCenter],children:[(0,S.jsx)(r.View,{style:[o.default.viewId],children:(0,S.jsx)(a.default,{numberOfLines:1,style:{width:(0,s.SizeDP)(50)},children:`#${t.id}`})}),(0,S.jsx)(r.View,{style:[o.default.viewStatus,{backgroundColor:n.bgColor,borderColor:"#fff"}],children:(0,S.jsx)(a.default,{style:[{color:n.color}],children:j(`TK.${t.status}`)})})]})})]})}},82949:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995)),a=n(20880);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnMain:{padding:(0,r.SizeDP)(16),borderRadius:(0,r.SizeDP)(8),shadowColor:"#51459F",shadowOffset:{width:0,height:3},shadowOpacity:.1,shadowRadius:(0,r.SizeDP)(3),elevation:4,marginVertical:(0,r.SizeDP)(8),backgroundColor:a.Color.White,marginHorizontal:(0,r.SizeDP)(3),minHeight:180},title:{fontSize:r.default.FontSmall,color:a.Color.color1F2633,fontFamily:a.Font.InterSemiBold600},ctnFooter:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:(0,r.SizeDP)(16)},ctnHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:(0,r.SizeDP)(16)},rowCenter:{flexDirection:"row",justifyContent:"center",alignItems:"center",columnGap:(0,r.SizeDP)(4)},viewId:{borderWidth:(0,r.SizeDP)(1),borderColor:"#EBEEF2",borderRadius:(0,r.SizeDP)(16),paddingHorizontal:(0,r.SizeDP)(8),paddingVertical:(0,r.SizeDP)(5)},viewStatus:{borderWidth:(0,r.SizeDP)(1),borderColor:"#EBEEF2",borderRadius:(0,r.SizeDP)(16),paddingHorizontal:(0,r.SizeDP)(8),paddingVertical:(0,r.SizeDP)(5)},time:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,r.SizeDP)(6)},center:{alignItems:"center",justifyContent:"center",flexDirection:"row",columnGap:(0,r.SizeDP)(8)},styleClock:{marginTop:(0,r.SizeDP)(6),color:a.Color.RedE14337}})},11595:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.dataListStatusTicketFollow=void 0;var i=n(60596);t.dataListStatusTicketFollow=[{id:1,name:"Giao dịch đang thực hiện",status:i.Status.processing,color:"#7F43EF",bgColor:"#F2ECFD"},{id:2,name:"Giao dịch hoàn thành",status:i.Status.accepted,color:"#22C55E",bgColor:"rgba(34, 197, 94, 0.1)"}]},25055:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=n(87841),o=i(n(43184)),l=n(21527),s=i(n(84556)),u=n(11595),c=n(14740),d=n(12638),f=n(97427),p=i(n(7499)),h=n(32207),y=n(20880),m=n(2884),v=n(47671);t.default=function(){var e=(0,m.useTranslation)().t,t=(0,c.useNavigation)(),n=(0,d.useAppDispatch)(),i=(0,c.useNavigationState)((function(e){return e})),g=(0,l.useState)({width:a.Dimensions.get("window").width,height:a.Dimensions.get("window").height}),S=(0,r.default)(g,2),x=S[0],j=S[1];(0,l.useEffect)((function(){var e=a.Dimensions.addEventListener("change",(function(e){var t=e.window;j({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]),(0,l.useEffect)((function(){n(f.ticketActions.setSelectTabBottom(i.index))}),[i.index]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.default,{title:e("TK.ticketFollow"),renderContentRight:function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(h.TopNavigationAction,{icon:(0,v.jsx)(h.Icon,{fill:"#ffffff",name:"search"}),onPress:function(){t.navigate(y.NavigationName.SearchTicketScreen,{type:"ticket-follow"})}})})}}),(0,v.jsx)(a.FlatList,{style:{backgroundColor:"#fff"},data:u.dataListStatusTicketFollow,horizontal:!0,pagingEnabled:!0,snapToAlignment:"start",showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,snapToInterval:x.width-40,decelerationRate:"fast",contentContainerStyle:[p.default.flatListContainer,{paddingRight:40}],renderItem:function(e){var t=e.item;return(0,v.jsx)(s.default,{dataListStatus:t})}})]})}},7499:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880);t.default=i.StyleSheet.create({flatListContainer:{backgroundColor:r.Color.White}})},43790:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useNotificationServices=void 0;var i=n(15876),r=n(97300);t.useNotificationServices=function(){var e=(0,r.useFetchRequest)();return(0,i.createNotificationServices)(e)}},85653:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useOriginServices=void 0;var i=n(67102),r=n(97300);t.useOriginServices=function(){var e=(0,r.useFetchRequest)();return(0,i.createOriginServices)(e)}},84093:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReviewCollaboServices=void 0;var i=n(12387),r=n(97300);t.useReviewCollaboServices=function(){var e=(0,r.useFetchRequest)();return(0,i.createEcollaboServices)(e)}},31004:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReviewEcontractServices=void 0;var i=n(47188),r=n(97300);t.useReviewEcontractServices=function(){var e=(0,r.useFetchRequest)();return(0,i.createReviewEcontractServices)(e)}},40851:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReviewServices=void 0;var i=n(38416),r=n(97300);t.useReviewServices=function(){var e=(0,r.useFetchRequest)();return(0,i.createReviewServices)(e)}},11671:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useTicketServices=void 0;var i=n(10953),r=n(97300);t.useTicketServices=function(){var e=(0,r.useFetchRequest)();return(0,i.createTicketServices)(e)}},66771:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(85715)),a=n(21527);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=(0,a.useState)(""),i=(0,r.default)(n,2),o=i[0],l=i[1],s=(0,a.useRef)();return(0,a.useEffect)((function(){return s.current=setTimeout((function(){return l(e)}),t),function(){clearTimeout(s.current)}}),[e,t]),o}},60596:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeTicketNotionStatus=t.Status=t.ReviewTicket=t.Propity=void 0;t.Propity=function(e){return e.low="low",e.medium="medium",e.high="high",e}({}),t.Status=function(e){return e.pending="pending",e.processing="processing",e.completed="completed",e.draft="draft",e.voided="voided",e.rejected="rejected",e.accepted="accepted",e}({}),t.ReviewTicket=function(e){return e.processing="processing",e.accepted="accepted",e.rejected="rejected",e}({}),t.TypeTicketNotionStatus=function(e){return e.processing="processing",e.accepted="accepted",e.rejected="rejected",e}({})},29756:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TabName=void 0;var r=i(n(29293)),a=i(n(85715)),o=n(25874),l=n(7005),s=i(n(34704)),u=n(87841),c=n(41995),d=n(46317),f=i(n(91510)),p=i(n(24541)),h=i(n(16702)),y=i(n(25055)),m=i(n(50570)),v=n(2884),g=n(21527),S=n(12638),x=n(97427),j=n(43790),w=n(47671),b=t.TabName={Home:"Home",MyTicket:"MyTicket",FollowTicket:"FollowTicket",Notification:"Notification"},D=(0,o.createBottomTabNavigator)(),T=function(e){var t=e.state,n=e.navigation,i=e.t,r=e.totalRecoders;return(0,w.jsx)(l.SafeAreaView,{edges:["bottom","left","right"],style:s.default.ctnSafeTabBottom,children:(0,w.jsx)(u.View,{style:s.default.ctnTabBottom,children:t.routes.map((function(e,a){var o="",l=t.index===a;return(0,w.jsxs)(u.TouchableOpacity,{accessibilityRole:"button",style:s.default.ctnItemTabBottom,accessibilityState:l?{selected:!0}:{},onPress:function(){var t=n.emit({type:"tabPress",target:e.key,canPreventDefault:!0});l||t.defaultPrevented||n.navigate(e.name,e.params)},children:[function(){switch(e.name){case b.Home:return o=i("CM.Home"),(0,w.jsx)(w.Fragment,{children:l?(0,w.jsx)(d.IconHomeSelect,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)}):(0,w.jsx)(d.IconHome,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)})});case b.MyTicket:return o=i("CM.MyTicket"),(0,w.jsx)(w.Fragment,{children:l?(0,w.jsx)(d.IconMyTicketSelect,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)}):(0,w.jsx)(d.IconMyTicket,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)})});case b.FollowTicket:return o=i("CM.FollowTicket"),(0,w.jsx)(w.Fragment,{children:l?(0,w.jsx)(d.IconFollowTicketSelect,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)}):(0,w.jsx)(d.IconFollowTicket,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)})});case b.Notification:return o=i("CM.Notification"),(0,w.jsxs)(u.View,{style:{position:"relative"},children:[r>0&&(0,w.jsx)(u.View,{style:{position:"absolute",backgroundColor:"#e14337",borderRadius:100,paddingHorizontal:4,paddingVertical:2,top:-5,right:r>100?-20:-12},children:(0,w.jsx)(p.default,{style:{fontSize:10,color:"#fff"},children:r<100?r:"99+"})}),l?(0,w.jsx)(d.IconNotiSelect,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)}):(0,w.jsx)(d.IconNoti,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)})]})}}(),(0,w.jsx)(p.default,{style:l?s.default.txtLabelSelect:s.default.txtLabel,children:o})]},a)}))})})};t.default=function(){var e=(0,v.useTranslation)().t,t=(0,S.useAppDispatch)(),n=(0,g.useState)(0),i=(0,a.default)(n,2),o=i[0],l=i[1],s=(0,j.useNotificationServices)();(0,g.useEffect)((function(){c()}),[]);var u,c=(u=(0,r.default)((function*(){var e=yield s.getNumberOfNotiUnread();e&&(t(x.commonActions.setTotalNumberNotiUnread(e)),l(e))})),function(){return u.apply(this,arguments)});return(0,w.jsxs)(D.Navigator,{tabBar:function(t){return(0,w.jsx)(T,Object.assign({},t,{t:e,totalRecoders:o}))},screenOptions:{headerShown:!1},children:[(0,w.jsx)(D.Screen,{name:b.Home,component:f.default}),(0,w.jsx)(D.Screen,{name:b.MyTicket,component:h.default}),(0,w.jsx)(D.Screen,{name:b.FollowTicket,component:y.default}),(0,w.jsx)(D.Screen,{name:b.Notification,component:m.default})]})}},34704:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),r=n(20880),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(41995));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.default=i.StyleSheet.create({ctnSafeTabBottom:{backgroundColor:r.Color.White,shadowColor:"#002766",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3,elevation:5},ctnTabBottom:{flexDirection:"row",height:(0,a.SizeDP)(56),backgroundColor:r.Color.White,justifyContent:"space-around",paddingHorizontal:(0,a.SizeDP)(24)},ctnItemTabBottom:{width:(0,a.SizeDP)(90),gap:(0,a.SizeDP)(4),justifyContent:"center",alignItems:"center"},txtLabel:{fontSize:a.default.FontTiniest,fontFamily:r.Font.InterRegular400,color:"rgba(0, 32, 77, 0.7)"},txtLabelSelect:{fontSize:a.default.FontTiniest,fontFamily:r.Font.InterSemiBold600,color:"#6F2CED"},ctnLine:{height:(0,a.SizeDP)(3),width:(0,a.SizeDP)(70),backgroundColor:"#396961",position:"absolute",bottom:0}})},9968:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(80380),a=i(n(80671)),o=i(n(29756)),l=i(n(91510)),s=i(n(77410)),u=i(n(37377)),c=i(n(77134)),d=i(n(82894)),f=i(n(74821)),p=i(n(92552)),h=i(n(7006)),y=i(n(77389)),m=i(n(55529)),v=n(45335),g=i(n(78935)),S=n(32207),x=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(67874)),j=n(17604),w=i(n(54153)),b=i(n(62856)),D=i(n(19691)),T=i(n(81584)),P=i(n(94149)),C=n(12638),I=n(21527),k=i(n(166)),_=i(n(77664)),F=i(n(3614)),O=i(n(21758)),M=n(2884),E=n(47671);function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}var z=(0,r.createNativeStackNavigator)();t.default=function(e){var t=(0,M.useTranslation)().i18n,n=(0,C.useAppSelector)((function(e){return e.common})),i=(n.isAuthorized,n.language);return(0,I.useEffect)((function(){t.changeLanguage(i)}),[]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(S.IconRegistry,{icons:[j.EvaIconsPack]}),(0,E.jsx)(S.ApplicationProvider,Object.assign({customMapping:b.default},x,{theme:Object.assign({},x.light,w.default),children:(0,E.jsxs)(v.PaperProvider,{children:[(0,E.jsxs)(z.Navigator,{screenOptions:{headerShown:!1},children:[(0,E.jsx)(z.Screen,{name:a.default.BottomTabs,component:o.default}),(0,E.jsx)(z.Screen,{name:a.default.HomeScreen,component:l.default}),(0,E.jsx)(z.Screen,{name:a.default.ServiceDetail,component:s.default}),(0,E.jsx)(z.Screen,{name:a.default.CreateTicket,component:u.default}),(0,E.jsx)(z.Screen,{name:a.default.CreateTicketSuccess,component:c.default}),(0,E.jsx)(z.Screen,{name:a.default.AddTicketRelativeS,component:d.default}),(0,E.jsx)(z.Screen,{name:a.default.BottomTabNavigationTicketDetail,component:D.default}),(0,E.jsxs)(z.Group,{screenOptions:{headerShown:!1,presentation:"modal"},children:[(0,E.jsx)(z.Screen,{name:a.default.ViewFlowDetail,component:f.default}),(0,E.jsx)(z.Screen,{name:a.default.ViewFileScreen,component:h.default})]}),(0,E.jsx)(z.Screen,{name:a.default.ViewFormScreen,component:m.default}),(0,E.jsx)(z.Screen,{name:a.default.ReviewFlow,component:p.default}),(0,E.jsx)(z.Screen,{name:a.default.ReviewEcontractFlow,component:_.default}),(0,E.jsx)(z.Screen,{name:a.default.ViewFileScreenEcontract,component:g.default}),(0,E.jsx)(z.Screen,{name:a.default.SearchTicketScreen,component:T.default}),(0,E.jsx)(z.Screen,{name:a.default.SearchHomeScreen,component:P.default}),(0,E.jsx)(z.Screen,{name:a.default.ReviewEIDScreen,component:k.default}),(0,E.jsx)(z.Screen,{name:a.default.CreateContractScreen,component:F.default}),(0,E.jsx)(z.Screen,{name:a.default.ReviewEcollaboFlow,component:O.default})]}),(0,E.jsx)(y.default,{})]})}))]})}},15876:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createNotificationServices=void 0;var r=i(n(29293)),a=n(88e3);t.createNotificationServices=function(e){return{getListNotifications:(i=(0,r.default)((function*(t,n){try{var i,r=yield e({url:a.BASE_URL+"/services/notify-central/api/idaas-notifies/v2/filter",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),params:t}),o=null==r||null==(i=r.headers)?void 0:i.get("x-total-count");return Promise.resolve({data:null==r?void 0:r.data,totalRecords:o?Number(o):0})}catch(e){}})),function(e,t){return i.apply(this,arguments)}),updateNotifications:(n=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/notify-central/api/idaas-notifies",method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),typeOfResponse:"text"});return Promise.resolve(null==n?void 0:n.data)}catch(e){console.log("error",e)}})),function(e){return n.apply(this,arguments)}),getNumberOfNotiUnread:(t=(0,r.default)((function*(){try{var t=yield e({url:a.BASE_URL+"/services/notify-central/api/notification-reports/E_REQUEST",method:"GET",headers:{},typeOfResponse:"text"});return Promise.resolve(null==t?void 0:t.data)}catch(e){console.log("error-get-number-noti",e)}})),function(){return t.apply(this,arguments)})};var t,n,i}},67102:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createOriginServices=void 0;var r=i(n(29293)),a=n(88e3);t.createOriginServices=function(e){return{getOrigin:(t=(0,r.default)((function*(t,n){var i=`/services/uaa/api/organizations/${t}`;try{var r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return null==r?void 0:r.data}catch(e){throw e}})),function(e,n){return t.apply(this,arguments)})};var t}},12387:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createEcollaboServices=void 0;var r=i(n(29293)),a=n(88e3);t.createEcollaboServices=function(e){return{getFileById:(n=(0,r.default)((function*(t){try{var n="/services/collabora/api/files/"+t,i=yield e({url:a.BASE_URL_ECOLLABO+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return console.log("getFileById",e),Promise.reject(e)}})),function(e){return n.apply(this,arguments)}),changeStatusFile:(t=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL_ECOLLABO+"/services/collabora/api/files",method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("changeStatusFile",e),Promise.reject(e)}})),function(e){return t.apply(this,arguments)})};var t,n}},47188:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createReviewEcontractServices=void 0;var r=i(n(29293)),a=n(88e3);t.createReviewEcontractServices=function(e){return{getEnvelopeById:(g=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/excall/api/excall",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(t)});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return g.apply(this,arguments)}),getRecipientDetail:(v=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/recipient-details/${n}/${t}`,r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return v.apply(this,arguments)}),getEWriterDocByUserTaskIdAndTicketId:(m=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/file-repositories/getFileIdNotionEContract/${n}/userTask/${t}`,r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return m.apply(this,arguments)}),getEcontractDocInfo:(y=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/ewriter/api/documents/details",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return y.apply(this,arguments)}),getStructureOfData:(h=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/envelope/api/external/v1/template/tempAndStructure",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},params:t});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return h.apply(this,arguments)}),getDataFormFill:(p=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/eform/api/share/form-erequest",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return p.apply(this,arguments)}),createContract:(f=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/erequest/api/envelope/create-envelope",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),typeOfResponse:"text"});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return f.apply(this,arguments)}),getEkycRepositoryDetailIdCard:(d=(0,r.default)((function*(t,n){try{var i=`/services/common/api/p/ekyc/${t}/ekycRepositoryDetails/detailss/idCard`,r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"},params:n});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return d.apply(this,arguments)}),getTicketForms:(c=(0,r.default)((function*(t){try{var n="/services/erequest/api/ticket-form-data/findByTicketId/"+t,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e){return c.apply(this,arguments)}),getListCollaboDocs:(u=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/file-repositories/getFileIdFromCollabor/${t}/userTask/${n}`,r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return u.apply(this,arguments)}),getDetailCollabora:(s=(0,r.default)((function*(t){try{var n=`/services/collabora/api/files/${t}/info`,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e){return s.apply(this,arguments)}),getTicketModelerFlowStatusRaw:(l=(0,r.default)((function*(t){try{var n="/services/erequest/api/ticket-modeler-flows/statusRaw/"+t,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e){return l.apply(this,arguments)}),getLinkIframeEcollabo:(o=(0,r.default)((function*(t){try{var n=`/services/collabora/wopi/iframe-info/${t}`,i=yield e({url:a.BASE_URL_ECOLLABO+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e){return o.apply(this,arguments)}),deleteFile:(i=(0,r.default)((function*(t){try{var n="/services/erequest/api/file-repositories/deleteFileUploadCollaboration/"+t,i=yield e({url:a.BASE_URL+n,method:"DELETE",headers:{"Content-Type":"application/json"},typeOfResponse:"text"});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e){return i.apply(this,arguments)}),getListOrgin:(n=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/uaa/api/organizations/child/find-organization-like-orgin",method:"GET",params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return Promise.reject(e)}})),function(e){return n.apply(this,arguments)}),uploadFiles:(t=(0,r.default)((function*(t,n,i){try{var r=`/services/erequest/api/file-repositories/uploadFileToCollaboration/${t}/userTask/${n}`,o=yield e({url:a.BASE_URL+r,method:"POST",headers:{"Content-Type":"multipart/form-data"},body:i});return Promise.resolve(null==o?void 0:o.data)}catch(e){return Promise.reject(e)}})),function(e,n,i){return t.apply(this,arguments)})};var t,n,i,o,l,s,u,c,d,f,p,h,y,m,v,g}},38416:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createReviewServices=void 0;var r=i(n(29293)),a=n(88e3);t.createReviewServices=function(e){return{getListFileByTicketId:(E=(0,r.default)((function*(t){try{var n=`/services/erequest/api/tickets/${t}/listFile`,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e){return E.apply(this,arguments)}),getInfoFile:(M=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/erequest/api/file-repositories/getInformationFile",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(t)});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return M.apply(this,arguments)}),getListFormModelerById:(O=(0,r.default)((function*(t,n){try{var i="/services/idaas-eflow/api/forms/modeler/"+t,r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return O.apply(this,arguments)}),getFormDetailById:(F=(0,r.default)((function*(t,n){try{var i="/services/eform/api/forms/"+t,r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return F.apply(this,arguments)}),getStatusParty:(_=(0,r.default)((function*(t,n){try{var i="/services/erequest/api/ticket-recipients/statusRaw/"+t,r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==r?void 0:r.data)}catch(e){console.log("errorgetStatusParty",e),Promise.reject(e)}})),function(e,t){return _.apply(this,arguments)}),getListFileRelative:(k=(0,r.default)((function*(t,n){try{var i,r="/services/erequest/api/attachments/get-by-ticketId?"+new URLSearchParams(t).toString(),o=yield e({url:a.BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer"+n}}),l=null!=(i=null==o?void 0:o.headers.get("x-total-count"))?i:0,s=null==o?void 0:o.data;return Promise.resolve({data:s,totalRecords:Number(l)})}catch(e){Promise.reject(e)}})),function(e,t){return k.apply(this,arguments)}),viewFile:(I=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/s3service/api/view",method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+n},body:t});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return I.apply(this,arguments)}),deleteFileRelative:(C=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/attachments/${t}`,r=yield e({url:a.BASE_URL+i,method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer"+n}});return Promise.resolve(null==r?void 0:r.status)}catch(e){Promise.reject(e)}})),function(e,t){return C.apply(this,arguments)}),uploadFileRelative:(P=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/erequest/api/attachments",method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer"+n},body:t});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return P.apply(this,arguments)}),getFormERequest:(T=(0,r.default)((function*(t,n){try{var i="/services/eform/api/share/form-erequest?"+new URLSearchParams(t).toString(),r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return T.apply(this,arguments)}),getRecipientDetaiImpl:(D=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/recipient-details/implement/${t}`,r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return D.apply(this,arguments)}),getFromByUserTaskId:(b=(0,r.default)((function*(t,n){try{var i=`/services/idaas-eflow/api/forms/${t}`,r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return b.apply(this,arguments)}),getListAttachmentsUserTask:(w=(0,r.default)((function*(t,n,i,r){try{var o,l=`/services/erequest/api/attachments/get-attachment-userTask/${t}/${n}`,s=yield e({url:a.BASE_URL+l,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},params:i}),u=null!=(o=null==s?void 0:s.headers.get("x-total-count"))?o:0,c=null==s?void 0:s.data;return Promise.resolve({data:c,totalRecords:Number(u)})}catch(e){Promise.reject(e)}})),function(e,t,n,i){return w.apply(this,arguments)}),getListFileReview:(j=(0,r.default)((function*(t,n,i){try{var r=`/services/erequest/api/tickets/${t}/userTaskId/${n}/listFile`,o=yield e({url:a.BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}});return Promise.resolve(null==o?void 0:o.data)}catch(e){Promise.reject(e)}})),function(e,t,n){return j.apply(this,arguments)}),actionTicket:(x=(0,r.default)((function*(t,n,i,r,o,l){try{var s=`/services/erequest/api/tickets/recipient/${l}/${n}/${i}/${t}`,u=yield e({url:a.BASE_URL+s,method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify(r)});return Promise.resolve(null==u?void 0:u.data)}catch(e){Promise.reject(e)}})),function(e,t,n,i,r,a){return x.apply(this,arguments)}),getFormVersionByTicketAndUserTaskId:(S=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/erequest/api/ticket-sub-form-data/get-sub-form-data",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer"+n},body:JSON.stringify(t)});if(i)return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(!1)}})),function(e,t){return S.apply(this,arguments)}),updateFormData:(g=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/erequest/api/ticket-sub-form-data",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer"+n},body:JSON.stringify(t)});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return g.apply(this,arguments)}),finishTicketRecipient:(v=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/erequest/api/tickets/finish-recipient",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer"+t}});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return v.apply(this,arguments)}),getFormDataByUserTaskId:(m=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/idaas-eflow/api/forms/attached-user-task",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},params:t});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return m.apply(this,arguments)}),createPersonalEkyc:(y=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/eid/api/personal-kyc-detail-profiles-history/create",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),params:n});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return y.apply(this,arguments)}),createInformationOCR:(h=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/erequest/api/receiver-histories",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return h.apply(this,arguments)}),getListTaskSLA:(p=(0,r.default)((function*(t){try{var n="/services/workboard/api/notifications/tasks-sla/"+t,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e){return p.apply(this,arguments)}),getHistoryEkycDetail:(f=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/eid/api/ekyc-history/detail",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return f.apply(this,arguments)}),getEkycRepoById:(d=(0,r.default)((function*(t){try{var n="/services/common/api/p/ekyc/ekycRepository/"+t,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e){return d.apply(this,arguments)}),getAllTypesOfEkyc:(c=(0,r.default)((function*(t){try{var n=`/services/common/api/p/ekyc/${t.id}/ekycRepositoryDetails/allTypee`,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e){return c.apply(this,arguments)}),getDataEkycByType:(u=(0,r.default)((function*(t){try{var n=`/services/common/api/p/ekyc/${t.id}/ekycRepositoryDetails/type/detailss`,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e){return u.apply(this,arguments)}),getResourceById:(s=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/collabora/api/acls/resource",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return Promise.reject(e)}})),function(e){return s.apply(this,arguments)}),getUserInfoModel:(l=(0,r.default)((function*(t,n){try{var i,r=yield e({url:a.BASE_URL+"/services/uaa/api/search/userInfoModel",method:"POST",headers:{"Content-Type":"application/json"},params:t,body:JSON.stringify(n)}),o=null!=(i=null==r?void 0:r.headers.get("x-total-count"))?i:0,l=null==r?void 0:r.data;return Promise.resolve({data:l,totalRecords:Number(o)})}catch(e){return console.log("getUserInfoModel",e),Promise.reject(e)}})),function(e,t){return l.apply(this,arguments)}),getDataOrgByOrgin:(o=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/uaa/api/organizations/child/find-organization-like-orgin",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("getDataOrgByOrgin",e),Promise.reject(e)}})),function(e){return o.apply(this,arguments)}),updatePermissionOrg:(i=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/collabora/api/acls",method:"POST",headers:{"Content-Type":"application/json"},params:t,body:JSON.stringify(n)});return Promise.resolve(null==i?void 0:i.data)}catch(e){return console.log("updatePermissionOrg",e),Promise.reject(e)}})),function(e,t){return i.apply(this,arguments)}),getListTaskByTicketIdAndUsertaskId:(n=(0,r.default)((function*(t,n){try{var i=`/services/erequest/api/tasks/get-task-by/ticket/${t}/userTaskId/${n}`,r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){return console.log("getListTaskByTicketIdAndUsertaskId",e),Promise.reject(e)}})),function(e,t){return n.apply(this,arguments)}),getListFormIdByTicketId:(t=(0,r.default)((function*(t){try{var n="/services/erequest/api/tickets/get-list-formId-by-ticketId/"+t,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return console.log("getListFormIdByTicketId",e),Promise.reject(e)}})),function(e){return t.apply(this,arguments)})};var t,n,i,o,l,s,u,c,d,f,p,h,y,m,v,g,S,x,j,w,b,D,T,P,C,I,k,_,F,O,M,E}},10953:function(e,t,n){var i=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createTicketServices=void 0;var r=i(n(29293)),a=n(88e3);t.createTicketServices=function(e){return{login:(k=(0,r.default)((function*(){try{var e=yield fetch(a.BASE_URL_EACCOUNT+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"nepnhi27@gmail.com",password:"admin@123"})});return Promise.resolve(e.json())}catch(e){return Promise.reject(e)}})),function(){return k.apply(this,arguments)}),getListServives:(I=(0,r.default)((function*(t,n,i){try{var r=yield e({url:a.BASE_URL+"/services/erequest/api/services/search",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i},body:JSON.stringify(t),params:n});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t,n){return I.apply(this,arguments)}),getByServiceId:(C=(0,r.default)((function*(t,n){var i=`/services/erequest/api/work-flows/get-by-serviceId?serviceId=${t}`;try{var r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return C.apply(this,arguments)}),getModeler:(P=(0,r.default)((function*(t,n){var i=`/services/idaas-eflow/api/modelers/${t}`;try{var r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return P.apply(this,arguments)}),createTicket:(T=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/erequest/api/tickets",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(t)});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return T.apply(this,arguments)}),getTicketById:(D=(0,r.default)((function*(t,n){var i=`/services/erequest/api/tickets/${t}`;try{var r=yield e({url:a.BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return D.apply(this,arguments)}),getServiceMenu:(b=(0,r.default)((function*(t,n,i,r,o){var l=`/services/erequest/api/services/search?sort=displayOrder,asc&page=${t}&size=${n}&sort=createdDate,desc`,s={status:o?[]:["display"],isAdmin:!1};i&&(s=Object.assign({},s,{textSearch:i}));try{var u=yield e({url:a.BASE_URL+l,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify(s)});return Promise.resolve(null==u?void 0:u.data)}catch(e){return Promise.reject(e)}})),function(e,t,n,i,r){return b.apply(this,arguments)}),getTicketList:(w=(0,r.default)((function*(t,n,i,r,o){var l=`/services/erequest/api/tickets/search?page=${t}&size=${n}&sort=${i}`;try{var s=yield e({url:a.BASE_URL+l,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify(o)});return Promise.resolve(null==s?void 0:s.data)}catch(e){return Promise.reject(e)}})),function(e,t,n,i,r){return w.apply(this,arguments)}),getTicketListFollow:(j=(0,r.default)((function*(t,n,i,r,o){var l=`/services/workboard/api/notifications/tasks/all?page=${t}&size=${n}&sort=${i}&${new URLSearchParams({search:JSON.stringify(r)})}`;try{var s=yield e({url:a.BASE_URL+l,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}});return Promise.resolve({content:yield null==s?void 0:s.data,page:{totalRecords:null==s?void 0:s.headers.get("x-total-count")}})}catch(e){return console.log(e),Promise.reject(e)}})),function(e,t,n,i,r){return j.apply(this,arguments)}),getTicketHistories:(x=(0,r.default)((function*(t,n,i){var r=`/services/erequest/api/histories/get-by-ticketId?ticketId=${n}&sort=createdDate,desc&page=${t}&size=10000`;try{var o=yield e({url:a.BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}});return Promise.resolve({data:null==o?void 0:o.data,totalRecords:Number(null==o?void 0:o.headers.get("x-total-count"))})}catch(e){Promise.reject(e)}})),function(e,t,n){return x.apply(this,arguments)}),getMultiLoginAccount:(S=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/uaa/api/p/users/multi-login",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify({data:t})});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return S.apply(this,arguments)}),getTicketRelatives:(g=(0,r.default)((function*(t,n,i,r){var o=`/services/erequest/api/relatives/get-by-ticketId?ticketId=${t}&page=${n}&size=${i}`;try{var l=yield e({url:a.BASE_URL+o,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}});return Promise.resolve(null==l?void 0:l.data)}catch(e){Promise.reject(e)}})),function(e,t,n,i){return g.apply(this,arguments)}),getListComments:(v=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/erequest/api/comments/get-by-userTaskId",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return v.apply(this,arguments)}),cancelTicket:(m=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/erequest/api/tickets/cancelFlow",method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},params:t});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return m.apply(this,arguments)}),sendComment:(y=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/erequest/api/comments",method:"POST",headers:{"Content-Type":"multipart/form-data"},body:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return y.apply(this,arguments)}),updateComment:(h=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/erequest/api/comments",method:"PUT",headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},body:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return h.apply(this,arguments)}),deleteComment:(p=(0,r.default)((function*(t){try{var n="/services/erequest/api/comments/"+t,i=yield e({url:a.BASE_URL+n,method:"DELETE",headers:{"Content-Type":"application/json"},typeOfResponse:""});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e){return p.apply(this,arguments)}),getSla:(f=(0,r.default)((function*(t){try{var n="/services/workboard/api/notifications/tasks-sla/"+t,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e){return f.apply(this,arguments)}),getListModelerByListServiceId:(d=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/erequest/api/services/getModelerByListServiceId",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),params:t});return Promise.resolve(null==i?void 0:i.data)}catch(e){}})),function(e,t){return d.apply(this,arguments)}),limitLink:(c=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/collabora/api/acls/limit-link",method:"POST",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){}})),function(e){return c.apply(this,arguments)}),publicLink:(u=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/collabora/api/acls/public-link",method:"POST",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){}})),function(e){return u.apply(this,arguments)}),getDefaultPublic:(s=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/collabora/api/acls/public",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){}})),function(e){return s.apply(this,arguments)}),deleteAclsById:(l=(0,r.default)((function*(t){try{var n="/services/collabora/api/acls/"+t,i=yield e({url:a.BASE_URL+n,method:"DELETE",headers:{"Content-Type":"application/json"},typeOfResponse:""});return Promise.resolve(null==i?void 0:i.data)}catch(e){}})),function(e){return l.apply(this,arguments)}),pushlishFile:(o=(0,r.default)((function*(t,n){try{var i=yield e({url:a.BASE_URL+"/services/collabora/api/acls/assign/notify",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),params:t});return Promise.resolve(null==i?void 0:i.data)}catch(e){}})),function(e,t){return o.apply(this,arguments)}),getListUserFromComment:(i=(0,r.default)((function*(t){try{var n=yield e({url:a.BASE_URL+"/services/uaa/api/search/user-info/role",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Promise.resolve(null==n?void 0:n.data)}catch(e){return Promise.reject(e)}})),function(e){return i.apply(this,arguments)}),getImplementByModelerId:(n=(0,r.default)((function*(t){try{var n="/services/idaas-eflow/api/implementer/modeler/"+t,i=yield e({url:a.BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e){return n.apply(this,arguments)}),forwardActionUser:(t=(0,r.default)((function*(t,n,i,r){try{var o=`/services/erequest/api/p/tickets/recipient/forward/${t}/${n}/${i}`,l=yield e({url:a.BASE_URL+o,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return Promise.resolve(null==l?void 0:l.data)}catch(e){return Promise.reject(e)}})),function(e,n,i,r){return t.apply(this,arguments)})};var t,n,i,o,l,s,u,c,d,f,p,h,y,m,v,g,S,x,j,w,b,D,T,P,C,I,k}}}]);//# sourceMappingURL=src_navigation_Request_tsx.chunk.bundle.map?platform=ios/* RCSSB */eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJoYXNoIjoiMzI2ZTM4ZWIxNTY0ZDAzZTc0OTE5NmU5ZjNhYjE4MjEwZjUwMTg4Mjg2MGI4ZTY5ZGFiNjEwZTRiZWM1NGI0NyIsImlhdCI6MTczMzczNzIyM30.YAGn2UTW9uMX7JssKySIdrPMKtS8ZDpbZNqcT7JsSZq8DveNVflz_zweGij-dTR3AisL1ZqLtT-3pwb-2eqL1ED3s9oUfnsgnBuOiEBGzLjdBuX2igCw1Gv0bf4d97TPHsygz2b3CQtL8EnNGEnLb5ib-7v5hNFKrUmK70QCWe8AJDggH7rbLlW3ep7iYdlm309SGLTM1o0PciEjXw-h7RoujjutBnChz5-xePM-pqiIUfO87jlkyboI4g5kftPY1RyleooXvZafk5RZt7ABJAA1wys79F9Z2CaEm7Ng9-lZAYpP3BlYgvMLolSjXQ_DLuDHEc343Wj2MjFRZ3csIQkYzsJbppi2WImJ-ab-QyiQ5jjs6o7-vAyo_FifwJNN14tCT4L_tIhZfL7k_hjSuad1wSu2sMYYTe0wMHC216-2Fiv1TOctq3gTpGFljyXp53i2qi7ZC2-f6SHfAo9g6hhguUw3lAW18fjiHnK8xGKkHdNiCxp829d_d54aJfP827YjVyf8EblqFoKpFOssNdffjJ4q22WK00XdcKOhuyPdc3bW3PvjT7bo7FViwFO3MU6v-uClh2t4aPsmuXhsFghgw5gd4yIYlDd6WaMbxvUqgg_UAdP1xomQgtwQeuXPgKO2tGRGgaOvcIIrSJUOCfHv1-5d1SYyNPbl00lNvPk                                                                                                                                                                                                                                                                                                                                                                                                                                         