(self.webpackChunkerequestApp=self.webpackChunkerequestApp||[]).push([["src_navigation_Request_tsx-webpack_sharing_consume_default_react-native_package_json_react-na-ee400a"],{89142:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(85715)),l=n(87841),o=r(n(24541)),u=r(n(32055)),s=n(21527),c=r(n(61086)),d=n(46317),f=n(7005),p=n(41995),y=n(60596),m=n(35708),h=n(20880),v=n(2884),g=n(32207),S=n(47671);t.default=function(e){var t=e.dataCard,n=e.select,r=e.onSelect,x=e.account,j=e.isView,b=e.isRadioSelect,w=e.isSelect,D=void 0!==w&&w,C=(0,v.useTranslation)().t,T=(0,s.useState)(!1),I=(0,a.default)(T,2),k=I[0],P=I[1];(0,s.useEffect)((function(){j||null==n||n.forEach((function(e){e.id===t.id&&P(!0)}))}),[]);var _=function(e){if(b)e?null==r||r([t]):null==r||r([]);else if(P(e),e)null==r||r([].concat((0,i.default)(n),[t]));else{var a=n.filter((function(e){return e.id!==t.id}));null==r||r(a)}},M=function(e,t,n){return(0,S.jsx)(l.View,{style:{backgroundColor:t,paddingHorizontal:(0,p.SizeDP)(10),paddingVertical:(0,p.SizeDP)(6),borderRadius:(0,p.SizeDP)(16),alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(o.default,{style:{color:e},children:C(`TK.${n}`)})})};return(0,S.jsxs)(l.View,{style:c.default.ctnMain,children:[!j&&(0,S.jsx)(S.Fragment,{children:b?(0,S.jsx)(g.Radio,{style:{marginRight:6},checked:D,onChange:function(){return _(!D)}}):(0,S.jsx)(u.default,{checked:k,onChange:function(){return _(!k)}})}),(0,S.jsx)(f.SafeAreaView,{edges:["right"],style:{flex:1},children:(0,S.jsxs)(l.View,{style:[c.default.ctnCard,j&&{marginHorizontal:(0,p.SizeDP)(16)}],children:[(0,S.jsxs)(l.View,{style:[c.default.ctnHeader],children:[(0,S.jsxs)(l.View,{style:[c.default.ctnRow,{flex:1}],children:[(0,S.jsx)(l.View,{style:c.default.ctnImage,children:(0,S.jsx)(l.Image,{width:(0,p.SizeDP)(40),height:(0,p.SizeDP)(40),style:{borderRadius:(0,p.SizeDP)(20)},source:{uri:null!=x&&x.imageUrl?null==x?void 0:x.imageUrl:"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}})}),(0,S.jsxs)(l.View,{style:{rowGap:(0,p.SizeDP)(6),flex:1},children:[(0,S.jsx)(o.default,{style:c.default.name,children:null==t?void 0:t.createdBy}),(0,S.jsxs)(o.default,{style:c.default.group,children:[C("CM.serviceName"),": ",null==t?void 0:t.serviceName]})]})]}),function(){switch(null==t?void 0:t.priority){case y.Propity.high:return(0,S.jsx)(d.Iconhigh,{width:(0,p.SizeDP)(16),height:(0,p.SizeDP)(16)});case y.Propity.medium:return(0,S.jsx)(d.Iconmedium,{width:(0,p.SizeDP)(16),height:(0,p.SizeDP)(16)});case y.Propity.low:return(0,S.jsx)(d.Iconlow,{width:(0,p.SizeDP)(16),height:(0,p.SizeDP)(16)})}}()]}),(0,S.jsx)(g.Divider,{}),(0,S.jsxs)(l.View,{style:[c.default.ctnTitle],children:[(0,S.jsxs)(l.View,{style:c.default.ctnRow,children:[(0,S.jsx)(o.default,{style:c.default.name,children:C("CM.titleCard")}),(0,S.jsx)(o.default,{numberOfLines:1,style:c.default.handleNewGroup,children:null==t?void 0:t.title})]}),(0,S.jsxs)(l.View,{style:c.default.ctnRow,children:[(0,S.jsx)(o.default,{style:c.default.name,children:C("CM.createDateCard")}),(0,S.jsx)(o.default,{numberOfLines:1,style:c.default.handleNewGroup,children:m.DateUtils.convertDateToDDMMYYYY_H_M(null==t?void 0:t.createdDate)})]}),(0,S.jsxs)(l.View,{style:c.default.ctnRow,children:[(0,S.jsx)(o.default,{style:c.default.name,children:C("CM.statusCard")}),function(){switch(null==t?void 0:t.ticketStatus){case y.Status.completed:return M(h.Color.completed,h.Color.completed01,y.Status.completed);case y.Status.draft:return M(h.Color.draft,h.Color.draft01,y.Status.draft);case y.Status.voided:return M(h.Color.voided,h.Color.voided01,y.Status.voided);case y.Status.rejected:return M(h.Color.rejected,h.Color.rejected01,y.Status.rejected);case y.Status.processing:return M(h.Color.processing,h.Color.processing01,y.Status.processing);case y.Status.overdue:return M(h.Color.rejected,h.Color.rejected01,y.Status.overdue)}}()]})]})]})})]})}},61086:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},ctnCard:{backgroundColor:a.Color.White,overflow:"hidden",borderRadius:(0,i.SizeDP)(10),marginVertical:(0,i.SizeDP)(12),shadowColor:a.Color.Black,shadowOffset:{width:2,height:2},shadowOpacity:.2,shadowRadius:4,elevation:4},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:(0,i.SizeDP)(16),paddingVertical:(0,i.SizeDP)(12)},ctnTitle:{paddingHorizontal:(0,i.SizeDP)(16),rowGap:(0,i.SizeDP)(16),paddingVertical:(0,i.SizeDP)(16)},ctnRow:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnImage:{width:(0,i.SizeDP)(40),height:(0,i.SizeDP)(40),backgroundColor:"red",borderRadius:(0,i.SizeDP)(20),marginRight:(0,i.SizeDP)(12)},name:{fontFamily:a.Font.InterMedium500,color:a.Color.TextPrimary},group:{color:a.Color.Text,fontSize:i.default.FontTiny,flex:1},handleNewGroup:{color:a.Color.Text,fontSize:i.default.FontTiny,width:(0,i.SizeDP)(130),textAlign:"right"}})},32055:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(n(21527));var i=n(87841),a=r(n(35395)),l=r(n(24541)),o=n(32207),u=n(20880),s=n(47671);t.default=function(e){var t=e.checked,n=e.label,r=e.onChange,c=e.style,d=e.labelStyle;return(0,s.jsxs)(i.View,{style:[a.default.ctnContainer,c],children:[(0,s.jsx)(i.TouchableOpacity,{onPress:r,children:(0,s.jsx)(o.Icon,{name:t?"checkmark-square-2":"square-outline",fill:u.Color.BgPrimary,width:24,height:24})}),(0,s.jsx)(i.TouchableOpacity,{activeOpacity:1,onPress:r,children:(0,s.jsx)(l.default,{style:[a.default.txtLabel,d],children:n})})]})}},35395:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=n(41995);t.default=r.StyleSheet.create({ctnContainer:{flexDirection:"row",alignItems:"center"},txtLabel:{fontSize:i.FontSize.FontSmall,fontFamily:i.Font.InterMedium500,color:i.Color.TxtCheckbox,marginStart:(0,a.SizeDP)(8)}})},85555:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85715)),a=n(2543),l=r(n(21527)),o=n(87841),u=r(n(24541)),s=n(46317),c=n(41995),d=r(n(72431)),f=n(7005),p=n(45335),y=n(2884),m=n(47671);t.default=function(e){var t=e.listDropdown,n=e.onChangeItem,r=e.renderShowData,h=(0,y.useTranslation)().t,v=((0,f.useSafeAreaInsets)(),l.default.useState(!1)),g=(0,i.default)(v,2),S=g[0],x=g[1],j=function(e){n(e),x(!1)};return(0,m.jsx)(o.View,{style:{flexDirection:"row",justifyContent:"center"},children:(0,m.jsx)(p.Menu,{visible:S,onDismiss:function(){return x(!1)},style:{backgroundColor:"#fff",zIndex:999999999},contentStyle:{backgroundColor:"#fff",borderRadius:(0,c.SizeDP)(8)},anchor:(0,m.jsx)(o.Pressable,{style:{alignItems:"center",justifyContent:"center",padding:4},onPress:function(){x(!0)},children:(0,a.isEmpty)(r)?(0,m.jsx)(s.IconHozDot,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)}):r}),children:(0,m.jsx)(o.FlatList,{style:{zIndex:999999999},data:t,renderItem:function(e){var t=e.item;return(0,m.jsx)(p.Menu.Item,{style:d.default.item,onPress:function(){return j(t)},title:(0,m.jsxs)(o.TouchableOpacity,{style:d.default.item,onPress:function(){return j(t)},children:[!(0,a.isEmpty)(t.icon)&&t.icon,t.key&&(0,m.jsx)(u.default,{children:h(`${t.key}`)})]})})},keyExtractor:function(e,t){return t.toString()}})})})}},72431:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995);t.default=r.StyleSheet.create({ctnListItem:{minWidth:(0,i.SizeDP)(30),position:"absolute",backgroundColor:"grey",borderRadius:(0,i.SizeDP)(8),right:(0,i.SizeDP)(20),top:(0,i.SizeDP)(20),zIndex:3},item:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:(0,i.SizeDP)(10)},overlay:{flex:1},dropdown:{position:"absolute",backgroundColor:"#fff",minWidth:(0,i.SizeDP)(30),maxWidth:(0,i.SizeDP)(200),shadowColor:"#000000",shadowRadius:4,shadowOffset:{height:4,width:0},shadowOpacity:.5,right:(0,i.SizeDP)(10),borderRadius:(0,i.SizeDP)(8)}})},65963:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=r(n(10727)),l=n(32207),o=r(n(24541)),u=n(2884),s=n(2543),c=n(47671);t.default=function(e){var t,n,r,d,f,p,y,m,h=e.placeholder,v=e.onSelect,g=e.valueSelect,S=e.listData,x=e.multiple,j=void 0!==x&&x,b=e.size,w=void 0===b?"large":b,D=e.isi18n,C=void 0!==D&&D,T=e.label,I=e.isRequired,k=void 0!==I&&I,P=e.caption,_=e.status,M=void 0===_?"primary":_,F=e.disabled,O=void 0!==F&&F,E=(0,u.useTranslation)().t,R="";g&&(R=(0,s.isArray)(g)?j?g.map((function(e){return C?E(S[e.row].label.trim()):S[e.row].label.trim()})).join(", "):C?E(null==(t=S[g[0].row])||null==(n=t.label)?void 0:n.trim()):null==(r=S[g[0].row])||null==(d=r.label)?void 0:d.trim():C?E(null==(f=S[g.row])||null==(p=f.label)?void 0:p.trim()):null==(y=S[g.row])||null==(m=y.label)?void 0:m.trim());return(0,c.jsx)(i.View,{style:a.default.container,children:(0,c.jsx)(l.Select,{label:T?function(e){return(0,c.jsxs)(o.default,Object.assign({},e,{style:a.default.textTitle,children:[T," ",k&&(0,c.jsx)(o.default,{style:{color:"#E14337"},children:"*"})]}))}:void 0,caption:P?function(e){return(0,c.jsxs)(i.View,Object.assign({},e,{style:a.default.ctnCaption,children:[(0,c.jsx)(l.Icon,{fill:"#E14337",width:14,height:14,name:"info"}),(0,c.jsx)(o.default,{style:a.default.textCaption,children:P})]}))}:void 0,disabled:O,size:w,status:M,multiSelect:j,appearance:"default",placeholder:function(e){return(0,c.jsx)(o.default,Object.assign({},e,{children:h}))},selectedIndex:g,value:R,onSelect:function(e){return v(e)},children:S&&S.map((function(e){return(0,c.jsx)(l.SelectItem,{title:function(t){return(0,c.jsx)(o.default,Object.assign({},t,{children:C?E(e.label.trim()):e.label.trim()}))}},e.value)}))})})}},10727:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({container:{backgroundColor:i.Color.White},dropdown:{height:(0,a.SizeDP)(48),borderColor:i.Color.TxtCheckbox,borderWidth:(0,a.SizeDP)(1),borderRadius:(0,a.SizeDP)(8),paddingHorizontal:(0,a.SizeDP)(8)},placeholderStyle:{fontSize:a.default.FontSmall,color:i.Color.Text055,fontFamily:i.Font.InterRegular400},selectedTextStyle:{fontSize:a.default.FontSmall,color:i.Color.Text,fontFamily:i.Font.InterRegular400},itemTextStyle:{fontSize:a.default.FontBase,color:i.Color.Text07,fontFamily:i.Font.InterRegular400},itemContainerStyle:{borderRadius:(0,a.SizeDP)(8),overflow:"hidden",borderWidth:(0,a.SizeDP)(1),borderColor:i.Color.colorBorder},iconStyle:{},inputSearchStyle:{},selectedStyle:{flexDirection:"row",justifyContent:"center",alignItems:"center",borderRadius:(0,a.SizeDP)(8),backgroundColor:"white",shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1.41,elevation:2,paddingHorizontal:(0,a.SizeDP)(12),paddingVertical:(0,a.SizeDP)(8),columnGap:(0,a.SizeDP)(16),marginTop:(0,a.SizeDP)(8),marginRight:(0,a.SizeDP)(8)},textSelectedStyle:{},textTitle:{fontSize:12,fontFamily:i.Font.InterMedium500,color:"#00204DF2",marginBottom:4,lineHeight:22},ctnCaption:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,marginTop:4},textCaption:{fontSize:12,fontFamily:i.Font.InterMedium500,color:"#E14337"}})},64213:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=r(n(94516)),l=r(n(4653)),o=n(47671);t.default=function(e){var t=e.onPressLeft,n=e.onPressRight,r=e.containerStyle,u=e.btnStyleLeft,s=e.btnStyleRight,c=e.labelStyleLeft,d=e.labelStyleRight,f=e.labelLeft,p=void 0===f?"left":f,y=e.labelRight,m=void 0===y?"right":y;return(0,o.jsxs)(i.View,{style:[r,l.default.ctnGroup],children:[(0,o.jsx)(a.default,{style:[l.default.btn,l.default.btnLeft,u],label:p,styleLabel:[c,l.default.labelStyleLeft],onPress:t}),(0,o.jsx)(a.default,{style:[l.default.btn,s],label:m,styleLabel:[d],onPress:n})]})}},4653:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995),a=n(20880);t.default=r.StyleSheet.create({ctnGroup:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,i.SizeDP)(12),backgroundColor:a.Color.White},btn:{flex:1},btnLeft:{backgroundColor:a.Color.BtnDisable},labelStyleLeft:{color:a.Color.Text}})},87288:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(n(21527));var i=n(87841),a=r(n(93580)),l=r(n(24541)),o=n(20880),u=n(47671);t.default=function(e){var t=e.style,n=e.message,r=e.isVisible;return(0,u.jsx)(i.Modal,{visible:r,transparent:!0,style:t,children:(0,u.jsxs)(i.View,{style:a.default.ctnContainer,children:[(0,u.jsx)(i.ActivityIndicator,{size:"large",color:o.Color.White}),(0,u.jsx)(l.default,{children:n})]})})}},93580:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnContainer:{flex:1,backgroundColor:i.Color.TxtCheckbox,alignItems:"center",justifyContent:"center"}})},67903:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=n(20880),l=r(n(69419)),o=n(47671);t.default=function(){return(0,o.jsx)(i.View,{style:l.default.loadingMore,children:(0,o.jsx)(i.ActivityIndicator,{size:"small",color:a.Color.BgPrimary})})}},69419:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841);t.default=r.StyleSheet.create({loadingMore:{flexDirection:"row",justifyContent:"center",alignItems:"center",paddingVertical:16}})},75463:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.OverflowMenuCM=void 0;var i=r(n(85715)),a=n(21527),l=n(32207),o=n(2884),u=n(87841),s=r(n(24541)),c=n(47671);t.OverflowMenuCM=function(e){var t=e.listData,n=void 0===t?[]:t,r=e.selectedIndex,d=void 0===r?void 0:r,f=e.selectedTitle,p=void 0===f?"Toggle Menu":f,y=e.setSelectedIndex,m=e.renderSelected,h=(0,o.useTranslation)().t,v=(0,a.useState)(!1),g=(0,i.default)(v,2),S=g[0],x=g[1];return(0,c.jsx)(l.OverflowMenu,{anchor:function(){return m?(0,c.jsx)(u.TouchableOpacity,{onPress:function(){return x(!0)},children:m}):(0,c.jsx)(u.TouchableOpacity,{onPress:function(){return x(!0)},children:(0,c.jsx)(s.default,{children:p})})},visible:S,selectedIndex:d,onSelect:function(e){y(e),x(!1)},onBackdropPress:function(){return x(!1)},children:n.map((function(e,t){return(0,c.jsx)(l.MenuItem,{title:h(e.value),accessoryLeft:null==e?void 0:e.icon},t)}))})}},81924:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85715)),a=n(87841),l=r(n(24541)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),u=r(n(83128)),s=n(41995),c=n(46317),d=n(47671);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}t.default=function(e){var t=e.collectionSize,n=e.pageSize,r=e.currentPage,f=e.onPageChange,p=(0,o.useState)(Array.from(Array(Math.ceil(t/n))).map((function(e,t){return t+1}))),y=(0,i.default)(p,2),m=y[0],h=y[1];(0,o.useEffect)((function(){h(Array.from(Array(Math.ceil(t/n))).map((function(e,t){return t+1})))}),[t]);var v=function(){for(var e=[],t=Math.max(1,r-1),n=Math.min(m.length,r+1),i=t;i<=n;i++)i>m.length||(0===i&&(i+=1),e.push(i));return e},g=function(e){f(e),v()};return(0,d.jsxs)(a.View,{style:u.default.ctnMain,children:[(0,d.jsx)(a.TouchableOpacity,{onPress:function(){var e=r-1;e<=0||e>=1&&g(e)},style:[u.default.ctnText,{transform:[{rotate:"90deg"}]}],hitSlop:(0,s.SizeDP)(15),children:(0,d.jsx)(c.IconArrowGrey,{width:(0,s.SizeDP)(16),height:(0,s.SizeDP)(16)})}),m.length>5?(0,d.jsxs)(d.Fragment,{children:[r>2&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.TouchableOpacity,{hitSlop:(0,s.SizeDP)(15),onPress:function(){return g(1)},style:[u.default.ctnText,1===r&&u.default.ctnSelect],children:(0,d.jsx)(l.default,{children:"1"})}),r>3&&(0,d.jsx)(l.default,{children:"..."})]}),v().map((function(e){return(0,d.jsx)(a.TouchableOpacity,{hitSlop:(0,s.SizeDP)(15),onPress:function(){return g(e)},style:[u.default.ctnText,r===e&&u.default.ctnSelect],children:(0,d.jsx)(l.default,{children:e})},e)})),r<m.length-1&&(0,d.jsxs)(d.Fragment,{children:[r<m.length-2&&(0,d.jsx)(l.default,{children:"..."}),(0,d.jsx)(a.TouchableOpacity,{hitSlop:(0,s.SizeDP)(15),style:[u.default.ctnText,r===m.length&&u.default.ctnSelect],onPress:function(){return g(m.length)},children:(0,d.jsx)(l.default,{children:m.length})})]})]}):(0,d.jsx)(d.Fragment,{children:v().map((function(e){return(0,d.jsx)(a.TouchableOpacity,{hitSlop:(0,s.SizeDP)(15),onPress:function(){return g(e)},style:[u.default.ctnText,r===e&&u.default.ctnSelect],children:(0,d.jsx)(l.default,{children:e})},e)}))}),(0,d.jsx)(a.TouchableOpacity,{onPress:function(){var e=r+1;e>m.length||e<=m.length&&g(e)},style:[u.default.ctnText,{transform:[{rotate:"-90deg"}]}],hitSlop:(0,s.SizeDP)(15),children:(0,d.jsx)(c.IconArrowGrey,{width:(0,s.SizeDP)(16),height:(0,s.SizeDP)(16)})})]})}},83128:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995);t.default=r.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"center"},ctnText:{alignItems:"center",justifyContent:"center",padding:(0,i.SizeDP)(4),borderRadius:(0,i.SizeDP)(10),marginHorizontal:(0,i.SizeDP)(5),minWidth:(0,i.SizeDP)(30)},ctnSelect:{backgroundColor:"#f2ecfd",color:"#6f2ced"}})},79445:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=r(n(35405)),l=n(47671);t.default=function(){return(0,l.jsxs)(i.View,{style:a.default.skeletonItem,children:[(0,l.jsx)(i.View,{style:{width:40,height:40,backgroundColor:"#E4E9F2",borderRadius:8}}),(0,l.jsxs)(i.View,{style:a.default.skeletonContent,children:[(0,l.jsx)(i.View,{style:a.default.skeletonTitle}),(0,l.jsx)(i.View,{style:a.default.skeletonDescription})]})]})}},35405:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841);t.default=r.StyleSheet.create({skeletonItem:{margin:16,flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8,flex:1},skeletonContent:{flex:1,rowGap:6},skeletonTitle:{backgroundColor:"#E4E9F2",padding:8,borderRadius:4},skeletonDescription:{backgroundColor:"#E4E9F2",borderRadius:4,padding:6}})},71773:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(n(21527));var i=n(87841),a=n(45335),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),o=n(47671);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var s=i.StyleSheet.create({container:{flex:1,justifyContent:"center"},icon:{textAlign:"center"},text:{padding:(0,l.SizeDP)(16),fontSize:l.default.FontBiggest,color:a.MD3Colors.primary20,textAlign:"center"},progress:{marginVertical:(0,l.SizeDP)(16),marginHorizontal:(0,l.SizeDP)(32)}});t.default=function(e){var t=e.app;return(0,o.jsxs)(i.SafeAreaView,{style:s.container,children:[(0,o.jsxs)(a.Text,{allowFontScaling:!1,style:s.text,children:[t," application is loading. Please wait..."]}),(0,o.jsx)(a.ProgressBar,{style:s.progress,indeterminate:!0,color:a.MD3Colors.primary50})]})}},75672:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85715)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),l=n(87841),o=r(n(14892)),u=n(2884),s=r(n(24541)),c=n(47671);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}t.default=function(e){var t=e.tableHeaders,n=e.tableData,r=e.stickyColumnLeftIndex,d=void 0===r?0:r,f=(e.stickyColumnRightIndex,e.stickyLeft),p=(e.stickyRight,e.isPaging,(0,u.useTranslation)().t),y=(0,l.useWindowDimensions)().width,m=(0,a.useState)(0),h=(0,i.default)(m,2),v=h[0],g=h[1];return(0,c.jsx)(l.View,{style:o.default.container,children:(0,c.jsxs)(l.View,{style:o.default.tableBody,children:[f&&d&&t.slice(-d).reverse().map((function(e,t){return(0,c.jsxs)(l.View,{onLayout:function(e){g(e.nativeEvent.layout.width)},style:[o.default.stickyColumnScroll,{right:t*v},1===d&&o.default.box],children:[(0,c.jsx)(l.View,{style:[o.default.stickyHeader,"action"===e&&{alignItems:"center"}],children:(0,c.jsx)(s.default,{style:o.default.headerText,children:p(`TK.${e}`)})}),null==n?void 0:n.map((function(t,n){return(0,c.jsx)(l.View,{style:[o.default.stickyColumn,"action"===e&&{alignItems:"center"}],children:"object"!=typeof t[e]?(0,c.jsx)(s.default,{style:o.default.cellText,children:t[e]}):t[e]},n)}))]},e)})),(0,c.jsx)(l.ScrollView,{horizontal:!0,children:(0,c.jsx)(l.View,{style:[o.default.row,!f&&{marginRight:0}],children:t.slice(0,t.length-d).map((function(e,r){return(0,c.jsxs)(l.View,{children:[(0,c.jsx)(l.View,{style:[o.default.stickyHeader,"action"===e&&{alignItems:"center"},{minWidth:"STT"===e?30:(y-30)/(t.length-d-1)}],children:(0,c.jsx)(s.default,{style:o.default.headerText,children:p(`TK.${e}`)})}),null==n?void 0:n.map((function(n,r){return(0,c.jsx)(l.View,{style:[o.default.stickyColumn,"action"===e&&{alignItems:"center"},{minWidth:"STT"===e?30:(y-30)/(t.length-d-1)}],children:"object"!=typeof n[e]?(0,c.jsx)(s.default,{style:o.default.cellText,children:n[e]}):n[e]},r)}))]},r)}))})})]})})}},14892:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=n(41995);t.default=r.StyleSheet.create({container:{flex:1},tableBody:{flexDirection:"row",flex:1},stickyColumnScroll:{position:"absolute",right:0,zIndex:10,minWidth:(0,a.SizeDP)(100),flex:1},stickyHeader:{minWidth:(0,a.SizeDP)(100),padding:(0,a.SizeDP)(10),justifyContent:"center",alignItems:"flex-start",backgroundColor:"#F2ECFD",borderTopWidth:1,borderBottomWidth:1,borderColor:"#00358014"},stickyColumn:{minWidth:(0,a.SizeDP)(100),flex:1,justifyContent:"center",alignItems:"flex-start",backgroundColor:"#fff",padding:(0,a.SizeDP)(10),minHeight:(0,a.SizeDP)(50)},headerRow:{flexDirection:"row",marginRight:(0,a.SizeDP)(100)},headerCell:{minWidth:(0,a.SizeDP)(100),padding:(0,a.SizeDP)(10),justifyContent:"center",alignItems:"flex-start",backgroundColor:"#F2ECFD",borderTopWidth:1,borderBottomWidth:1,borderColor:"#00358014"},headerText:{fontSize:i.FontSize.FontTiny,fontFamily:i.Font.InterMedium500,color:"#00204DB2"},row:{flexDirection:"row",marginRight:(0,a.SizeDP)(100)},cell:{minWidth:(0,a.SizeDP)(100),padding:(0,a.SizeDP)(10),justifyContent:"center",alignItems:"flex-start"},cellText:{textAlign:"left",fontSize:i.FontSize.FontTiny,fontFamily:i.Font.InterRegular400,color:"#00204DCC"},box:{shadowColor:"#2D3239",shadowOffset:{width:-1,height:0},shadowOpacity:.1,shadowRadius:6,elevation:3}})},55529:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(7005),o=r(n(93238)),u=n(20880),s=n(87841),c=r(n(94516)),d=r(n(48049)),f=n(21527),p=n(12638),y=r(n(24541)),m=n(41995),h=n(35708),v=r(n(77389)),g=n(40851),S=n(2884),x=n(88e3),j=r(n(43184)),b=n(75463),w=n(32207),D=n(11671),C=n(9353),T=n(47671);t.default=function(e){var t=e.versionId,n=e.isShowNoti,r=void 0!==n&&n,I=e.data,k=e.readOnly,P=e.isOnlyView,_=e.viewFromDoc,M=void 0!==_&&_,F=e.onClose,O=e.handleSubmit,E=e.nameHeader,R=e.envelopeEnvNo,V=e.isJsonDataFrom,z=(0,S.useTranslation)().t,B=(0,f.useRef)(null),A=(0,p.useAppSelector)((function(e){return e.common})).accessToken,L=(0,f.useState)(),N=(0,a.default)(L,2),H=N[0],U=N[1],W=(0,f.useState)([]),$=(0,a.default)(W,2),G=$[0],Y=$[1],K=(0,f.useState)(!0),q=(0,a.default)(K,2),J=q[0],X=q[1],Q=(0,f.useState)(),Z=(0,a.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,f.useState)(!1),re=(0,a.default)(ne,2),ie=re[0],ae=re[1],le=(0,g.useReviewServices)(),oe=(0,D.useTicketServices)();(0,f.useEffect)((function(){r&&s.Alert.alert(z("CM.noti"),z("CM.pleaseFillForm"))}),[]);var ue,se,ce,de=(ue=(0,i.default)((function*(e){var t={userTaskId:I._userTaskId,ticketId:I._ticketId,version:e},n=yield le.getFormVersionByTicketAndUserTaskId(t,A);if(n&&null===e){var r=Array.from(Array(Math.ceil(n.versionUserTask))).map((function(e,t){return t+1})).map((function(e,t){return{id:e,key:`${z("CM.version")} `+e,value:`${z("CM.version")} `+e}}));Y(r),U(r[r.length-1])}return n})),function(e){return ue.apply(this,arguments)}),fe=function(e){return["textField","textArea","password","email","phone_number","radio_button","upload_file","upload_img","hyperlink","datepicker","signature"].includes(e.type)?"String":"number"===e.type?"Number":["check_box","dropdown"].includes(e.type)?"dropdown"===e.type&&e.validate.mutilChoose||"check_box"===e.type?"List":"String":null},pe=(se=(0,i.default)((function*(e){var t,n;if(V){var r,i=yield ye();null==(r=n=i||[])||r.forEach((function(e){var t;null!=e&&e.code&&"eContractEnvelopEnvNo"===(null==e?void 0:e.code)&&(e.value=R,null==(t=n)||t.push({code:e.code,display:e.display,formId:e.id,hashid:e.hashid,label:e.label,metaSearchOnRequest:e.metaSearchOnRequest,type:e.type,validate:e.validate,value:e.value}))}))}else{var a=yield de(e);a&&(n=null==a?void 0:a.formData)&&R&&n.forEach((function(e){"eContractEnvelopEnvNo"===e.code&&(e.value=R)}))}var l=`window.postMessage('${JSON.stringify({type:"postFormEdit",isReadonly:k,data:n}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;null==B||null==(t=B.current)||t.injectJavaScript(l)})),function(e){return se.apply(this,arguments)}),ye=(ce=(0,i.default)((function*(){try{var e=yield oe.getFormByVersion(t),n=null!=e&&e.jsonForm?JSON.parse(null==e?void 0:e.jsonForm):[];return n&&n.length>0&&(n=(0,C.getListComponentOfTemplate)(n)),n}catch(e){}})),function(){return ce.apply(this,arguments)});return(0,T.jsxs)(l.SafeAreaView,{edges:["bottom","top"],style:{flex:1,backgroundColor:"#fff"},children:[(0,T.jsx)(j.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:E,onPressIconLeft:F}),(0,T.jsx)(w.Divider,{}),G.length>0&&!P&&!k&&(0,T.jsxs)(s.View,{style:{padding:16,alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:(0,m.SizeDP)(16)},children:[(0,T.jsx)(y.default,{children:z("CM.selectVersion")}),(0,T.jsx)(b.OverflowMenuCM,{selectedIndex:ee,listData:G,setSelectedIndex:function(e){var t;e&&(te(e),U(G[null==e?void 0:e.row]),pe(null==(t=G[null==e?void 0:e.row])?void 0:t.id))},selectedTitle:(0,T.jsx)(s.View,{style:d.default.version,children:(0,T.jsx)(y.default,{children:null==H?void 0:H.value})})})]}),(0,T.jsx)(o.default,{nestedScrollEnabled:!0,ref:B,onMessage:function(e){if(!M){var n=e.nativeEvent.data;if(n&&"string"==typeof n){var r=JSON.parse(n);if("e-from"===(null==r?void 0:r.result))pe(null);else if("result"===(null==r?void 0:r.result)){var i={formData:null==r?void 0:r.data.map((function(e){return Object.assign({},e,{dataType:fe(e),typeForm:e.type,value:"datepicker"===e.type?h.DateUtils.convertDateToDDMMYYYY(e.value):e.value})})),ticketId:I._ticketId,userTaskId:I._userTaskId,version:t,eformId:I.formId};le.updateFormData(i,A).then((function(e){e?(v.default.show({type:"success",text1:z("CM.noti"),text2:z("CM.fillFormSuccess")}),ie||O&&O(),F()):v.default.show({type:"error",text1:z("CM.noti"),text2:z("CM.fillFormFailure")})}))}}}},startInLoadingState:!0,injectedJavaScript:u.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,domStorageEnabled:!0,javaScriptEnabled:!0,thirdPartyCookiesEnabled:!0,source:{uri:(0,x.getConfig)().BASE_URL_FORM+t},onLoadEnd:function(){return X(!1)},webviewDebuggingEnabled:!0}),(0,T.jsxs)(s.View,{style:d.default.ctnFooter,children:[!P&&!k&&(0,T.jsx)(c.default,{disabled:J,style:{flex:1,backgroundColor:"#f2ecfd"},styleLabel:{color:"#6d1fad"},label:z("CM.save"),onPress:function(){var e;ae(!0);var t=`window.postMessage('${JSON.stringify({result:"submit"})}', '*');`;null==B||null==(e=B.current)||e.injectJavaScript(t)}}),!P&&!k&&(0,T.jsx)(c.default,{label:z("CM.confirm"),style:{flex:1},styleLabel:{color:"#fff"},onPress:function(){var e;ae(!1);var t=`window.postMessage('${JSON.stringify({result:"submit"})}', '*');`;null==B||null==(e=B.current)||e.injectJavaScript(t)}})]})]})}},48049:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995);t.default=r.StyleSheet.create({ctnFooter:{flexDirection:"row",paddingHorizontal:(0,i.SizeDP)(16),columnGap:(0,i.SizeDP)(16),marginTop:(0,i.SizeDP)(8)},version:{borderWidth:(0,i.SizeDP)(1),borderColor:"rgba(0, 53, 128, .35)",borderRadius:(0,i.SizeDP)(8),paddingHorizontal:(0,i.SizeDP)(8),paddingVertical:(0,i.SizeDP)(5)}})},3614:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(55166),a=r(n(21527)),l=r(n(71773)),o=n(47671),u=a.default.lazy((function(){return i.Federated.importModule("eContract","./createContract")}));t.default=function(){return(0,o.jsx)(a.default.Suspense,{fallback:(0,o.jsx)(l.default,{app:"Create contract screen"}),children:(0,o.jsx)(u,{})})}},829:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(7005),u=r(n(43184)),s=r(n(27747)),c=n(41995),d=r(n(29846)),f=n(46317),p=r(n(69290)),y=n(21527),m=n(87841),h=r(n(24541)),v=r(n(65963)),g=n(98884),S=n(14740),x=n(2543),j=r(n(94516)),b=r(n(64213)),w=n(12638),D=r(n(89142)),C=n(32207),T=n(2884),I=n(11671),k=r(n(33254)),P=n(20880),_=n(47671);t.default=function(e){var t=e.onGoBack,n=e.paramsSelectTicket,r=e.codeChannel,M=e.checkSabeco,F=void 0!==M&&M,O=e.configFilter,E=e.inheritanceModeler,R=e.modelerId,V=e.onClose,z=(0,T.useTranslation)().t,B=(null==E?void 0:E.modelerIds)||[],A=(0,S.useNavigation)(),L=(0,y.useState)(!1),N=(0,l.default)(L,2),H=N[0],U=N[1],W=(0,y.useState)([]),$=(0,l.default)(W,2),G=$[0],Y=$[1],K=(0,y.useState)([]),q=(0,l.default)(K,2),J=q[0],X=q[1],Q=(0,y.useState)([]),Z=(0,l.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,y.useState)([]),re=(0,l.default)(ne,2),ie=re[0],ae=re[1],le=(0,y.useState)(0),oe=(0,l.default)(le,2),ue=oe[0],se=oe[1],ce=(0,y.useState)([]),de=(0,l.default)(ce,2),fe=de[0],pe=de[1],ye=(0,y.useState)(n),me=(0,l.default)(ye,2),he=me[0],ve=me[1],ge=(0,y.useState)(0),Se=(0,l.default)(ge,2),xe=Se[0],je=Se[1],be=(0,y.useState)(!1),we=(0,l.default)(be,2),De=we[0],Ce=we[1],Te=(0,y.useState)(""),Ie=(0,l.default)(Te,2),ke=Ie[0],Pe=Ie[1],_e=(0,y.useState)(""),Me=(0,l.default)(_e,2),Fe=Me[0],Oe=Me[1],Ee=(0,y.useState)({}),Re=(0,l.default)(Ee,2),Ve=Re[0],ze=Re[1],Be=(0,w.useAppSelector)((function(e){return e.account})).dataAccount,Ae=(0,w.useAppSelector)((function(e){return e.common.accessToken})),Le=(0,I.useTicketServices)(),Ne=(0,x.debounce)((function(e){Oe(e)}),500),He=(0,y.useMemo)((function(){return!!O&&!!(0,x.get)(O,"dataFilter.priority")}),[O]),Ue=(0,y.useMemo)((function(){return!!O&&!!(0,x.get)(O,"dataFilter.ticketStatus")}),[O]),We=(0,y.useMemo)((function(){return!O}),[O]),$e=(0,y.useMemo)((function(){return!!O&&!!(0,x.get)(O,"dataFilter.startDate")}),[O]),Ge=(0,y.useMemo)((function(){return!!O&&!!(0,x.get)(O,"dataFilter.endDate")}),[O]);(0,y.useEffect)((function(){if(O){var e=(0,x.get)(O,"dataFilter.priority"),t=(0,x.get)(O,"dataFilter.ticketStatus"),n=(0,x.get)(O,"dataFilter.endDate"),r=(0,x.get)(O,"dataFilter.startDate");if(e){var i=null==e?void 0:e.map((function(e){return new C.IndexPath(null==g.dataPrioritySelect?void 0:g.dataPrioritySelect.findIndex((function(t){return t.value===e})))}));ae(i)}if(t){var a=null==t?void 0:t.map((function(e){return new C.IndexPath(null==g.dataStatus?void 0:g.dataStatus.findIndex((function(t){return t.value===e})))}));X(a)}r&&ze(Object.assign({},Ve,{startDate:new Date(r)})),n&&ze(Object.assign({},Ve,{endDate:new Date(n)}))}}),[]),(0,y.useEffect)((function(){return Ne(ke),function(){Ne.cancel()}}),[ke]),(0,y.useEffect)((function(){(0,a.default)((function*(){yield Xe(xe,Fe)}))()}),[xe,Fe]),(0,S.useFocusEffect)((0,y.useCallback)((function(){(0,a.default)((function*(){je(0),yield Qe()}))()}),[]));var Ye,Ke,qe,Je=(Ye=(0,a.default)((function*(){je(0),yield Xe(0,Fe)})),function(){return Ye.apply(this,arguments)}),Xe=(Ke=(0,a.default)((function*(e,t){try{var n,a,l,o,u={textSearch:F?r:t,ticketStatus:null!=(n=J.map((function(e){return g.dataStatus[e.row].value})))?n:[],service:null!=(a=null==G?void 0:G.map((function(e){var t;return null==ee||null==(t=ee[null==e?void 0:e.row])?void 0:t.value})))?a:[],priority:null!=(l=null==ie?void 0:ie.map((function(e){var t;return null==g.dataPrioritySelect||null==(t=g.dataPrioritySelect[null==e?void 0:e.row])?void 0:t.value})))?l:[],startDate:null==Ve?void 0:Ve.startDate,endDate:null==Ve?void 0:Ve.endDate,searchForSabeco:!!F,modelerId:R};if(O){var s,c,d=(0,x.get)(O,"dataFilter.priority"),f=(0,x.get)(O,"dataFilter.ticketStatus"),p=(0,x.get)(O,"dataFilter.endDate"),y=(0,x.get)(O,"dataFilter.startDate");u=Object.assign({},null==O?void 0:O.dataFilter,{priority:d||(null!=(s=null==ie?void 0:ie.map((function(e){var t;return null==g.dataPrioritySelect||null==(t=g.dataPrioritySelect[null==e?void 0:e.row])?void 0:t.value})))?s:[]),ticketStatus:f||(null!=(c=J.map((function(e){return g.dataStatus[e.row].value})))?c:[]),startDate:y||(null==Ve?void 0:Ve.startDate),endDate:p||(null==Ve?void 0:Ve.endDate),textSearch:F?r:t,modelerId:R})}var m=yield Le.getTicketList(e,20,"createdDate,desc",Ae,u);pe(0===e?null==m?void 0:m.content:[].concat((0,i.default)(fe),(0,i.default)(null==m?void 0:m.content))),se(null==m||null==(o=m.page)?void 0:o.totalRecords)}catch(e){}finally{Ce(!1),U(!1)}})),function(e,t){return Ke.apply(this,arguments)}),Qe=(qe=(0,a.default)((function*(){try{var e=(yield Le.getServiceMenu(0,1e4,void 0,Ae,!0)).content.map((function(e){return{label:e.serviceName,value:e.id}}));te(e)}catch(e){}})),function(){return qe.apply(this,arguments)});return(0,_.jsx)(m.TouchableWithoutFeedback,{onPress:function(){return m.Keyboard.dismiss()},children:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.default,{style:{backgroundColor:"#fff"},contentStyle:{backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:P.Color.borderColor},titleStyle:{color:"#000810"},fillIconBackLeft:"#000810",title:z("HM.addRelativeTicket"),onPressIconLeft:V}),(0,_.jsxs)(o.SafeAreaView,{style:d.default.ctnArea,edges:["bottom"],children:[(0,_.jsxs)(m.View,{style:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingVertical:10,flex:1},children:[(0,_.jsx)(s.default,{inputContainerStyle:{backgroundColor:"#fff"},viewIconLeft:(0,_.jsx)(f.IcSearch,{width:16,height:16}),viewIconRight:(0,_.jsx)(f.IconFilter,{width:16,height:16}),value:F?r:ke,onIconPress:function(){return U(!0)},onChangeText:Pe,label:z("HM.searchTicket")}),(0,_.jsx)(m.FlatList,{data:fe,refreshing:De,onRefresh:function(){0!==xe&&Ce(!0),je(0)},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,contentContainerStyle:{paddingRight:(0,c.SizeDP)(2)},onEndReached:function(){fe.length<ue&&je(xe+1)},onEndReachedThreshold:.5,renderItem:function(e){var t,n=e.item;return(0,_.jsx)(D.default,{dataCard:n,onSelect:ve,select:he,account:Be,isRadioSelect:null==B?void 0:B.length,isSelect:(null==B?void 0:B.length)&&(null==he||null==(t=he[0])?void 0:t.id)===n.id})}})]}),(0,_.jsx)(m.View,{style:{backgroundColor:"#fff",paddingHorizontal:16},children:(0,_.jsx)(b.default,{containerStyle:{backgroundColor:"#fff",paddingTop:6},labelLeft:z("CM.labelCancel"),labelRight:`${z("CM.save")} (${he.length}) ${z("HM.ticket")}`,onPressLeft:function(){return A.goBack()},onPressRight:function(){t(he,R),V()}})})]}),(0,_.jsx)(p.default,{isVisible:H,title:z("CM.filter"),onClose:function(){return U(!1)},renderContent:(0,_.jsx)(_.Fragment,{children:!(0,x.isEmpty)(ee)&&(0,_.jsxs)(o.SafeAreaView,{style:{maxHeight:2*c.ScreenHeight/3},children:[(0,_.jsxs)(m.ScrollView,{showsVerticalScrollIndicator:!1,children:[We&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(h.default,{style:{marginVertical:4},children:z("HM.groupService")}),(0,_.jsx)(v.default,{onSelect:Y,valueSelect:G,placeholder:z("HM.groupServiceSelect"),multiple:!0,listData:ee})]}),(0,_.jsx)(h.default,{style:{marginVertical:4},children:z("HM.priority")}),(0,_.jsx)(v.default,{onSelect:ae,valueSelect:ie,placeholder:z("HM.priotitySelect"),multiple:!0,isi18n:!0,listData:g.dataPrioritySelect,disabled:He}),(0,_.jsx)(h.default,{style:{marginVertical:4},children:z("HM.statusTicket")}),(0,_.jsx)(v.default,{onSelect:X,valueSelect:J,placeholder:z("HM.select"),multiple:!0,isi18n:!0,listData:g.dataStatus,disabled:Ue}),(0,_.jsx)(h.default,{style:{paddingVertical:(0,c.SizeDP)(10)},children:z("HM.createDate")}),(0,_.jsxs)(m.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[(0,_.jsx)(k.default,{value:Ve.startDate,onChangeDate:function(e){return ze(Object.assign({},Ve,{startDate:e?new Date(e):void 0}))},disabled:$e}),(0,_.jsx)(C.Icon,{name:"arrow-forward-outline",width:20,height:20}),(0,_.jsx)(k.default,{value:Ve.endDate,onChangeDate:function(e){return ze(Object.assign({},Ve,{endDate:e?new Date(e):void 0}))},disabled:Ge})]}),(0,_.jsx)(m.View,{style:d.default.bottom})]}),(0,_.jsx)(m.View,{style:{},children:(0,_.jsx)(j.default,{label:z("CM.save"),style:{marginTop:(0,c.SizeDP)(20)},onPress:Je})})]})})})]})})}},98884:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.dataStatus=t.dataPrioritySelect=void 0;var r=n(60596);t.dataPrioritySelect=[{label:"TK.high",value:r.Propity.high},{label:"TK.medium",value:r.Propity.medium},{label:"TK.low",value:r.Propity.low}],t.dataStatus=[{label:"TK.processing",value:r.Status.processing},{label:"TK.completed",value:r.Status.completed},{label:"TK.draft",value:r.Status.draft},{label:"TK.voided",value:r.Status.voided},{label:"TK.rejected",value:r.Status.rejected},{label:"TK.overdue",value:r.Status.overdue}]},82894:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(7005),u=r(n(43184)),s=r(n(27747)),c=n(41995),d=r(n(29846)),f=n(46317),p=r(n(69290)),y=n(21527),m=n(87841),h=r(n(24541)),v=r(n(65963)),g=n(98884),S=n(14740),x=n(2543),j=r(n(94516)),b=r(n(64213)),w=n(12638),D=r(n(89142)),C=n(32207),T=n(2884),I=n(11671),k=r(n(33254)),P=n(47671);t.default=function(e){var t=e.route,n=(0,T.useTranslation)().t,r=null==t?void 0:t.params,_=r.onGoBack,M=r.paramsSelectTicket,F=r.codeChannel,O=r.checkSabeco,E=void 0!==O&&O,R=r.configFilter,V=r.inheritanceModeler,z=r.modelerId,B=(null==V?void 0:V.modelerIds)||[],A=(0,S.useNavigation)(),L=(0,y.useState)(!1),N=(0,l.default)(L,2),H=N[0],U=N[1],W=(0,y.useState)([]),$=(0,l.default)(W,2),G=$[0],Y=$[1],K=(0,y.useState)([]),q=(0,l.default)(K,2),J=q[0],X=q[1],Q=(0,y.useState)([]),Z=(0,l.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,y.useState)([]),re=(0,l.default)(ne,2),ie=re[0],ae=re[1],le=(0,y.useState)(0),oe=(0,l.default)(le,2),ue=oe[0],se=oe[1],ce=(0,y.useState)([]),de=(0,l.default)(ce,2),fe=de[0],pe=de[1],ye=(0,y.useState)(M),me=(0,l.default)(ye,2),he=me[0],ve=me[1],ge=(0,y.useState)(0),Se=(0,l.default)(ge,2),xe=Se[0],je=Se[1],be=(0,y.useState)(!1),we=(0,l.default)(be,2),De=we[0],Ce=we[1],Te=(0,y.useState)(""),Ie=(0,l.default)(Te,2),ke=Ie[0],Pe=Ie[1],_e=(0,y.useState)(""),Me=(0,l.default)(_e,2),Fe=Me[0],Oe=Me[1],Ee=(0,y.useState)(),Re=(0,l.default)(Ee,2),Ve=Re[0],ze=Re[1],Be=(0,w.useAppSelector)((function(e){return e.account})).dataAccount,Ae=(0,w.useAppSelector)((function(e){return e.common.accessToken})),Le=(0,I.useTicketServices)(),Ne=(0,x.debounce)((function(e){Oe(e)}),500),He=(0,y.useMemo)((function(){return!!R&&!!(0,x.get)(R,"dataFilter.priority")}),[R]),Ue=(0,y.useMemo)((function(){return!!R&&!!(0,x.get)(R,"dataFilter.ticketStatus")}),[R]),We=(0,y.useMemo)((function(){return!R}),[R]),$e=(0,y.useMemo)((function(){return!!R&&!!(0,x.get)(R,"dataFilter.startDate")}),[R]),Ge=(0,y.useMemo)((function(){return!!R&&!!(0,x.get)(R,"dataFilter.endDate")}),[R]);(0,y.useEffect)((function(){if(R){var e=(0,x.get)(R,"dataFilter.priority"),t=(0,x.get)(R,"dataFilter.ticketStatus"),n=(0,x.get)(R,"dataFilter.endDate"),r=(0,x.get)(R,"dataFilter.startDate");if(e){var i=null==e?void 0:e.map((function(e){return new C.IndexPath(null==g.dataPrioritySelect?void 0:g.dataPrioritySelect.findIndex((function(t){return t.value===e})))}));ae(i)}if(t){var a=null==t?void 0:t.map((function(e){return new C.IndexPath(null==g.dataStatus?void 0:g.dataStatus.findIndex((function(t){return t.value===e})))}));X(a)}r&&ze(Object.assign({},Ve,{startDate:new Date(r)})),n&&ze(Object.assign({},Ve,{endDate:new Date(n)}))}}),[]),(0,y.useEffect)((function(){return Ne(ke),function(){Ne.cancel()}}),[ke]),(0,y.useEffect)((function(){(0,a.default)((function*(){yield Xe(xe,Fe)}))()}),[xe,Fe]),(0,S.useFocusEffect)((0,y.useCallback)((function(){(0,a.default)((function*(){je(0),yield Qe()}))()}),[]));var Ye,Ke,qe,Je=(Ye=(0,a.default)((function*(){je(0),yield Xe(0,Fe)})),function(){return Ye.apply(this,arguments)}),Xe=(Ke=(0,a.default)((function*(e,t){try{var n,r,a,l,o={textSearch:E?F:t,ticketStatus:null!=(n=J.map((function(e){return g.dataStatus[e.row].value})))?n:[],service:null!=(r=null==G?void 0:G.map((function(e){var t;return null==ee||null==(t=ee[null==e?void 0:e.row])?void 0:t.value})))?r:[],priority:null!=(a=null==ie?void 0:ie.map((function(e){var t;return null==g.dataPrioritySelect||null==(t=g.dataPrioritySelect[null==e?void 0:e.row])?void 0:t.value})))?a:[],startDate:null==Ve?void 0:Ve.startDate,endDate:null==Ve?void 0:Ve.endDate,searchForSabeco:!!E,modelerId:z};if(R){var u,s,c=(0,x.get)(R,"dataFilter.priority"),d=(0,x.get)(R,"dataFilter.ticketStatus"),f=(0,x.get)(R,"dataFilter.endDate"),p=(0,x.get)(R,"dataFilter.startDate");o=Object.assign({},null==R?void 0:R.dataFilter,{priority:c||(null!=(u=null==ie?void 0:ie.map((function(e){var t;return null==g.dataPrioritySelect||null==(t=g.dataPrioritySelect[null==e?void 0:e.row])?void 0:t.value})))?u:[]),ticketStatus:d||(null!=(s=J.map((function(e){return g.dataStatus[e.row].value})))?s:[]),startDate:p||(null==Ve?void 0:Ve.startDate),endDate:f||(null==Ve?void 0:Ve.endDate),textSearch:E?F:t,modelerId:z})}var y=yield Le.getTicketList(e,20,"createdDate,desc",Ae,o);pe(0===e?null==y?void 0:y.content:[].concat((0,i.default)(fe),(0,i.default)(null==y?void 0:y.content))),se(null==y||null==(l=y.page)?void 0:l.totalRecords)}catch(e){}finally{Ce(!1),U(!1)}})),function(e,t){return Ke.apply(this,arguments)}),Qe=(qe=(0,a.default)((function*(){try{var e=(yield Le.getServiceMenu(0,1e4,void 0,Ae,!0)).content.map((function(e){return{label:e.serviceName,value:e.id}}));te(e)}catch(e){}})),function(){return qe.apply(this,arguments)});return(0,P.jsx)(m.TouchableWithoutFeedback,{onPress:function(){return m.Keyboard.dismiss()},children:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(u.default,{title:n("HM.addRelativeTicket")}),(0,P.jsxs)(o.SafeAreaView,{style:d.default.ctnArea,edges:["bottom"],children:[(0,P.jsxs)(m.View,{style:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingVertical:10,flex:1},children:[(0,P.jsx)(s.default,{isDisabled:!0,inputContainerStyle:{backgroundColor:"#fff"},viewIconLeft:(0,P.jsx)(f.IcSearch,{width:16,height:16}),viewIconRight:(0,P.jsx)(f.IconFilter,{width:16,height:16}),value:F,onIconPress:function(){return U(!0)},onChangeText:Pe,label:n("HM.searchTicket")}),(0,P.jsx)(m.FlatList,{data:fe,refreshing:De,onRefresh:function(){0!==xe&&Ce(!0),je(0)},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,contentContainerStyle:{paddingRight:(0,c.SizeDP)(2)},onEndReached:function(){fe.length<ue&&je(xe+1)},onEndReachedThreshold:.5,renderItem:function(e){var t,n=e.item;return(0,P.jsx)(D.default,{dataCard:n,onSelect:ve,select:he,account:Be,isRadioSelect:null==B?void 0:B.length,isSelect:(null==B?void 0:B.length)&&(null==he||null==(t=he[0])?void 0:t.id)===n.id})}})]}),(0,P.jsx)(m.View,{style:{backgroundColor:"#fff",paddingHorizontal:16},children:(0,P.jsx)(b.default,{containerStyle:{backgroundColor:"#fff",paddingTop:6},labelLeft:n("CM.labelCancel"),labelRight:`${n("CM.save")} (${he.length}) ${n("HM.ticket")}`,onPressLeft:function(){return A.goBack()},onPressRight:function(){null!=he&&he.length&&(_(he,F,z),A.goBack())}})})]}),(0,P.jsx)(p.default,{isVisible:H,title:n("CM.filter"),onClose:function(){return U(!1)},renderContent:(0,P.jsx)(P.Fragment,{children:!(0,x.isEmpty)(ee)&&(0,P.jsxs)(o.SafeAreaView,{style:{maxHeight:2*c.ScreenHeight/3},children:[(0,P.jsxs)(m.ScrollView,{showsVerticalScrollIndicator:!1,children:[We&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(h.default,{style:{marginVertical:4},children:n("HM.groupService")}),(0,P.jsx)(v.default,{onSelect:Y,valueSelect:G,placeholder:n("HM.groupServiceSelect"),multiple:!0,listData:ee})]}),(0,P.jsx)(h.default,{style:{marginVertical:4},children:n("HM.priority")}),(0,P.jsx)(v.default,{onSelect:ae,valueSelect:ie,placeholder:n("HM.priotitySelect"),multiple:!0,isi18n:!0,listData:g.dataPrioritySelect,disabled:He}),(0,P.jsx)(h.default,{style:{marginVertical:4},children:n("HM.statusTicket")}),(0,P.jsx)(v.default,{onSelect:X,valueSelect:J,placeholder:n("HM.select"),multiple:!0,isi18n:!0,listData:g.dataStatus,disabled:Ue}),(0,P.jsx)(h.default,{style:{paddingVertical:(0,c.SizeDP)(10)},children:n("HM.createDate")}),(0,P.jsxs)(m.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[(0,P.jsx)(k.default,{value:null==Ve?void 0:Ve.startDate,onChangeDate:function(e){return ze(Object.assign({},Ve,{startDate:e?new Date(e):void 0}))},disabled:$e}),(0,P.jsx)(C.Icon,{name:"arrow-forward-outline",width:20,height:20}),(0,P.jsx)(k.default,{value:null==Ve?void 0:Ve.endDate,onChangeDate:function(e){return ze(Object.assign({},Ve,{endDate:e?new Date(e):void 0}))},disabled:Ge})]}),(0,P.jsx)(m.View,{style:d.default.bottom})]}),(0,P.jsx)(m.View,{style:{},children:(0,P.jsx)(j.default,{label:n("CM.save"),style:{marginTop:(0,c.SizeDP)(20)},onPress:Je})})]})})})]})})}},29846:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995);t.default=r.StyleSheet.create({ctnArea:{flex:1,backgroundColor:"#fff"},bottom:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",columnGap:(0,i.SizeDP)(10),flex:1},calender:{backgroundColor:"#fff",flex:1,alignItems:"center",justifyContent:"flex-start"}})},94655:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85715)),a=n(87841),l=n(46317),o=r(n(85739)),u=r(n(24541));n(41995);var s=n(20880),c=n(60596),d=n(21527),f=n(35708),p=n(2884),y=r(n(45001)),m=n(47671);t.default=function(e){var t=e.dataCard,n=e.onSelect,r=e.select,h=e.account,v=e.isShowTrash,g=(0,p.useTranslation)().t,S=(0,d.useState)(!1),x=(0,i.default)(S,2),j=x[0],b=x[1],w=function(e,t,n){return(0,m.jsxs)(a.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,m.jsx)(a.View,{style:{backgroundColor:t,paddingHorizontal:10,paddingVertical:6,borderRadius:8,alignItems:"center",justifyContent:"center",marginTop:6},children:(0,m.jsx)(u.default,{style:{color:e},children:g(`TK.${n}`)})}),(0,m.jsx)(a.View,{style:{flex:1}})]})};return(0,m.jsxs)(a.View,{style:o.default.ctnMain,children:[(0,m.jsxs)(a.View,{style:{rowGap:6},children:[(0,m.jsx)(u.default,{style:{fontFamily:s.Font.InterSemiBold600,fontSize:16},children:null==t?void 0:t.title}),(0,m.jsxs)(a.View,{style:o.default.ctnInfo,children:[(0,m.jsx)(u.default,{children:f.DateUtils.convertDateToDDMMYYYY_H_M(null==t?void 0:t.createdDate)}),null!=h&&h.avatar?(0,m.jsxs)(a.View,{style:o.default.ctnImage,children:[(0,m.jsx)(a.Image,{width:24,height:24,style:{borderRadius:12},source:{uri:s.String.PREFIX_IMG_BASE64+(null==h?void 0:h.avatar)}}),(0,m.jsx)(u.default,{numberOfLines:1,style:{width:150},children:null==t?void 0:t.createdBy})]}):(0,m.jsxs)(a.View,{style:o.default.ctnImage,children:[(0,m.jsx)(a.View,{style:{width:24,height:24,backgroundColor:"red",borderRadius:12,justifyContent:"center",alignItems:"center"}}),(0,m.jsx)(u.default,{style:{},children:null==t?void 0:t.createdBy})]})]}),function(){switch(null==t?void 0:t.ticketStatus){case c.Status.completed:return w(s.Color.completed,s.Color.completed01,c.Status.completed);case c.Status.draft:return w(s.Color.draft,s.Color.draft01,c.Status.draft);case c.Status.voided:return w(s.Color.voided,s.Color.voided01,c.Status.voided);case c.Status.rejected:return w(s.Color.rejected,s.Color.rejected01,c.Status.rejected);case c.Status.processing:return w(s.Color.processing,s.Color.processing01,c.Status.processing);case c.Status.overdue:return w(s.Color.rejected,s.Color.rejected01,c.Status.overdue)}}()]}),v&&(0,m.jsx)(a.TouchableOpacity,{hitSlop:15,onPress:function(){return b(!0)},children:(0,m.jsx)(l.IconTrash,{width:20,height:20})}),(0,m.jsx)(y.default,{title:g("TK.delete_relate"),content:g("TK.delete_relate_confirm"),type:"cancel",labelCancel:g("CM.labelCancel"),labelConfirm:g("CM.confirm"),isVisible:j,onClose:function(){return b(!1)},onConfirm:function(){var e=r.filter((function(e){return e.id!==t.id}));n(e)}})]})}},85739:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:(0,i.SizeDP)(16),backgroundColor:a.Color.White,borderBottomWidth:(0,i.SizeDP)(1),borderBottomColor:a.Color.borderColor},ctnImage:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:8,marginTop:8},subText:{fontSize:i.default.FontTiny},ctnInfo:{}})},9353:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.dataTiket=t.dataProrityDummy=t.convertToISO=t.FIELD_FORM_TYPE_INHERIT=void 0,t.getListComponentOfTemplate=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=n;return t.forEach((function(t){r.push(t),null!=t&&t.components&&e((0,a.default)(t.components),r)})),r};var i=r(n(85715)),a=r(n(41132)),l=n(46317),o=n(60596),u=n(47671);t.dataProrityDummy=[{id:1,key:"TK.high",value:o.Propity.high,icon:(0,u.jsx)(l.Iconhigh,{width:12,height:12})},{id:2,key:"TK.medium",value:o.Propity.medium,icon:(0,u.jsx)(l.Iconmedium,{width:12,height:12})},{id:3,key:"TK.low",value:o.Propity.low,icon:(0,u.jsx)(l.Iconlow,{width:12,height:12})}],t.dataTiket=[{id:1,key:"HM.information",value:"information",icon:(0,u.jsx)(l.IconPerson,{width:20,height:20})},{id:2,key:"HM.relative",value:"relative",icon:(0,u.jsx)(l.IconRelative,{width:20,height:20})}];t.FIELD_FORM_TYPE_INHERIT=["textField","textArea","number","password","email","phone_number","radio_button","check_box","dropdown","datepicker","upload_file","upload_img","hyperlink","table","table_advance","signature","rich_text"],t.convertToISO=function(e,t){if("string"!=typeof e||"string"!=typeof t)return console.error("Invalid input or format"),null;var n=e,r="00:00:00";if(t.includes("HH")){var a=e.split(" "),l=(0,i.default)(a,2);n=l[0],r=l[1]}var o,u,s,c=n.split(/[\/\-\.]/).map(Number),d=(r||"00:00:00").split(":").map(Number),f=(0,i.default)(d,3),p=f[0],y=f[1],m=f[2];switch(t){case"DD/MM/YYYY":case"DD/MM/YYYY HH:mm:ss":var h=(0,i.default)(c,3);s=h[0],u=h[1],o=h[2];break;case"MM/DD/YYYY":case"MM/DD/YYYY HH:mm:ss":var v=(0,i.default)(c,3);u=v[0],s=v[1],o=v[2];break;case"YYYY/MM/DD":var g=(0,i.default)(c,3);o=g[0],u=g[1],s=g[2];break;case"YYYY/DD/MM HH:mm:ss":var S=(0,i.default)(c,3);o=S[0],s=S[1],u=S[2];break;default:return console.error("Unsupported format"),null}return[s,u,o,p,y,m].some(isNaN)?(console.error("Invalid date or time values"),null):new Date(Date.UTC(o,u-1,s,p,y,m)).toISOString()}},37377:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(43693)),l=r(n(29293)),o=r(n(85715)),u=n(87841),s=r(n(43184)),c=r(n(33865)),d=n(46317),f=n(41995),p=r(n(93238)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),m=n(7005),h=n(20880),v=r(n(85555)),g=r(n(69290)),S=n(14740),x=n(2543),j=n(12638),b=r(n(24541)),w=r(n(45001)),D=r(n(27747)),C=r(n(87288)),T=r(n(94655)),I=n(2884),k=n(32207),P=n(11671),_=n(40851),M=n(88e3),F=r(n(77389)),O=r(n(76644)),E=r(n(94516)),R=n(58526),V=r(n(22702)),z=n(9353),B=n(47671);function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}t.default=function(){var e,t,n=(0,I.useTranslation)().t,r=(0,S.useRoute)(),A=(0,y.useRef)(null),L=(0,S.useNavigation)(),N=null!=(e=null==r||null==(t=r.params)?void 0:t.action)?e:"create",H=(0,y.useState)(z.dataProrityDummy[2]),U=(0,o.default)(H,2),W=U[0],$=U[1],G=(0,y.useState)(),Y=(0,o.default)(G,2),K=Y[0],q=Y[1],J=(0,y.useState)([]),X=(0,o.default)(J,2),Q=X[0],Z=X[1],ee=(0,y.useState)([]),te=(0,o.default)(ee,2),ne=te[0],re=te[1],ie=(0,y.useState)([]),ae=(0,o.default)(ie,2),le=ae[0],oe=ae[1],ue=(0,y.useState)({status:"processing",isSaveDraftButSubmit:!1}),se=(0,o.default)(ue,2),ce=se[0],de=se[1],fe=(0,y.useState)([]),pe=(0,o.default)(fe,2),ye=pe[0],me=pe[1],he=(0,y.useState)(),ve=(0,o.default)(he,2),ge=ve[0],Se=ve[1],xe=(0,y.useState)(""),je=(0,o.default)(xe,2),be=je[0],we=je[1],De=(0,y.useState)(""),Ce=(0,o.default)(De,2),Te=Ce[0],Ie=Ce[1],ke=(0,y.useState)(!1),Pe=(0,o.default)(ke,2),_e=Pe[0],Me=Pe[1],Fe=(0,y.useState)(!1),Oe=(0,o.default)(Fe,2),Ee=Oe[0],Re=Oe[1],Ve=(0,y.useState)(!1),ze=(0,o.default)(Ve,2),Be=ze[0],Ae=ze[1],Le=(0,y.useState)(!1),Ne=(0,o.default)(Le,2),He=(Ne[0],Ne[1]),Ue=(0,y.useState)(!1),We=(0,o.default)(Ue,2),$e=We[0],Ge=We[1],Ye=(0,y.useState)(!1),Ke=(0,o.default)(Ye,2),qe=Ke[0],Je=Ke[1],Xe=(0,y.useState)(),Qe=(0,o.default)(Xe,2),Ze=Qe[0],et=Qe[1],tt=(0,y.useState)(""),nt=(0,o.default)(tt,2),rt=nt[0],it=nt[1],at=(0,y.useState)(!1),lt=(0,o.default)(at,2),ot=lt[0],ut=lt[1],st=(0,y.useState)(null),ct=(0,o.default)(st,2),dt=ct[0],ft=ct[1],pt=(0,y.useState)(!1),yt=(0,o.default)(pt,2),mt=yt[0],ht=yt[1],vt=(0,y.useState)([]),gt=(0,o.default)(vt,2),St=gt[0],xt=gt[1],jt=(0,y.useState)(!1),bt=(0,o.default)(jt,2),wt=bt[0],Dt=bt[1],Ct=(0,y.useState)(0),Tt=(0,o.default)(Ct,2),It=Tt[0],kt=Tt[1],Pt=(0,y.useState)(null),_t=(0,o.default)(Pt,2),Mt=_t[0],Ft=_t[1],Ot=(0,P.useTicketServices)(),Et=(0,_.useReviewServices)(),Rt=(0,u.useWindowDimensions)().width,Vt=(0,j.useAppSelector)((function(e){return e.account.dataAccount})),zt=(0,j.useAppSelector)((function(e){return e.common.accessToken}));(0,S.useFocusEffect)((0,y.useCallback)((function(){var e,t,n,i,a;null!=r&&null!=(e=r.params)&&e.codeChannel&&ft(null==r||null==(n=r.params)?void 0:n.codeChannel);null!=r&&null!=(t=r.params)&&t.modelerId?ht(!0):(null==r||null==(i=r.params)||null==(a=i.paramsSelectTicket)?void 0:a.length)>=0&&Re(!0)}),[null==r?void 0:r.params])),(0,y.useEffect)((function(){var e=u.Keyboard.addListener("android"===u.Platform.OS?"keyboardDidShow":"keyboardWillShow",(function(e){kt(e.endCoordinates.height)})),t=u.Keyboard.addListener("android"===u.Platform.OS?"keyboardDidHide":"keyboardWillHide",(function(e){kt(0)}));return function(){e.remove(),t.remove()}}),[]),(0,y.useEffect)((function(){(0,l.default)((function*(){try{var e,t,n,i;if(we(""),null!=r&&null!=(e=r.params)&&null!=(t=e.dataTicket)&&t.modelerId&&(yield Yt()),null!=r&&null!=(n=r.params)&&null!=(i=n.dataTicket)&&i.id&&"create"!==N){var a=yield Zt();if(a){var l;et(a),we(null==a?void 0:a.title);var o=z.dataProrityDummy.find((function(e){return(null==e?void 0:e.value)===a.priority}));o&&$(o);var u=null==(l=a.formData)?void 0:l.find((function(e){return!e.userTaskId}));u&&u.formData&&Se(u.version);var s=a.listRelativeTicket;s.length>0&&L.setParams(Object.assign({},null==r?void 0:r.params,{paramsSelectTicket:s}))}}}catch(e){}}))()}),[]);var Bt,At,Lt,Nt,Ht,Ut,Wt,$t,Gt,Yt=(Bt=(0,l.default)((function*(){try{var e,t,n,i,a,l,o=yield Promise.all([Ot.getModeler(null==r||null==(e=r.params)||null==(t=e.dataTicket)?void 0:t.modelerId,zt),Ot.getImplementByModelerId(null==r||null==(n=r.params)||null==(i=n.dataTicket)?void 0:i.modelerId),Ot.getAclProcessByModelerId(null==r||null==(a=r.params)||null==(l=a.dataTicket)?void 0:l.modelerId)]),u=o[0];q(u),Se(u.formVersion);var s=yield Ot.getFormByVersion(u.formVersion);if(s){var c=s.jsonForm;"string"!=typeof c&&(c=JSON.stringify(c)),c.includes("#titleTicketName#")&&ut(!0),Jt(c)}var d=o[2].data.content,f=o[1].data;re(f),Z(d);var p=u.followerId?u.followerId.split(",").map(Number):[],y=u.managerId?u.managerId.split(",").map(Number):[],m=Array.from(new Set(p.concat(y).filter((function(e){return!f.some((function(t){return+(null==t?void 0:t.executorId)===e}))})))),h=[];u.documentId&&h.push(Ot.getListDataVariableConfig(u.documentId)),m.length>0&&h.push(Et.findUserByOrgIn(0,1e4,"",null,m));var v,g=yield Promise.all(h),S=[];u.documentId&&!m.length?v=g[0].variables.filter((function(e){return e.apply&&e.resourceId===u.formId})):!u.documentId&&m.length?S=m.map((function(e){return g[0].data.find((function(t){return t.resourceId===e}))})):(v=g[0].variables.filter((function(e){return e.apply&&e.resourceId===u.formId})),S=m.map((function(e){return g[1].data.find((function(t){return t.resourceId===e}))}))),me(v),oe(S)}catch(e){}})),function(){return Bt.apply(this,arguments)}),Kt=(At=(0,l.default)((function*(){try{return yield Ot.getOrganizations()}catch(e){throw console.error(e),e}})),function(){return At.apply(this,arguments)}),qt=(Lt=(0,l.default)((function*(e){if(e&&e.length&&(e.includes("#accountname#")||e.includes("#emailCreateBy#")||e.includes("#organizationCreateBy#"))){var t=null;if(e.includes("#organizationCreateBy#")){var n=yield Kt();t=null==n?void 0:n.name}var r=JSON.parse(e);return r=(r=(r=(0,z.getListComponentOfTemplate)(r||[]).filter((function(e){return z.FIELD_FORM_TYPE_INHERIT.includes(e.type)}))).map((function(e){return"datepicker"==e.type&&e.value&&(e.value=(0,z.convertToISO)(e.value,e.validate.formatDate)),"#organizationCreateBy#"==e.code?Object.assign({},e,{value:t}):"#accountname#"==e.code?Object.assign({},e,{value:Vt.firstName+" "+Vt.lastName}):"#emailCreateBy#"==e.code?Object.assign({},e,{value:""+Vt.email}):Object.assign({},e)}))).filter((function(e){return e.value}))}})),function(e){return Lt.apply(this,arguments)}),Jt=function(e){e&&e.length&&e.includes('"type": "textField_ticketName"')&&Dt(!0)},Xt=(Nt=(0,l.default)((function*(e){var t=JSON.parse(e.nativeEvent.data);if("e-from"===t.result)if("create"!==N){if(Ze){var i,l=null==(i=Ze.formData)?void 0:i.find((function(e){return!e.userTaskId}));if(l&&l.formData){var o=`window.postMessage('${JSON.stringify({type:"postFormEdit",data:l.formData}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;setTimeout((function(){var e;null==A||null==(e=A.current)||e.injectJavaScript(o)}),300)}}}else{var u;Ft("init");var s=`window.postMessage('${JSON.stringify({result:"saveDraft"})}', '*');`;null==A||null==(u=A.current)||u.injectJavaScript(s)}if("result"==t.result){if("init"===Mt){var c=t.data,d=yield qt(JSON.stringify(c));if(d){var f,p=`window.postMessage('${JSON.stringify({type:"postFormEdit",data:d}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;null==A||null==(f=A.current)||f.injectJavaScript(p)}return}if("saveDraft"===Mt){var y=t.data;if(y&&wt){var m=y.find((function(e){return"textField_ticketName"==e.type}));if(m&&we(m.value),ot){var v,g,S=null!=(v=y.find((function(e){return"#codeChannel#"==e.code})))&&v.value?null==(g=y.find((function(e){return"#codeChannel#"==e.code})))?void 0:g.value:null;ft(S)}}"confirm"===rt?Ge(!0):Re(!0)}else if("submit"===Mt){var x,j,b;Je(!0);var w=null==r||null==(x=r.params)?void 0:x.dataTicket,D=null!=r&&null!=(j=r.params)&&j.paramsSelectTicket?null==r||null==(b=r.params)?void 0:b.paramsSelectTicket.map((function(e){return{id:e.id}})):[];if(w&&K){var C,T,I,k=Qt(K),P={aclTicketDTOS:k,followerId:K.followerId,formData:[{eformId:K.formId,formData:null==t||null==(C=t.data)?void 0:C.map((function(e){return Object.assign({},e,{dataType:en(e),typeForm:e.type,value:e.value})})),ticketId:null,userTaskId:null,version:ge}],jsonXml:K.jsonXml,listRelativeTicket:D,priority:W.value,ticketStatus:ce.status,title:be,workFlowId:"create"!==N?w.workFlowId:w.id,modelerId:null==r||null==(T=r.params)||null==(I=T.dataTicket)?void 0:I.modelerId};try{if("edit"===N){var _,M,O=Object.assign({},Ze,{aclTicketDTOS:k,ticketStatus:ce.status,title:be,listRelativeTicket:D,modelerId:null==r||null==(_=r.params)||null==(M=_.dataTicket)?void 0:M.modelerId}),E=yield Ot.updateTicket(O);if(E&&"draft"===ce.status)return L.navigate(R.TabName.MyTicket),void F.default.show({type:"success",text1:n("CM.noti"),text2:n("NT.notification.creae_draft_success")});E&&L.navigate(R.TabName.Home)}else{var V=yield Ot.createTicket(P,zt);if(V&&"draft"===ce.status)return L.navigate(R.TabName.MyTicket),void F.default.show({type:"success",text1:n("CM.noti"),text2:n("NT.notification.creae_draft_success")});if(null!=K&&K.documentId){var z=null==t?void 0:t.data.filter((function(e){return ye.some((function(t){return t.fieldId==e.formId}))}));if((null==z?void 0:z.length)>0){var B=z.map((function(e){var t=ye.find((function(t){return t.fieldId===e.formId}));return Object.assign({},e,{code:null==t?void 0:t.code})})),H=[{dataJson:B.reduce((function(e,t){return e=Object.assign({},e,(0,a.default)({},t.code,t.value))}),{})}];try{return void((yield Ot.saveDataVariableEwriter(H,K.documentId))?L.navigate(h.NavigationName.CreateTicketSuccess,{ticketId:null==V?void 0:V.id}):F.default.show({type:"error",text1:n("CM.noti"),text2:n("NT.notification.save_info_into_ewriter_failed")}))}catch(e){}}}V&&L.navigate(h.NavigationName.CreateTicketSuccess,{ticketId:null==V?void 0:V.id})}}catch(e){console.log(e)}finally{we(""),Je(!1)}}}}})),function(e){return Nt.apply(this,arguments)}),Qt=function(e){var t=le.map((function(t){var n={id:t.resourceId,email:t.email};return{userTaskId:null,resourceName:be,resourceType:"t",sharedType:"p",personalStr:JSON.stringify(n),type:"internal",perm:JSON.stringify(["v-d","v-i"]),custId:t.custId,orgIn:t.orgIn,createdBy:e.createdBy,typePerson:"aclRelate"}})),n=ne.map((function(e){var t={id:+(null==e?void 0:e.executorId),email:null==e?void 0:e.email};return{userTaskId:e.userTaskId,resourceName:be,resourceType:"t",sharedType:e.executorId?"p":null,personalStr:e.executorId?JSON.stringify(t):null,type:"internal",perm:JSON.stringify(["v-d","v-i","e"]),custId:e.executorId?null==e?void 0:e.custId:null,orgIn:e.executorId?null==e?void 0:e.orgIn:null,createdBy:e.createdBy,typePerson:"implement"}})),r=Q.map((function(e){return{userTaskId:e.userTaskId,resourceName:be,resourceType:"t",sharedType:e.sharedType,personalStr:JSON.stringify(e.personal),type:e.type,perm:e.perm,custId:e.custId,orgIn:e.orgIn,createdBy:e.createdBy,typePerson:"shareAcl"}}));return[].concat((0,i.default)(t),(0,i.default)(n),(0,i.default)(r))},Zt=(Ht=(0,l.default)((function*(){try{var e,t;return yield Ot.getTicketById(null==r||null==(e=r.params)||null==(t=e.dataTicket)?void 0:t.id,zt)}catch(e){console.log(e)}})),function(){return Ht.apply(this,arguments)}),en=function(e){return["textField","textArea","password","email","phone_number","radio_button","upload_file","upload_img","hyperlink","datepicker","signature"].includes(e.type)?"String":"number"===e.type?"Number":["check_box","dropdown"].includes(e.type)?"dropdown"===e.type&&e.validate.mutilChoose||"check_box"===e.type?"List":"String":null},tn=function(e){switch(e){case"noti":He(!1),Ge(!0);break;case"cancel":Ae(!1);break;case"info":Ge(!1),!ot&&we(""),Ie("")}},nn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];de({status:e,isSaveDraftButSubmit:t}),(0,x.isEmpty)(be)||"edit"===N||"multi"===N||ot||wt?wt?(F.default.show({type:"info",text1:n("CM.noti"),text2:n("Thông tin đang được xử lý, vui lòng đợi")}),rn("confirm")):Ge(!0):an(e,t)},rn=function(e){var t;it(e),Ft("saveDraft");var n=`window.postMessage('${JSON.stringify({result:"saveDraft"})}', '*');`;null==A||null==(t=A.current)||t.injectJavaScript(n)},an=function(e){var t;Ft(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||"processing"===e?"submit":"saveDraft");var n=`window.postMessage('${JSON.stringify({result:"processing"===e?"submit":"saveDraft"})}', '*');`;null==A||null==(t=A.current)||t.injectJavaScript(n),He(!1)},ln=function(){var e,t,n,i;(Re(!1),null!=K&&null!=(e=K.inheritanceModeler)&&null!=(t=e.modelerIds)&&t.length)?ht(!0):L.navigate(h.NavigationName.AddTicketRelativeS,{paramsSelectTicket:null!=r&&null!=(n=r.params)&&n.paramsSelectTicket?null==r||null==(i=r.params)?void 0:i.paramsSelectTicket:[],codeChannel:dt,checkSabeco:ot,configFilter:null==K?void 0:K.configFilter,inheritanceModeler:null==K?void 0:K.inheritanceModeler,onGoBack:function(e,t){L.setParams({paramsSelectTicket:e,codeChannel:t})}})},on=(Ut=(0,l.default)((function*(){L.setParams({paramsSelectTicket:St}),ht(!1),yield un()})),function(){return Ut.apply(this,arguments)}),un=(Wt=(0,l.default)((function*(){var e=yield Ot.getValueFormByTicketRelative({modelerId:null==K?void 0:K.id,listRelativeTicket:null==St?void 0:St.map((function(e){return e.id}))});if(e){var t,n=e.filter((function(e){return e.value})),r=`window.postMessage('${JSON.stringify({type:"postFormEdit",data:n}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;null==A||null==(t=A.current)||t.injectJavaScript(r)}})),function(){return Wt.apply(this,arguments)});return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(u.TouchableWithoutFeedback,{onPress:function(){return u.Keyboard.dismiss()},children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(u.StatusBar,{translucent:!0,barStyle:"dark-content",backgroundColor:h.Color.Transparent}),(0,B.jsx)(s.default,{style:c.default.ctnHeader,contentStyle:c.default.ctnHeader,titleStyle:{color:h.Color.TextPrimary},title:function(){switch(N){case"create":return n("HM.addSearch");case"multi":return n("HM.muiTicket");case"edit":return n("HM.editTicket");default:return""}}(),fillIconBackLeft:"",renderContentRight:function(){return(0,B.jsxs)(u.View,{style:c.default.ctnRenderRightHeader,children:[(0,B.jsx)(v.default,{listDropdown:z.dataProrityDummy,onChangeItem:$,dropDownStyle:{right:(0,f.SizeDP)(50)},renderShowData:(0,B.jsxs)(u.View,{style:c.default.renderShow,children:[W.icon,(0,B.jsx)(d.IconArrowGrey,{fill:"#fff",width:(0,f.SizeDP)(12),height:(0,f.SizeDP)(12)})]})}),(0,B.jsx)(u.View,{children:(0,B.jsx)(v.default,{listDropdown:z.dataTiket,onChangeItem:function(e){return function(e){"information"===e.value?Me(!0):"relative"===e.value&&(Re(!0),rn("relative"))}(e)},containerStyle:{width:(0,f.SizeDP)(12)}})})]})}}),(0,B.jsx)(k.Divider,{}),(0,B.jsx)(u.View,{style:[{flex:1,backgroundColor:h.Color.BgBlur},"android"===u.Platform.OS&&{paddingBottom:It>0?It-100:0}],children:(0,x.isEmpty)(ge)?(0,B.jsx)(u.View,{}):(0,B.jsx)(p.default,{nestedScrollEnabled:!0,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,startInLoadingState:!0,injectedJavaScript:h.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,ref:A,onMessage:Xt,source:{uri:(0,M.getConfig)().BASE_URL_FORM+ge},webviewDebuggingEnabled:!0,pullToRefreshEnabled:!0})}),(0,B.jsx)(k.Divider,{}),(0,B.jsxs)(m.SafeAreaView,{edges:["bottom","left","right"],style:c.default.ctnBtn,children:[(0,B.jsx)(E.default,{style:[{flex:.5},c.default.btnCancel],label:n("CM.labelCancel"),styleLabel:[c.default.textCancel,Rt<400&&c.default.textSizeSmall],onPress:function(){return Ae(!0)}}),(0,B.jsx)(E.default,{style:[{flex:.5},c.default.btnLeft],label:n("TK.save_draft"),styleLabel:[c.default.labelStyleLeft,Rt<400&&c.default.textSizeSmall],onPress:function(){return nn("draft",!0)}}),(0,B.jsx)(E.default,{style:{flex:1},label:n("HM.sendServices"),styleLabel:[Rt<400&&c.default.textSizeSmall],onPress:function(){return nn("processing")}})]}),(0,B.jsx)(g.default,{isVisible:_e,onClose:function(){return Me(!1)},title:n("HM.infoPerson"),renderContent:(0,B.jsx)(B.Fragment,{children:!(0,x.isEmpty)(Vt)&&(0,B.jsxs)(u.View,{style:c.default.ctnTicketPerson,children:[(0,B.jsxs)(u.View,{style:c.default.ctnUser,children:[(0,B.jsx)(u.Image,{width:(0,f.SizeDP)(50),height:(0,f.SizeDP)(50),borderRadius:(0,f.SizeDP)(25),source:{uri:Vt.imageUrl||h.String.DEFAULT_IMAGE}}),(0,B.jsx)(b.default,{children:Vt.firstName+" "+Vt.lastName})]}),(0,B.jsxs)(u.View,{style:c.default.ctnSub,children:[(0,B.jsx)(d.IconMail,{width:(0,f.SizeDP)(24),height:(0,f.SizeDP)(24)}),(0,B.jsx)(b.default,{children:""+Vt.email})]}),(0,B.jsxs)(u.View,{style:c.default.ctnSub,children:[(0,B.jsx)(d.IconTree,{width:(0,f.SizeDP)(24),height:(0,f.SizeDP)(24)}),(0,B.jsx)(b.default,{children:""+Vt.acNameOrg})]}),(0,B.jsxs)(u.View,{style:c.default.ctnSub,children:[(0,B.jsx)(d.IconPhone,{width:(0,f.SizeDP)(24),height:(0,f.SizeDP)(24)}),(0,B.jsx)(b.default,{children:""+Vt.phone})]})]})})}),(0,B.jsx)(O.default,{isVisible:Ee,children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(s.default,{style:{backgroundColor:"#fff"},contentStyle:{backgroundColor:"#fff"},titleStyle:{color:"#000810"},fillIconBackLeft:"#000810",title:n("HM.relatedTicket"),onPressIconLeft:function(){return Re(!1)},renderContentRight:function(){return(0,B.jsx)(u.TouchableOpacity,{onPress:ln,children:(0,B.jsx)(b.default,{style:c.default.txtRight,children:n("CM.add")})})}}),(0,B.jsx)(k.Divider,{}),(0,x.isEmpty)(null==r||null==($t=r.params)?void 0:$t.paramsSelectTicket)?(0,B.jsxs)(u.View,{style:c.default.ctnArea,children:[(0,B.jsx)(d.IconEmpty,{width:(0,f.SizeDP)(218),height:(0,f.SizeDP)(149)}),(0,B.jsx)(b.default,{style:c.default.textTitle,children:n("HM.relativeTicketEmpty")}),(0,B.jsx)(b.default,{style:c.default.textDes,children:n("HM.desRelativeTicket")})]}):(0,B.jsx)(u.FlatList,{style:{paddingHorizontal:16},data:null==r||null==(Gt=r.params)?void 0:Gt.paramsSelectTicket,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,renderItem:function(e){var t,n,i,a=e.item;return(0,B.jsx)(T.default,{dataCard:a,account:Vt,select:null==r||null==(t=r.params)?void 0:t.paramsSelectTicket,onSelect:function(e){return L.setParams({paramsSelectTicket:e})},isShowTrash:!(null!=K&&null!=(n=K.inheritanceModeler)&&null!=(i=n.modelerIds)&&i.length)})}})]})}),(0,B.jsx)(w.default,{isVisible:Be,onClose:function(){return tn("cancel")},title:n("HM.titleCancel"),content:n("HM.contentCancel"),type:"cancel",labelCancel:n("HM.cancel"),labelConfirm:n("CM.labelCancel"),styleBtnRight:{backgroundColor:h.Color.RedE14337},onConfirm:function(){Ae(!1),L.goBack()}}),(0,B.jsx)(w.default,{isVisible:$e,onClose:function(){return tn("info")},title:n("HM.serviceName"),content:n("HM.contentFill"),type:"info",labelCancel:n("CM.labelCancel"),labelConfirm:"processing"===ce.status?n("HM.sendServices"):n("CM.save"),styleBtnRight:{backgroundColor:h.Color.BgPrimary},onConfirm:function(){(0,x.isEmpty)(be.trim())?Ie(n("HM.notEmpty")):(an(ce.status,ce.isSaveDraftButSubmit),Ge(!1),He(!0),Ie(""))},renderContent:function(){return(0,B.jsx)(u.View,{style:{width:"100%",marginVertical:(0,f.SizeDP)(6)},children:(0,B.jsx)(D.default,{isDisabled:wt,label:n("HM.enterName"),value:be,onChangeText:we,errorMessage:Te})})}}),(0,B.jsx)(C.default,{isVisible:qe})]})}),(0,B.jsx)(O.default,{isVisible:mt,children:(0,B.jsx)(V.default,{onClose:function(){return ht(!1)},modeler:K,setListTicketRelativeSelect:xt,listTicketRelativeSelect:St,handleSetParamsConfig:on})})]})}},33865:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=n(41995);t.default=r.StyleSheet.create({ctnHeader:{backgroundColor:i.Color.White},ctnTitle:{color:i.Color.colorText,fontSize:i.FontSize.FontLarge,fontFamily:i.Font.InterSemiBold600},ctnWebview:{marginHorizontal:(0,a.SizeDP)(18),marginVertical:(0,a.SizeDP)(18),borderRadius:(0,a.SizeDP)(17)},ctnRenderRightHeader:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,a.SizeDP)(10)},renderShow:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,a.SizeDP)(2),borderRadius:(0,a.SizeDP)(4),borderWidth:(0,a.SizeDP)(1),borderColor:i.Color.borderPrority,paddingVertical:(0,a.SizeDP)(4),paddingHorizontal:(0,a.SizeDP)(4)},ctnTicketPerson:{alignItems:"flex-start",rowGap:(0,a.SizeDP)(20)},ctnUser:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,a.SizeDP)(10),paddingHorizontal:(0,a.SizeDP)(10)},ctnSub:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,a.SizeDP)(10),marginLeft:(0,a.SizeDP)(40)},textTitle:{fontFamily:i.Font.InterSemiBold600,fontSize:i.FontSize.FontBase,color:i.Color.TextPrimary,marginTop:(0,a.SizeDP)(20)},textDes:{fontFamily:i.Font.InterRegular400,fontSize:i.FontSize.FontSmall,color:i.Color.Text07,textAlign:"center",marginVertical:(0,a.SizeDP)(8)},ctnArea:{backgroundColor:i.Color.White,alignItems:"center",justifyContent:"center",padding:(0,a.SizeDP)(16)},txtRight:{color:i.Color.add,fontFamily:i.Font.InterMedium500,fontSize:i.FontSize.FontSmall},ctnBtn:{backgroundColor:i.Color.White,flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:12,paddingVertical:12,paddingHorizontal:16},btnLeft:{backgroundColor:"#f2f5f8"},labelStyleLeft:{color:i.Color.Text},btnCancel:{borderWidth:1,borderColor:"#e14337",backgroundColor:"#fff"},textCancel:{color:"#e14337"},textSizeSmall:{fontSize:13}})},77134:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=r(n(43184)),l=n(46317),o=r(n(2198)),u=n(7005),s=r(n(24541)),c=r(n(94516)),d=n(14740),f=n(20880),p=n(41995),y=n(2884),m=n(60596),h=n(12638),v=(r(n(21527)),n(58526)),g=n(47671);t.default=function(){var e,t=(0,d.useRoute)(),n=(0,d.useNavigation)(),r=(null==t||null==(e=t.params)?void 0:e.ticketId)||"",S=(0,h.useAppSelector)((function(e){return e.account})).dataAccount,x=(0,y.useTranslation)().t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.StatusBar,{translucent:!0,barStyle:"dark-content",backgroundColor:f.Color.Transparent}),(0,g.jsx)(a.default,{style:o.default.ctnHeader,contentStyle:o.default.ctnHeader,titleStyle:{color:f.Color.TextPrimary},title:x("HM.addSearch"),fillIconBackLeft:""}),(0,g.jsxs)(u.SafeAreaView,{edges:["bottom","left","right"],style:o.default.ctnArea,children:[(0,g.jsxs)(i.View,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[(0,g.jsx)(l.IconEmpty,{width:(0,p.SizeDP)(331),height:(0,p.SizeDP)(217)}),(0,g.jsx)(s.default,{style:o.default.textTitle,children:x("HM.createSuccess")}),(0,g.jsx)(i.TouchableOpacity,{onPress:function(){r&&n.navigate(f.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:r,email:S.email,status:m.Status.processing,selectTabBottom:1})},children:(0,g.jsx)(s.default,{style:o.default.textDetail,children:x("CM.viewDetail")})})]}),(0,g.jsx)(c.default,{style:{width:"60%",marginTop:(0,p.SizeDP)(16)},label:x("HM.home"),onPress:function(){n.navigate(v.TabName.Home)}})]})]})}},2198:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=n(41995);t.default=r.StyleSheet.create({ctnHeader:{backgroundColor:i.Color.White},ctnTitle:{color:i.Color.colorText,fontSize:i.FontSize.FontLarge,fontFamily:i.Font.InterSemiBold600},ctnArea:{backgroundColor:i.Color.White,alignItems:"center",justifyContent:"center",flex:1,paddingHorizontal:(0,a.SizeDP)(16)},textTitle:{fontFamily:i.Font.InterSemiBold600,fontSize:i.FontSize.FontBase,color:i.Color.TextPrimary,marginTop:(0,a.SizeDP)(20)},textDes:{fontFamily:i.Font.InterRegular400,fontSize:i.FontSize.FontSmall,color:i.Color.Text07,textAlign:"center",marginVertical:(0,a.SizeDP)(8)},textDetail:{fontFamily:i.Font.InterMedium500,fontSize:i.FontSize.FontSmall,color:i.Color.BgInfo,marginBottom:50,marginTop:20}})},99246:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.timeTypeList=t.precious=t.fullMonthList=void 0;t.timeTypeList=[{value:"precious",label:"DB.filter.fixed-time-period"},{value:"period",label:"DB.filter.about-time"}],t.precious=[{value:"quarter1",label:"DB.filter.precious1",child:[{value:1,label:"DB.filter.month1"},{value:2,label:"DB.filter.month2"},{value:3,label:"DB.filter.month3"}]},{value:"quarter2",label:"DB.filter.precious2",child:[{value:4,label:"DB.filter.month4"},{value:5,label:"DB.filter.month5"},{value:6,label:"DB.filter.month6"}]},{value:"quarter3",label:"DB.filter.precious3",child:[{value:7,label:"DB.filter.month7"},{value:8,label:"DB.filter.month8"},{value:9,label:"DB.filter.month9"}]},{value:"quarter4",label:"DB.filter.precious4",child:[{value:10,label:"DB.filter.month10"},{value:11,label:"DB.filter.month11"},{value:12,label:"DB.filter.month12"}]}],t.fullMonthList=[{value:1,label:"DB.filter.month1"},{value:2,label:"DB.filter.month2"},{value:3,label:"DB.filter.month3"},{value:4,label:"DB.filter.month4"},{value:5,label:"DB.filter.month5"},{value:6,label:"DB.filter.month6"},{value:7,label:"DB.filter.month7"},{value:8,label:"DB.filter.month8"},{value:9,label:"DB.filter.month9"},{value:10,label:"DB.filter.month10"},{value:11,label:"DB.filter.month11"},{value:12,label:"DB.filter.month12"}]},95784:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43693)),a=r(n(85715)),l=n(87841),o=n(21527),u=r(n(76644)),s=r(n(43184)),c=n(32207),d=r(n(65963)),f=n(99246),p=r(n(33254)),y=r(n(94516)),m=n(2884),h=n(47671);t.default=function(e){var t=e.setDataFilter,n=(0,m.useTranslation)().t,r=(0,o.useState)(!1),v=(0,a.default)(r,2),g=v[0],S=v[1],x=(0,o.useState)(!1),j=(0,a.default)(x,2),b=j[0],w=j[1],D=(0,o.useState)([]),C=(0,a.default)(D,2),T=C[0],I=C[1],k=(0,o.useState)(new c.IndexPath(0)),P=(0,a.default)(k,2),_=P[0],M=P[1],F=(0,o.useState)(new c.IndexPath(0)),O=(0,a.default)(F,2),E=O[0],R=O[1],V=(0,o.useState)(),z=(0,a.default)(V,2),B=z[0],A=z[1],L=(0,o.useState)(),N=(0,a.default)(L,2),H=N[0],U=N[1],W=(0,o.useState)({year:(new Date).getFullYear().toString(),month:"",endDate:"",startDate:""}),$=(0,a.default)(W,2),G=$[0],Y=$[1];(0,o.useEffect)((function(){t(G),I(Array.from({length:30},(function(e,t){return{label:((new Date).getFullYear()-t).toString(),value:((new Date).getFullYear()-t).toString()}})))}),[]);var K=function(e,t){Y((function(n){return Object.assign({},n,(0,i.default)({},t,e))}))},q=(0,o.useCallback)((function(){var e;return B?null==f.precious||null==(e=f.precious[null==B?void 0:B.row])?void 0:e.child:f.fullMonthList}),[B,E]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.TouchableOpacity,{onPress:function(){return S(!0)},style:{borderWidth:1,borderColor:"#8f4eff",paddingHorizontal:6,paddingVertical:6,borderRadius:5},children:(0,h.jsx)(c.Icon,{name:"funnel-outline",width:16,height:16,fill:"#8f4eff"})}),(0,h.jsx)(u.default,{isVisible:g,children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.default,{style:{backgroundColor:"#fff"},contentStyle:{backgroundColor:"#fff"},titleStyle:{color:"#000810"},fillIconBackLeft:"#000810",onPressIconLeft:function(){return S(!1)},title:n("CM.filter")}),(0,h.jsx)(c.Divider,{}),(0,h.jsxs)(l.View,{style:{padding:10,flex:1},children:[(0,h.jsx)(d.default,{size:"medium",onSelect:function(e){M(e),0===e.row?(w(!1),R(new c.IndexPath(0)),A(void 0),U(void 0),Y({year:(new Date).getFullYear().toString(),month:"",endDate:"",startDate:""})):(w(!0),Y({year:"",month:"",endDate:"",startDate:""}))},valueSelect:_,label:n("DB.filter.type-time"),listData:f.timeTypeList,isi18n:!0}),b?(0,h.jsxs)(l.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[(0,h.jsx)(p.default,{value:G.startDate,onChangeDate:function(e){return K(e,"startDate")}}),(0,h.jsx)(c.Icon,{name:"arrow-forward-outline",width:20,height:20}),(0,h.jsx)(p.default,{value:G.endDate,onChangeDate:function(e){return K(e,"endDate")}})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.default,{onSelect:function(e){R(e),Y((function(t){var n;return Object.assign({},t,{year:null==T||null==(n=T[null==e?void 0:e.row])?void 0:n.value})}))},valueSelect:E,label:n("DB.filter.year"),size:"medium",listData:T,isi18n:!0}),(0,h.jsx)(d.default,{onSelect:function(e){A(e),U(void 0)},size:"medium",valueSelect:B,label:n("DB.filter.precious"),listData:f.precious,isi18n:!0,placeholder:n("DB.filter.precious-placeholder")}),(0,h.jsx)(d.default,{onSelect:U,valueSelect:H,label:n("DB.filter.month"),size:"medium",listData:q(),isi18n:!0,placeholder:n("DB.filter.month-placeholder")})]})]}),(0,h.jsx)(y.default,{style:{marginHorizontal:16},label:n("CM.confirm"),onPress:function(){try{if(0===(null==_?void 0:_.row)){var e;if(!B)return void t(G);if(!H){var n,r=(s=null==(n=f.precious[null==B?void 0:B.row])?void 0:n.value,c=Number(null==G?void 0:G.year)||(new Date).getFullYear(),d=0,p=0,"quarter1"==s?(d=0,p=2):"quarter2"==s?(d=3,p=5):"quarter3"==s?(d=6,p=8):"quarter4"==s&&(d=9,p=11),{fromDate:new Date(c,d,1,0,0,0),toDate:new Date(c,p,"quarter2"===s||"quarter3"===s?30:31,23,59,59)}),i=r.fromDate,a=r.toDate;return Y((function(e){return Object.assign({},e,{startDate:i.toISOString(),endDate:a.toISOString()})})),void t(Object.assign({},G,{startDate:i.toISOString(),endDate:a.toISOString()}))}var l=function(e){var t,n=Number(null==G?void 0:G.year)||(new Date).getFullYear();t=e-1;var r=new Date(n,e-1,1,0,0,0),i=new Date(n,t,Number(function(e,t){return t%4==0&&t%100!=0||t%400==0?[31,29,31,30,31,30,31,31,30,31,30,31][e-1]:[31,28,31,30,31,30,31,31,30,31,30,31][e-1]}(e+1,n)),23,59,59);return{fromDate:r,toDate:i}}(null==(e=q()[null==H?void 0:H.row])?void 0:e.value),o=l.fromDate,u=l.toDate;t(Object.assign({},G,{startDate:o.toISOString(),endDate:u.toISOString()}))}else t(Object.assign({},G))}catch(e){}finally{S(!1)}var s,c,d,p}})]})})]})}},99436:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=r(n(24541)),u=r(n(95784)),s=n(20880),c=n(21527),d=n(33139),f=n(35708),p=r(n(2336)),y=n(2884),m=n(47671);t.default=function(){var e=(0,y.useTranslation)().t,t=(0,c.useState)(),n=(0,a.default)(t,2),r=n[0],h=n[1],v=(0,c.useState)(),g=(0,a.default)(v,2),S=g[0],x=g[1],j=(0,d.useDashboardServices)();(0,c.useEffect)((function(){r&&w(r)}),[r]);var b,w=(b=(0,i.default)((function*(e){var t=yield j.getRecentTicket(e);t&&x(t)})),function(e){return b.apply(this,arguments)});return(0,m.jsxs)(l.View,{style:{flex:1},children:[(0,m.jsxs)(l.View,{style:p.default.ctnMain,children:[(0,m.jsx)(o.default,{style:p.default.txtHeader,children:e("DB.ticket-nearest")}),(0,m.jsx)(u.default,{setDataFilter:h})]}),(0,m.jsx)(l.FlatList,{data:S,showsVerticalScrollIndicator:!1,contentContainerStyle:{rowGap:16},renderItem:function(e){var t=e.item;return(0,m.jsxs)(l.View,{style:p.default.ctnBody,children:[(0,m.jsx)(l.Image,{source:{uri:s.String.DEFAULT_IMAGE},style:{width:30,height:30,borderRadius:15}}),(0,m.jsxs)(l.View,{children:[(0,m.jsx)(o.default,{style:p.default.txtTitle,children:t.title}),(0,m.jsx)(o.default,{style:p.default.txtDate,children:f.DateUtils.convertDateToDDMMYYYY_H_M(t.createdDate)})]})]})},ListEmptyComponent:function(){return(0,m.jsx)(o.default,{children:e("DB.no-data")})}})]})}},2336:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnMain:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},txtHeader:{fontSize:16,fontFamily:i.Font.InterSemiBold600,color:"#00204D"},ctnBody:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",columnGap:10},txtTitle:{color:"#366ae2",fontSize:12,fontFamily:i.Font.InterRegular400},txtDate:{color:"#00204db3",fontSize:10,fontFamily:i.Font.InterRegular400}})},60002:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=r(n(24541)),u=n(21527),s=n(33139),c=r(n(86746)),d=n(2884),f=n(47671);t.default=function(){var e=(0,d.useTranslation)().t,t=(0,u.useState)(),n=(0,a.default)(t,2),r=n[0],p=n[1],y=(0,s.useDashboardServices)();(0,u.useEffect)((function(){h()}),[]);var m,h=(m=(0,i.default)((function*(){var e=yield y.countByServiceRate();e&&p(null==e?void 0:e.slice(0,3))})),function(){return m.apply(this,arguments)});return(0,f.jsxs)(l.View,{style:{flex:1},children:[(0,f.jsx)(l.View,{style:c.default.ctnHeader,children:(0,f.jsx)(o.default,{style:c.default.txtHeader,children:e("DB.rate_service")})}),(0,f.jsx)(l.FlatList,{data:r,showsVerticalScrollIndicator:!1,contentContainerStyle:{rowGap:16},renderItem:function(t){var n=t.item,r=t.index;return(0,f.jsxs)(l.View,{style:Object.assign({},c.default.ctnItem,c.default[`top_${r+1}`]),children:[(0,f.jsxs)(o.default,{style:c.default.txt_1,children:["Top ",r+1]}),(0,f.jsx)(o.default,{style:c.default.txt_2,children:n.serviceName}),(0,f.jsxs)(o.default,{style:c.default.txt_3,children:[n.totalTickets," ",e("DB.ticket-rated-5")]})]})},ListEmptyComponent:function(){return(0,f.jsx)(o.default,{children:e("DB.no-data")})}})]})}},86746:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({top_1:{backgroundColor:"rgba(255, 243, 235, 1)",borderColor:"rgba(254, 211, 179, 1)",borderWidth:1},top_2:{backgroundColor:"rgba(246, 238, 252, 1)",borderColor:"rgba(231, 212, 247, 1)",borderWidth:1},top_3:{backgroundColor:"rgba(232, 247, 239, 1)",borderColor:"rgba(198, 236, 215, 1)",borderWidth:1},ctnHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},txtHeader:{fontSize:16,fontFamily:i.Font.InterSemiBold600,color:"#00204D"},ctnItem:{justifyContent:"center",alignItems:"center",rowGap:6,borderRadius:8,paddingHorizontal:12,paddingVertical:10},txt_1:{fontSize:17,fontFamily:i.Font.InterSemiBold600,color:"#00204D"},txt_2:{fontSize:13,fontFamily:i.Font.InterRegular400,color:"#00204D"},txt_3:{fontSize:11,fontFamily:i.Font.InterRegular400,color:"#00204de6"}})},82482:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=r(n(24541)),u=r(n(95784)),s=n(20880),c=n(21527),d=n(33139),f=n(32207),p=n(46317),y=r(n(91722)),m=n(2884),h=n(47671);t.default=function(){var e=(0,m.useTranslation)().t,t=(0,c.useState)(),n=(0,a.default)(t,2),r=n[0],v=n[1],g=(0,c.useState)(),S=(0,a.default)(g,2),x=S[0],j=S[1],b=(0,d.useDashboardServices)();(0,c.useEffect)((function(){r&&D(r)}),[r]);var w,D=(w=(0,i.default)((function*(e){var t=yield b.getCountByService(e);if(t){var n=t.map((function(e){return e.totalTickets})).reduce((function(e,t){return e+t}),0),r=t.map((function(e){return Object.assign({},e,{percent:e.totalTickets/n})}));j(r)}})),function(e){return w.apply(this,arguments)});return(0,h.jsxs)(l.View,{style:{flex:1},children:[(0,h.jsxs)(l.View,{style:y.default.ctnHeader,children:[(0,h.jsx)(o.default,{style:y.default.txtHeader,children:e("DB.ticket-service")}),(0,h.jsx)(u.default,{setDataFilter:v})]}),(0,h.jsx)(l.FlatList,{data:x,showsVerticalScrollIndicator:!1,contentContainerStyle:{rowGap:16},style:{flex:1},renderItem:function(e){var t,n=e.item;return(0,h.jsxs)(l.View,{style:y.default.ctnBody,children:[(0,h.jsxs)(l.View,{style:y.default.ctnSubBody,children:[(0,h.jsx)(l.View,{children:(0,h.jsx)(l.View,{style:[y.default.ctnImage],children:n.iconBase64?(0,h.jsx)(l.Image,{width:20,height:20,borderRadius:10,source:{uri:`${s.String.PREFIX_IMG_BASE64}${n.iconBase64}`}}):(0,h.jsx)(p.IconDefault,{width:20,height:20})})}),(0,h.jsxs)(l.View,{style:{flex:1},children:[(0,h.jsx)(o.default,{style:y.default.txtService,children:null==n||null==(t=n.serviceName)?void 0:t.trim()}),(0,h.jsx)(o.default,{style:y.default.txtDescription,children:n.description})]})]}),(0,h.jsxs)(l.View,{style:{flex:1},children:[(0,h.jsx)(o.default,{children:`${null!=n&&n.percent?(100*Number(n.percent)).toFixed(2):0}%`}),(0,h.jsx)(f.ProgressBar,{animating:!1,progress:n.percent})]})]})},ListEmptyComponent:function(){return(0,h.jsx)(o.default,{children:e("DB.no-data")})}})]})}},91722:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},txtHeader:{fontSize:16,fontFamily:i.Font.InterSemiBold600,color:"#00204D"},ctnBody:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",flex:1,columnGap:10},ctnSubBody:{flex:2,flexDirection:"row",alignItems:"center",columnGap:8},ctnImage:{backgroundColor:"rgb(237,242,253)",width:40,height:40,borderRadius:20,alignItems:"center",justifyContent:"center"},txtService:{fontSize:14,fontFamily:i.Font.InterMedium500,color:"#00204D"},txtDescription:{fontSize:12,fontFamily:i.Font.InterRegular400,color:i.Color.Text}})},60500:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=r(n(24541)),u=r(n(95784)),s=n(21527),c=n(33139),d=n(1333),f=r(n(36136)),p=n(24908),y=n(20880),m=n(2884),h=n(47671);t.default=function(){var e=(0,m.useTranslation)().t,t=(0,s.useState)(),n=(0,a.default)(t,2),r=n[0],v=n[1],g=(0,s.useState)([]),S=(0,a.default)(g,2),x=S[0],j=S[1],b=(0,l.useWindowDimensions)().width,w=(0,c.useDashboardServices)();(0,s.useEffect)((function(){r&&C(r)}),[r]);var D,C=(D=(0,i.default)((function*(e){var t=yield w.ticketDelay(e);t&&j(null==t?void 0:t.map((function(e){return{value:e.totalTickets,label:e.serviceName,frontColor:d.colorList[Math.floor(Math.random()*d.colorList.length)]}})))})),function(e){return D.apply(this,arguments)});return(0,h.jsxs)(l.View,{style:{flex:1},children:[(0,h.jsxs)(l.View,{style:f.default.ctnHeader,children:[(0,h.jsx)(o.default,{style:f.default.txtHeader,children:e("DB.ticket-late")}),(0,h.jsx)(u.default,{setDataFilter:v})]}),(0,h.jsx)(l.View,{style:{alignItems:"center",justifyContent:"center",flex:1},children:(0,h.jsx)(p.BarChart,{barWidth:20,width:b-100,barBorderRadius:4,frontColor:"lightgray",data:x,yAxisThickness:.5,xAxisThickness:.5,xAxisLabelTextStyle:{fontSize:8,fontFamily:y.Font.InterSemiBold600,color:y.Color.Text},yAxisTextStyle:{fontSize:12,fontFamily:y.Font.InterSemiBold600,color:y.Color.Text},xAxisTextNumberOfLines:2})})]})}},36136:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},txtHeader:{fontSize:16,fontFamily:i.Font.InterSemiBold600,color:"#00204D"},ctnBody:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",flex:1,columnGap:10},ctnSubBody:{flex:2,flexDirection:"row",alignItems:"center",columnGap:8},ctnImage:{backgroundColor:"rgb(237,242,253)",width:40,height:40,borderRadius:20,alignItems:"center",justifyContent:"center"},txtService:{fontSize:14,fontFamily:i.Font.InterMedium500,color:"#00204D"},txtDescription:{fontSize:12,fontFamily:i.Font.InterRegular400,color:i.Color.Text}})},81001:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=r(n(24541)),u=r(n(95784)),s=n(21527),c=n(33139),d=n(32207),f=r(n(99953)),p=n(2884),y=n(47671);t.default=function(){var e=(0,p.useTranslation)().t,t=(0,s.useState)(),n=(0,a.default)(t,2),r=n[0],m=n[1],h=(0,s.useState)(),v=(0,a.default)(h,2),g=v[0],S=v[1],x=(0,c.useDashboardServices)();(0,s.useEffect)((function(){r&&b(r)}),[r]);var j,b=(j=(0,i.default)((function*(e){var t=yield x.countByTicketRate(e);t&&S(t)})),function(e){return j.apply(this,arguments)});return(0,y.jsxs)(l.View,{style:{flex:1},children:[(0,y.jsxs)(l.View,{style:f.default.ctnMain,children:[(0,y.jsx)(o.default,{style:f.default.txtHeader,children:e("DB.rate_ticket")}),(0,y.jsx)(u.default,{setDataFilter:m})]}),(0,y.jsx)(l.FlatList,{data:g,showsVerticalScrollIndicator:!1,contentContainerStyle:{rowGap:16},renderItem:function(e){var t=e.item;return(0,y.jsxs)(l.View,{style:f.default.ctnBody,children:[(0,y.jsx)(l.View,{style:f.default.txtTitle,children:[1,2,3,4,5].map((function(e,n){return(0,y.jsx)(d.Icon,{fill:n<(null==t?void 0:t.rate)?"#fd6b04":"#72839c",name:n<(null==t?void 0:t.rate)?"star":"star-outline",width:16,height:16},n)}))}),(0,y.jsx)(o.default,{style:f.default.txtDate,children:t.totalTickets})]})},ListEmptyComponent:function(){return(0,y.jsx)(o.default,{children:e("DB.no-data")})}})]})}},99953:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnMain:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},txtHeader:{fontSize:16,fontFamily:i.Font.InterSemiBold600,color:"#00204D"},ctnBody:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",columnGap:10,backgroundColor:"rgb(249,250,251)",borderRadius:8,paddingHorizontal:12,paddingVertical:10},txtTitle:{flexDirection:"row",columnGap:4,alignItems:"center"},txtDate:{fontSize:14,fontFamily:i.Font.InterSemiBold600,color:"#00204df2"}})},57384:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=r(n(24541)),u=r(n(95784)),s=n(21527),c=n(33139),d=n(1333),f=r(n(96252)),p=n(24908),y=n(2884),m=n(20880),h=n(47671);t.default=function(){var e=(0,y.useTranslation)().t,t=(0,s.useState)(),n=(0,a.default)(t,2),r=n[0],v=n[1],g=(0,s.useState)([]),S=(0,a.default)(g,2),x=S[0],j=S[1],b=(0,c.useDashboardServices)(),w=(0,l.useWindowDimensions)();(0,s.useEffect)((function(){r&&C(r)}),[r]);var D,C=(D=(0,i.default)((function*(e){var t=yield b.getCountByStatus(e);t&&j(null==t?void 0:t.map((function(e){var t,n;return{value:e.totalTickets,text:e.totalTickets,color:null==d.CHART_COUNT_BY_STATUS_DATA||null==(t=d.CHART_COUNT_BY_STATUS_DATA.find((function(t){return t.value===e.ticketStatus})))?void 0:t.backgroundColor,label:null==d.CHART_COUNT_BY_STATUS_DATA||null==(n=d.CHART_COUNT_BY_STATUS_DATA.find((function(t){return t.value===e.ticketStatus})))?void 0:n.label}})))})),function(e){return D.apply(this,arguments)});return(0,h.jsxs)(l.View,{style:{flex:1,rowGap:16},children:[(0,h.jsxs)(l.View,{style:f.default.ctnHeader,children:[(0,h.jsx)(o.default,{style:f.default.txtHeader,children:e("DB.ticket-status")}),(0,h.jsx)(u.default,{setDataFilter:v})]}),0===(null==x?void 0:x.length)&&(0,h.jsx)(o.default,{children:e("DB.no-data")}),(0,h.jsxs)(l.ScrollView,{style:{flex:1},contentContainerStyle:f.default.ctnBody,children:[(0,h.jsx)(l.View,{children:(0,h.jsx)(p.PieChart,{donut:!0,radius:w.width/4,textSize:13,data:x})}),(0,h.jsx)(l.FlatList,{scrollEnabled:!1,data:x,renderItem:function(t){var n=t.item;return(0,h.jsxs)(l.View,{style:f.default.ctnSubBody,children:[(0,h.jsx)(l.View,{style:Object.assign({},f.default.ctnImage,{backgroundColor:n.color})}),(0,h.jsxs)(o.default,{style:f.default.txtDescription,children:[e(`TK.${n.label}`)," ",(0,h.jsxs)(o.default,{style:{fontFamily:m.Font.InterSemiBold600,fontSize:12},children:["(",n.value,")"]})]})]})}})]})]})}},96252:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},txtHeader:{fontSize:16,fontFamily:i.Font.InterSemiBold600,color:"#00204D"},ctnBody:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",columnGap:20},ctnSubBody:{flexDirection:"row",alignItems:"center",columnGap:10},ctnImage:{width:10,height:10,borderRadius:2},txtDescription:{fontSize:14,fontFamily:i.Font.InterRegular400,color:i.Color.Text,flex:1}})},1333:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.colorList=t.CHART_COUNT_BY_STATUS_DATA=void 0;t.colorList=["rgba(54, 106, 226, 1)","rgba(172, 103, 228, 1)","rgba(252, 107, 3, 1)","rgba(57, 172, 109, 1)","rgba(222, 168, 33, 1)"],t.CHART_COUNT_BY_STATUS_DATA=[{label:"pending",value:"pending",backgroundColor:"rgba(253, 122, 28, 1)"},{label:"processing",value:"processing",backgroundColor:"rgba(127, 67, 239, 1)"},{label:"completed",value:"completed",backgroundColor:"rgba(64, 191, 121, 1)"},{label:"draft",value:"draft",backgroundColor:"rgba(230, 234, 240, 1)"},{label:"voided",value:"voided",backgroundColor:"rgba(225, 67, 55, 1)"},{label:"overdue",value:"overdue",backgroundColor:"rgba(225, 67, 55, 1)"},{label:"rejected",value:"rejected",backgroundColor:"rgb(148,110,109)"}]},62915:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85715)),a=n(87841),l=r(n(82482)),o=n(10836),u=n(21527),s=n(20880),c=r(n(99436)),d=r(n(81001)),f=r(n(60002)),p=r(n(60500)),y=r(n(57384)),m=n(2884),h=n(47671);t.default=function(){var e=(0,m.useTranslation)().t,t=(0,a.useWindowDimensions)(),n=(0,u.useState)(0),r=(0,i.default)(n,2),v=r[0],g=r[1],S=(0,o.SceneMap)({service:l.default,status:y.default,delay:p.default,recent:c.default,ticketRate:d.default,serviceRate:f.default}),x=[{key:"service",title:e("DB.ticket-service")},{key:"status",title:e("DB.ticket-status")},{key:"delay",title:e("DB.ticket-late")},{key:"recent",title:e("DB.ticket-nearest")},{key:"ticketRate",title:e("DB.rate_ticket")},{key:"serviceRate",title:e("DB.rate_service")}];return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(o.TabView,{lazy:!0,style:{backgroundColor:"#fff"},sceneContainerStyle:{paddingHorizontal:16,paddingVertical:10},renderTabBar:function(e){return(0,h.jsx)(o.TabBar,Object.assign({},e,{indicatorStyle:{backgroundColor:s.Color.BgPrimary},style:{backgroundColor:"#fff"},scrollEnabled:!0,labelStyle:{color:s.Color.BgPrimary,fontFamily:s.Font.InterSemiBold600,fontSize:10,textAlign:"center"}}))},navigationState:{index:v,routes:x},renderScene:S,onIndexChange:g,initialLayout:{width:t.width},swipeEnabled:!1})})}},662:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),u=n(87841),s=r(n(36894)),c=n(14740),d=n(2543),f=n(32207),p=n(2884),y=n(12638),m=n(11671),h=n(20880),v=n(46317),g=r(n(24541)),S=r(n(43184)),x=r(n(67903)),j=n(41995),b=r(n(79445)),w=n(47671);function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}t.default=function(){var e=(0,p.useTranslation)().t,t=(0,c.useNavigation)(),n=(0,o.useState)([]),r=(0,l.default)(n,2),D=r[0],C=r[1],T=(0,o.useState)(0),I=(0,l.default)(T,2),k=I[0],P=I[1],_=(0,o.useState)(0),M=(0,l.default)(_,2),F=M[0],O=M[1],E=(0,o.useState)(!1),R=(0,l.default)(E,2),V=R[0],z=R[1],B=(0,o.useState)(!1),A=(0,l.default)(B,2),L=A[0],N=A[1],H=(0,o.useState)(!1),U=(0,l.default)(H,2),W=U[0],$=U[1],G=(0,u.useWindowDimensions)().width,Y=(0,y.useAppSelector)((function(e){return e.common})).accessToken,K=(0,y.useAppSelector)((function(e){return e.account})).dataAccount,q=(0,m.useTicketServices)();(0,o.useEffect)((function(){X(0,!1)}),[]);var J,X=(J=(0,a.default)((function*(e,t){try{var n,r;t?$(!0):N(!0);var a={sort:["displayOrder,asc","createdDate,desc"],page:e,size:50},l={textSearch:"",roleIds:null==K||null==(n=K.roles)?void 0:n.map((function(e){return e.id})).join(",")},o=yield q.getListServives(l,a,Y);C(0===e?o.content:[].concat((0,i.default)(D),(0,i.default)(o.content))),O(null==o||null==(r=o.page)?void 0:r.totalPage)}catch(e){console.log("error",e)}finally{z(!1),N(!1),$(!1)}})),function(e,t){return J.apply(this,arguments)}),Q=function(e){var n=e.item;return(0,w.jsxs)(u.TouchableOpacity,{onPress:function(){return function(e){t.navigate(h.NavigationName.ServiceDetail,e)}(n)},style:[s.default.ctnItemList,{flex:1}],children:[(0,w.jsx)(u.View,{style:[s.default.ctnImage,{backgroundColor:(0,d.isNull)(n.color)?h.Color.BgPrimary:n.color}],children:n.iconBase64?(0,w.jsx)(u.Image,{width:28,height:28,borderRadius:14,source:{uri:`${h.String.PREFIX_IMG_BASE64}${n.iconBase64}`}}):(0,w.jsx)(v.IconDefault,{width:28,height:28})}),(0,w.jsxs)(u.View,{style:{flex:1,rowGap:8},children:[(0,w.jsx)(g.default,{style:s.default.textTitleItem,children:n.serviceName}),(0,w.jsx)(g.default,{style:s.default.textDes,children:n.description})]})]})},Z=function(){z(!0),P(0),X(0,!1)},ee=function(){k<F&&(X(k+1,!0),P(k+1))};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(S.default,{title:"eRequest",renderContentRight:function(){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(f.TopNavigationAction,{icon:(0,w.jsx)(f.Icon,{fill:"#ffffff",name:"search"}),onPress:function(){t.navigate(h.NavigationName.SearchHomeScreen,{})}})})}}),(0,w.jsxs)(u.View,{style:s.default.ctnMain,children:[(0,w.jsx)(g.default,{style:s.default.textTitle,children:e("HM.title")}),L&&!W?(0,w.jsx)(f.List,{style:{backgroundColor:"#fff"},data:Array(8).fill({}),renderItem:function(){return(0,w.jsx)(b.default,{})},ItemSeparatorComponent:f.Divider}):(0,w.jsx)(w.Fragment,{children:G>j.TYPE_SCREEN.tablet_h?(0,w.jsx)(u.FlatList,{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,data:D,renderItem:Q,keyExtractor:function(e){return"_"+e.serviceId},numColumns:2,columnWrapperStyle:{columnGap:20},onEndReachedThreshold:.5,onEndReached:ee,refreshing:V,onRefresh:Z,ListEmptyComponent:(0,w.jsxs)(u.View,{style:s.default.viewListServices,children:[(0,w.jsx)(v.IconEmpty,{width:218,height:149}),(0,w.jsx)(g.default,{style:s.default.textH1,children:e("HM.titleEmpty")}),(0,w.jsx)(g.default,{children:e("HM.description")})]}),ListFooterComponent:function(){return W&&(0,w.jsx)(x.default,{})}},"_"):(0,w.jsx)(u.FlatList,{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,data:D,renderItem:Q,keyExtractor:function(e){return"#"+e.serviceId},numColumns:1,onEndReachedThreshold:.5,onEndReached:ee,refreshing:V,onRefresh:Z,ListEmptyComponent:(0,w.jsxs)(u.View,{style:s.default.viewListServices,children:[(0,w.jsx)(v.IconEmpty,{width:218,height:149}),(0,w.jsx)(g.default,{style:s.default.textH1,children:e("HM.titleEmpty")}),(0,w.jsx)(g.default,{children:e("HM.description")})]}),ListFooterComponent:function(){return W&&(0,w.jsx)(x.default,{})}},"#")})]})]})}},36894:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnMain:{padding:16,backgroundColor:i.Color.White,flex:1},textTitle:{fontFamily:i.Font.InterSemiBold600,fontSize:i.FontSize.FontLarge,color:i.Color.Text},viewListServices:{alignItems:"center",justifyContent:"center",flex:1},textH1:{fontFamily:i.Font.InterSemiBold600,fontSize:i.FontSize.FontBase,color:i.Color.Text,marginBottom:8,marginTop:16},textH3:{fontFamily:i.Font.InterRegular400,fontSize:i.FontSize.FontTiny,color:i.Color.Text07},ctnItemList:{backgroundColor:i.Color.White,padding:16,borderRadius:8,marginBottom:16,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:3.84,elevation:5,flexDirection:"row",alignItems:"center",columnGap:10},ctnImage:{width:68,height:68,borderRadius:8,alignItems:"center",justifyContent:"center"},textTitleItem:{fontFamily:i.Font.InterMedium500,fontSize:i.FontSize.FontSmall,color:i.Color.colorText},textDes:{fontFamily:i.Font.InterRegular400,fontSize:i.FontSize.FontTiny,color:i.Color.Text07},ctnPress:{alignItems:"center",rowGap:10}})},22702:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(41132)),l=r(n(85715)),o=n(87841),u=n(20880),s=r(n(43184)),c=n(32207),d=r(n(24541)),f=n(21527),p=r(n(76644)),y=r(n(829)),m=r(n(94516)),h=n(11671),v=n(47671);t.default=function(e){var t,n,r,g,S=e.onClose,x=e.modeler,j=e.setListTicketRelativeSelect,b=e.listTicketRelativeSelect,w=e.handleSetParamsConfig,D=(0,f.useState)(!1),C=(0,l.default)(D,2),T=C[0],I=C[1],k=(0,f.useState)(""),P=(0,l.default)(k,2),_=P[0],M=P[1],F=(0,f.useState)([]),O=(0,l.default)(F,2),E=O[0],R=O[1],V=(0,h.useTicketServices)();(0,f.useEffect)((function(){B()}),[]);var z,B=(z=(0,i.default)((function*(){var e,t,n,r=(null==x||null==(e=x.inheritanceModeler)?void 0:e.modelerIds)||[],i=yield Promise.all(r.map((function(e){return V.getModeler(e)})));R(i?null==i?void 0:i.map((function(e){return{id:e.id,name:e.name}})):(null==x||null==(t=x.inheritanceModeler)||null==(n=t.modelerIds)?void 0:n.map((function(e){return{id:e,name:e}})))||[])})),function(){return z.apply(this,arguments)});return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.default,{style:{backgroundColor:"#fff"},contentStyle:{backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:u.Color.borderColor},titleStyle:{color:"#000810"},fillIconBackLeft:"#000810",title:"",onPressIconLeft:S}),(0,v.jsx)(o.View,{style:{marginHorizontal:16,marginTop:16,backgroundColor:"#fff"},children:(0,v.jsx)(d.default,{style:{fontFamily:u.Font.InterSemiBold600,fontSize:14},children:`Để hoàn thành việc chọn giao dịch liên quan, vui lòng chọn dịch vụ trong mỗi quy trình dưới đây.\nSố lượng giao dịch đã chọn ${(null==b?void 0:b.length)||0}/${null==x||null==(t=x.inheritanceModeler)||null==(n=t.modelerIds)?void 0:n.length}`})}),(0,v.jsx)(c.List,{data:E,renderItem:function(e){var t=e.item;return(0,v.jsx)(c.ListItem,{onPress:function(){return e=t.id,M(e),void I(!0);var e},title:t.name,accessoryLeft:null!=b&&b.find((function(e){return e.modelerId===t.id}))?(0,v.jsx)(c.Icon,{name:"checkmark-circle-2-outline",width:24,height:24}):void 0,accessoryRight:(0,v.jsx)(c.Icon,{name:"arrow-ios-forward-outline",width:24,height:24})})}}),(0,v.jsx)(m.default,{disabled:(null==b?void 0:b.length)!==(null==x||null==(r=x.inheritanceModeler)||null==(g=r.modelerIds)?void 0:g.length),style:{marginHorizontal:16},label:"Xác nhận",onPress:w}),(0,v.jsx)(p.default,{isVisible:T,children:(0,v.jsx)(y.default,{configFilter:null==x?void 0:x.configFilter,inheritanceModeler:null==x?void 0:x.inheritanceModeler,onClose:function(){return I(!1)},modelerId:_,onGoBack:function(e,t){if(null==b?void 0:b.find((function(e){return e.modelerId===t}))){var n=null==b?void 0:b.filter((function(e){return e.modelerId!==t}));j([].concat((0,a.default)(n),(0,a.default)(e)))}else j([].concat((0,a.default)(b),(0,a.default)(e)))},paramsSelectTicket:null!=b&&b.find((function(e){return e.modelerId===_}))?[null==b?void 0:b.find((function(e){return e.modelerId===_}))]:[]})})]})})}},94149:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=n(7005),u=n(20880),s=n(32207),c=n(21527),d=n(14740),f=n(12638),p=n(2543),y=r(n(24541)),m=n(2884),h=n(11671),v=n(47671);t.default=function(){var e=(0,m.useTranslation)().t,t=(0,d.useNavigation)(),n=(0,o.useSafeAreaInsets)(),r=(0,c.useRef)(null),g=(0,c.useState)(""),S=(0,a.default)(g,2),x=S[0],j=S[1],b=(0,c.useState)(),w=(0,a.default)(b,2),D=w[0],C=w[1],T=(0,h.useTicketServices)(),I=(0,c.useState)(""),k=(0,a.default)(I,2),P=k[0],_=k[1],M=(0,p.debounce)((function(e){_(e)}),300),F=(0,f.useAppSelector)((function(e){return e.common})).accessToken,O=(0,f.useAppSelector)((function(e){return e.account})).dataAccount;(0,c.useEffect)((function(){return M(x),function(){M.cancel()}}),[x]),(0,c.useEffect)((function(){(0,p.isEmpty)(P)?C([]):R(P)}),[P]);var E,R=(E=(0,i.default)((function*(e){var t,n={textSearch:e,roleIds:null==O||null==(t=O.roles)?void 0:t.map((function(e){return e.id})).join(",")},r=yield T.getListServives(n,{sort:["displayOrder,asc","createdDate,desc"],page:0,size:1e4},F);r&&C(r.content)})),function(e){return E.apply(this,arguments)});return(0,v.jsx)(l.TouchableWithoutFeedback,{onPress:function(){return l.Keyboard.dismiss()},children:(0,v.jsx)(o.SafeAreaView,{edges:["top"],style:{backgroundColor:u.Color.BgPrimary,flex:1},children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.Input,{style:{backgroundColor:u.Color.BgPrimary,borderWidth:0},allowFontScaling:!1,textStyle:{color:"#fff"},placeholderTextColor:"#fff",ref:r,placeholder:e("HM.search"),value:x,autoFocus:!0,status:"basic",onChangeText:function(e){return j(e)},accessoryLeft:(0,v.jsx)(l.TouchableOpacity,{onPress:function(){return t.goBack()},children:(0,v.jsx)(s.Icon,{name:"arrow-back",fill:"#ffffff"})}),accessoryRight:x?(0,v.jsx)(l.TouchableOpacity,{onPress:function(){return j("")},children:(0,v.jsx)(s.Icon,{name:"close-outline",fill:"#ffffff"})}):void 0}),(0,v.jsx)(s.Divider,{}),(0,v.jsx)(s.Layout,{style:{flex:1,paddingBottom:n.bottom,backgroundColor:"#fff"},level:"1",children:x.length>0&&(0,v.jsx)(s.List,{style:{backgroundColor:"#fff",flex:1},showsVerticalScrollIndicator:!1,data:D,renderItem:function(e){var n=e.item;return(0,v.jsx)(s.ListItem,{title:function(e){return(0,v.jsx)(y.default,Object.assign({},e,{children:"serviceName"in n?n.serviceName:n.flowName}))},description:function(e){return(0,v.jsx)(y.default,Object.assign({},e,{children:"description"in n&&n.description?n.description:""}))},accessoryLeft:(0,v.jsx)(s.Icon,{fill:"color"in n&&n.color?n.color:u.Color.BgPrimary,name:"color"in n?"grid-outline":"browser-outline"}),accessoryRight:(0,v.jsx)(s.Icon,{name:"chevron-right-outline"}),onPress:function(){return function(e){e.serviceId?t.navigate(u.NavigationName.ServiceDetail,e):t.navigate(u.NavigationName.CreateTicket,{dataTicket:e})}(n)}})},ListEmptyComponent:function(){return(0,v.jsx)(l.View,{style:{margin:10,flex:1},children:(0,v.jsx)(y.default,{children:e("CM.emptyData")})})}})})]})})})}},77410:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(14740),o=n(21527),u=n(87841),s=r(n(85594)),c=n(7005),d=n(46317),f=r(n(12530)),p=r(n(43184)),y=r(n(24541)),m=n(41995),h=n(12638),v=n(2884),g=n(11671),S=n(47671);t.default=function(e){var t=e.route,n=(0,v.useTranslation)().t,r=null==t?void 0:t.params,x=(0,o.useState)([]),j=(0,a.default)(x,2),b=j[0],w=j[1],D=(0,o.useState)(!1),C=(0,a.default)(D,2),T=C[0],I=C[1],k=(0,h.useAppSelector)((function(e){return e.common})).accessToken,P=(0,g.useTicketServices)();(0,l.useFocusEffect)((0,o.useCallback)((function(){(0,i.default)((function*(){try{I(!0);var e=yield P.getByServiceId(r.serviceId,k);w(_(e))}catch(e){}finally{I(!1)}}))()}),[]));var _=function(e){var t=new Map;return e.forEach((function(e){e.groupModelerId?t.has(e.groupModelerId)?t.get(e.groupModelerId).push(e):t.set(e.groupModelerId,[e]):t.has(e.id)?t.get(e.id).push(e):t.set(e.id,[e])})),Array.from(t.values())};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(p.default,{title:r.serviceName}),(0,S.jsxs)(c.SafeAreaView,{edges:["bottom","left","right"],style:s.default.ctnMain,children:[T&&(0,S.jsx)(u.View,{style:s.default.ctnEmpty,children:(0,S.jsx)(u.ActivityIndicator,{})}),!T&&(0,S.jsx)(u.FlatList,{data:b,renderItem:function(e){var t=e.item;return(0,S.jsx)(f.default,{item:t})},ListEmptyComponent:(0,S.jsxs)(u.View,{style:s.default.ctnEmpty,children:[(0,S.jsx)(d.IconEmptyOther,{width:(0,m.SizeDP)(95),height:(0,m.SizeDP)(111)}),(0,S.jsx)(y.default,{children:n("HM.subServicesEmpty")})]})})]})]})}},85594:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=n(41995);t.default=r.StyleSheet.create({ctnMain:{backgroundColor:i.Color.White,padding:(0,a.SizeDP)(16),flex:1},ctnEmpty:{flex:1,alignItems:"center",justifyContent:"center",rowGap:(0,a.SizeDP)(20)}})},12530:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85715)),a=n(87841),l=n(21527),o=n(46317),u=r(n(106)),s=r(n(24541)),c=n(14740),d=n(20880),f=n(41995),p=n(47671);t.default=function(e){var t=e.item,n=(0,c.useNavigation)(),r=(0,l.useState)(!1),y=(0,i.default)(r,2),m=y[0],h=y[1],v=function(e){n.navigate(d.NavigationName.CreateTicket,{dataTicket:e})};return(0,p.jsx)(a.View,{children:t.every((function(e){return!e.groupModelerId}))?(0,p.jsx)(a.TouchableOpacity,{onPress:function(){return v(t[0])},style:u.default.ctnItem,children:(0,p.jsx)(s.default,{children:t[0].flowName})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.TouchableOpacity,{onPress:function(){return h(!m)},style:u.default.ctnItem,children:[(0,p.jsx)(s.default,{children:t[0].groupModelerName}),m?(0,p.jsx)(a.View,{style:{transform:[{rotate:"180deg"}]},children:(0,p.jsx)(o.IconArrowGrey,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})}):(0,p.jsx)(a.View,{children:(0,p.jsx)(o.IconArrowGrey,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})})]}),m&&t.map((function(e){return(0,p.jsx)(a.View,{style:[u.default.ctnSubItem],children:(0,p.jsx)(a.TouchableOpacity,{onPress:function(){return v(e)},children:(0,p.jsx)(s.default,{children:e.flowName})})},e.id)}))]})})}},106:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995),a=n(20880);t.default=r.StyleSheet.create({ctnItem:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:(0,i.SizeDP)(20),borderBottomWidth:1,borderBottomColor:a.Color.borderColor},ctnSubItem:{paddingLeft:(0,i.SizeDP)(30),paddingVertical:(0,i.SizeDP)(20),rowGap:(0,i.SizeDP)(20),borderBottomWidth:1,borderBottomColor:a.Color.borderColor}})},91510:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListServices=void 0;r(n(21527));var i=n(87841),a=r(n(76158)),l=r(n(24541)),o=n(14740),u=n(20880),s=r(n(43184)),c=n(32207),d=n(2884),f=r(n(62915)),p=n(37106),y=n(47671),m=t.ListServices=[{id:1,name:"TK.create_ticket",navigationName:u.NavigationName.HomeListService,icon:"plus-outline",permission:"erequest.sidebar.home"}];t.default=function(){var e=(0,d.useTranslation)().t,t=(0,o.useNavigation)(),n=(0,p.useZutandStore)().listMenuViewERequest;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.default,{title:"eRequest"}),(0,y.jsxs)(i.View,{style:{flex:1,backgroundColor:"#fff"},children:[(0,y.jsxs)(i.View,{style:a.default.ctnMain,children:[(0,y.jsx)(l.default,{style:a.default.textTitle,children:e("HM.title")}),(0,y.jsx)(i.FlatList,{data:null==m?void 0:m.filter((function(e){if(null==n?void 0:n.find((function(t){return t.nameId===e.permission})))return e})),horizontal:!0,style:{marginTop:10},contentContainerStyle:{gap:16},showsHorizontalScrollIndicator:!1,renderItem:function(n){var r=n.item;return(0,y.jsxs)(i.Pressable,{onPress:function(){return t.navigate(r.navigationName)},style:a.default.ctnPress,children:[(0,y.jsx)(i.View,{style:a.default.ctnCheck,children:(0,y.jsx)(c.Icon,{fill:"#fff",name:r.icon,width:20,height:20})}),(0,y.jsx)(l.default,{style:a.default.txtPress,children:e(r.name)})]})},ListEmptyComponent:function(){return(0,y.jsx)(l.default,{children:e("DB.no-data")})}})]}),(0,y.jsx)(c.Divider,{style:{height:6}}),(null==n?void 0:n.find((function(e){return"sidebar.admin.dashboard"===e.nameId})))&&(0,y.jsx)(f.default,{})]})]})}},76158:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnMain:{padding:(0,i.SizeDP)(16),backgroundColor:a.Color.White},textTitle:{fontFamily:a.Font.InterSemiBold600,fontSize:i.default.FontLarge,color:a.Color.Text},viewListServices:{alignItems:"center",justifyContent:"center",flex:1},textH1:{fontFamily:a.Font.InterSemiBold600,fontSize:i.default.FontBase,color:a.Color.Text,marginBottom:(0,i.SizeDP)(8),marginTop:(0,i.SizeDP)(16)},textH3:{fontFamily:a.Font.InterRegular400,fontSize:i.default.FontTiny,color:a.Color.Text07},ctnItemList:{backgroundColor:a.Color.White,padding:(0,i.SizeDP)(16),borderRadius:(0,i.SizeDP)(8),marginBottom:(0,i.SizeDP)(16),shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:3.84,elevation:5,flexDirection:"row",alignItems:"center",columnGap:(0,i.SizeDP)(10)},ctnImage:{width:(0,i.SizeDP)(68),height:(0,i.SizeDP)(68),borderRadius:(0,i.SizeDP)(8),alignItems:"center",justifyContent:"center"},textTitleItem:{fontFamily:a.Font.InterMedium500,fontSize:i.default.FontSmall,color:a.Color.colorText},textDes:{fontFamily:a.Font.InterRegular400,fontSize:i.default.FontTiny,color:a.Color.Text07},ctnPress:{alignItems:"center",rowGap:10},ctnCheck:{width:40,height:40,borderRadius:8,backgroundColor:a.Color.BgPrimary,justifyContent:"center",alignItems:"center"},txtPress:{fontFamily:a.Font.InterSemiBold600,fontSize:12,color:a.Color.BgPrimary}})},89117:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(87841),u=n(7005),s=r(n(24541)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),d=r(n(66549)),f=r(n(55980)),p=n(12638),y=n(20880),m=r(n(77389)),h=n(60596),v=n(2884),g=n(11671),S=r(n(45001)),x=r(n(27747)),j=n(14740),b=r(n(67903)),w=n(32207),D=r(n(79445)),C=n(41995),T=n(47671);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}t.default=function(e){var t=e.dataListStatus,n=(0,v.useTranslation)().t,r=((0,p.useAppDispatch)(),(0,c.useState)([])),I=(0,l.default)(r,2),k=I[0],P=I[1],_=(0,c.useState)(0),M=(0,l.default)(_,2),F=M[0],O=M[1],E=(0,c.useState)(0),R=(0,l.default)(E,2),V=R[0],z=R[1],B=(0,c.useState)(!1),A=(0,l.default)(B,2),L=A[0],N=A[1],H=(0,c.useState)(!1),U=(0,l.default)(H,2),W=U[0],$=U[1],G=(0,c.useState)(!1),Y=(0,l.default)(G,2),K=Y[0],q=Y[1],J=(0,c.useState)(""),X=(0,l.default)(J,2),Q=X[0],Z=X[1],ee=(0,c.useState)(""),te=(0,l.default)(ee,2),ne=te[0],re=te[1],ie=(0,c.useState)(),ae=(0,l.default)(ie,2),le=ae[0],oe=ae[1],ue=(0,c.useState)(!1),se=(0,l.default)(ue,2),ce=se[0],de=se[1],fe=(0,c.useState)(!1),pe=(0,l.default)(fe,2),ye=pe[0],me=pe[1],he=(0,p.useAppSelector)((function(e){return e.account})).dataAccount,ve=(0,p.useAppSelector)((function(e){return e.common})).accessToken,ge=(0,o.useWindowDimensions)().width,Se=(0,g.useTicketServices)(),xe=function(){Z(""),$(!W)},je=function(){q(!K)};(0,j.useFocusEffect)((0,c.useCallback)((function(){Ce(0,!1)}),[]));var be,we,De,Ce=(be=(0,a.default)((function*(e,n){try{var r,a;n?me(!0):de(!0);var l={createdBy:null!=(r=null==he?void 0:he.email)?r:"",myTicket:!0,textSearch:"",ticketStatus:[t.status]},o=yield Se.getTicketList(e,20,t.status===h.Status.processing?"createdDate,desc":"lastModifiedDate,desc",ve,l);P(0===e?null==o?void 0:o.content:[].concat((0,i.default)(k),(0,i.default)(null==o?void 0:o.content))),O(Number(null==o||null==(a=o.page)?void 0:a.totalRecords))}catch(e){}finally{N(!1),me(!1),de(!1)}})),function(e,t){return be.apply(this,arguments)}),Te=(we=(0,a.default)((function*(e){if(0!==(null==e?void 0:e.length))try{var t={ticketId:null==le?void 0:le.id,reason:e},r=yield Se.cancelTicket(t,ve);if(r.data)m.default.show({text1:n("CM.noti"),type:"success",text2:n("TK.rejectSuccess")}),P((function(e){return e.filter((function(e){return e.id!==(null==le?void 0:le.id)}))}));else{var i,a=null==r||null==(i=r.error)?void 0:i.message;m.default.show({text1:n("CM.noti"),type:"error",text2:n(`TK.${a||"rejectFailure"}`)})}xe()}catch(e){}else re("CM.requireFillReason")})),function(e){return we.apply(this,arguments)}),Ie=(De=(0,a.default)((function*(){(yield Se.deleteTicketById(null==le?void 0:le.id))?(m.default.show({text1:n("CM.noti"),type:"success",text2:n("CM.deleteSuccess")}),P((function(e){return e.filter((function(e){return e.id!==(null==le?void 0:le.id)}))}))):m.default.show({text1:n("CM.noti"),type:"error",text2:n("CM.deleteFailure")}),je()})),function(){return De.apply(this,arguments)});return ce&&!ye?(0,T.jsx)(w.List,{data:Array(8).fill({}),horizontal:!0,pagingEnabled:!0,snapToAlignment:"start",showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,snapToInterval:ge-40,decelerationRate:"fast",contentContainerStyle:[{backgroundColor:"#fff",paddingRight:40,flex:1}],style:{width:ge>C.TYPE_SCREEN.mobile?(ge-40)/2:ge-40},renderItem:function(){return(0,T.jsx)(D.default,{})},ItemSeparatorComponent:w.Divider}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(u.SafeAreaView,{style:[d.default.ctnMain,{width:ge>C.TYPE_SCREEN.mobile?(ge-40)/2:ge-40}],edges:["left","right"],children:[(0,T.jsxs)(o.View,{style:d.default.ctnHeader,children:[(0,T.jsx)(o.View,{style:[d.default.ctnNumber,{backgroundColor:t.color}],children:(0,T.jsx)(s.default,{style:d.default.text,children:F})}),(0,T.jsx)(o.View,{style:[d.default.ctnText,{backgroundColor:t.color}],children:(0,T.jsx)(s.default,{style:d.default.text,children:n(`TK.name_${t.status}`)})})]}),k&&(0,T.jsx)(o.FlatList,{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,data:k,refreshing:L,onRefresh:function(){N(!0),Ce(0,!1),z(0)},onEndReached:function(){k.length<F&&(Ce(V+1,!0),z(V+1))},onEndReachedThreshold:.5,keyExtractor:function(e){return""+e.id},contentContainerStyle:{backgroundColor:"#fff"},renderItem:function(e){var n=e.item;return(0,T.jsx)(f.default,{item:n,dataListStatus:t,setTicketSelect:oe,toggleModalCancel:xe,toogleBottomSheetDelete:je})},ListEmptyComponent:function(){return(0,T.jsx)(o.View,{style:{alignItems:"center",justifyContent:"center",flex:1},children:(0,T.jsx)(s.default,{children:n("CM.emptyData")})})},ListFooterComponent:function(){return ye&&(0,T.jsx)(b.default,{})}})]}),W&&(0,T.jsx)(S.default,{isVisible:W,onClose:xe,title:`${n("TK.confirmClear")} ${null==le?void 0:le.title}`,type:"cancel",labelCancel:n("HM.cancel"),labelConfirm:n("CM.labelCancel"),styleBtnRight:{backgroundColor:y.Color.RedE14337},onConfirm:function(){return Te(Q)},renderContent:function(){return(0,T.jsx)(o.View,{style:{width:"100%",marginVertical:6},children:(0,T.jsx)(x.default,{value:Q,onChangeText:Z,errorMessage:n(ne),isRequired:!0,multiline:!0,isFloatingLabel:!0,label:n("CM.fillReason"),maxLength:400})})}}),K&&(0,T.jsx)(S.default,{isVisible:K,onClose:je,title:`${n("TK.confirmDelete")} ${null==le?void 0:le.title}`,type:"cancel",labelCancel:n("HM.cancel"),labelConfirm:n("CM.confirm"),styleBtnRight:{backgroundColor:y.Color.RedE14337},onConfirm:Ie})]})}},66549:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnMain:{flex:1},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",marginTop:(0,i.SizeDP)(12),marginLeft:(0,i.SizeDP)(16),columnGap:(0,i.SizeDP)(8),paddingBottom:(0,i.SizeDP)(10)},ctnNumber:{paddingHorizontal:(0,i.SizeDP)(4),height:(0,i.SizeDP)(24),minWidth:(0,i.SizeDP)(24),borderRadius:(0,i.SizeDP)(4),justifyContent:"center",alignItems:"center"},ctnText:{height:(0,i.SizeDP)(24),justifyContent:"center",alignItems:"center",paddingHorizontal:(0,i.SizeDP)(4),borderRadius:(0,i.SizeDP)(5)},text:{fontFamily:a.Font.InterSemiBold600,fontSize:i.default.FontSmall,color:a.Color.White},ctnIcon:{transform:[{rotate:"90deg"}],width:(0,i.SizeDP)(16),height:(0,i.SizeDP)(16),alignItems:"center",justifyContent:"center",marginLeft:(0,i.SizeDP)(8)}})},77838:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getListAction=void 0;var r=n(46317),i=n(41995),a=n(60596),l=n(47671);t.getListAction=function(e){switch(e){case a.Status.processing:return[{id:1,key:"TK.multi",value:"multi",icon:(0,l.jsx)(r.IconMulti,{width:(0,i.SizeDP)(18),height:(0,i.SizeDP)(18)})},{id:2,key:"TK.cancel",value:"cancel",icon:(0,l.jsx)(r.IconTrash,{width:(0,i.SizeDP)(18),height:(0,i.SizeDP)(18)})}];case a.Status.completed:case a.Status.rejected:case a.Status.voided:case a.Status.overdue:return[{id:1,key:"TK.multi",value:"multi",icon:(0,l.jsx)(r.IconMulti,{width:(0,i.SizeDP)(18),height:(0,i.SizeDP)(18)})}];case a.Status.draft:return[{id:2,key:"TK.edit",value:"edit",icon:(0,l.jsx)(r.IconEdit,{width:(0,i.SizeDP)(18),height:(0,i.SizeDP)(18)})},{id:3,key:"TK.deleteTicket",value:"delete",icon:(0,l.jsx)(r.IconTrash,{width:(0,i.SizeDP)(18),height:(0,i.SizeDP)(18)})}];default:return[]}}},55980:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=r(n(24541)),l=r(n(69536)),o=n(46317),u=n(41995),s=r(n(21527)),c=n(35708),d=n(2543),f=n(14740),p=n(20880),y=n(2884),m=r(n(85555)),h=n(77838),v=n(45335),g=n(60596),S=n(37106),x=n(47671),j=s.default.memo((function(e){var t=e.item,n=e.dataListStatus,r=e.setTicketSelect,s=e.toggleModalCancel,j=e.toogleBottomSheetDelete,b=(0,f.useNavigation)(),w=(0,y.useTranslation)().t,D=(0,S.useZutandStore)((function(e){return e})).setStatusTicketSelect,C=function(e){switch(e.value){case"multi":return void b.navigate(p.NavigationName.CreateTicket,{dataTicket:t,action:"multi"});case"edit":return void b.navigate(p.NavigationName.CreateTicket,{dataTicket:t,action:"edit"});case"cancel":return s(),void r(t);case"delete":return j(),void r(t)}},T=function(){if(t.ticketStatus===g.Status.overdue){if(I(t.remindTime,t.estimateDate))return`${w("TK.before")} `+_(null==t?void 0:t.remindTime,null==t?void 0:t.estimateDate);if(k(t.estimateDate,null))return`${w("TK.late")} `+P(null==t?void 0:t.estimateDate,null)}return t.ticketStatus!==g.Status.completed&&t.ticketStatus!==g.Status.accepted||!k(t.estimateDate,t.finishDate)?"":`${w("TK.late")} `+P(null==t?void 0:t.estimateDate,null==t?void 0:t.finishDate)},I=function(e,t){if(!e)return!1;if(Number(e)>0){var n=Math.floor(new Date(t).getTime()/1e3),r=n-60*Number(e),i=Math.floor((new Date).getTime()/1e3);return r<i&&i<n}},k=function(e,t){if(e){if(t){var n=Math.floor(new Date(e).getTime()/1e3);return Math.floor(new Date(t).getTime()/1e3)>n}var r=Math.floor(new Date(e).getTime()/1e3);return Math.floor((new Date).getTime()/1e3)>r}return!1},P=function(e,t){if(t){var n=Math.floor(new Date(e).getTime()),r=Math.floor(new Date(t).getTime());return M(r-n)}var i=Math.floor(new Date(e).getTime()),a=Math.floor((new Date).getTime());return M(a-i)},_=function(e,t){if(Number(e)>0){var n=Math.floor(new Date(t).getTime()),r=Math.floor((new Date).getTime());return M(n-r)}},M=function(e){var t=Math.floor(e/1e3),n=t%86400,r=n%3600;return`${Math.floor(t/86400)}d${Math.floor(n/3600)}h${Math.floor(r/60)}m`};return(0,x.jsxs)(i.TouchableOpacity,{onPress:function(){D(n.status),b.navigate(p.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:null==t?void 0:t.id,email:t.createdBy,status:n.status,selectTabBottom:1})},style:l.default.ctnMain,children:[(0,x.jsxs)(i.View,{style:l.default.ctnHeader,children:[function(){switch(null==t?void 0:t.priority){case g.Propity.high:return(0,x.jsx)(o.Iconhigh,{width:(0,u.SizeDP)(12),height:(0,u.SizeDP)(12)});case g.Propity.medium:return(0,x.jsx)(o.Iconmedium,{width:(0,u.SizeDP)(12),height:(0,u.SizeDP)(12)});case g.Propity.low:return(0,x.jsx)(o.Iconlow,{width:(0,u.SizeDP)(12),height:(0,u.SizeDP)(12)})}}(),(0,x.jsx)(a.default,{style:[l.default.title,{flex:1,marginHorizontal:(0,u.SizeDP)(12)}],children:(0,d.isEmpty)(t.title)?"---":t.title}),(0,x.jsx)(i.View,{style:l.default.time,children:(0,x.jsxs)(i.View,{style:l.default.center,children:[!(0,d.isEmpty)(T())&&(0,x.jsx)(v.Tooltip,{title:T(),children:(0,x.jsx)(o.IconClock,{width:(0,u.SizeDP)(16),height:(0,u.SizeDP)(16)})}),(0,x.jsx)(m.default,{listDropdown:(0,h.getListAction)(t.ticketStatus),onChangeItem:function(e){return C(e)},containerStyle:{width:(0,u.SizeDP)(12)}})]})})]}),(0,x.jsxs)(a.default,{children:[w("TK.createDate"),":"," ",c.DateUtils.convertDateToDDMMYYYY_H_M(t.createdDate)]}),(null==t?void 0:t.ticketStatus)!==g.Status.completed&&(null==t?void 0:t.ticketStatus)!==g.Status.draft&&(0,x.jsxs)(a.default,{style:{marginTop:6},children:[w("Dự kiến hoàn thành"),":"," ",c.DateUtils.convertDateToDDMMYYYY_H_M(t.estimateDate)]}),(null==t?void 0:t.ticketStatus)===g.Status.completed&&(0,x.jsxs)(a.default,{style:{marginTop:6},children:[w("Ngày hoàn thành"),":"," ",c.DateUtils.convertDateToDDMMYYYY_H_M(t.finishDate)]}),(null==t?void 0:t.ticketStatus)===g.Status.voided&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(a.default,{style:{marginTop:6},children:[w("Ngày huỷ"),":"," ",c.DateUtils.convertDateToDDMMYYYY_H_M(t.lastModifiedDate)]}),(0,x.jsxs)(a.default,{style:{marginTop:6},children:[w("Người huỷ"),": ",t.lastModifiedBy]}),(0,x.jsxs)(a.default,{style:{marginTop:6},children:[w("Lý do huỷ"),": ",(null==t?void 0:t.reason)||"---"]})]}),(null==t?void 0:t.ticketStatus)===g.Status.rejected&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(a.default,{style:{marginTop:6},children:[w("Ngày từ chối"),":"," ",c.DateUtils.convertDateToDDMMYYYY_H_M(t.lastModifiedDate)]}),(0,x.jsxs)(a.default,{style:{marginTop:6},children:[w("Người từ chối"),": ",t.lastModifiedBy]}),(0,x.jsxs)(a.default,{style:{marginTop:6},children:[w("Lý do từ chối"),": ",(null==t?void 0:t.reason)||"---"]})]}),!(0,d.isEmpty)(T())&&(0,x.jsx)(a.default,{style:l.default.styleClock,children:T()}),(0,x.jsxs)(i.View,{style:l.default.ctnFooter,children:[(0,x.jsx)(i.View,{style:[l.default.rowCenter],children:(0,x.jsx)(i.View,{style:[l.default.viewStatus,{backgroundColor:n.bgColor,borderColor:"#fff"}],children:(0,x.jsx)(a.default,{style:[{color:n.color}],children:w(`TK.${t.ticketStatus}`)})})}),(0,x.jsxs)(i.View,{style:[l.default.rowCenter],children:[(0,x.jsxs)(i.View,{style:[l.default.rowCenter],children:[(0,x.jsx)(o.IconFilePresent,{width:(0,u.SizeDP)(20),height:(0,u.SizeDP)(20)}),(0,x.jsx)(a.default,{children:t.attachmentCount})]}),(0,x.jsxs)(i.View,{style:[l.default.rowCenter],children:[(0,x.jsx)(o.IconMessageChat,{width:(0,u.SizeDP)(20),height:(0,u.SizeDP)(20)}),(0,x.jsx)(a.default,{children:t.commentCount})]})]})]})]})}));t.default=j},69536:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnMain:{padding:(0,i.SizeDP)(16),borderRadius:(0,i.SizeDP)(8),shadowColor:"#51459F",shadowOffset:{width:0,height:3},shadowOpacity:.1,shadowRadius:(0,i.SizeDP)(3),elevation:4,marginVertical:(0,i.SizeDP)(8),backgroundColor:a.Color.White,marginHorizontal:(0,i.SizeDP)(3),minHeight:150},title:{fontSize:i.default.FontSmall,color:a.Color.color1F2633,fontFamily:a.Font.InterSemiBold600},ctnFooter:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:(0,i.SizeDP)(16)},ctnHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:(0,i.SizeDP)(16)},rowCenter:{flexDirection:"row",justifyContent:"center",alignItems:"center",columnGap:(0,i.SizeDP)(4)},viewId:{borderWidth:(0,i.SizeDP)(1),borderColor:"#EBEEF2",borderRadius:(0,i.SizeDP)(16),paddingHorizontal:(0,i.SizeDP)(8),paddingVertical:(0,i.SizeDP)(5)},viewStatus:{borderWidth:(0,i.SizeDP)(1),borderColor:"#EBEEF2",borderRadius:(0,i.SizeDP)(16),paddingHorizontal:(0,i.SizeDP)(8),paddingVertical:(0,i.SizeDP)(5)},time:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,i.SizeDP)(6)},center:{alignItems:"center",justifyContent:"center",flexDirection:"row",columnGap:(0,i.SizeDP)(8)},styleClock:{marginTop:(0,i.SizeDP)(6),color:a.Color.RedE14337}})},72676:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.dataListStatusTicket=void 0;var r=n(60596);t.dataListStatusTicket=[{id:1,name:"TK.ticketProcessing",status:r.Status.processing,color:"#7F43EF",bgColor:"#F2ECFD"},{id:6,name:"TK.overdue",status:r.Status.overdue,color:"#F05959",bgColor:"#e1433780"},{id:2,name:"TK.ticketCompleted",status:r.Status.completed,color:"#39AC6D",bgColor:"#E8F7EF"},{id:3,name:"TK.ticketDraft",status:r.Status.draft,color:"#00204DB2",bgColor:"#F2F5F8"},{id:4,name:"TK.ticketVoided",status:r.Status.voided,color:"#F05959",bgColor:"rgba(251, 213, 213, 1)"},{id:5,name:"TK.ticketRejected",status:r.Status.rejected,color:"#6496e4",bgColor:"#6496e45c"}]},16702:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=r(n(43184)),l=r(n(89117)),o=n(72676),u=r(n(8966)),s=n(32207),c=n(14740),d=r(n(80671)),f=n(2884),p=(r(n(21527)),n(47671));t.default=function(){var e=(0,f.useTranslation)().t,t=(0,c.useNavigation)(),n=(0,i.useWindowDimensions)().width;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.default,{title:e("TK.myTicket"),renderContentRight:function(){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(s.TopNavigationAction,{icon:(0,p.jsx)(s.Icon,{fill:"#ffffff",name:"search"}),onPress:function(){t.navigate(d.default.SearchTicketScreen,{type:"my-ticket"})}})})}}),(0,p.jsx)(i.FlatList,{style:{backgroundColor:"#fff"},data:o.dataListStatusTicket,horizontal:!0,pagingEnabled:!0,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,snapToAlignment:"start",snapToInterval:n-40,decelerationRate:"fast",contentContainerStyle:[u.default.flatListContainer,{paddingRight:40}],renderItem:function(e){var t=e.item;return(0,p.jsx)(l.default,{dataListStatus:t})}})]})}},8966:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({flatListContainer:{backgroundColor:i.Color.White}})},50608:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.listAction=void 0;t.listAction=[{status:"all",name:"Tất cả"},{status:"read",name:"Đã đọc"},{status:"unread",name:"Chưa đọc"}]},50570:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43693)),a=r(n(41132)),l=r(n(29293)),o=r(n(85715)),u=n(7005),s=r(n(43184)),c=r(n(24541)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),f=n(32207),p=n(87841),y=n(2884),m=n(20880),h=r(n(21954)),v=n(14740),g=n(45335),S=n(50608),x=n(12638),j=r(n(69290)),b=n(97427),w=n(43790),D=n(11671),C=r(n(77389)),T=n(47671);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}t.default=function(){var e=(0,y.useTranslation)().t,t=(0,v.useNavigation)(),n=(0,x.useAppDispatch)(),r=(0,d.useState)([]),I=(0,o.default)(r,2),k=I[0],P=I[1],_=(0,d.useState)(0),M=(0,o.default)(_,2),F=M[0],O=M[1],E=(0,d.useState)(0),R=(0,o.default)(E,2),V=R[0],z=R[1],B=(0,d.useState)(!1),A=(0,o.default)(B,2),L=A[0],N=A[1],H=(0,d.useState)({}),U=(0,o.default)(H,2),W=U[0],$=U[1],G=(0,d.useState)(!1),Y=(0,o.default)(G,2),K=Y[0],q=Y[1],J=(0,d.useState)("all"),X=(0,o.default)(J,2),Q=X[0],Z=X[1],ee=(0,w.useNotificationServices)(),te=(0,D.useTicketServices)(),ne=(0,x.useAppSelector)((function(e){return e.common})),re=ne.accessToken,ie=ne.totalNumberNotiUnread;(0,x.useAppSelector)((function(e){return e.account})).dataAccount;(0,v.useFocusEffect)((0,d.useCallback)((function(){O(0),ue(0,Q)}),[Q]));var ae,le,oe,ue=(ae=(0,l.default)((function*(e,t){try{var n={page:e,size:30,sort:"createdDate,desc"},r={status:"all"===t?"":t,system:"E_REQUEST"},i=yield ee.getListNotifications(n,r);i&&(P(0===e?i.data:[].concat((0,a.default)(k),(0,a.default)(i.data))),z(i.totalRecords))}catch(e){}finally{N(!1)}})),function(e,t){return ae.apply(this,arguments)}),se=function(t){if(t){var n={ticketName:t.ticketName,usertaskName:t.userTaskName,remindTime:t.remindTime,overdueTime:t.overdueTime,notifyTime:t.notifyTime,createdBy:t.createdBy,createdDate:t.createdDate,assigner:t.assigner,status:ce(t.status),reason:t.reason?t.reason:"",perm:null==t?void 0:t.perm,accountCreated:null==t?void 0:t.createdAcl};return"acl_ticket_create"===t.type&&t.userTaskName?e("NT.notification."+t.type+"_user_task",n):e("NT.notification."+t.type,n)}},ce=function(e){return e&&"rejected"===e.trim()?"từ chối":e&&"completed"===e.trim()?"hoàn thành":e&&"voided"===e.trim()?"hủy":""},de=(le=(0,l.default)((function*(e){try{"ticket_delete"!==e.type&&$((0,i.default)({},e.id,!0));var t=[{id:e.id,status:"read"}];if(yield ee.updateNotifications(t)){var r=k.map((function(t){return t.id===e.id?Object.assign({},e,{status:"read"}):t}));P(r),n(b.commonActions.setTotalNumberNotiUnread(ie-1))}fe(e)}catch(e){}})),function(e){return le.apply(this,arguments)}),fe=(oe=(0,l.default)((function*(n){if("ticket_create"!==n.type&&"ticket_update"!==n.type&&"ticket_cancel"!==n.type&&"ticket_require_confirm"!==n.type&&"ticket_confirm"!==n.type&&"ticket_reject"!==n.type&&"ticket_require_review"!==n.type&&"ticket_review"!==n.type&&"ticket_review_reject"!==n.type&&"ticket_assign_user"!==n.type&&"ticket_update_status"!==n.type&&"ticket_authorize"!==n.type&&"ticket_remind_workflow"!==n.type&&"ticket_remind_usertask"!==n.type&&"ticket_remind_workflow_overdue_onetime"!==n.type&&"ticket_remind_usertask_overdue_onetime"!==n.type&&"ticket_remind_workflow_overdue_period"!==n.type&&"ticket_remind_usertask_overdue_period"!==n.type&&"ticket_tag_comment"!==n.type&&"acl_ticket_create"!==n.type);else{var r=JSON.parse(n.content);if(r){var a=yield te.getTicketById(r.ticketId,re);a?t.navigate(m.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:r.ticketId,email:n.emailReceiver,status:a.ticketStatus,selectTabBottom:"ticket_tag_comment"===n.type||"acl_ticket_create"===n.type?1:2,recipientDetailsId:r.recipientDetailsId,userTaskId:r.userTaskId,notifyActionType:n.type}):C.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.error")})}$((0,i.default)({},n.id,!1))}})),function(e){return oe.apply(this,arguments)});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(u.SafeAreaView,{edges:[],style:{backgroundColor:"#943cdd0d",flex:1},children:[(0,T.jsx)(s.default,{title:e("CM.noti"),renderContentRight:function(){return(0,T.jsx)(f.TopNavigationAction,{icon:(0,T.jsx)(f.Icon,{fill:"#fff",name:"funnel-outline"}),onPress:function(){return q(!0)}})}}),(0,T.jsx)(f.List,{style:{backgroundColor:"#fff"},contentContainerStyle:{backgroundColor:"#fff"},data:k,onEndReachedThreshold:.5,refreshing:L,onEndReached:function(){k.length<V&&(ue(F+1,Q),O(F+1))},onRefresh:function(){N(!0),O(0),ue(0,Q)},renderItem:function(e){var t=e.item,n=e.index,r=JSON.parse(t.content),i="system"!==t.createdBy?"people-outline":"settings-outline";return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(f.ListItem,{onPress:function(){return de(t)},children:(0,T.jsxs)(p.View,{style:h.default.ctnMain,children:[(0,T.jsxs)(p.View,{style:h.default.ctnIcon,children:[(0,T.jsx)(f.Icon,{width:20,height:20,fill:"#39ac6c",name:i}),"unread"===t.status&&(0,T.jsx)(g.Badge,{size:10,style:h.default.badge})]}),(0,T.jsxs)(p.View,{style:{flex:1,rowGap:10},children:[(0,T.jsx)(c.default,{children:se(r)}),(0,T.jsxs)(p.View,{style:h.default.ctnText,children:[(0,T.jsx)(c.default,{style:[{fontFamily:m.Font.InterSemiBold600},h.default.text],children:""}),(0,T.jsx)(c.default,{style:[[{fontFamily:m.Font.InterRegular400},h.default.text]],children:r.notifyTime})]})]}),null!=W&&W[null==t?void 0:t.id]?(0,T.jsx)(f.Spinner,{size:"tiny"}):(0,T.jsx)(f.Icon,{width:20,height:20,name:"chevron-right-outline"})]},n)}),(0,T.jsx)(f.Divider,{})]})},ListEmptyComponent:function(){return(0,T.jsx)(p.View,{style:{alignItems:"center",justifyContent:"center",flex:1,marginTop:16},children:(0,T.jsx)(c.default,{children:e("CM.emptyData")})})}})]}),(0,T.jsx)(j.default,{title:e("CM.noti"),onClose:function(){return q(!1)},isVisible:K,renderContent:(0,T.jsx)(f.Menu,{children:S.listAction.map((function(t){return(0,T.jsx)(f.MenuItem,{title:function(n){return(0,T.jsx)(c.default,Object.assign({},n,{children:e(`NT.notification.filter.${t.status}`)}))},onPress:function(){return e=t.status,Z(e),void q(!1);var e},accessoryRight:Q===t.status?(0,T.jsx)(f.Icon,{name:"checkmark"}):void 0},t.status)}))})})]})}},21954:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841);t.default=r.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",gap:10},ctnIcon:{width:40,height:40,borderRadius:20,backgroundColor:"#e8f7ee",alignItems:"center",justifyContent:"center",position:"relative"},ctnText:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:5},text:{fontSize:12,color:"#00204df2"},badge:{position:"absolute",right:0,top:0}})},43952:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(87841),u=r(n(65963)),s=r(n(24541)),c=n(87071),d=n(91530),f=n(21527),p=n(32207),y=n(11671),m=r(n(76644)),h=r(n(43184)),v=n(26878),g=r(n(27747)),S=r(n(94516)),x=r(n(50852)),j=n(2884),b=n(46317),w=n(47671);t.default=function(e){var t,n,r,D=e.dataResource,C=e.dataUser,T=e.setListDataUpdate,I=e.toogleReload,k=(0,j.useTranslation)().t,P=(0,f.useState)(new p.IndexPath(c.optionPermisson.findIndex((function(e){return e.value===D.perm})))),_=(0,l.default)(P,2),M=_[0],F=_[1],O=(0,f.useState)(!1),E=(0,l.default)(O,2),R=E[0],V=E[1],z=(0,f.useState)(!1),B=(0,l.default)(z,2),A=B[0],L=B[1],N=(0,f.useState)(""),H=(0,l.default)(N,2),U=H[0],W=H[1],$=function(){return V(!R)},G=function(){return L(!A)},Y=(0,y.useTicketServices)(),K=(t=(0,a.default)((function*(){(yield Y.deleteAclsById(D.id))&&I(),G()})),function(){return t.apply(this,arguments)}),q=(n=(0,a.default)((function*(e){var t=(D.permType!==d.PermType.orgin?c.optionPermisson:c.optionPermisson.filter((function(e){return e.value!==d.OptionPermisson.permission})))[e.row];if(t.value!==d.OptionPermisson.delete){if(t.value===d.OptionPermisson.permission)return W(""),void $();F(e);var n={assignee:D.assignee,assigneeId:D.assigneeId,perm:t.value,permType:D.permType,name:D.name,avatar:D.avatar};T((function(e){var t=e.find((function(e){return e.assigneeId===D.assigneeId}));return t?e.map((function(e){return e.assigneeId===D.assigneeId?n:e})):[].concat((0,i.default)(e),[n])}))}else G()})),function(e){return n.apply(this,arguments)}),J=function(){var e,t;return null!=D&&null!=(e=D.name)&&e.trim()?null==D||null==(t=D.name)?void 0:t.trim():C?(null==C?void 0:C.firstName)+" "+(null==C?void 0:C.lastName):void 0},X=(r=(0,a.default)((function*(){var e=c.optionPermisson[M.row],t={resourceId:D.resourceId},n={aclForm:{assignee:D.assignee,assigneeId:D.assigneeId,perm:e.value,permType:D.permType,name:D.name},description:U};(yield Y.pushlishFile(t,n))&&($(),F(new p.IndexPath(c.optionPermisson.findIndex((function(e){return e.value===D.perm})))))})),function(){return r.apply(this,arguments)});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(o.View,{style:x.default.ctnMain,children:[(0,w.jsxs)(o.View,{style:x.default.ctnBody,children:[D.permType!==d.PermType.orgin?(0,w.jsx)(o.Image,{width:32,height:32,borderRadius:16,source:{uri:D.avatar||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}):(0,w.jsx)(o.View,{style:x.default.ctnIcon,children:(0,w.jsx)(p.Icon,{fill:"#fff",width:26,height:26,name:"people"})}),(0,w.jsxs)(o.View,{style:{flex:1},children:[D.permType!==d.PermType.orgin&&(0,w.jsx)(o.View,{children:(0,w.jsx)(s.default,{style:x.default.ctnName,children:J()})}),(0,w.jsx)(o.View,{children:(0,w.jsx)(s.default,{style:x.default.ctnAssignee,children:D.assignee})})]})]}),(0,w.jsx)(o.View,{style:{flex:.7},children:D.perm===d.OptionPermisson.owner?(0,w.jsx)(o.View,{style:x.default.ctnOwner,children:(0,w.jsx)(s.default,{style:x.default.textOwner,children:k("RV.owner")})}):(0,w.jsx)(u.default,{isi18n:!0,size:"medium",onSelect:q,valueSelect:M,listData:D.permType!==d.PermType.orgin?c.optionPermisson:c.optionPermisson.filter((function(e){return e.value!==d.OptionPermisson.permission}))})}),(0,w.jsx)(m.default,{isVisible:R,children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(h.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:k("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:function(){F(new p.IndexPath(c.optionPermisson.findIndex((function(e){return e.value===D.perm})))),$()}}),(0,w.jsx)(p.Divider,{}),(0,w.jsxs)(v.KeyboardAwareScrollView,{style:{padding:16,rowGap:10},children:[(0,w.jsxs)(o.View,{style:[{marginBottom:16},x.default.ctnBody],children:[D.permType!==d.PermType.orgin?(0,w.jsx)(o.Image,{width:32,height:32,borderRadius:16,source:{uri:D.avatar||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}):(0,w.jsx)(o.View,{style:x.default.ctnIcon,children:(0,w.jsx)(p.Icon,{fill:"#fff",width:26,height:26,name:"people"})}),(0,w.jsxs)(o.View,{style:{flex:1},children:[D.permType!==d.PermType.orgin&&(0,w.jsx)(o.View,{children:(0,w.jsx)(s.default,{style:x.default.ctnName,children:J()})}),(0,w.jsx)(o.View,{children:(0,w.jsx)(s.default,{style:x.default.ctnAssignee,children:D.assignee})})]})]}),(0,w.jsx)(g.default,{value:U,onChangeText:W,label:k("RV.fillNote"),maxLength:100,multiline:!0})]}),(0,w.jsxs)(o.View,{style:x.default.ctnDes,children:[(0,w.jsx)(p.Icon,{fill:"#6F2CED",name:"alert-circle",width:16,height:16}),(0,w.jsx)(s.default,{style:x.default.textDes,children:k("RV.noteDes")})]}),(0,w.jsx)(o.View,{style:{paddingHorizontal:16},children:(0,w.jsx)(S.default,{label:k("RV.sendInvent"),onPress:X})})]})})]}),(0,w.jsx)(m.default,{isVisible:A,animationType:"fade",backdropStyle:{backgroundColor:"#000810B2"},children:(0,w.jsx)(o.View,{style:x.default.ctnModal,children:(0,w.jsxs)(o.View,{style:x.default.ctnBodyModal,children:[(0,w.jsx)(o.View,{style:{alignItems:"center",justifyContent:"center"},children:(0,w.jsx)(b.IconCancel,{width:56,height:56})}),(0,w.jsx)(s.default,{style:x.default.textTitle,children:k("RV.confirmDeletePer")}),(0,w.jsx)(s.default,{style:x.default.textDesModal,children:k("RV.comfirmDelPerDes")}),(0,w.jsxs)(o.View,{style:x.default.viewBtn,children:[(0,w.jsx)(S.default,{label:k("CM.labelCancel"),onPress:G,style:[x.default.btn,x.default.btnLeft],styleLabel:x.default.labelStyleLeft}),(0,w.jsx)(S.default,{label:k("CM.confirm"),onPress:K,style:[x.default.btn]})]})]})})})]})}},50852:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnMain:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginVertical:10,backgroundColor:"#fff",columnGap:10},ctnBody:{flexDirection:"row",alignItems:"center",columnGap:8,flex:1},ctnIcon:{width:32,height:32,borderRadius:16,backgroundColor:"#08c",alignItems:"center",justifyContent:"center"},ctnName:{flex:1,fontSize:14,color:"#00204DF2",fontFamily:i.Font.InterRegular400,justifyContent:"center",alignItems:"center"},ctnAssignee:{flex:1,fontSize:12,justifyContent:"center",alignItems:"center",color:"#00204DB2",fontFamily:i.Font.InterRegular400},ctnOwner:{backgroundColor:"#EDF2FD",padding:8,borderRadius:4},textOwner:{color:"#366AE2",fontFamily:i.Font.InterRegular400,fontSize:12,textAlign:"center"},ctnDes:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8,backgroundColor:"#F2ECFD",padding:4,borderRadius:8,marginHorizontal:16,marginBottom:16},textDes:{color:"#6F2CED",flex:1},btn:{flex:1},btnLeft:{backgroundColor:i.Color.BtnDisable},labelStyleLeft:{color:i.Color.Text},txtTitle:{fontSize:i.FontSize.FontBase,fontFamily:i.Font.InterSemiBold600,color:i.Color.Text,textAlign:"center"},txtContent:{textAlign:"center",fontFamily:i.Font.InterRegular400,color:i.Color.Text07},viewBtn:{marginTop:16,flexDirection:"row",gap:16,alignItems:"center",justifyContent:"center"},ctnModal:{alignItems:"center",justifyContent:"center",flex:1},ctnBodyModal:{backgroundColor:"#fff",width:"90%",borderRadius:8,padding:10},textTitle:{color:"#00204D",fontSize:18,fontFamily:i.Font.InterSemiBold600,paddingVertical:8,textAlign:"center"},textDesModal:{color:"#00204DE5",fontSize:12,fontFamily:i.Font.InterRegular400,textAlign:"center"}})},33904:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),u=n(87841),s=n(32207),c=n(45335),d=r(n(43184)),f=r(n(66771)),p=n(40851),y=r(n(47876)),m=n(35708),h=r(n(54813)),v=r(n(24541)),g=n(87071),S=n(91530),x=n(2884),j=n(47671);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}t.default=function(e){var t=e.toogleFunc,n=e.toogleReload,r=e.fileId,b=(0,x.useTranslation)().t,w=(0,o.useState)(""),D=(0,l.default)(w,2),C=D[0],T=D[1],I=(0,o.useState)(""),k=(0,l.default)(I,2),P=k[0],_=k[1],M=(0,o.useState)([]),F=(0,l.default)(M,2),O=F[0],E=F[1],R=(0,o.useState)(0),V=(0,l.default)(R,2),z=V[0],B=V[1],A=(0,o.useState)(0),L=(0,l.default)(A,2),N=L[0],H=L[1],U=(0,o.useState)(!1),W=(0,l.default)(U,2),$=W[0],G=W[1],Y=(0,o.useState)([]),K=(0,l.default)(Y,2),q=K[0],J=K[1],X=(0,f.default)(C,500),Q=(0,o.useState)(!1),Z=(0,l.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,o.useState)(g.typeLimit[0]),re=(0,l.default)(ne,2),ie=re[0],ae=re[1],le=(0,p.useReviewServices)();(0,o.useEffect)((function(){X?ce(0,X):J([])}),[X]);var oe,ue,se,ce=(oe=(0,a.default)((function*(e,t){try{var n={page:e,size:10},r={q:t.trim().toLowerCase(),terms:{status:0}},a=yield le.getUserInfoModel(n,r);a&&(J(0===e?a.data:[].concat((0,i.default)(q),(0,i.default)(a.data))),H(a.totalRecords))}catch(e){}finally{G(!1)}})),function(e,t){return oe.apply(this,arguments)}),de=(ue=(0,a.default)((function*(){G(!0),B(0),ce(0,X)})),function(){return ue.apply(this,arguments)}),fe=(0,o.useCallback)((function(e){E((function(t){return t.some((function(t){return t.id===e.id}))?t.filter((function(t){return t.id!==e.id})):[].concat((0,i.default)(t),[e])}))}),[]),pe=(0,o.useCallback)((function(e){E((function(t){return t.filter((function(t){return t.id!==e}))}))}),[]),ye=(0,o.useCallback)((function(e){if(m.RegexUtils.FORMAT_EMAIL.test(e)){_("");var t={id:`new-${Date.now()}`,email:e,isAdd:!0};E((function(e){return[].concat((0,i.default)(e),[t])})),T("")}else _("CM.validEmail")}),[]),me=(0,o.useCallback)((function(){C&&!q.some((function(e){return e.email===C}))&&ye(C)}),[C,ye]),he=(se=(0,a.default)((function*(){if(0!==O.length){var e=O.map((function(e){var t,n;return{assignee:e.email,assigneeId:null!=e&&null!=(t=e.id)&&t.includes("new")?null:e.resourceId,perm:ie.value,permType:null!=e&&null!=(n=e.id)&&n.includes("new")?3:2}})),i={resourceId:r};(yield le.updatePermissionOrg(i,e))&&(n(),t())}else t()})),function(){return se.apply(this,arguments)}),ve=function(){te(!ee)},ge=function(){switch(ie.value){case S.OptionPermisson.editor:return{bg:"#ef5da81a",color:"#ef5da8"};case S.OptionPermisson.reviewer:return{bg:"#f7931e1a",color:"#f7931e"};case S.OptionPermisson.viewer:return{bg:"#1382fd1a",color:"#1382fd"}}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:b("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:t}),(0,j.jsx)(c.Divider,{}),(0,j.jsxs)(u.View,{style:y.default.container,children:[(0,j.jsxs)(u.View,{style:y.default.ctnListEmailSelect,children:[(0,j.jsx)(u.View,{style:{flex:1}}),(0,j.jsx)(s.OverflowMenu,{anchor:function(){var e,t,n;return(0,j.jsxs)(u.TouchableOpacity,{style:[{backgroundColor:null==(e=ge())?void 0:e.bg},y.default.ctnOverflow],onPress:ve,children:[(0,j.jsx)(v.default,{style:{color:null==(t=ge())?void 0:t.color},children:b(ie.label)}),(0,j.jsx)(s.Icon,{name:ee?"arrow-up":"arrow-down",width:16,height:16,fill:null==(n=ge())?void 0:n.color})]})},visible:ee,onBackdropPress:ve,children:g.typeLimit.map((function(e){return(0,j.jsx)(s.MenuItem,{title:function(t){return(0,j.jsx)(v.default,Object.assign({},t,{children:b(e.label)}))},onPress:function(){return ae(e),void ve()}},e.value)}))})]}),(0,j.jsx)(h.default,{placeholder:b("RV.fillEmail"),value:C,onChangeText:T,onSubmitEditing:me,style:y.default.input,captionText:b(P),onBlur:function(e){return ye(C)}}),(0,j.jsx)(u.View,{style:y.default.chipContainer,children:(0,j.jsx)(u.FlatList,{horizontal:!0,data:O,renderItem:function(e){var t=e.item;return(0,j.jsx)(s.ListItem,{style:y.default.ctnItem,title:`${t.email}`,accessoryRight:function(){return(0,j.jsx)(u.Pressable,{onPress:function(){return pe(t.id)},children:(0,j.jsx)(s.Icon,{name:"close",width:16,height:16})})}},t.id)}})}),C.length>0&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(u.FlatList,{style:{flex:1},onRefresh:de,refreshing:$,onEndReached:function(){q.length<N&&(ce(z+1,X),B(z+1))},onEndReachedThreshold:.5,data:q,renderItem:function(e){var t=e.item;return(0,j.jsx)(s.Card,{style:y.default.card,children:(0,j.jsxs)(u.View,{style:y.default.cardContent,children:[(0,j.jsx)(u.View,{children:(0,j.jsx)(s.Text,{category:"s1",children:t.email})}),(0,j.jsx)(s.CheckBox,{checked:O.some((function(e){return e.id===t.id})),onChange:function(){return fe(t)}})]})})},keyExtractor:function(e){return e.id},ListEmptyComponent:function(){return(0,j.jsx)(s.Text,{style:y.default.noResults,children:b("CM.emptyData")})}})})]}),(0,j.jsx)(u.View,{style:y.default.ctnFooter,children:(0,j.jsx)(s.Button,{onPress:he,style:y.default.addButton,children:b("CM.confirm")})})]})}},47876:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({container:{flex:1,padding:16},input:{marginBottom:16},card:{marginBottom:8},cardContent:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},noResults:{textAlign:"center",marginTop:16},chipContainer:{marginVertical:10},chip:{margin:4},addButton:{marginTop:16,flex:1,backgroundColor:i.Color.BgPrimary},ctnFooter:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:8,paddingHorizontal:16},ctnListEmailSelect:{alignItems:"center",justifyContent:"space-between",flexDirection:"row",marginBottom:8},ctnOverflow:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingHorizontal:5,columnGap:3,paddingVertical:6,borderRadius:6},ctnItem:{borderWidth:1,borderColor:i.Color.borderColor,borderRadius:8,marginRight:8}})},6710:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(87841),u=r(n(43184)),s=n(40851),c=n(12638),d=n(21527),f=n(32207),p=r(n(4126)),y=r(n(24541)),m=n(87071),h=n(91530),v=r(n(94516)),g=r(n(77389)),S=n(2884),x=n(47671);t.default=function(e){var t=e.toogleFunc,n=e.toogleReload,r=e.fileId,j=(0,S.useTranslation)().t,b=(0,c.useAppSelector)((function(e){return e.account})).dataAccount,w=(0,d.useState)([]),D=(0,l.default)(w,2),C=D[0],T=D[1],I=(0,d.useState)([]),k=(0,l.default)(I,2),P=k[0],_=k[1],M=(0,s.useReviewServices)(),F=(0,d.useState)(!1),O=(0,l.default)(F,2),E=O[0],R=O[1],V=(0,d.useState)(m.typeLimit[0]),z=(0,l.default)(V,2),B=z[0],A=z[1],L=(0,d.useState)(new Set),N=(0,l.default)(L,2),H=N[0],U=N[1],W=(0,d.useState)(new Set),$=(0,l.default)(W,2),G=$[0],Y=$[1],K=function(){R(!E)};(0,d.useEffect)((function(){Q()}),[]);var q,J,X=function(){switch(B.value){case h.OptionPermisson.editor:return{bg:"#ef5da81a",color:"#ef5da8"};case h.OptionPermisson.reviewer:return{bg:"#f7931e1a",color:"#f7931e"};case h.OptionPermisson.viewer:return{bg:"#1382fd1a",color:"#1382fd"}}},Q=(q=(0,a.default)((function*(){var e,t=null==b||null==(e=b.orgIn)?void 0:e.split("/").slice(0,3).join("/"),n={orgIn:null!=t?t:"/1833/5390"},r=yield M.getDataOrgByOrgin(n);_(r);var i=Z(r,null);T(i)})),function(){return q.apply(this,arguments)}),Z=function e(t,n){var r=t.filter((function(e){return e.parentId===n&&!e.blocked})),a=[];return r&&r.length?(r.forEach((function(n){var r={item:n,children:[]};r.children=e(t,n.id),a=[].concat((0,i.default)(a),[r])})),a):[]},ee=function e(t,n,r){for(var i of t){if(i.children&&i.children.some((function(e){return e.item.id===n.item.id}))){i.children.every((function(e){return r.has(e.item.id)}))?r.add(i.item.id):r.delete(i.item.id),e(C,i,r);break}i.children&&e(i.children,n,r)}},te=function e(t){var n=[t.item.id];return t.children&&t.children.forEach((function(t){n=[].concat((0,i.default)(n),(0,i.default)(e(t)))})),n},ne=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=H.has(t.item.id),i=t.children&&t.children.length>0,a=G.has(t.item.id),l=function(e){if(!e.children)return!1;var t=te(e),n=t.filter((function(e){return H.has(e)}));return n.length>0&&n.length<t.length}(t);return(0,x.jsxs)(o.View,{style:{marginLeft:0===n?0:40,marginBottom:10},children:[(0,x.jsxs)(o.View,{style:p.default.nodeContainer,children:[i&&(0,x.jsx)(o.TouchableOpacity,{onPress:function(){return e=t.item.id,(n=new Set(G)).has(e)?n.delete(e):n.add(e),void Y(n);var e,n},children:(0,x.jsx)(f.Icon,{name:a?"chevron-down-outline":"chevron-right-outline",fill:"#8F9BB3",style:p.default.icon})}),(0,x.jsx)(f.CheckBox,{checked:r,indeterminate:l,onChange:function(e){return function(e,t){var n=new Set(H),r=te(e);t?r.forEach((function(e){return n.add(e)})):r.forEach((function(e){return n.delete(e)})),ee(C,e,n),U(n)}(t,e)},style:p.default.checkbox,children:t.item.name})]}),i&&a&&(0,x.jsx)(o.View,{style:{marginTop:10},children:t.children.map((function(t){return e(t,n+1)}))})]},t.item.id)},re=C.flatMap((function(e){return te(e)})),ie=(J=(0,a.default)((function*(){var e=P.filter((function(e){return Array.from(H).includes(e.id)})).map((function(e){return{assignee:e.name,assigneeId:e.id,perm:B.value,permType:1}})),i={resourceId:r};(yield M.updatePermissionOrg(i,e))&&(g.default.show({type:"success",text1:j("CM.info"),text2:j("CM.permissionUpdatedSuccessfully")}),n(),null==t||t())})),function(){return J.apply(this,arguments)});return(0,x.jsxs)(f.Layout,{style:{flex:1},children:[(0,x.jsx)(u.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:j("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:t}),(0,x.jsx)(f.Divider,{}),(0,x.jsxs)(o.View,{style:{padding:10,flex:1},children:[(0,x.jsxs)(o.View,{style:p.default.ctnCheckBox,children:[(0,x.jsx)(f.CheckBox,{checked:H.size===re.length,indeterminate:H.size>0&&H.size<re.length,onChange:function(e){var t=C.flatMap((function(e){return te(e)}));U(e?new Set(t):new Set)},children:j("CM.all")}),(0,x.jsx)(f.OverflowMenu,{anchor:function(){var e,t,n;return(0,x.jsxs)(o.TouchableOpacity,{style:[{backgroundColor:null==(e=X())?void 0:e.bg},p.default.ctnOverflow],onPress:K,children:[(0,x.jsx)(y.default,{style:{color:null==(t=X())?void 0:t.color},children:j(B.label)}),(0,x.jsx)(f.Icon,{name:E?"arrow-up":"arrow-down",width:16,height:16,fill:null==(n=X())?void 0:n.color})]})},visible:E,onBackdropPress:K,children:m.typeLimit.map((function(e){return(0,x.jsx)(f.MenuItem,{title:function(t){return(0,x.jsx)(y.default,Object.assign({},t,{children:j(e.label)}))},onPress:function(){return A(e),void K()}},e.value)}))})]}),(0,x.jsx)(o.ScrollView,{style:{},children:C.map((function(e){return ne(e)}))})]}),(0,x.jsx)(o.View,{style:{padding:16},children:(0,x.jsx)(v.default,{label:j("CM.confirm"),onPress:ie})})]})}},4126:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841);t.default=r.StyleSheet.create({container:{padding:16},nodeContainer:{flexDirection:"row",alignItems:"center"},icon:{width:24,height:24,marginRight:8},checkbox:{flex:1},ctnOverflow:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:5,columnGap:3,paddingVertical:6,borderRadius:6},ctnCheckBox:{alignItems:"center",justifyContent:"space-between",flexDirection:"row",marginBottom:16}})},91530:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PermType=t.PERMISSION=t.OptionPermisson=t.LimitPermission=void 0;t.PERMISSION=function(e){return e[e.everyone=1]="everyone",e[e.limit=2]="limit",e}({}),t.LimitPermission=function(e){return e.viewer="p_v",e.editor="p_e",e.reviewer="p_c",e}({}),t.OptionPermisson=function(e){return e.viewer="v",e.editor="e",e.reviewer="c",e.permission="r",e.delete="delete",e.owner="o",e}({}),t.PermType=function(e){return e[e.personOwner=0]="personOwner",e[e.orgin=1]="orgin",e[e.personInOrg=2]="personInOrg",e[e.personOutOrg=3]="personOutOrg",e}({})},87071:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.typeLimitPermisson=t.typeLimit=t.permissionArr=t.optionPermisson=void 0;var r=n(91530);t.permissionArr=[{label:r.PERMISSION.everyone,value:"RV.collaboration.everyone"},{label:r.PERMISSION.limit,value:"RV.collaboration.appointment"}],t.typeLimit=[{value:r.OptionPermisson.viewer,label:"RV.collaboration.viewer"},{value:r.OptionPermisson.editor,label:"RV.collaboration.editor"},{value:r.OptionPermisson.reviewer,label:"RV.collaboration.reviewer"}],t.typeLimitPermisson=[{value:r.LimitPermission.viewer,label:"RV.collaboration.viewer"},{value:r.LimitPermission.editor,label:"RV.collaboration.editor"},{value:r.LimitPermission.reviewer,label:"RV.collaboration.reviewer"}],t.optionPermisson=[{value:r.OptionPermisson.viewer,label:"RV.collaboration.viewer"},{value:r.OptionPermisson.editor,label:"RV.collaboration.editor"},{value:r.OptionPermisson.reviewer,label:"RV.collaboration.reviewer"},{value:r.OptionPermisson.permission,label:"RV.collaboration.permission"},{value:r.OptionPermisson.delete,label:"RV.collaboration.delete"}]},56677:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43693)),a=r(n(29293)),l=r(n(85715)),o=n(87841),u=r(n(43184)),s=n(32207),c=r(n(65963)),d=r(n(24541)),f=n(46317),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),y=n(87071),m=n(91530),h=r(n(43952)),v=n(40851),g=n(11671),S=r(n(76644)),x=r(n(33904)),j=r(n(6710)),b=r(n(55773)),w=r(n(73732)),D=n(2884),C=n(88e3),T=n(45335),I=n(47671);function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}t.default=function(e){var t,n=e.toogleFunc,r=e.dataDetailFile,k=(0,D.useTranslation)().t,P=(0,p.useState)(!1),_=(0,l.default)(P,2),M=_[0],F=_[1],O=(0,p.useState)(!1),E=(0,l.default)(O,2),R=E[0],V=E[1],z=(0,p.useState)(!1),B=(0,l.default)(z,2),A=B[0],L=B[1],N=(0,p.useState)(!1),H=(0,l.default)(N,2),U=H[0],W=H[1],$=(0,p.useState)(!1),G=(0,l.default)($,2),Y=G[0],K=G[1],q=(0,p.useState)({permission:m.PERMISSION.limit,limit:"v",limitPermission:m.LimitPermission.viewer,selectOption:"v",selectOptionOrg:"v"}),J=(0,l.default)(q,2),X=J[0],Q=J[1],Z=(0,p.useState)([]),ee=(0,l.default)(Z,2),te=ee[0],ne=ee[1],re=(0,p.useState)(new s.IndexPath(y.typeLimitPermisson.findIndex((function(e){return e.value===X.limitPermission})))),ie=(0,l.default)(re,2),ae=ie[0],le=ie[1],oe=(0,p.useState)([]),ue=(0,l.default)(oe,2),se=ue[0],ce=ue[1],de=(0,p.useState)([]),fe=(0,l.default)(de,2),pe=fe[0],ye=fe[1],me=(0,p.useState)(),he=(0,l.default)(me,2),ve=he[0],ge=he[1],Se=(0,v.useReviewServices)(),xe=(0,g.useTicketServices)(),je=function(){F(!M)},be=function(){W(!U)},we=function(){K(!Y)},De=function(){return L(!A)};(0,p.useEffect)((function(){Me()}),[R]),(0,p.useEffect)((function(){_e()}),[]);var Ce,Te,Ie,ke,Pe,_e=(Ce=(0,a.default)((function*(){var e={resourceId:r.fileId},t=yield xe.getDefaultPublic(e);ge(t),t&&(Q((function(e){return Object.assign({},e,{permission:m.PERMISSION.everyone,limitPermission:t.perm})})),le(new s.IndexPath(y.typeLimitPermisson.findIndex((function(e){return e.value===t.perm})))))})),function(){return Ce.apply(this,arguments)}),Me=(Te=(0,a.default)((function*(){var e={resourceId:r.fileId},t=yield Se.getResourceById(e);if(t){var n=t.filter((function(e){return e.permType!==m.PermType.orgin})).map((function(e){return e.assignee})),i=yield xe.getMultiLoginAccount(n);ye(i),ce(t)}})),function(){return Te.apply(this,arguments)}),Fe=(Ie=(0,a.default)((function*(){var e={resourceId:r.fileId};te.length>0&&(yield Se.updatePermissionOrg(e,te)),ve||X.permission!==m.PERMISSION.limit?(ve&&X.limitPermission===ve.perm||(X.permission===m.PERMISSION.limit?yield Oe():yield Ee()),n()):n()})),function(){return Ie.apply(this,arguments)}),Oe=(ke=(0,a.default)((function*(){var e={resourceId:r.fileId};yield xe.limitLink(e)})),function(){return ke.apply(this,arguments)}),Ee=(Pe=(0,a.default)((function*(){var e={resourceId:r.fileId,perm:X.limitPermission};yield xe.publicLink(e)})),function(){return Pe.apply(this,arguments)}),Re=(0,p.useCallback)((function(){if(X.permission===m.PERMISSION.limit)return k("RV.limit");if(X.permission===m.PERMISSION.everyone)switch(X.limitPermission){case m.LimitPermission.viewer:return k("RV.viewer");case m.LimitPermission.editor:return k("RV.editor");case m.LimitPermission.reviewer:return k("RV.reviewer");default:return""}}),[X]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(o.View,{style:b.default.ctnMain,children:[(0,I.jsx)(u.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:k("CM.share"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:n}),(0,I.jsx)(s.Divider,{}),(0,I.jsxs)(o.View,{style:b.default.ctnBody,children:[(0,I.jsxs)(o.View,{style:b.default.ctnGroup1,children:[(0,I.jsxs)(o.View,{style:b.default.container,children:[(0,I.jsx)(d.default,{style:b.default.title,children:k("CM.orgIn")}),(0,I.jsxs)(o.Pressable,{onPress:we,style:b.default.ctnSelect,children:[(0,I.jsx)(d.default,{children:k("CM.orgIn")}),(0,I.jsx)(s.Icon,{width:16,height:16,name:"arrow-right",fill:"#00358059"})]})]}),(0,I.jsxs)(o.View,{style:b.default.container,children:[(0,I.jsx)(d.default,{style:b.default.title,children:"Email"}),(0,I.jsxs)(o.Pressable,{onPress:be,style:b.default.ctnSelect,children:[(0,I.jsx)(d.default,{children:k("CM.emailShare")}),(0,I.jsx)(s.Icon,{width:16,height:16,name:"arrow-right",fill:"#00358059"})]})]})]}),(0,I.jsxs)(o.View,{style:b.default.ctnWrapper,children:[(0,I.jsx)(d.default,{style:b.default.title,children:k("RV.userAccess")}),(0,I.jsx)(o.View,{style:b.default.ctnGroup2,children:(0,I.jsx)(s.List,{style:{backgroundColor:"#fff"},data:se,renderItem:function(e){var t=e.item;return(0,I.jsx)(h.default,{toogleReload:function(){return V(!R)},setListDataUpdate:ne,dataUser:null==pe?void 0:pe.find((function(e){return e.email===t.assignee})),dataResource:t})}})})]}),(0,I.jsxs)(o.View,{style:b.default.ctnWrapper,children:[(0,I.jsx)(d.default,{style:b.default.title,children:k("RV.generalAccess")}),(0,I.jsxs)(o.View,{style:b.default.ctnImage,children:[X.permission===m.PERMISSION.limit?(0,I.jsx)(o.View,{style:b.default.ctnImagePer,children:(0,I.jsx)(f.Iconkey,{width:13,height:16})}):(0,I.jsx)(o.View,{style:b.default.ctnImagePer,children:(0,I.jsx)(s.Icon,{name:"globe",fill:"#39ac6c",width:20,height:20})}),(0,I.jsxs)(o.View,{style:b.default.ctnDes,children:[(0,I.jsxs)(o.View,{style:b.default.ctnDesPer,children:[(0,I.jsx)(d.default,{style:b.default.title,children:k(null==(t=y.permissionArr.find((function(e){return e.label===X.permission})))?void 0:t.value)}),(0,I.jsx)(s.OverflowMenu,{anchor:function(){return(0,I.jsx)(o.TouchableOpacity,{hitSlop:15,onPress:je,children:(0,I.jsx)(s.Icon,{name:"arrow-down",width:16,height:16,fill:"#00204DB2"})})},visible:M,onBackdropPress:je,children:y.permissionArr.map((function(e){return(0,I.jsx)(s.MenuItem,{title:k(e.value),onPress:function(){return t="permission",n=e.label,Q((function(e){return Object.assign({},e,(0,i.default)({},t,n))})),void je();var t,n}},e.value)}))})]}),(0,I.jsx)(d.default,{style:b.default.textLabel,children:Re()}),X.permission===m.PERMISSION.everyone&&(0,I.jsx)(c.default,{isi18n:!0,size:"medium",onSelect:function(e){le(e),Q((function(t){return Object.assign({},t,{limitPermission:y.typeLimitPermisson[e.row].value})}))},valueSelect:ae,listData:y.typeLimitPermisson})]})]})]})]}),(0,I.jsxs)(o.View,{style:{},children:[(0,I.jsx)(s.Divider,{}),(0,I.jsxs)(o.View,{style:b.default.ctnCopy,children:[(0,I.jsxs)(o.Pressable,{onPress:function(){w.default.setString(`${(0,C.getConfig)().BASE_URL_ECOLLABO}/negoti-doc/${r.fileId}`),De()},style:b.default.ctnPress,children:[(0,I.jsx)(s.Icon,{fill:"#366AE2",width:16,height:16,name:"link"}),(0,I.jsx)(d.default,{style:b.default.textCopy,children:k("RV.shareCopy")})]}),(0,I.jsx)(s.Button,{onPress:Fe,size:"small",children:(0,I.jsx)(d.default,{children:k("CM.confirm")})})]})]})]}),(0,I.jsx)(S.default,{isVisible:U,children:(0,I.jsx)(x.default,{fileId:r.fileId,toogleReload:function(){return V(!R)},toogleFunc:be})}),(0,I.jsx)(S.default,{isVisible:Y,children:(0,I.jsx)(j.default,{toogleReload:function(){return V(!R)},fileId:r.fileId,toogleFunc:we})}),(0,I.jsx)(T.Snackbar,{visible:A,onDismiss:De,duration:1e3,children:k("RV.copyLink")})]})}},55773:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnMain:{flex:1,backgroundColor:"#fff"},ctnBody:{flex:1},ctnGroup1:{padding:10,rowGap:8},container:{rowGap:10},title:{fontSize:14,color:"#00204DF2",fontFamily:i.Font.InterMedium500},ctnSelect:{borderWidth:.5,borderColor:"#00358059",borderRadius:8,paddingHorizontal:16,paddingVertical:10,flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnGroup2:{borderWidth:1,borderColor:"#00358026",borderRadius:8,maxHeight:300,padding:10},ctnWrapper:{rowGap:10,padding:10},ctnImage:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:16},ctnDes:{flex:1,rowGap:10},ctnImagePer:{width:32,height:32,backgroundColor:"#F2F5F8",borderRadius:16,alignItems:"center",justifyContent:"center"},ctnDesPer:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:4},textLabel:{fontSize:12,color:"#00204DB2",fontFamily:i.Font.InterRegular400},ctnCopy:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:16,marginTop:10},ctnPress:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:4},textCopy:{fontSize:14,color:"#366AE2",fontFamily:i.Font.InterRegular400}})},21758:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(14740),u=n(32207),s=n(21527),c=n(2884),d=n(46317),f=n(12638),p=r(n(43184)),y=r(n(76644)),m=r(n(46542)),h=n(7005),v=n(26878),g=n(87841),S=r(n(24541)),x=r(n(94196)),j=n(35708),b=n(60596),w=r(n(94516)),D=n(40851),C=r(n(77389)),T=n(97427),I=n(31004),k=r(n(78662)),P=r(n(64898)),_=r(n(33486)),M=r(n(27163)),F=n(47671);t.default=function(){var e,t=(0,c.useTranslation)().t,n=(0,f.useAppDispatch)(),r=(0,o.useRoute)(),O=(0,s.useRef)(null),E=null==r||null==(e=r.params)?void 0:e.dataUserTask,R=(0,o.useNavigation)(),V=(0,s.useState)(!1),z=(0,l.default)(V,2),B=z[0],A=z[1],L=(0,s.useState)(!1),N=(0,l.default)(L,2),H=N[0],U=N[1],W=(0,s.useState)(!0),$=(0,l.default)(W,2),G=$[0],Y=$[1],K=(0,s.useState)(""),q=(0,l.default)(K,2),J=q[0],X=(q[1],(0,s.useState)("")),Q=(0,l.default)(X,2),Z=(Q[0],Q[1]),ee=(0,s.useState)(!0),te=(0,l.default)(ee,2),ne=(te[0],te[1]),re=(0,s.useState)(!1),ie=(0,l.default)(re,2),ae=ie[0],le=ie[1],oe=(0,f.useAppSelector)((function(e){return e.ticket})),ue=oe.dataTicketRedux,se=oe.recipientDetaiImpl,ce=oe.formData,de=oe.modeler,fe=(0,s.useState)([]),pe=(0,l.default)(fe,2),ye=pe[0],me=pe[1],he=(0,s.useState)([]),ve=(0,l.default)(he,2),ge=ve[0],Se=ve[1],xe=(0,s.useState)(null==se?void 0:se.find((function(e){return e.userTaskId===(null==E?void 0:E._userTaskId)}))),je=(0,l.default)(xe,1)[0],be=(0,f.useAppSelector)((function(e){return e.account})).dataAccount,we=(0,f.useAppSelector)((function(e){return e.common})).accessToken,De=(0,D.useReviewServices)(),Ce=(0,I.useReviewEcontractServices)();(0,s.useEffect)((function(){Fe()}),[]);var Te,Ie,ke,Pe,_e,Me=(0,s.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:be.firstName+" "+be.lastName||"---",email:ue.createdBy||"---",avatarUrl:null==be?void 0:be.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==ue?void 0:ue.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==ue?void 0:ue.jsonXml)&&JSON.parse(null==ue?void 0:ue.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:j.DateUtils.convertDateToDDMMYYYY_H_M(null==ue?void 0:ue.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==ce?void 0:ce.formName,funcViewFrom:function(){return le(!0)}}},{key:"RV.status",type:"status",value:{status:ue.ticketStatus===b.Status.voided?b.Status.voided:(null==je?void 0:je.recipientStatus)||b.Status.processing}}]}),[ue,ce,de]),Fe=(Te=(0,a.default)((function*(){try{var e=yield De.getListFileReview(ue.id,E._userTaskId,we);if(e){Se(e);var t=yield Promise.all(e.map((function(e){return Ce.getDetailCollabora(e.eCollaboDocumentId)})));me(t.map((function(t){var n;return Object.assign({},t,{sourceSystem:null!=(n=e.find((function(e){return e.eCollaboDocumentId===t.fileId})))&&n.attrs?"Từ eRequest":t.sourceSystem})})))}}catch(e){}})),function(){return Te.apply(this,arguments)}),Oe=(Ie=(0,a.default)((function*(){var e;if(!J)return ne(!0),Z(t("CM.empty")),void(null==O||null==(e=O.current)||e.focus());Z("");var r=Object.assign({},null==je?void 0:je.recipient,{reason:J});(yield De.actionTicket(null==je?void 0:je.id,null==je?void 0:je.ticketId,null==je?void 0:je.userTaskId,r,we,"reject"))?(C.default.show({type:"success",text1:t("CM.noti"),text2:t("CM.rejectSucesss")}),n(T.ticketActions.setDataTicket(Object.assign({},ue,{ticketStatus:b.Status.rejected}))),R.goBack()):C.default.show({type:"error",text1:t("CM.noti"),text2:t("CM.rejectFailed")})})),ke=(0,a.default)((function*(){})),Pe=(0,a.default)((function*(){try{var e=yield _.default.pick({type:[_.default.types.doc,_.default.types.docx,_.default.types.xls,_.default.types.xlsx]});if(e){var t="ios"===g.Platform.OS?null==e?void 0:e[0].uri.replace("file://",""):null==e?void 0:e[0].uri,n={name:e[0].name,uri:t,type:e[0].type},r=new FormData;r.append("file",n);var a=yield Ce.uploadFiles(ue.id,E._userTaskId,r);if(a){Se((function(e){return[a].concat((0,i.default)(e))}));var l=yield Ce.getDetailCollabora(a.eCollaboDocumentId),o=Object.assign({},l,{sourceSystem:null!=a&&a.attrs?"Từ eRequest":l.sourceSystem});me([o].concat((0,i.default)(ye)))}}}catch(e){}})),function(){return Pe.apply(this,arguments)}),Ee=(_e=(0,a.default)((function*(e){var n=ge.find((function(t){return t.eCollaboDocumentId===e}));(yield Ce.deleteFile(n.id))?(C.default.show({type:"success",text1:t("CM.info"),text2:t("CM.fileDeletedSuccessfully")}),me(ye.filter((function(t){return t.fileId!==e}))),Se(ge.filter((function(t){return t.eCollaboDocumentId!==e})))):C.default.show({type:"error",text1:t("CM.info"),text2:t("CM.fileDeleteFailed")})})),function(e){return _e.apply(this,arguments)});return(0,F.jsxs)(h.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,F.jsx)(p.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:t("CL.titleHeader"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,F.jsx)(u.TopNavigationAction,{onPress:function(){return A(!0)},icon:(0,F.jsx)(d.IconWorkflow,{width:20,height:20})})}}),(0,F.jsxs)(v.KeyboardAwareScrollView,{style:{flex:1},children:[(0,F.jsx)(g.View,{style:k.default.ctnBody,children:(0,F.jsxs)(g.View,{style:k.default.ctnSubBody,children:[(0,F.jsxs)(g.Pressable,{style:k.default.ctnHeader,onPress:function(){return U(!H)},children:[(0,F.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:H?"arrow-circle-down":"arrow-circle-right"}),(0,F.jsx)(S.default,{style:k.default.textTitle,children:t("CM.infoCommon")})]}),H&&(0,F.jsx)(g.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,F.jsx)(x.default,{dataInfo:Me})})]})}),(0,F.jsx)(g.View,{style:[k.default.ctnBody,{paddingBottom:16}],children:(0,F.jsxs)(g.View,{style:k.default.ctnSubBody,children:[(0,F.jsxs)(g.Pressable,{style:k.default.ctnHeader,onPress:function(){return Y(!G)},children:[(0,F.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:G?"arrow-circle-down":"arrow-circle-right"}),(0,F.jsx)(S.default,{style:k.default.textTitle,children:t("CL.listFile")})]}),G&&"task-success"!==E._status&&!(ue.ticketStatus===b.Status.voided||ue.ticketStatus===b.Status.rejected)&&(0,F.jsxs)(g.View,{style:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",marginRight:10},children:[(0,F.jsx)(g.View,{style:{flex:1}}),(0,F.jsxs)(g.Pressable,{style:k.default.ctnUpload,onPress:Oe,children:[(0,F.jsx)(u.Icon,{fill:"#6F2CED",width:16,height:16,name:"cloud-upload"}),(0,F.jsx)(S.default,{style:k.default.textUpload,children:t("CL.addFile")})]})]}),G&&(0,F.jsx)(g.View,{style:{paddingRight:10,paddingBottom:10},children:ye&&(0,F.jsx)(u.List,{scrollEnabled:!1,data:ye,keyExtractor:function(e){return e.fileId},renderItem:function(e){var t=e.item;return(0,F.jsx)(P.default,{typeReview:"eCollabo",deleteFile:Ee,dataFlow:E,data:t})}})})]})})]}),(0,F.jsxs)(g.View,{style:k.default.ctnDes,children:[(0,F.jsx)(u.Icon,{fill:"#6F2CED",name:"alert-circle",width:16,height:16}),(0,F.jsx)(S.default,{style:k.default.styleTextDes,children:t("CL.des")})]}),(0,F.jsx)(y.default,{isVisible:B,children:(0,F.jsx)(m.default,{onClose:function(){return A(!1)}})}),(0,F.jsx)(y.default,{isVisible:ae,children:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(g.View,{style:{flex:1},children:(0,F.jsx)(M.default,{})}),(0,F.jsx)(w.default,{style:{backgroundColor:"#f2ecfd",marginHorizontal:16},styleLabel:{color:"#6d1fad"},label:t("CM.back"),onPress:function(){return le(!1)}})]})})]})}},78662:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=n(41995);t.default=r.StyleSheet.create({ctnMain:{padding:(0,a.SizeDP)(16),backgroundColor:"#F8FAFE",flex:1},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,a.SizeDP)(16),marginBottom:(0,a.SizeDP)(24)},txtTitle:{fontFamily:i.Font.InterSemiBold600,fontSize:i.FontSize.FontTiny,color:i.Color.colorText,flex:.5},txtValue:{fontFamily:i.Font.InterRegular400,fontSize:i.FontSize.FontTiny,color:"#00204DE5",flex:1},ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:i.Font.InterMedium500},redDot:{color:"#E14337"},ctnFooter:{flexDirection:"row",paddingHorizontal:16,columnGap:16,marginTop:8},ctnUpload:{borderRadius:8,paddingVertical:6,flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},textUpload:{color:"#6F2CED",fontSize:12,textDecorationLine:"underline",textDecorationColor:"#6F2CED"},ctnTextNote:{paddingHorizontal:10,paddingBottom:10,rowGap:4},ctnDes:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8,backgroundColor:"#F2ECFD",marginHorizontal:16,padding:4,borderRadius:8},styleTextDes:{color:"#6F2CED",flex:1}})},33254:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=r(n(24541)),l=n(32207),o=n(20880),u=n(2884),s=n(47671);t.default=function(e){var t=e.value,n=e.onChangeDate,r=e.label,c=e.labelStyle,d=e.status,f=void 0===d?"basic":d,p=e.isRequired,y=void 0!==p&&p,m=e.captionText,h=e.disabled,v=void 0!==h&&h,g=(0,u.useTranslation)().t;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l.Datepicker,{status:f,disabled:v,label:r?function(e){return(0,s.jsxs)(a.default,Object.assign({},e,{style:[c,{fontSize:12,fontFamily:o.Font.InterMedium500,color:"#00204DF2",marginBottom:4,lineHeight:22}],children:[r," ",y&&(0,s.jsx)(a.default,{style:{color:"#E14337"},children:"*"})]}))}:void 0,caption:m?function(e){return(0,s.jsxs)(i.View,Object.assign({},e,{style:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,marginTop:4},children:[(0,s.jsx)(l.Icon,{fill:"#E14337",width:14,height:14,name:"info"}),(0,s.jsx)(a.default,{style:{fontSize:12,fontFamily:o.Font.InterMedium500,color:"#E14337"},children:m})]}))}:void 0,renderFooter:function(){return(0,s.jsxs)(i.View,{style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsx)(l.Button,{onPress:function(){return n(null)},style:{marginHorizontal:10},children:function(e){return(0,s.jsx)(a.default,Object.assign({},e,{children:g("CM.del")}))},status:"danger",size:"small"}),(0,s.jsx)(l.Button,{onPress:function(){return n((new Date).toISOString())},style:{marginHorizontal:10},children:function(e){return(0,s.jsx)(a.default,Object.assign({},e,{children:g("CM.today")}))},status:"primary",size:"small"})]})},controlStyle:{backgroundColor:"#fff"},accessoryRight:(0,s.jsx)(l.Icon,{fill:"#00204D8C",name:"calendar-outline",width:16,height:16}),min:new Date(1900,0,0),date:t?new Date(t):null,onSelect:function(e){return n(e?e.toISOString():null)}})})}},78935:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(7005),a=r(n(43184)),l=n(14740),o=r(n(93238)),u=n(20880),s=n(2884),c=n(47671);t.default=function(){var e,t,n=(0,s.useTranslation)().t,r=(0,l.useRoute)(),d=null!=(e=null==r||null==(t=r.params)?void 0:t.iframeUrl)?e:"";return(0,c.jsxs)(i.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,c.jsx)(a.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:n("RV.contract"),contentStyle:{backgroundColor:"#fff"}}),d&&(0,c.jsx)(o.default,{startInLoadingState:!0,injectedJavaScript:u.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,domStorageEnabled:!0,javaScriptEnabled:!0,thirdPartyCookiesEnabled:!0,source:{uri:d}})]})}},77664:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(43693)),l=r(n(29293)),o=r(n(85715)),u=n(14740),s=n(32207),c=n(21527),d=n(2884),f=n(46317),p=n(12638),y=r(n(43184)),m=r(n(76644)),h=r(n(46542)),v=n(7005),g=n(26878),S=r(n(73264)),x=n(87841),j=r(n(8404)),b=r(n(24541)),w=r(n(94196)),D=n(35708),C=n(60596),T=r(n(94516)),I=n(2543),k=r(n(52275)),P=r(n(27747)),_=n(40851),M=r(n(77389)),F=n(97427),O=n(31004),E=n(99845),R=r(n(27163)),V=r(n(55529)),z=n(47671);t.default=function(){var e,t,n=(0,d.useTranslation)().t,r=(0,p.useAppDispatch)(),B=(0,u.useRoute)(),A=null==B||null==(e=B.params)?void 0:e.dataUserTask,L=(null==B||null==(t=B.params)?void 0:t.isFinish)||!1,N=(0,u.useNavigation)(),H=(0,c.useState)(!1),U=(0,o.default)(H,2),W=U[0],$=U[1],G=(0,c.useState)(!1),Y=(0,o.default)(G,2),K=Y[0],q=Y[1],J=(0,c.useState)(!1),X=(0,o.default)(J,2),Q=X[0],Z=X[1],ee=(0,c.useState)({}),te=(0,o.default)(ee,2),ne=te[0],re=te[1],ie=(0,c.useState)(!1),ae=(0,o.default)(ie,2),le=ae[0],oe=ae[1],ue=(0,c.useState)(""),se=(0,o.default)(ue,2),ce=se[0],de=se[1],fe=(0,c.useState)(""),pe=(0,o.default)(fe,2),ye=pe[0],me=pe[1],he=(0,c.useState)(!0),ve=(0,o.default)(he,2),ge=ve[0],Se=ve[1],xe=(0,c.useState)(!0),je=(0,o.default)(xe,2),be=je[0],we=je[1],De=(0,c.useState)(!1),Ce=(0,o.default)(De,2),Te=Ce[0],Ie=Ce[1],ke=(0,c.useState)(),Pe=(0,o.default)(ke,2),_e=Pe[0],Me=Pe[1],Fe=(0,c.useState)(),Oe=(0,o.default)(Fe,2),Ee=Oe[0],Re=Oe[1],Ve=(0,c.useState)([]),ze=(0,o.default)(Ve,2),Be=(ze[0],ze[1]),Ae=(0,c.useState)(),Le=(0,o.default)(Ae,2),Ne=Le[0],He=Le[1],Ue=(0,c.useState)({isRemindEnv:!1,overdueDate:new Date,remindStartDate:new Date,remindFrequency:"daily",remindContent:null}),We=(0,o.default)(Ue,2),$e=We[0],Ge=We[1],Ye=(0,c.useState)(!1),Ke=(0,o.default)(Ye,2),qe=(Ke[0],Ke[1]),Je=(0,c.useState)([]),Xe=(0,o.default)(Je,2),Qe=Xe[0],Ze=Xe[1],et=(0,c.useState)([]),tt=(0,o.default)(et,2),nt=tt[0],rt=tt[1],it=(0,c.useState)({}),at=(0,o.default)(it,2),lt=at[0],ot=at[1],ut=(0,c.useState)([]),st=(0,o.default)(ut,2),ct=(st[0],st[1]),dt=(0,c.useState)(),ft=(0,o.default)(dt,2),pt=ft[0],yt=ft[1],mt=(0,c.useState)(""),ht=(0,o.default)(mt,2),vt=ht[0],gt=ht[1],St=(0,c.useState)({isError:"ecollabo"!==A.documentResource,errorViewMessage:"ecollabo"===A.documentResource?"":"RV.econtract.title"}),xt=(0,o.default)(St,2),jt=xt[0],bt=xt[1],wt=(0,p.useAppSelector)((function(e){return e.ticket})),Dt=wt.dataTicketRedux,Ct=wt.recipientDetaiImpl,Tt=wt.formData,It=wt.modeler,kt=wt.statusPartyRaw,Pt=(0,c.useState)(null==Ct?void 0:Ct.find((function(e){return e.userTaskId===(null==A?void 0:A.userTaskId)}))),_t=(0,o.default)(Pt,1)[0],Mt=(0,p.useAppSelector)((function(e){return e.account})).dataAccount,Ft=(0,p.useAppSelector)((function(e){return e.common})).accessToken,Ot=(0,_.useReviewServices)(),Et=(0,O.useReviewEcontractServices)(),Rt=(0,c.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:Mt.firstName+" "+Mt.lastName||"---",email:Dt.createdBy||"---",avatarUrl:null==Mt?void 0:Mt.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==Dt?void 0:Dt.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==Dt?void 0:Dt.jsonXml)&&JSON.parse(null==Dt?void 0:Dt.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:D.DateUtils.convertDateToDDMMYYYY_H_M(null==Dt?void 0:Dt.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==Tt?void 0:Tt.formName,funcViewFrom:function(){Ie(!0)}}},{key:"RV.status",type:"status",value:{status:Dt.ticketStatus===C.Status.voided?C.Status.voided:(null==_t?void 0:_t.recipientStatus)||C.Status.processing}}]}),[Dt,Tt,It]);(0,c.useEffect)((function(){Gt(),Yt()}),[]);var Vt,zt,Bt,At,Lt,Nt,Ht,Ut,Wt,$t,Gt=(Vt=(0,l.default)((function*(){try{var e=yield Et.getDataFormFill({versionId:_t.versionFormId});e&&Me(e)}catch(e){}})),function(){return Vt.apply(this,arguments)}),Yt=(zt=(0,l.default)((function*(){var e=yield Et.getTicketModelerFlowStatusRaw(Dt.id);e&&yt(e)})),function(){return zt.apply(this,arguments)}),Kt=(Bt=(0,l.default)((function*(){if(!ce)return Se(!0),void me("CM.empty");me("");var e=Object.assign({},null==_t?void 0:_t.recipient,{reason:ce});(yield Ot.actionTicket(null==_t?void 0:_t.id,null==_t?void 0:_t.ticketId,null==_t?void 0:_t.userTaskId,e,Ft,"reject"))?(M.default.show({type:"success",text1:n("CM.noti"),text2:n("CM.rejectSucesss")}),r(F.ticketActions.setDataTicket(Object.assign({},Dt,{ticketStatus:C.Status.rejected}))),yield Qt(),N.goBack()):M.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.rejectFailed")})})),function(){return Bt.apply(this,arguments)}),qt=(At=(0,l.default)((function*(){return!nt.find((function(e){return!e.value.trim()&&e.required}))||(nt.filter((function(e){return!e.value.trim()&&e.required})).forEach((function(e){re((function(t){return Object.assign({},t,(0,a.default)({},e.id,"CM.empty"))}))})),!1)})),function(){return At.apply(this,arguments)}),Jt=(Lt=(0,l.default)((function*(e){try{if(!e){if(nt.find((function(e){return!e.value.trim()&&e.required})))return void nt.filter((function(e){return!e.value.trim()&&e.required})).forEach((function(e){re((function(t){return Object.assign({},t,(0,a.default)({},e.id,"CM.empty"))}))}));if(null!=_e&&_e.versionId)return void oe(!0)}q(!0);var t={id:"",refId:null,selector:"",lookup:Dt.id,attrs:{},payload:"",body:null},r=yield Et.getAllFileInNotion(Dt.id,null==A?void 0:A.userTaskId);if("ewriter"===A.documentResource){if(!an(null==Ee?void 0:Ee.template))return void M.default.show({type:"error",text1:n("CM.noti"),text2:n("RV.econtract.alert.error.otp_with_ekyc")});var i=yield en(r);t.payload=JSON.stringify(i),t.selector="flow_start_kyta_create_econtract_temp_n_determine"}if("ecollabo"===A.documentResource||"eclm"===A.documentResource||"eform"===A.documentResource){var l=Zt(r);t.payload=JSON.stringify(l),t.selector="flow_start_kyta_create_econtract_auto_determine"}var o=yield Et.createContract(t),u=rn(o);u&&(M.default.show({type:u.alertType,text1:n("CM.noti"),text2:n(`RV.${u.message}`)}),"success"===u.alertType&&(yield Xt(),N.goBack()))}catch(e){yield Qt()}finally{q(!1)}})),function(e){return Lt.apply(this,arguments)}),Xt=(Nt=(0,l.default)((function*(){vt&&null!=Mt&&Mt.orgIn&&(yield Et.confirmGenerateEnvNo(null==Mt?void 0:Mt.orgIn,vt))})),function(){return Nt.apply(this,arguments)}),Qt=(Ht=(0,l.default)((function*(){vt&&null!=Mt&&Mt.orgIn&&(yield Et.reuseGenerateEnvNo(null==Mt?void 0:Mt.orgIn,vt))})),function(){return Ht.apply(this,arguments)}),Zt=function(e){var t={refId:Dt.id,isDossier:!1,files:[],docTypeCode:null,headerFields:[],parties:null,owner:null==pt?void 0:pt.createdBy,recipientDetailsId:null==A?void 0:A.recipientDetailsId,userTaskId:null==A?void 0:A.userTaskId,ticketId:Dt.id,userTaskVersion:null,remind:$e.isRemindEnv?{expiredTime:D.DateUtils.convertDateToDDMMYYYY($e.overdueDate),remindBefore:D.DateUtils.convertDateToDDMMYYYY($e.remindStartDate),remindEvery:"daily"===$e.remindFrequency?"1":"0",remindMessage:$e.remindContent}:null},n=E.headerFieldsColla;return n.forEach((function(e){if("envSubmittedFrom"!==e.id){var t;if(nt.find((function(t){return t.id==e.id})))e.value=null==(t=nt.find((function(t){return t.id==e.id})))?void 0:t.value;"refId"===e.id&&(e.value=Dt.id)}})),t.headerFields=n.map((function(e){return{id:e.id,name:e.name,type:e.type,value:e.value}})),t.files=(0,i.default)(e.map((function(e,t){return{name:e.fileName,id:e.id,order:e.order,resource:e.resource}}))),t},en=(Ut=(0,l.default)((function*(e){var t,n,r,a,l=yield nn(),o={refId:Dt.id,templateId:Ne.templateEcontractId,customData:[],inputData:{datas:[[]]},owner:"",recipientDetailsId:null==A?void 0:A.recipientDetailsId,userTaskId:null==A?void 0:A.userTaskId,ticketId:Dt.id,userTaskVersion:null,remind:$e.isRemindEnv?{expiredTime:D.DateUtils.convertDateToDDMMYYYY($e.overdueDate),remindBefore:D.DateUtils.convertDateToDDMMYYYY($e.remindStartDate),remindEvery:"daily"===$e.remindFrequency?"1":"0",remindMessage:$e.remindContent}:null,files:(0,i.default)(e),envelopeId:vt},u=null==Ee||null==(t=Ee.lotData)?void 0:t.datas[0];if(u.forEach((function(e){var t;"envSubmittedFrom"!==e.id&&(nt.find((function(t){return t.id==e.id}))&&(e.value=null==(t=nt.find((function(t){return t.id==e.id})))?void 0:t.value),"refId"===e.id&&(e.value=Dt.id))})),l){var s=tn(l);o.customData=s}return Qe.forEach((function(e){E.listTypeUserAction.forEach((function(t){e.recipient[t].forEach((function(e){u.forEach((function(t){if(t.id===e.id)if("r"===t.type)t.value=e.name;else if("m"===t.type)t.value=e.email;else if("phone"===t.type)t.value=e.phone;else if("fca"===t.type.toLowerCase())if(l&&l.recipientId&&l.back.content&&l.back.contentContentType&&l.front.content&&l.front.contentContentType)l&&(!l.back.content||!l.back.contentContentType||!l.front.content||l.front.contentContentType);else{t.type="fca_pre";var n=JSON.parse(t.value);n.type&&"fca"===n.type.toLowerCase()&&(n.type="fca_pre"),t.value=JSON.stringify(n)}}))}))}))})),(o=Object.assign({},o,{inputData:{datas:[(0,I.cloneDeep)(u)]}})).inputData.datas[0].forEach((function(e){"dueDays"===e.id&&(e.value=null==Ee?void 0:Ee.template.dueInDays)})),o.owner=Mt.email||(null==Ee||null==(n=Ee.template)||null==(r=n.requester)||null==(a=r.contact)?void 0:a.email),o.customData.length>0?o.customData.forEach((function(e){o.inputData.datas.length>0&&(o.inputData.datas[0]=JSON.parse(JSON.stringify(o.inputData.datas[0].filter((function(t){return t.id!==e.recipientId||t.id===e.recipientId&&"fca_pre"!==t.type})))))})):o.inputData.datas[0]=JSON.parse(JSON.stringify(o.inputData.datas[0].filter((function(e){return"fca_pre"!==e.type&&"fca"!==e.type})))),o})),function(e){return Ut.apply(this,arguments)}),tn=function(e){var t=[];return Object.keys(lt).length>0&&Qe.forEach((function(n){E.listTypeUserAction.forEach((function(r){n.recipient[r].forEach((function(n){var r=lt[n.id];r.email=n.email,r.personalName=n.name,r.telephoneNumber=n.phone,e&&n.id===e.recipientId&&(r.photoBackSideIDCard&&r.photoBackSideIDCardContentType&&r.photoFrontSideIDCard&&r.photoFrontSideIDCardContentType&&(r.type="fca"),r.photoBackSideIDCard=e.back.content,r.photoBackSideIDCardContentType=e.back.contentContentType,r.photoFrontSideIDCard=e.front.content,r.photoFrontSideIDCardContentType=e.front.contentContentType,r.address=e.ekycRepository.attrs.address,r.commune=e.ekycRepository.attrs.commune,r.country=e.ekycRepository.attrs.country,r.location=e.ekycRepository.attrs.location,r.personalID=e.ekycRepository.attrs.personalID,r.provideAddress=e.ekycRepository.attrs.provideAddress,r.stateOrProvince=e.ekycRepository.attrs.stateOrProvince,r.refId=e.ekycRepository.attrs.refId,r.personalName=e.ekycRepository.attrs.personalName,r.ekycContent=e.ekycRepository.ekycContent,r.provideDate=D.DateUtils.convertDateToDDMMYYYY(e.ekycRepository.attrs.provideDate)),t.push(r)}))}))})),t},nn=(Wt=(0,l.default)((function*(){var e,t="";if(null!=kt&&kt.party&&(null==kt||null==(e=kt.party)||e.recipients.forEach((function(e){"eID"===e.role&&(t=e.id)}))),!t)return null;var n={ticketId:Dt.id,userTaskId:t},r=yield Ot.getHistoryEkycDetail(n);if(!r)return null;var i=r.ekycRepositoryId,a=yield Ot.getEkycRepoById(i),l=yield Et.getEkycRepositoryDetailIdCard(a.id,{ekycRepositoryId:i,id:a.id,recipientId:a.id});return l&&l.back&&l.front?{recipientId:a.personalId,ekycRepository:l.ekycRepository,front:{content:l.front.content,contentContentType:l.front.name},back:{content:l.back.content,contentContentType:l.back.name}}:null})),function(){return Wt.apply(this,arguments)}),rn=function(e){var t={message:"",alertType:""};return"-1"===e||-1===e||"13"===e||13===e?(t.message="econtract.alert.error.13-error",t.alertType="error"):"2"===e||2===e?(t.message="econtract.alert.error.2-ekyc",t.alertType="error"):"3"===e||3===e?(t.message="econtract.alert.error.3-error",t.alertType="error"):"4"===e||4===e?(t.message="econtract.alert.error.4-ewriter-file",t.alertType="error"):"5"===e||5===e?(t.message="econtract.alert.error.5-error",t.alertType="error"):"6"===e||6===e?(t.message="econtract.alert.error.6-no-sign-control",t.alertType="error"):"7"===e||7===e?(t.message="econtract.alert.error.7-digital-sign-amount-invalid",t.alertType="error"):"8"===e||8===e?(t.message="econtract.alert.error.8-field-role-invalid",t.alertType="error"):"9"===e||9===e?(t.message="econtract.alert.error.9-error",t.alertType="error"):"10"===e||10===e?(t.message="econtract.alert.error.10-error",t.alertType="error"):"12"===e||12===e?(t.message="econtract.alert.error.12-filename-not-found",t.alertType="error"):"14"===e||14===e?(t.message="econtract.alert.error.14-rcp-no-sign-control",t.alertType="error"):(t.message="econtract.alert.success.create",t.alertType="success"),t},an=function(e){if(e){for(var t=0;t<e.parties.length;t++)for(var n=0;n<e.parties[t].recipients.length;n++){var r=e.parties[t].recipients[n].signTypes;if(r&&r.includes("sign_fca.otp")){if(r.includes("sign_ekyc"))continue;return!1}}return!0}return!0},ln=($t=(0,l.default)((function*(){yield Qt(),N.goBack()})),function(){return $t.apply(this,arguments)});return(0,z.jsxs)(v.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,z.jsx)(y.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:n("RV.econtract.infoContract"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:ln,renderContentRight:function(){return(0,z.jsx)(s.TopNavigationAction,{onPress:function(){return $(!0)},icon:(0,z.jsx)(f.IconWorkflow,{width:20,height:20})})}}),(0,z.jsxs)(g.KeyboardAwareScrollView,{style:{flex:1},children:[(0,z.jsx)(x.View,{style:j.default.ctnBody,children:(0,z.jsxs)(x.View,{style:j.default.ctnSubBody,children:[(0,z.jsxs)(x.Pressable,{style:j.default.ctnHeader,onPress:function(){return Z(!Q)},children:[(0,z.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:Q?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(b.default,{style:j.default.textTitle,children:n("CM.infoCommon")})]}),Q&&(0,z.jsx)(x.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,z.jsx)(w.default,{dataInfo:Rt})})]})}),L?(0,z.jsx)(S.default,{envelopeId:A.envelopeId}):(0,z.jsxs)(z.Fragment,{children:[_e&&(0,z.jsx)(x.View,{style:j.default.ctnBody,children:(0,z.jsxs)(x.View,{style:[j.default.ctnSubBody],children:[(0,z.jsxs)(x.Pressable,{style:j.default.ctnHeader,onPress:function(){return we(!be)},children:[(0,z.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:be?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(b.default,{style:j.default.textTitle,children:n("RV.econtract.formNeedAction")})]}),be&&(0,z.jsxs)(x.View,{style:j.default.ctnFormName,children:[(0,z.jsxs)(b.default,{style:j.default.textTitle,children:[n("RV.econtract.fillForm")," "]}),(0,z.jsx)(x.TouchableOpacity,{onPress:(0,l.default)((function*(){oe(yield qt())})),children:(0,z.jsx)(b.default,{style:j.default.formName,children:null==_e?void 0:_e.formName})})]})]})}),(0,z.jsx)(x.View,{style:j.default.ctnBody,children:(0,z.jsx)(k.default,{error:ne,setError:re,dataEcontractFlow:A,setTemplateStructure:Re,setMergeFileList:Be,setEWriterDocInfoWriter:He,setEnvRemind:Ge,envRemind:$e,setIsDTFlow:qe,setDataPartyForm:Ze,dataPartyForm:Qe,listFormEnvData:nt,setListFormEnvData:rt,setListCaOtpRecipientForm:ot,setIsErrorView:bt,isErrorView:jt,setDocumentList:ct,setGenerateEnvelopeId:gt})}),(0,z.jsx)(x.View,{style:j.default.ctnBody,children:(0,z.jsxs)(x.View,{style:[j.default.ctnSubBody,{marginBottom:16}],children:[(0,z.jsxs)(x.Pressable,{style:j.default.ctnHeader,onPress:function(){return Se(!ge)},children:[(0,z.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:ge?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(b.default,{style:j.default.textTitle,children:n("CM.note")})]}),ge&&(0,z.jsx)(x.View,{style:j.default.ctnNote,children:(0,z.jsx)(P.default,{isRequired:!0,label:n("CM.fillNote"),value:ce,onChangeText:function(e){de(e),me("")},multiline:!0,maxLength:400,errorMessage:n(ye)})})]})})]})]}),!L&&((null==_t?void 0:_t.recipientStatus)===C.Status.processing||null===(null==_t?void 0:_t.recipientStatus))&&!jt.isError&&(0,z.jsx)(x.View,{style:j.default.ctnFooter,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.TouchableOpacity,{onPress:Kt,children:(0,z.jsx)(f.IconRejectReview,{width:36,height:36})}),(0,z.jsx)(T.default,{disabled:!(0,I.isEmpty)(ne),style:{flex:1},label:n("CM.confirm"),onPress:function(){return Jt(!1)},loading:K})]})}),(0,z.jsx)(m.default,{isVisible:W,children:(0,z.jsx)(h.default,{onClose:function(){return $(!1)}})}),(0,z.jsx)(m.default,{isVisible:le,children:(0,z.jsx)(V.default,{versionId:null==_e?void 0:_e.versionId,readOnly:!1,data:{_userTaskId:null==A?void 0:A.userTaskId,_ticketId:null==Dt?void 0:Dt.id,formId:null==_e?void 0:_e.formId},isShowNoti:!0,handleSubmit:function(){return Jt(!0)},onClose:function(){return oe(!1)},nameHeader:null==_e?void 0:_e.formName,envelopeEnvNo:vt,isJsonDataFrom:!!vt})}),(0,z.jsx)(m.default,{isVisible:Te,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.View,{style:{flex:1},children:(0,z.jsx)(R.default,{})}),(0,z.jsx)(T.default,{style:{backgroundColor:"#f2ecfd",marginHorizontal:16},styleLabel:{color:"#6d1fad"},label:n("CM.back"),onPress:function(){return Ie(!1)}})]})})]})}},31075:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ROOT_FOLDER_ID=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=r(n(43184)),u=n(20880),s=r(n(93238)),c=n(21527),d=n(32207),f=r(n(69290)),p=n(87414),y=n(84093),m=n(45335),h=n(2884),v=n(47671),g=t.ROOT_FOLDER_ID="000010000000000000";t.default=function(e){var t=e.url,n=e.toogleViewFile,r=e.isView,S=e.fileId,x=e.changeDataFile,j=e.fileName,b=(0,h.useTranslation)().t,w=(0,c.useState)(!1),D=(0,a.default)(w,2),C=D[0],T=D[1],I=(0,c.useState)(),k=(0,a.default)(I,2),P=k[0],_=k[1],M=(0,c.useState)(0),F=(0,a.default)(M,2),O=F[0],E=F[1],R=(0,c.useState)(r),V=(0,a.default)(R,2),z=V[0],B=V[1],A=(0,c.useState)(""),L=(0,a.default)(A,2),N=L[0],H=L[1],U=(0,c.useState)(!1),W=(0,a.default)(U,2),$=W[0],G=W[1],Y=function(){return G(!$)},K=(0,y.useReviewCollaboServices)(),q=function(){T(!C)};(0,c.useEffect)((function(){Q()}),[]);var J,X,Q=(J=(0,i.default)((function*(){var e=yield K.getFileById(S);e&&_(e)})),function(){return J.apply(this,arguments)}),Z=(X=(0,i.default)((function*(e){var t=Object.assign({},P,{status:e,versionId:e===p.FILE_ITEM_STATUS.DONE?null:null==P?void 0:P.versionId,fileParentId:(null==P?void 0:P.fileParentId)===g?"":null==P?void 0:P.fileParentId});(yield K.changeStatusFile(t))?(Y(),H("CL.changeStatusDone"),x((function(t){return Object.assign({},t,{status:e})})),B(e),E(O+1)):H("CL.changeStatusStop")})),function(e){return X.apply(this,arguments)}),ee=function(e){e===p.FILE_ITEM_STATUS.DONE?Z(p.FILE_ITEM_STATUS.DONE):e===p.FILE_ITEM_STATUS.STOP&&Z(p.FILE_ITEM_STATUS.STOP),q()};return(0,v.jsxs)(l.View,{style:{flex:1},children:[(0,v.jsx)(o.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:j,contentStyle:{backgroundColor:"#fff"},onPressIconLeft:n,renderContentRight:z===p.FILE_ITEM_STATUS.EDITING?function(){return(0,v.jsx)(d.TopNavigationAction,{icon:(0,v.jsx)(d.Icon,{name:"more-vertical"}),onPress:q})}:void 0}),(0,v.jsx)(d.Divider,{}),(0,v.jsx)(l.View,{style:{backgroundColor:"#fff",flex:1},children:(0,v.jsx)(s.default,{javaScriptEnabled:!0,injectedJavaScript:u.String.SCRIPT_SCALE_WEBVIEW,source:{uri:t}},O)}),(0,v.jsx)(f.default,{title:b("CL.changeStatus"),isVisible:C,onClose:q,renderContent:(0,v.jsxs)(l.View,{children:[(0,v.jsx)(d.MenuItem,{onPress:function(){return ee(p.FILE_ITEM_STATUS.DONE)},title:b("CL.done")}),(0,v.jsx)(d.MenuItem,{onPress:function(){return ee(p.FILE_ITEM_STATUS.STOP)},title:b("CL.stop")})]})}),(0,v.jsx)(m.Snackbar,{visible:$,duration:1e3,onDismiss:Y,children:b(N)})]})}},64898:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=n(87414),u=r(n(24541)),s=n(32207),c=n(46317),d=r(n(76644)),f=n(21527),p=n(31004),y=r(n(91642)),m=r(n(31075)),h=n(2884),v=r(n(56677)),g=n(12638),S=n(60596),x=n(47671);t.default=function(e){var t,n,r,j=e.data,b=e.dataFlow,w=e.deleteFile,D=e.typeReview,C=(0,h.useTranslation)().t,T=(0,f.useState)(!1),I=(0,a.default)(T,2),k=I[0],P=I[1],_=(0,f.useState)(!1),M=(0,a.default)(_,2),F=M[0],O=M[1],E=(0,f.useState)(""),R=(0,a.default)(E,2),V=R[0],z=R[1],B=(0,f.useState)(j),A=(0,a.default)(B,2),L=A[0],N=A[1],H=(0,p.useReviewEcontractServices)(),U=(0,g.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,W=function(){P(!k)},$=function(){O(!F)},G=function(e){switch(e){case o.FILE_ITEM_STATUS.DRAFT:return{backgroundColor:"rgb(255, 243, 235)",color:"rgb(252, 107, 3)"};case o.FILE_ITEM_STATUS.EDITING:return{backgroundColor:"#efeffd",color:"#5d5fef"};case o.FILE_ITEM_STATUS.DONE:return{backgroundColor:"#06a87726",color:"#39ac6d"};case o.FILE_ITEM_STATUS.SIGN:return{backgroundColor:"#ef5da81a",color:"#943cdd"};case o.FILE_ITEM_STATUS.REQUEST_EDIT:return{backgroundColor:"#f6eefc",color:"#943cdd"};case o.FILE_ITEM_STATUS.STOP:return{backgroundColor:"#fceeed",color:"#e14337"};default:return{backgroundColor:"rgb(255, 243, 235)",color:"rgb(252, 107, 3)"}}},Y=(t=(0,i.default)((function*(e){var t=yield H.getLinkIframeEcollabo(e);t&&(z(t.iframe),W())})),function(e){return t.apply(this,arguments)});return(0,x.jsxs)(l.View,{style:y.default.ctnMain,children:[(0,x.jsx)(l.View,{style:y.default.ctnLeft,children:(0,x.jsx)(c.IconDocx,{width:32,height:32})}),(0,x.jsxs)(l.View,{style:y.default.ctnRight,children:[(0,x.jsx)(l.TouchableOpacity,{onPress:function(){return Y(L.fileId)},children:(0,x.jsx)(u.default,{style:y.default.fileName,children:null==L?void 0:L.fileName})}),(0,x.jsxs)(l.View,{style:y.default.ctnBody,children:[(0,x.jsx)(u.default,{style:y.default.srcSys,children:(null==L?void 0:L.sourceSystem)||"Từ eRequest"}),(0,x.jsx)(u.default,{children:"•"}),(0,x.jsx)(u.default,{style:y.default.srcSys,children:(r=null==L?void 0:L.fileSize,r&&r>=1024?Math.floor(r/1024)+" KB":r&&r<1024?r+" MB":"---")})]}),(0,x.jsxs)(l.View,{style:y.default.ctnAction,children:[(0,x.jsx)(l.View,{style:[y.default.ctnStatus,{backgroundColor:G(null==L?void 0:L.status).backgroundColor}],children:(0,x.jsx)(u.default,{style:[{textAlign:"center",color:G(null==L?void 0:L.status).color},y.default.srcSys],children:(n=null==L?void 0:L.status,C("RV.status-collabo."+Object.keys(o.FILE_ITEM_STATUS)[n]))})}),(0,x.jsx)(l.View,{style:y.default.action})]}),U.ticketStatus!==S.Status.voided&&U.ticketStatus!==S.Status.rejected&&(0,x.jsxs)(l.View,{style:y.default.action,children:["eCollabo"===D&&"task-success"!=(null==b?void 0:b._status)&&(0,x.jsx)(l.TouchableOpacity,{hitSlop:10,onPress:$,children:(0,x.jsx)(s.Icon,{fill:"#00204DB2",width:16,height:16,name:"share-outline"})}),(0,x.jsx)(l.TouchableOpacity,{hitSlop:10,onPress:function(){return Y(L.fileId)},children:(0,x.jsx)(s.Icon,{fill:"#00204DB2",width:16,height:16,name:L.status===o.FILE_ITEM_STATUS.EDITING?"edit-2-outline":"eye-outline"})}),L.sourceSystem.includes("eRequest")&&L.status!=o.FILE_ITEM_STATUS.DONE&&(0,x.jsx)(l.TouchableOpacity,{hitSlop:10,onPress:function(){return null==w?void 0:w(L.fileId)},children:(0,x.jsx)(s.Icon,{fill:"#00204DB2",width:16,height:16,name:"trash"})})]}),(0,x.jsx)(s.Divider,{})]}),k&&(0,x.jsx)(d.default,{isVisible:k,children:(0,x.jsx)(m.default,{changeDataFile:N,isView:L.status,url:V,toogleViewFile:W,fileId:L.fileId,fileName:null==L?void 0:L.fileName})}),(0,x.jsx)(d.default,{isVisible:F,children:(0,x.jsx)(v.default,{dataDetailFile:L,toogleFunc:$})})]})}},91642:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",paddingVertical:8},ctnLeft:{width:80,alignItems:"center",justifyContent:"center"},ctnRight:{flex:1,rowGap:8},fileName:{fontSize:14,color:"#00204DF2",fontFamily:i.Font.InterRegular400},ctnBody:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:4},srcSys:{fontSize:12,color:"#00204DF2",fontFamily:i.Font.InterRegular400},ctnAction:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnStatus:{borderRadius:4,backgroundColor:"#E8F7EF",paddingHorizontal:8,paddingVertical:4},action:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",columnGap:16}})},67831:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=r(n(24541)),l=r(n(91278)),o=r(n(42467)),u=n(99845),s=n(2884),c=n(2543),d=n(47671);t.default=function(e){var t=e.party,n=e.index,r=e.error,f=e.setError,p=(0,s.useTranslation)().t,y=u.listTypeUserAction.map((function(e){return t.recipient[e]}));return(0,d.jsx)(d.Fragment,{children:!(0,c.isEmpty)(null==y?void 0:y.filter((function(e){return e.length})))&&(0,d.jsxs)(i.View,{children:[(0,d.jsx)(i.View,{style:o.default.ctnMain,children:(0,d.jsxs)(a.default,{style:o.default.text,children:[p("RV.econtract.join")," ",n]})}),(0,d.jsx)(i.View,{style:o.default.ctnRecipient,children:u.listTypeUserAction.map((function(e){var n=t.recipient[e];if(!(0,c.isEmpty)(n))return null==n?void 0:n.map((function(t,n){return(0,d.jsx)(l.default,{error:r,setError:f,recipient:t,type:e},n)}))}))})]})})}},42467:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnMain:{backgroundColor:"#F2ECFD",borderRadius:8,paddingHorizontal:12,paddingVertical:10,marginHorizontal:10},text:{color:"#6F2CED",fontSize:16,fontFamily:i.Font.InterSemiBold600},ctnRecipient:{paddingHorizontal:12,marginBottom:16}})},91278:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43693)),a=r(n(85715)),l=n(87841),o=r(n(54813)),u=r(n(24541)),s=r(n(65963)),c=n(99845),d=n(21527),f=n(32207),p=r(n(54582)),y=n(35708),m=n(2884),h=n(47671);t.default=function(e){var t=e.recipient,n=e.type,r=e.error,v=e.setError,g=(0,m.useTranslation)().t,S=(0,d.useState)(t.notifyType.map((function(e){return new f.IndexPath(c.notifyType.findIndex((function(t){return t.value===e})))}))),x=(0,a.default)(S,2),j=x[0],b=x[1],w=(0,d.useState)((0,i.default)((0,i.default)((0,i.default)({},`name_${t.id}`,!0),`email_${t.id}`,!0),`phone_${t.id}`,!1)),D=(0,a.default)(w,2),C=D[0],T=D[1];(0,d.useEffect)((function(){var e=r;0===j.length?(e[`notifyType_${t.id}`]="CM.empty",t.notifyType=[]):(delete e[`notifyType_${t.id}`],t.notifyType=j.map((function(e){return c.notifyType[e.row].value})),2===j.length?T((0,i.default)((0,i.default)((0,i.default)({},`name_${t.id}`,!0),`email_${t.id}`,!0),`phone_${t.id}`,!0)):0===j[0].row?(T((0,i.default)((0,i.default)((0,i.default)({},`name_${t.id}`,!0),`email_${t.id}`,!1),`phone_${t.id}`,!0)),t.phone?y.RegexUtils.REGEX_PHONE_NUMBER_9.test(t.phone)||v((function(e){return Object.assign({},e,(0,i.default)({},`phone_${t.id}`,"CM.validPhone"))})):v((function(e){return Object.assign({},e,(0,i.default)({},`phone_${t.id}`,"CM.empty"))}))):1===j[0].row&&(T((0,i.default)((0,i.default)((0,i.default)({},`name_${t.id}`,!0),`email_${t.id}`,!0),`phone_${t.id}`,!1)),t.email?y.RegexUtils.FORMAT_EMAIL.test(t.email)||v((function(e){return Object.assign({},e,(0,i.default)({},`email_${t.id}`,"CM.validEmail"))})):v((function(e){return Object.assign({},e,(0,i.default)({},`email_${t.id}`,"CM.empty"))})))),v((function(t){return Object.assign({},t,e)}))}),[j]);var I=function(e,n,r){t[e]=r,r.trim()?"email"!==e||y.RegexUtils.FORMAT_EMAIL.test(r)?"phone"!==e||y.RegexUtils.REGEX_PHONE_NUMBER_9.test(r)?v((function(t){var r=Object.assign({},t);return delete r[`${e}_${n}`],r})):v((function(t){return Object.assign({},t,(0,i.default)({},`${e}_${n}`,"CM.validPhone"))})):v((function(t){return Object.assign({},t,(0,i.default)({},`${e}_${n}`,"CM.validEmail"))})):v((function(t){var r=Object.assign({},t);return C[`${e}_${n}`]?r[`${e}_${n}`]="CM.empty":delete r[`${e}_${n}`],r}))};return(0,h.jsxs)(l.View,{children:[(0,h.jsx)(u.default,{style:p.default.text,children:g(`RV.econtract.${n}`)}),(0,h.jsx)(o.default,{isRequired:C[`name_${t.id}`],label:g("RV.econtract.name"),value:t.name,captionText:g(r[`name_${t.id}`]),status:r[`name_${t.id}`]?"danger":"basic",onChangeText:function(e){return I("name",t.id,e)}}),(0,h.jsx)(o.default,{isRequired:C[`email_${t.id}`],label:"Email",keyBoardType:"email-address",value:t.email,captionText:g(r[`email_${t.id}`]),status:r[`email_${t.id}`]?"danger":"basic",onChangeText:function(e){return I("email",t.id,e)}}),(0,h.jsx)(o.default,{isRequired:C[`phone_${t.id}`],label:g("RV.econtract.phone"),value:t.phone,keyBoardType:"numeric",captionText:g(r[`phone_${t.id}`]),status:r[`phone_${t.id}`]?"danger":"basic",onChangeText:function(e){return I("phone",t.id,e)}}),(0,h.jsx)(s.default,{valueSelect:j,onSelect:b,label:g("RV.econtract.notify-type"),isRequired:!0,multiple:!0,size:"medium",caption:g(r[`notifyType_${t.id}`]),status:r[`notifyType_${t.id}`]?"danger":"basic",listData:c.notifyType})]})}},54582:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({text:{fontSize:15,fontFamily:i.Font.InterMedium500,color:"#00204D",textDecorationLine:"underline",paddingVertical:6}})},99845:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.notifyType=t.listTypeUserAction=t.listRemind=t.headerFieldsColla=void 0;t.listRemind=[{label:"Nhắc hằng ngày",value:"daily"},{label:"Nhắc một lần",value:"onetime"}],t.notifyType=[{label:"Thông báo qua sms",value:"sms"},{label:"Thông báo qua email",value:"email"}],t.listTypeUserAction=["reviewer","signer","stamper"],t.headerFieldsColla=[{id:"envName",name:"Tên tài liệu",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"String",required:!0},{id:"envNo",name:"Số tài liệu",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"String",required:!1},{id:"envDate",name:"Ngày ký",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"Date",required:!1},{id:"envSubmittedFrom",name:" Được gửi từ :  ",type:"header_fields",value:"",owner:"envelope_hdr",dataType:"String",required:!1}]},52275:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43693)),a=r(n(41132)),l=r(n(29293)),o=r(n(85715)),u=n(21527),s=n(12638),c=n(31004),d=n(87841),f=r(n(54813)),p=n(32207),y=r(n(24541)),m=r(n(23599)),h=r(n(33254)),v=r(n(65963)),g=n(99845),S=r(n(27747)),x=r(n(67831)),j=n(2884),b=r(n(64898)),w=n(40851),D=r(n(77389)),C=n(47671),T=["000010eViX8cWwWn5reR","000010Nmi1KfN5azzXD4","000010ayipEI5eN61LrV","0000101JigKI6w6GvQ5G"];t.default=function(e){var t=e.dataEcontractFlow,n=e.error,r=e.setError,I=e.setTemplateStructure,k=(e.setMergeFileList,e.setEWriterDocInfoWriter),P=e.setEnvRemind,_=e.envRemind,M=e.setIsDTFlow,F=e.dataPartyForm,O=e.setDataPartyForm,E=e.listFormEnvData,R=e.setListFormEnvData,V=e.setListCaOtpRecipientForm,z=e.setIsErrorView,B=e.isErrorView,A=e.setDocumentList,L=e.setGenerateEnvelopeId,N=(0,j.useTranslation)().t,H=(0,u.useState)(!0),U=(0,o.default)(H,2),W=U[0],$=U[1],G=(0,u.useState)(!0),Y=(0,o.default)(G,2),K=Y[0],q=Y[1],J=(0,u.useState)(!1),X=(0,o.default)(J,2),Q=X[0],Z=X[1],ee=(0,u.useState)(!0),te=(0,o.default)(ee,2),ne=te[0],re=te[1],ie=(0,u.useState)(),ae=(0,o.default)(ie,2),le=(ae[0],ae[1]),oe=(0,u.useState)([]),ue=(0,o.default)(oe,2),se=ue[0],ce=ue[1],de=(0,u.useState)(),fe=(0,o.default)(de,2),pe=(fe[0],fe[1]),ye=(0,u.useState)(!1),me=(0,o.default)(ye,2),he=me[0],ve=me[1],ge=(0,s.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,Se=(0,u.useState)(new p.IndexPath(0)),xe=(0,o.default)(Se,2),je=xe[0],be=xe[1],we=(0,u.useState)(),De=(0,o.default)(we,2),Ce=De[0],Te=De[1],Ie=(0,u.useState)(),ke=(0,o.default)(Ie,2),Pe=ke[0],_e=ke[1],Me=(0,u.useState)(),Fe=(0,o.default)(Me,2),Oe=Fe[0],Ee=Fe[1],Re=[],Ve=(0,s.useAppSelector)((function(e){return e.common})).accessToken,ze=(0,s.useAppSelector)((function(e){return e.account})).dataAccount,Be=(0,c.useReviewEcontractServices)(),Ae=(0,w.useReviewServices)();(0,u.useEffect)((function(){it(),at(),lt()}),[]),(0,u.useEffect)((function(){P((function(e){return Object.assign({},e,{remindFrequency:g.listRemind[je.row].value})}))}),[je]);var Le,Ne,He,Ue,We,$e,Ge,Ye,Ke,qe,Je,Xe,Qe,Ze,et,tt,nt,rt,it=(Le=(0,l.default)((function*(){var e=yield Ae.getFormByUserTaskIdAndTicketId(ge.id,t.userTaskId);e&&(Te(e.versionFormId),_e(e))})),function(){return Le.apply(this,arguments)}),at=(Ne=(0,l.default)((function*(){var e={userTaskId:null,ticketId:ge.id,version:null},t=yield Ae.getFormVersionByTicketAndUserTaskId(e,Ve);null!=t&&t.formData&&(null==t||t.formData.forEach((function(e){"saleSupportProgram"===e.code&&Ee(e.value)})))})),function(){return Ne.apply(this,arguments)}),lt=(He=(0,l.default)((function*(){try{q(!0),null!=t&&t.userTaskId&&(ge.id,yield ot(),"ewriter"===t.documentResource?yield ut():"ecollabo"===t.documentResource?yield gt():("eclm"===t.documentResource||"eform"===t.documentResource)&&St())}catch(e){}finally{q(!1)}})),function(){return He.apply(this,arguments)}),ot=(Ue=(0,l.default)((function*(e){return yield Be.getExecutorByTicketIdAndUsertaskId(ge.id,e)})),We=(0,l.default)((function*(e){var t={userTaskId:e,ticketId:ge.id,version:null};return yield Ae.getFormVersionByTicketAndUserTaskId(t,Ve)})),$e=(0,l.default)((function*(){var e=yield Be.getAllFileInNotion(ge.id,null==t?void 0:t.userTaskId);e&&(Re=e)})),function(){return $e.apply(this,arguments)}),ut=(Ge=(0,l.default)((function*(){var e=yield vt();if(e){var t=ge.modelerId;if(t&&T.includes(t)){var n=(yield Be.getTicketForms(ge.id)).find((function(e){return!e.userTaskId}));if(n&&n.formData){var r=n.formData,i=r.find((function(e){return"contract"===e.label})),a=r.find((function(e){return"category"===e.label}));i&&a&&(yield st(e,i.value,a.value))}}else yield dt()}})),function(){return Ge.apply(this,arguments)}),st=(Ye=(0,l.default)((function*(e,t,n){if(M(!0),e.length>1)try{var r=ct(t,n),i=Re.find((function(e){return(e.fileName&&e.fileName.split(".")[0])===r}));if(i&&i.id){var a={Id:i.id},l=yield Be.getEcontractDocInfo(a);l&&l.templateEcontractId&&(yield ft(l))}else D.default.show({type:"error",text1:N("CM.noti"),text2:N("Id file không tồn tại")})}catch(e){}})),function(e,t,n){return Ye.apply(this,arguments)}),ct=function(e,t){var n=e.split(" ").join("");return"Troubleshoot"===t?`KPSC_${n}`:`BDĐK_${n}`},dt=(Ke=(0,l.default)((function*(){var e,t=(e=Re).reduce((function(e,t){return+t.order<+e.order?t:e}),e[0]);if(t&&t.id){var n={Id:t.id},r=yield Be.getEcontractDocInfo(n);r&&r.templateEcontractId&&(yield ft(r))}})),function(){return Ke.apply(this,arguments)}),ft=(qe=(0,l.default)((function*(e){k(e);var t=yield Be.getStructureOfData(e.templateEcontractId,Ve);if(t){var n,r;I(t),t.template&&pe(null==t||null==(r=t.template)?void 0:r.docTypeCode);var i=null==t||null==(n=t.lotData)?void 0:n.datas[0];R(i.filter((function(e){return"envSubmittedFrom"!==e.id&&"header_fields"===e.type}))),z({isError:!1,errorViewMessage:""}),i&&i.filter((function(e){return"header_fields"!==e.type})).length>0&&(yield pt(t))}})),function(e){return qe.apply(this,arguments)}),pt=(Je=(0,l.default)((function*(e){var t,n,r,i=[],l=null==e||null==(t=e.lotData)?void 0:t.datas[0],o=l.filter((function(e){return"p"===e.type}));(n=i).push.apply(n,(0,a.default)(o.map((function(e){return{id:e.id,recipient:{reviewer:[],signer:[],stamper:[],cecaSeal:[],cecaStamp:[]}}})))),i.map((function(t){var n=l.filter((function(e){return"r"===e.type&&e.id.includes(t.id)})),r=l.filter((function(e){return"p"===e.type&&"fptCeca"===e.value}));r&&r.length>0&&r.forEach((function(e){n.push({dataType:"String",id:e.id+"_r_001",name:"name_recipient",owner:"recipient",required:!0,type:"r",value:"fptCeca"})})),n.forEach((function(n){yt(e.template,n.id);var r=ht(e.template,n.id);if("cecaSeal"===r||"cecaStamp"===r){var a,o,u,s=mt(n.id,l,e.template);s&&(null==(a=i)||null==(o=a.find((function(e){return e.id===t.id})))||null==(u=o.recipient)||u[r].push(s))}else{var c,d,f;null==(c=i)||null==(d=c.find((function(e){return e.id===t.id})))||null==(f=d.recipient)||f[r].push(mt(n.id,l,e.template))}}))})),i=null==(r=i)?void 0:r.sort((function(t,n){var r,i,a,l,o=null==e||null==(r=e.template)||null==(i=r.parties)?void 0:i.find((function(e){return(null==e?void 0:e.id)===(null==t?void 0:t.id)})),u=null==e||null==(a=e.template)||null==(l=a.parties)?void 0:l.find((function(e){return(null==e?void 0:e.id)===(null==n?void 0:n.id)}));return"fptCeca"===(null==o?void 0:o.type)&&"fptCeca"!==(null==u?void 0:u.type)?1:"fptCeca"!==(null==o?void 0:o.type)&&"fptCeca"===(null==u?void 0:u.type)?-1:0})),O(i)})),function(e){return Je.apply(this,arguments)}),yt=function(e,t){e.parties.forEach((function(e){e.recipients.forEach((function(e){e.id===t&&e.signTypes&&e.signTypes.find((function(e){return"sign_fca.otp"===e}))&&V((function(n){return Object.assign({},n,(0,i.default)({},t,{recipientId:t,email:e.contact.email,telephoneNumber:e.contact.phone,contactId:e.contact.id,personalName:e.contact.name,location:null,stateOrProvince:null,country:null,personalID:null,passportID:null,type:"fca_pre",photoIDCard:null,photoIDCardContentType:null,photoFrontSideIDCard:null,photoFrontSideIDCardContentType:null,photoBackSideIDCard:"",photoBackSideIDCardContentType:null,statusCode:null,resourceType:null,provideAddress:null,provideDate:null,commune:null,address:null,refId:null}))}))}))}))},mt=function(e,t,n){var r=t.filter((function(t){return t.id===e})),i=e.split("_")[0]+"_"+e.split("_")[1],a=t.filter((function(e){return e.id===i&&"fptCeca"===e.value}));if(r&&r.length){var l=r.find((function(e){return"r"===e.type})),o=r.find((function(e){return"m"===e.type})),u=r.find((function(e){return"phone"===e.type})),s=r.find((function(e){return"contact_recipient"===e.type}));return{id:e,name:l?l.value:null,phone:u?u.value:null,email:o?o.value:null,contactRecipient:s?s.value:null,notifyType:["email"]}}if(a.length>0){var c=null;return n.parties.forEach((function(e){e.id===a[0].id&&e.recipients&&e.recipients.length>0&&(c={id:e.recipients[0].id,name:e.recipients[0].contact.name,phone:e.recipients[0].contact.phone,email:e.recipients[0].contact.email,contactRecipient:null,notifyType:["email"]})})),c}return null},ht=function(e,t){var n="";return e&&e.parties.forEach((function(e){e.recipients.forEach((function(e){e.id===t&&(n=e.role)}))})),n},vt=(Xe=(0,l.default)((function*(){try{return yield Be.getEWriterDocByUserTaskIdAndTicketId(null==t?void 0:t.userTaskId,ge.id)}catch(e){}})),function(){return Xe.apply(this,arguments)}),gt=(Qe=(0,l.default)((function*(){yield xt(),R(g.headerFieldsColla.filter((function(e){return"envSubmittedFrom"!==e.id})))})),function(){return Qe.apply(this,arguments)}),St=function(){R(g.headerFieldsColla.filter((function(e){return"envSubmittedFrom"!==e.id})))},xt=(Ze=(0,l.default)((function*(){var e=yield Be.getListCollaboDocs(ge.id,null==t?void 0:t.userTaskId);if(e){A(e);var n=yield Promise.all(e.map((function(e){return Be.getDetailCollabora(e.fileId)})));ce(n)}})),function(){return Ze.apply(this,arguments)}),jt=(et=(0,l.default)((function*(){try{var e=yield Be.getRecipientDetail(null==t?void 0:t.userTaskId,ge.id);e&&le(e)}catch(e){}})),function(e,t,n){R(E.map((function(t){return t.id!==e?t:Object.assign({},t,{value:n})}))),t&&(n.trim()?r((function(t){var n=Object.assign({},t);return delete n[e],n})):r((function(t){return Object.assign({},t,(0,i.default)({},e,"CM.empty"))})))}),bt=function(e,t){P((function(n){return Object.assign({},n,(0,i.default)({},e,t))})),"isRemindEnv"!==e||!1!==t?"remindContent"!==e&&r(t?function(t){var n=Object.assign({},t);return delete n[e],n}:function(t){return Object.assign({},t,(0,i.default)({},e,"CM.empty"))}):r((function(e){var t=Object.assign({},e);return delete t.overdueDate,delete t.remindStartDate,delete t.remindFrequency,delete t.remindContent,t}))},wt=(tt=(0,l.default)((function*(){try{Z(!0);var e=ze.orgIn;if(!e)return void D.default.show({type:"info",text1:N("CM.noti")});var t=yield Be.generateEnvNoNew(e,Oe);t&&"Success"===t.message&&(L(null==t?void 0:t.code),ve(!0),R(E.map((function(e){return"envNo"===e.id?Object.assign({},e,{value:null==t?void 0:t.code}):e}))),yield Dt())}catch(e){}finally{Z(!1)}})),function(){return tt.apply(this,arguments)}),Dt=(nt=(0,l.default)((function*(){var e={userTaskId:null==t?void 0:t.userTaskId,ticketId:ge.id,version:null},n=yield Ae.getFormVersionByTicketAndUserTaskId(e,Ve);if(n){var r=null==n?void 0:n.formData;yield Ct(r)}})),function(){return nt.apply(this,arguments)}),Ct=(rt=(0,l.default)((function*(e){if(e){e.forEach((function(e){var t;"eContractEnvelopEnvNo"===e.code&&(e.value=null==(t=E.find((function(e){return"envNo"===e.id})))?void 0:t.value)}));var n={formData:e,ticketId:ge.id,userTaskId:null==t?void 0:t.userTaskId,version:Ce,eformId:null==Pe?void 0:Pe.formId};yield Ae.updateFormData(n,Ve)}})),function(e){return rt.apply(this,arguments)});return K?(0,C.jsx)(d.View,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,C.jsx)(p.Spinner,{size:"large"})}):(0,C.jsx)(d.View,{style:{backgroundColor:"#fff"},children:B.isError?(0,C.jsx)(y.default,{style:m.default.textError,children:N(B.errorViewMessage)}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.View,{children:(0,C.jsxs)(d.Pressable,{style:[m.default.ctnHeader],onPress:function(){return $(!W)},children:[(0,C.jsx)(p.Icon,{fill:"#6F2CED",width:16,height:16,name:W?"arrow-circle-down":"arrow-circle-right"}),(0,C.jsxs)(y.default,{style:m.default.textTitle,children:[N("RV.econtract.infoContract")," ",(0,C.jsx)(y.default,{style:m.default.redDot,children:"*"})]})]})}),(0,C.jsxs)(d.View,{style:{paddingHorizontal:10},children:[E&&W&&E.map((function(e,t){return(0,C.jsxs)(C.Fragment,{children:["Date"!==e.dataType&&(0,C.jsx)(u.Fragment,{children:(0,C.jsx)(f.default,{disabled:"envNo"===e.id&&he,label:e.name,value:e.value,onChangeText:function(t){return jt(e.id,e.required,t)},isRequired:e.required,captionText:N(n[e.id]),status:n[e.id]?"danger":"basic",placeholder:"Nhập "+e.name.toLowerCase(),accessoryRightIcon:"envNo"!==e.id||he?Q&&"envNo"===e.id?(0,C.jsx)(p.Spinner,{size:"small"}):void 0:(0,C.jsx)(d.Pressable,{onPress:wt,children:(0,C.jsx)(y.default,{style:m.default.capSo,children:N("CM.generateEnvNo")})})})},t),"Date"===e.dataType&&(0,C.jsx)(u.Fragment,{children:(0,C.jsx)(h.default,{isRequired:e.required,label:e.name,value:e.value,captionText:N(n[e.id]),status:n[e.id]?"danger":"basic",onChangeDate:function(t){return jt(e.id,e.required,t)}})},t)]})})),W&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(p.CheckBox,{style:{paddingVertical:8},checked:_.isRemindEnv,onChange:function(e){return bt("isRemindEnv",e)},children:function(e){return(0,C.jsx)(y.default,Object.assign({},e,{children:N("RV.econtract.remind")}))}}),_.isRemindEnv&&(0,C.jsxs)(d.View,{style:{rowGap:4},children:[(0,C.jsx)(h.default,{isRequired:!0,label:N("RV.econtract.overdueDate"),value:_.overdueDate,captionText:N(n.overdueDate),status:n.overdueDate?"danger":"basic",onChangeDate:function(e){return bt("overdueDate",e)}}),(0,C.jsx)(h.default,{isRequired:!0,label:N("RV.econtract.remindStartDate"),value:_.remindStartDate,captionText:N(n.remindStartDate),status:n.remindStartDate?"danger":"basic",onChangeDate:function(e){return bt("remindStartDate",e)}}),(0,C.jsx)(v.default,{onSelect:be,valueSelect:je,placeholder:N("RV.econtract.remindFrequency"),label:N("RV.econtract.notiType"),isRequired:!0,size:"medium",listData:g.listRemind,caption:N(n.remindFrequency),status:n.remindFrequency?"danger":"primary"}),(0,C.jsxs)(d.View,{style:{paddingVertical:6,rowGap:4},children:[(0,C.jsx)(y.default,{style:m.default.textRemind,children:N("CM.remind")}),(0,C.jsx)(S.default,{isRequired:!0,label:N("CM.fillRemind"),value:_.remindContent,onChangeText:function(e){return bt("remindContent",e)},multiline:!0,maxLength:400})]})]})]})]}),(0,C.jsx)(d.View,{children:(0,C.jsxs)(d.Pressable,{style:[m.default.ctnHeader],onPress:function(){return re(!ne)},children:[(0,C.jsx)(p.Icon,{fill:"#6F2CED",width:16,height:16,name:ne?"arrow-circle-down":"arrow-circle-right"}),"ewriter"===t.documentResource?(0,C.jsxs)(y.default,{style:m.default.textTitle,children:[N("RV.econtract.listEwriter")," ",(0,C.jsx)(y.default,{style:m.default.redDot,children:"*"})]}):(0,C.jsx)(y.default,{style:m.default.textTitle,children:N("RV.econtract.listEcollabo")})]})}),ne&&(0,C.jsx)(C.Fragment,{children:"ewriter"===t.documentResource?(0,C.jsx)(C.Fragment,{children:F&&F.map((function(e,t){return(0,C.jsx)(x.default,{error:n,setError:r,party:e,index:t+1})}))}):(0,C.jsxs)(d.View,{style:{padding:10},children:[(0,C.jsx)(y.default,{children:N("RV.econtract.listEcontract")}),se&&(0,C.jsx)(p.List,{scrollEnabled:!1,data:se,renderItem:function(e){var t=e.item;return(0,C.jsx)(b.default,{typeReview:"eContract",data:t})}})]})})]})})}},87414:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FILE_ITEM_STATUS=void 0;t.FILE_ITEM_STATUS={DRAFT:0,EDITING:1,DONE:2,SIGN:3,REQUEST_EDIT:4,STOP:5}},23599:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=n(41995);t.default=r.StyleSheet.create({ctnBody:{backgroundColor:"#fff",padding:(0,a.SizeDP)(10),borderRadius:8},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,a.SizeDP)(16),marginBottom:(0,a.SizeDP)(24)},txtTitle:{fontFamily:i.Font.InterSemiBold600,fontSize:i.FontSize.FontTiny,color:i.Color.colorText,flex:.5},txtValue:{fontFamily:i.Font.InterRegular400,fontSize:i.FontSize.FontTiny,color:"#00204DE5",flex:1},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10,backgroundColor:"#FFFFFF",borderRadius:8},textTitle:{color:"#00204D",fontSize:14,fontFamily:i.Font.InterMedium500},redDot:{color:"#E14337"},textError:{fontSize:16,color:"#000",textAlign:"center",padding:16,fontFamily:i.Font.InterSemiBold600},textRemind:{fontSize:12,fontFamily:i.Font.InterMedium500,color:"#00204DF2"},capSo:{color:"#00f",fontSize:14,fontFamily:i.Font.InterMedium500}})},8404:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=n(41995);t.default=r.StyleSheet.create({ctnMain:{padding:(0,a.SizeDP)(16),backgroundColor:"#F8FAFE",flex:1},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,a.SizeDP)(16),marginBottom:(0,a.SizeDP)(24)},txtTitle:{fontFamily:i.Font.InterSemiBold600,fontSize:i.FontSize.FontTiny,color:i.Color.colorText,flex:.5},txtValue:{fontFamily:i.Font.InterRegular400,fontSize:i.FontSize.FontTiny,color:"#00204DE5",flex:1},ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:i.Font.InterMedium500},redDot:{color:"#E14337"},ctnFooter:{flexDirection:"row",paddingHorizontal:16,columnGap:16,marginTop:8},ctnNote:{paddingHorizontal:10,paddingBottom:10,rowGap:4},formName:{fontSize:14,color:"#366ae2",textDecorationLine:"underline",fontFamily:i.Font.InterRegular400},ctnFormName:{paddingHorizontal:10,paddingBottom:10,rowGap:4}})},73264:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(14740),o=n(12638),u=n(21527),s=n(87841),c=r(n(24541)),d=n(35708),f=n(20880),p=r(n(32055)),y=n(31004),m=r(n(63204)),h=n(2884),v=n(32207),g=n(47671);t.default=function(e){var t=e.envelopeId,n=(0,h.useTranslation)().t,r=(0,l.useNavigation)(),S=(0,o.useAppSelector)((function(e){return e.common})).accessToken,x=(0,u.useState)(),j=(0,a.default)(x,2),b=j[0],w=j[1],D=(0,u.useState)([]),C=(0,a.default)(D,2),T=C[0],I=C[1],k=(0,u.useState)(""),P=(0,a.default)(k,2),_=P[0],M=P[1],F=(0,u.useState)(!0),O=(0,a.default)(F,2),E=O[0],R=O[1],V=(0,y.useReviewEcontractServices)();(0,u.useEffect)((function(){B()}),[]);var z,B=(z=(0,i.default)((function*(){try{var e={id:"",refId:null,selector:"flow_processing_kyta_sabeco_view_contract",lookup:t,attrs:{},payload:JSON.stringify({envelopeId:t}),body:null},n=yield V.getEnvelopeById(e,S);if(n&&"0"===n.code){var r,i,a=null==(r=JSON.parse(null==n?void 0:n.result))?void 0:r.envelope,l=null==(i=JSON.parse(null==n?void 0:n.result))?void 0:i.webviewInfo;if(l&&M(l.iframeUrl),a){var o,u;w(a);var s=null==a||null==(o=a.header)||null==(u=o.fields)?void 0:u.filter((function(e){return"envSubmittedFrom"!==e.id}));I(s)}}}catch(e){}})),function(){return z.apply(this,arguments)}),A=function(e){var t,i,a;return"envName"===e.id?(0,g.jsx)(s.TouchableOpacity,{style:{flex:1},onPress:function(){return r.navigate(f.NavigationName.ViewFileScreenEcontract,{iframeUrl:_})},children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.default,{style:[m.default.txtValue,{color:"#4583FF",fontWeight:"bold",textDecorationLine:"underline",fontSize:f.FontSize.FontSmall}],children:null!=(i=null==e?void 0:e.value)?i:"---"}),(0,g.jsx)(c.default,{style:{fontSize:f.FontSize.FontTinier,fontStyle:"italic"},children:n("RV.econtract.clickDetail")})]})}):"Date"===e.type||"envDate"===e.id?(0,g.jsx)(c.default,{style:m.default.txtValue,children:null!=(a=d.DateUtils.convertDateToDDMMYYYY_H_M(e.value))?a:"---"}):"Boolean"===e.type?(0,g.jsx)(p.default,{onChange:function(){},checked:"true"===e.value}):(0,g.jsx)(c.default,{style:m.default.txtValue,children:null!=(t=e.value)?t:"---"})};return(0,g.jsxs)(s.View,{style:m.default.ctnMain,children:[(0,g.jsx)(s.View,{children:(0,g.jsxs)(s.Pressable,{style:[m.default.ctnHeader],onPress:function(){return R(!E)},children:[(0,g.jsx)(v.Icon,{fill:"#6F2CED",width:16,height:16,name:E?"arrow-circle-down":"arrow-circle-right"}),(0,g.jsxs)(c.default,{style:m.default.textTitle,children:[n("RV.econtract.infoContract")," ",(0,g.jsx)(c.default,{style:m.default.redDot,children:"*"})]})]})}),E&&(0,g.jsxs)(s.View,{style:m.default.ctnBody,children:[T&&T.map((function(e){return(0,g.jsxs)(s.View,{style:m.default.ctnWrapperItem,children:[(0,g.jsxs)(c.default,{style:m.default.txtTitle,children:[e.name,":"]}),(0,g.jsx)(c.default,{style:m.default.txtValue,children:A(e)})]},e.id)})),(0,g.jsxs)(s.View,{style:m.default.ctnWrapperItem,children:[(0,g.jsxs)(c.default,{style:m.default.txtTitle,children:[n("TK.status"),":"]}),(0,g.jsx)(c.default,{style:m.default.txtValue,children:n(`TK.${null==b?void 0:b.status}`)})]}),"draft"===(null==b?void 0:b.status)&&(0,g.jsx)(s.TouchableOpacity,{onPress:function(){return s.Alert.alert(n("NT.notification.inprocess_noti"))},children:(0,g.jsxs)(c.default,{style:{textAlign:"center"},children:[n("RV.econtract.click")," ",(0,g.jsx)(c.default,{style:m.default.texthere,children:n("RV.econtract.here")})," ",n("RV.econtract.footer")]})})]})]})}},63204:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnMain:{padding:(0,i.SizeDP)(16),backgroundColor:"#F8FAFE"},ctnBody:{backgroundColor:"#fff",padding:(0,i.SizeDP)(10),borderRadius:8},ctnWrapperItem:{flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:(0,i.SizeDP)(16),marginBottom:(0,i.SizeDP)(24)},txtTitle:{fontFamily:a.Font.InterSemiBold600,fontSize:i.default.FontTiny,color:a.Color.colorText,flex:.5},txtValue:{fontFamily:a.Font.InterRegular400,fontSize:i.default.FontTiny,color:"#00204DE5",flex:1},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10,backgroundColor:"#FFFFFF",borderRadius:8},textTitle:{color:"#00204D",fontSize:14,fontFamily:a.Font.InterMedium500},redDot:{color:"#E14337"},texthere:{color:"#00f",textDecorationLine:"underline"}})},33542:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(93238)),l=n(20880),o=n(21527),u=n(40851),s=n(12638),c=n(88e3),d=n(47671);t.default=function(e){var t,n,r,f=e.versionForm,p=e.userTaskId,y=e.ticketId,m=(0,o.useRef)(null),h=(0,s.useAppSelector)((function(e){return e.common})).accessToken,v=(0,u.useReviewServices)(),g=(t=(0,i.default)((function*(){var e={userTaskId:p,ticketId:y};return yield v.getFormVersionByTicketAndUserTaskId(e,h)})),function(){return t.apply(this,arguments)}),S=(n=(0,i.default)((function*(e){"e-from"===JSON.parse(e.nativeEvent.data).result&&x()})),function(e){return n.apply(this,arguments)}),x=(r=(0,i.default)((function*(){var e=yield g();if(e){var t=null==e?void 0:e.formData,n=`window.postMessage('${JSON.stringify({type:"postFormEdit",isReadonly:!0,data:t}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;setTimeout((function(){var e;null==m||null==(e=m.current)||e.injectJavaScript(n)}),800)}})),function(){return r.apply(this,arguments)});return(0,d.jsx)(a.default,{style:{height:500},startInLoadingState:!0,scrollEnabled:!0,nestedScrollEnabled:!0,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,injectedJavaScript:l.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,ref:m,onMessage:S,source:{uri:(0,c.getConfig)().BASE_URL_FORM+f}})}},23392:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=n(40851),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),s=r(n(84148)),c=n(32207),d=r(n(24541)),f=n(20880),p=n(35708),y=r(n(83032)),m=r(n(41778)),h=n(2884),v=n(47671);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}t.default=function(e){var t=e.userTaskId,n=e.ticketId,r=(0,h.useTranslation)().t,p=(0,u.useState)(!1),y=(0,a.default)(p,2),m=y[0],g=y[1],j=(0,u.useState)(!1),b=(0,a.default)(j,2),w=b[0],D=b[1],C=(0,u.useState)(!0),T=(0,a.default)(C,2),I=T[0],k=T[1],P=(0,u.useState)(!0),_=(0,a.default)(P,2),M=_[0],F=_[1],O=(0,u.useState)([]),E=(0,a.default)(O,2),R=E[0],V=E[1],z=(0,u.useState)([]),B=(0,a.default)(z,2),A=B[0],L=B[1],N=(0,u.useState)([]),H=(0,a.default)(N,2),U=H[0],W=H[1],$=(0,u.useState)([]),G=(0,a.default)($,2),Y=G[0],K=G[1],q=(0,u.useState)([]),J=(0,a.default)(q,2),X=J[0],Q=J[1],Z=(0,u.useState)(),ee=(0,a.default)(Z,2),te=ee[0],ne=ee[1],re=(0,u.useState)(""),ie=(0,a.default)(re,2),ae=ie[0],le=ie[1],oe=(0,u.useState)(""),ue=(0,a.default)(oe,2),se=ue[0],ce=ue[1],de=(0,u.useState)(""),fe=(0,a.default)(de,2),pe=fe[0],ye=fe[1],me=(0,u.useState)(!1),he=(0,a.default)(me,2),ve=he[0],ge=he[1],Se=(0,u.useState)(!1),xe=(0,a.default)(Se,2),je=xe[0],be=xe[1],we=(0,o.useReviewServices)();(0,u.useEffect)((function(){Me()}),[]),(0,u.useEffect)((function(){ae&&te&&X.length>0&&Ie(ae)}),[ae,te,X]),(0,u.useEffect)((function(){se&&te&&X.length>0&&ke(se)}),[se,te,X]);var De,Ce,Te,Ie=(De=(0,i.default)((function*(e){try{g(!0);var t=yield Promise.all(X.filter((function(t){return t.includes(e)})).filter((function(e){return e.includes("backSide")||e.includes("frontSide")||e.includes("passport")})).map((function(e){return we.getDataEkycByType(Object.assign({},te,{order:e.split("_")[2],type:e.split("_")[0]+"_"+e.split("_")[1]}))})));t&&L(t)}catch(e){console.log("Error get data id card by trans id",e)}finally{g(!1)}})),function(e){return De.apply(this,arguments)}),ke=(Ce=(0,i.default)((function*(e){try{D(!0);var t=yield Promise.all(X.filter((function(t){return null==t?void 0:t.includes(e)})).filter((function(e){return!e.includes("backSide")&&!e.includes("frontSide")&&!e.includes("passport")})).map((function(e){return we.getDataEkycByType(Object.assign({},te,{order:e.split("_")[2],type:e.split("_")[0]+"_"+e.split("_")[1]}))})));t&&V(t)}catch(e){console.log("Error get data ekyc by trans id",e)}finally{D(!1)}})),function(e){return Ce.apply(this,arguments)}),Pe=function(){ge(!ve)},_e=function(){be(!je)},Me=(Te=(0,i.default)((function*(){try{var e={userTaskId:t,tickerId:n},i=yield we.getHistoryEkycDetail(e);if(i){ye(i.ekycRepositoryId);var a=yield we.getEkycRepoById(i.ekycRepositoryId);if(a){var o={ekycRepositoryId:i.ekycRepositoryId,id:a.resourceId,recipientId:a.personalId};ne(o);var u=yield we.getAllTypesOfEkyc(o);if(u){Q(u);var s=u.filter((function(e){return e.includes("backSide")||e.includes("frontSide")||e.includes("passport")})).map((function(e){return e.split("_")[1]})).sort((function(e,t){return e-t})),c=Array.from(new Set(s)).sort((function(e,t){return t.localeCompare(e)}));W(c),le(c[0]);var d=u.filter((function(e){return!e.includes("backSide")&&!e.includes("frontSide")&&!e.includes("passport")})).map((function(e){return e.split("_")[1]})).sort((function(e,t){return e-t})),f=Array.from(new Set(d)).sort((function(e,t){return t.localeCompare(e)}));K(f),ce(f[0])}}else l.Alert.alert(r("CM.noti"),r("RV.eid.no-ekyc"))}}catch(e){}})),function(){return Te.apply(this,arguments)}),Fe=function(e){return A.find((function(t){return null==t?void 0:t[0].type.includes(e)}))};return(0,v.jsxs)(l.View,{children:[(0,v.jsx)(l.View,{style:s.default.ctnBody,children:(0,v.jsxs)(l.View,{style:s.default.ctnSubBody,children:[(0,v.jsxs)(l.View,{style:s.default.ctnOpen,children:[(0,v.jsxs)(l.Pressable,{style:s.default.ctnHeader,onPress:function(){return k(!I)},children:[(0,v.jsx)(c.Icon,{fill:"#6F2CED",width:16,height:16,name:I?"arrow-circle-down":"arrow-circle-right"}),(0,v.jsx)(d.default,{style:s.default.textTitle,children:r("RV.eid.imageId")})]}),(0,v.jsx)(l.View,{style:{},children:(0,v.jsx)(c.OverflowMenu,{anchor:function(){return(0,v.jsx)(l.TouchableOpacity,{onPress:Pe,children:(0,v.jsx)(c.Icon,{width:20,height:20,name:"more-vertical"})})},visible:ve,onBackdropPress:Pe,children:U.map((function(e,t){return(0,v.jsx)(c.MenuItem,{title:r("CM.step")+" "+(U.length-t),accessoryRight:e===ae?(0,v.jsx)(c.Icon,{fill:f.Color.BgPrimary,name:"checkmark-outline"}):void 0,onPress:function(){le(e),Pe()}},e)}))})})]}),I&&(0,v.jsx)(v.Fragment,{children:m?(0,v.jsx)(l.View,{style:s.default.ctnLoading,children:(0,v.jsx)(c.Spinner,{})}):(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(l.View,{style:{paddingHorizontal:10,paddingBottom:10},children:[Fe("frontSide")&&(0,v.jsx)(S,{data:Fe("frontSide"),title:r("RV.eid.frontSide")}),Fe("backSide")&&(0,v.jsx)(S,{data:Fe("backSide"),title:r("RV.eid.backSide")}),Fe("passport")&&(0,v.jsx)(S,{data:Fe("passport"),title:r("RV.eid.passport")})]})})})]})}),(0,v.jsx)(l.View,{style:s.default.ctnBody,children:(0,v.jsxs)(l.View,{style:s.default.ctnSubBody,children:[(0,v.jsxs)(l.View,{style:s.default.ctnOpen,children:[(0,v.jsxs)(l.Pressable,{style:s.default.ctnHeader,onPress:function(){return F(!M)},children:[(0,v.jsx)(c.Icon,{fill:"#6F2CED",width:16,height:16,name:M?"arrow-circle-down":"arrow-circle-right"}),(0,v.jsx)(d.default,{style:s.default.textTitle,children:r("RV.eid.ekycInfo")})]}),(0,v.jsx)(c.OverflowMenu,{anchor:function(){return(0,v.jsx)(l.TouchableOpacity,{onPress:_e,children:(0,v.jsx)(c.Icon,{width:20,height:20,name:"more-vertical"})})},visible:je,onBackdropPress:_e,children:Y.map((function(e,t){return(0,v.jsx)(c.MenuItem,{title:r("CM.step")+" "+(Y.length-t),accessoryRight:e===se?(0,v.jsx)(c.Icon,{fill:f.Color.BgPrimary,name:"checkmark-outline"}):void 0,onPress:function(){ce(e),_e()}},e)}))})]}),M&&(0,v.jsx)(v.Fragment,{children:w?(0,v.jsx)(l.View,{style:s.default.ctnLoading,children:(0,v.jsx)(c.Spinner,{})}):(0,v.jsx)(l.View,{style:{paddingHorizontal:10,paddingBottom:10},children:pe&&se&&(0,v.jsx)(x,{uriVideo:R.filter((function(e){return null==e?void 0:e[0].type.includes("videoEkyc")})).sort((function(e,t){return e[0].order-t[0].order})).map((function(e){return e[0].content})),listData:R.filter((function(e){return!(null!=e&&e[0].type.includes("videoEkyc"))})),ekycRepoId:pe,selectEkycTime:se})})})]})})]})};var S=function(e){var t=e.title,n=e.data,r=(0,h.useTranslation)().t;return(0,v.jsxs)(l.View,{style:s.default.ctnIdCard,children:[(0,v.jsx)(d.default,{style:s.default.textTitleImage,children:t}),(0,v.jsxs)(d.default,{children:[r("RV.eid.uploadTime")," ",p.DateUtils.convertDateToDDMMYYYY_H_M(null==n?void 0:n[0].createdDate)]}),(0,v.jsxs)(l.View,{style:s.default.ctnViewImage,children:[(0,v.jsx)(l.View,{style:{borderRadius:6,overflow:"hidden"},children:(0,v.jsx)(l.Image,{style:{minHeight:100},resizeMode:"contain",source:{uri:f.String.PREFIX_IMG_BASE64+(null==n?void 0:n[0].content)}})}),(0,v.jsx)(d.default,{style:s.default.textImage,children:null==n?void 0:n[0].name})]})]})},x=function(e){var t=e.listData,n=e.uriVideo,r=(e.ekycRepoId,e.selectEkycTime,(0,h.useTranslation)().t),o=(0,u.useState)(null),p=(0,a.default)(o,2),g=p[0],S=p[1],x=(0,u.useState)(!1),j=(0,a.default)(x,2),b=j[0],w=j[1];return(0,u.useEffect)((function(){function e(){return(e=(0,i.default)((function*(){if(n.length>0)try{var e=`temp_video_${Date.now()}.mp4`,t=`${m.default.DocumentDirectoryPath}/${e}`;for(var r of n)yield m.default.appendFile(t,r,"base64");S(`file://${t}`)}catch(e){console.error("Error creating video file:",e)}}))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){try{if(g){var e=g.replace("file://","");m.default.unlink(e).then((function(){return console.log("Temporary file deleted")})).catch((function(e){return console.error("Error deleting temporary file:",e)}))}}catch(e){}}}),[n]),(0,v.jsxs)(l.View,{children:[(0,v.jsx)(d.default,{style:[s.default.textTitleImage,{marginBottom:4}],children:r("RV.eid.videoEkyc")}),(0,v.jsx)(l.View,{style:s.default.ctnVideo,children:g&&(0,v.jsx)(v.Fragment,{children:b?(0,v.jsx)(c.Icon,{width:50,height:50,name:"alert-triangle-outline"}):(0,v.jsx)(y.default,{style:s.default.video,controls:!0,resizeMode:"contain",onError:function(e){console.log(e),w(!0)},source:{uri:g}})})}),(0,v.jsx)(d.default,{style:[s.default.textTitleImage,{marginBottom:4}],children:r("RV.eid.imageEkyc")}),(0,v.jsx)(l.FlatList,{horizontal:!0,contentContainerStyle:{gap:10},data:t,renderItem:function(e){var t=e.item;return(0,v.jsx)(l.Image,{width:85,height:85,source:{uri:f.String.PREFIX_IMG_BASE64+(null==t?void 0:t[0].content)}})}})]})}},84148:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:i.Font.InterMedium500},redDot:{color:"#E14337"},ctnViewImage:{borderWidth:.54,borderColor:"#00358059",borderStyle:"dashed",padding:10,borderRadius:6,rowGap:8},textImage:{fontSize:8,color:"#00204D",fontFamily:i.Font.InterSemiBold600,textAlign:"center"},textKb:{fontSize:7,color:"#00204DB2",fontFamily:i.Font.InterRegular400,textAlign:"center"},textTitleImage:{fontSize:14,color:"#00204D",fontFamily:i.Font.InterSemiBold600},ctnOpen:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnLoading:{alignItems:"center",justifyContent:"center",paddingBottom:10},ctnIdCard:{rowGap:6,marginBottom:6},ctnVideo:{marginBottom:10,width:"100%",height:200},video:{height:200,flex:1}})},46542:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(87841),u=r(n(24541)),s=n(2884),c=r(n(71606)),d=r(n(43184)),f=n(32207),p=n(46317),y=n(12638),m=n(60596),h=n(11671),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),g=n(20880),S=n(35708),x=r(n(94196)),j=n(47671);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}t.default=function(e){var t=e.onClose,n=(0,s.useTranslation)().t,r=(0,v.useState)([]),b=(0,l.default)(r,2),w=(b[0],b[1]),D=(0,v.useState)(!1),C=(0,l.default)(D,2),T=C[0],I=C[1],k=(0,v.useState)({}),P=(0,l.default)(k,2),_=P[0],M=P[1],F=(0,v.useState)([]),O=(0,l.default)(F,2),E=(O[0],O[1]),R=(0,v.useState)([]),V=(0,l.default)(R,2),z=V[0],B=V[1],A=(0,v.useState)(!1),L=(0,l.default)(A,2),N=L[0],H=L[1],U=(0,v.useState)({}),W=(0,l.default)(U,2),$=W[0],G=W[1],Y=(0,y.useAppSelector)((function(e){return e.ticket})),K=Y.dataListRecipientsSLA,q=Y.dataTicketRedux,J=Y.recipientDetaiImpl,X=(0,y.useAppSelector)((function(e){return e.common})).accessToken,Q=(0,y.useAppSelector)((function(e){return e.account})).dataAccount,Z=(0,h.useTicketServices)(),ee=function(){return H(!N)};(0,v.useEffect)((function(){ie()}),[]);var te,ne,re,ie=(te=(0,a.default)((function*(){var e=null==K?void 0:K.filter((function(e,t,n){return t===n.findIndex((function(t){return t.recipientId===e.recipientId}))})),t=null==e?void 0:e.map((function(e){return{notionName:e.notionName?e.notionName:"User task",recipientId:e.recipientId,status:e.status,startDate:e.startDate,finishDate:e.finishDate,role:e.role,delayTime:e.delayTime,estimateDate:e.estimateDate,totalTime:e.totalTime,statusSla:se(e),totalTimeExpect:e.totalTimeExpect}})),n=yield oe();if(n){var r=J.map((function(e){var t=n.find((function(t){return t.email===e.recipient.contact.email}));return t?Object.assign({},e,{avatar:t.imageUrl,firstName:t.firstName,lastName:t.lastName,personalName:t.personalName}):e}));t=t.map((function(e){var t=r.filter((function(t){return t.userTaskId===e.recipientId&&t.recipientStatus}))[0],n=r.filter((function(t){return t.userTaskId===e.recipientId&&"active"===t.status}));return Object.assign({},e,{executor:t,executorList:n})})),B(t)}var i=yield ue();i&&t.forEach((function(e){G((function(t){var n=Object.assign({},t);return n[null==e?void 0:e.recipientId]=ae(null==e?void 0:e.executorList,e.recipientId,i),n}))}))})),function(){return te.apply(this,arguments)}),ae=function(e,t,n){var r=J.some((function(e){return e.recipient.contact.email===Q.email&&e.userTaskId===t})),i=e.some((function(e){return e.recipient.contact.email===Q.email}));return!(n.some((function(e){return e.personal.email===Q.email&&(e.userTaskId===t||!e.userTaskId)}))||r||i)},le=function(e){return"eID"===e?n("RV.notionName.eID"):"eContract"===e?n("RV.notionName.eContract"):e||n("RV.notionName.userTask")},oe=(ne=(0,a.default)((function*(){try{var e=J.map((function(e){return e.recipient.contact.email}));if(e){var t=yield Z.getMultiLoginAccount(Array.from(new Set(e)),X);if(t)return w(t),t}}catch(e){}})),function(){return ne.apply(this,arguments)}),ue=(re=(0,a.default)((function*(){var e=J.map((function(e){return e.userTaskId})),t={resourceId:q.id,email:Q.email||"",userTaskIds:(0,i.default)(new Set(e)),orgIn:Q.orgIn||""},n=yield Z.getAclTicketByListUserTask(t);if(n)return E(n),n})),function(){return re.apply(this,arguments)}),se=function(e){var t,n;return q.ticketStatus===m.Status.voided&&e.status==m.Status.processing?"stopped":q.ticketStatus===m.Status.rejected?"rejected":(e.finishDate&&e.estimateDate&&(t=new Date(e.finishDate),n=new Date(e.estimateDate)),"accepted"==e.status&&e.delayTime?"done_late":"accepted"==e.status&&e.estimateDate?"done_onTime":"accepted"==e.status&&e.finishDate&&e.estimateDate&&t<n?"done_before":e.status)},ce=function(){var e,t,n,r,i,a;if(null!=_&&_.executor)return{key:"RV.userAction",type:"avatar",value:{name:(null==(e=_.executor)?void 0:e.personalName)||"---",email:(null==(t=_.executor)||null==(n=t.recipient)||null==(r=n.contact)?void 0:r.email)||"---",avatarUrl:null==(i=_.executor)?void 0:i.avatar}};if(_.executorList){var l;if((null==_||null==(l=_.executorList)?void 0:l.length)>1)return{key:"RV.userAction",type:"normal",value:{onlyIcon:(a=null==_?void 0:_.executorList,(0,j.jsx)(o.Pressable,{style:c.default.ctnListUser,children:null==a?void 0:a.map((function(e,t){return(0,j.jsx)(j.Fragment,{children:t<=1?(0,j.jsx)(o.Image,{style:{position:"absolute",left:20*t},width:28,height:28,borderRadius:14,source:{uri:(null==e?void 0:e.avatar)||g.String.DEFAULT_IMAGE}},t):(0,j.jsx)(o.View,{style:c.default.ctnAdd,children:(0,j.jsx)(u.default,{children:"+"+((null==a?void 0:a.length)-2)})},t)})}))}))}};var s,d,f=null==_?void 0:_.executorList[0];return{key:"RV.userAction",type:"avatar",value:{name:(null==f?void 0:f.personalName)||"---",email:(null==f||null==(s=f.recipient)||null==(d=s.contact)?void 0:d.email)||"---",avatarUrl:null==f?void 0:f.avatar}}}},de=(0,v.useMemo)((function(){return[ce(),{key:"HM.statusTicket",type:"status",value:{status:null==_?void 0:_.statusSla}},{key:"RV.startDate",type:"normal",value:{name:S.DateUtils.convertDateToDDMMYYYY_H_M(null==_?void 0:_.startDate)}},{key:"RV.totalTimeExpect",type:"normal",value:{name:null==_?void 0:_.totalTimeExpect}},{key:"RV.estimateDate",type:"normal",value:{name:S.DateUtils.convertDateToDDMMYYYY_H_M(null==_?void 0:_.estimateDate)}},{key:"RV.finishDate",type:"normal",value:{name:S.DateUtils.convertDateToDDMMYYYY_H_M(null==_?void 0:_.finishDate)}}]}),[_]),fe=function(e){return e===m.Status.rejected?{fill:"#e14437",icon:"close-circle",bgColor:"#fdeded",borderColor:"#e14437"}:e===m.Status.processing?{fill:"#FC6B03",icon:"alert-triangle",bgColor:"#FFF3EB",borderColor:"#e14437"}:{fill:"#39AC6D",icon:"checkmark-circle-2",bgColor:"#E8F7EF",borderColor:"#fff"}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:n("RV.listStep"),contentStyle:{backgroundColor:"#fff"},onPressIconLeft:t}),(0,j.jsx)(o.FlatList,{style:{backgroundColor:"#F8FAFE"},data:z,renderItem:function(e){var t,r,i=e.item,a=e.index;return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(o.View,{style:c.default.ctnItem,children:[(0,j.jsxs)(o.View,{style:c.default.ctnIcon,children:[(0,j.jsx)(f.Icon,{fill:fe(i.status).fill,name:fe(i.status).icon,width:24,height:24}),(0,j.jsx)(o.View,{style:[c.default.tabHoz,K.length-1===a&&{backgroundColor:"#F8FAFE"}]})]}),(0,j.jsxs)(o.View,{style:{flex:1},children:[(0,j.jsxs)(o.View,{style:[c.default.ctnBody,{borderColor:fe(i.status).borderColor,opacity:$[i.recipientId]?.5:1}],children:[(0,j.jsx)(u.default,{style:c.default.textNotion,children:le(i.notionName)}),$[i.recipientId]&&(0,j.jsx)(u.default,{style:c.default.textNote,children:n("RV.author")}),(0,j.jsxs)(o.View,{style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,j.jsxs)(o.View,{style:c.default.ctnEmail,children:[i.executor&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(f.Avatar,{size:"small",source:{uri:(null==(t=i.executor)?void 0:t.avatar)||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,j.jsx)(u.default,{style:c.default.textEmail,children:null==(r=i.executor)?void 0:r.recipient.contact.email})]}),!i.executor&&i.executorList&&(0,j.jsxs)(o.Pressable,{onPress:function(){ee(),M(i)},style:{position:"relative",flexDirection:"row",alignItems:"center"},children:[i.executorList.map((function(e,t){return(0,j.jsx)(j.Fragment,{children:t<=1&&(0,j.jsx)(f.Avatar,{style:{position:"absolute",left:20*t},size:"small",source:{uri:(null==e?void 0:e.avatar)||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}},t)})})),i.executorList.length>2&&(0,j.jsx)(o.View,{style:c.default.ctnMoreAvatar,children:(0,j.jsx)(u.default,{children:"+"+(i.executorList.length-2)})})]})]}),(0,j.jsx)(o.TouchableOpacity,{onPress:function(){$[i.recipientId]||(M(i),I(!0))},style:[c.default.ctnIconClick,{backgroundColor:fe(i.status).bgColor}],children:i.status!==m.Status.processing?(0,j.jsx)(p.IconPersonTime,{width:15,height:15}):(0,j.jsx)(p.IconPersonTimeWait,{width:15,height:15})})]})]}),i.status===m.Status.processing&&(0,j.jsx)(u.default,{style:c.default.textNote,children:n("RV.descriptionProcessing")})]})]})})}}),(0,j.jsx)(f.Modal,{animationType:"fade",backdropStyle:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onBackdropPress:function(){return I(!1)},visible:T,style:{width:"90%"},children:(0,j.jsx)(f.Card,{style:{},header:(0,j.jsx)(u.default,{style:c.default.txtTitle,children:le(null==_?void 0:_.notionName)}),disabled:!0,children:(0,j.jsx)(x.default,{dataInfo:de})})}),(0,j.jsx)(f.Modal,{animationType:"fade",backdropStyle:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onBackdropPress:ee,visible:N,style:{width:"90%"},children:(0,j.jsx)(f.Card,{style:{},header:(0,j.jsx)(u.default,{style:c.default.txtTitle,children:"List user"}),disabled:!0,children:(0,j.jsx)(o.FlatList,{data:_.executorList,renderItem:function(e){var t,n,r=e.item;return(0,j.jsxs)(o.View,{style:c.default.ctnView,children:[(0,j.jsx)(o.Image,{width:24,height:24,borderRadius:12,source:{uri:r.avatar||g.String.DEFAULT_IMAGE}}),(0,j.jsx)(o.View,{style:{flex:1},children:(0,j.jsx)(u.default,{style:c.default.txtValue,children:(null==r||null==(t=r.recipient)||null==(n=t.contact)?void 0:n.email)||"---"})})]})}})})})]})}},71606:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({tabHoz:{width:2,height:40,backgroundColor:"rgba(0, 53, 128, 0.15)"},ctnItem:{paddingHorizontal:16,paddingVertical:8,flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:16},ctnAction:{width:24,height:24,backgroundColor:"blue",borderRadius:12,justifyContent:"center",alignItems:"center"},ctnIcon:{alignItems:"center",justifyContent:"center",rowGap:8},ctnBody:{backgroundColor:"#fff",paddingHorizontal:12,paddingVertical:10,flex:1,borderRadius:8,rowGap:10,borderWidth:1},textNotion:{fontSize:13,fontFamily:i.Font.InterSemiBold600,color:"#00204D"},textNote:{fontSize:11,fontFamily:i.Font.InterRegular400,color:"#E14337",marginTop:3,fontStyle:"italic"},ctnIconClick:{width:24,height:24,borderRadius:12,alignItems:"center",justifyContent:"center"},textEmail:{fontSize:12,fontFamily:i.Font.InterRegular400,color:"#00204DF2"},ctnEmail:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:4},ctnListUser:{flexDirection:"row",position:"relative"},ctnAdd:{position:"absolute",left:40,width:28,height:28,borderRadius:14,backgroundColor:"#F4F4F4",justifyContent:"center",alignItems:"center"},txtValue:{fontFamily:i.Font.InterRegular400,fontSize:i.FontSize.FontTiny,color:"#00204DE5",flex:1,lineHeight:16},ctnView:{flexDirection:"row",columnGap:6,alignItems:"center",justifyContent:"flex-start",flex:1,marginBottom:16},ctnMoreAvatar:{position:"absolute",left:40,width:35,height:35,borderRadius:25,alignItems:"center",justifyContent:"center",backgroundColor:"#f3f5f8"},txtTitle:{fontSize:16,color:"#00204D",fontFamily:i.Font.InterSemiBold600}})},72060:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.listNoti=void 0;t.listNoti=[{label:"QR Code",value:"qr"},{label:"Email",value:"email"},{label:"SMS",value:"sms"}]},166:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(43693)),l=r(n(85715)),o=n(7005),u=r(n(43184)),s=n(32207),c=n(46317),d=n(87841),f=r(n(24541)),p=r(n(12398)),y=r(n(94516)),m=n(2884),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),v=r(n(54813)),g=n(26878),S=r(n(65963)),x=n(72060),j=r(n(94196)),b=r(n(27747)),w=n(2543),D=r(n(76644)),C=r(n(46542)),T=n(12638),I=n(35708),k=n(40851),P=n(14740),_=r(n(77389)),M=r(n(194)),F=n(60596),O=n(97427),E=r(n(33542)),R=r(n(23392)),V=r(n(27163)),z=n(88e3),B=n(47671);function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}var L=function(e){return e.name="name",e.phone="phone",e.email="email",e.notiType="notiType",e}(L||{});t.default=function(){var e,t,n=(0,m.useTranslation)().t,r=(0,P.useRoute)(),A=(0,T.useAppDispatch)(),N=null!=(e=null==r||null==(t=r.params)?void 0:t.dataUserTask)?e:{},H=(0,P.useNavigation)(),U=(0,h.useState)(!1),W=(0,l.default)(U,2),$=W[0],G=W[1],Y=(0,h.useState)(!0),K=(0,l.default)(Y,2),q=K[0],J=K[1],X=(0,h.useState)([new s.IndexPath(0)]),Q=(0,l.default)(X,2),Z=Q[0],ee=Q[1],te=(0,h.useState)({}),ne=(0,l.default)(te,2),re=ne[0],ie=ne[1],ae=(0,h.useState)({}),le=(0,l.default)(ae,2),oe=le[0],ue=le[1],se=(0,h.useState)(!1),ce=(0,l.default)(se,2),de=ce[0],fe=ce[1],pe=(0,h.useState)(!1),ye=(0,l.default)(pe,2),me=ye[0],he=ye[1],ve=(0,h.useState)(""),ge=(0,l.default)(ve,2),Se=ge[0],xe=ge[1],je=(0,h.useState)(""),be=(0,l.default)(je,2),we=be[0],De=be[1],Ce=(0,h.useState)(!1),Te=(0,l.default)(Ce,2),Ie=Te[0],ke=Te[1],Pe=(0,h.useState)(!0),_e=(0,l.default)(Pe,2),Me=_e[0],Fe=_e[1],Oe=(0,h.useState)(""),Ee=(0,l.default)(Oe,2),Re=Ee[0],Ve=Ee[1],ze=(0,T.useAppSelector)((function(e){return e.ticket})),Be=ze.dataTicketRedux,Ae=ze.recipientDetaiImpl,Le=ze.formData,Ne=ze.modeler,He=(0,h.useState)(null==Ae?void 0:Ae.find((function(e){return e.userTaskId===(null==N?void 0:N._userTaskId)}))),Ue=(0,l.default)(He,1)[0],We=(0,T.useAppSelector)((function(e){return e.account})).dataAccount,$e=(0,T.useAppSelector)((function(e){return e.common})).accessToken,Ge=(0,k.useReviewServices)(),Ye=(0,h.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:We.firstName+" "+We.lastName||"---",email:Be.createdBy||"---",avatarUrl:null==We?void 0:We.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==Be?void 0:Be.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==Be?void 0:Be.jsonXml)&&JSON.parse(null==Be?void 0:Be.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:I.DateUtils.convertDateToDDMMYYYY_H_M(null==Be?void 0:Be.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==Le?void 0:Le.formName,funcViewFrom:function(){return he(!0)}}},{key:"RV.status",type:"status",value:{status:Be.ticketStatus===F.Status.voided?F.Status.voided:(null==Ue?void 0:Ue.recipientStatus)||F.Status.processing}}]}),[Be,Le,Ne]);(0,h.useEffect)((function(){var e=re;0===Z.length?e[`${L.notiType}`]="CM.empty":delete e[`${L.notiType}`],ie((function(t){return Object.assign({},t,e)}))}),[Z]);var Ke,qe=function(e,t){null!=t&&t.trim()?e!==L.email||I.RegexUtils.FORMAT_EMAIL.test(t)?e!==L.phone||I.RegexUtils.REGEX_PHONE_NUMBER_9.test(t)?ie((function(t){var n=Object.assign({},t);return delete n[e],n})):ie((function(t){return Object.assign({},t,(0,a.default)({},e,"CM.validPhone"))})):ie((function(t){return Object.assign({},t,(0,a.default)({},e,"CM.validEmail"))})):ie((function(t){return Object.assign({},t,(0,a.default)({},e,"CM.empty"))})),ue((function(n){var r,i,l,o=Object.assign({},n,(0,a.default)({},e,t));return(0,w.isEmpty)(re)&&null!=(r=o[L.email])&&r.trim()&&null!=(i=o[L.phone])&&i.trim()&&null!=(l=o[L.name])&&l.trim()?fe(!0):fe(!1),o}))},Je=(Ke=(0,i.default)((function*(e){try{if("reject"===e){if(!Se)return Fe(!0),void De("CM.empty");De("");var t=Object.assign({},null==Ue?void 0:Ue.recipient,{reason:Se});(yield Ge.actionTicket(null==Ue?void 0:Ue.id,null==Ue?void 0:Ue.ticketId,null==Ue?void 0:Ue.userTaskId,t,$e,"reject"))?(_.default.show({type:"success",text1:n("CM.noti"),text2:n("CM.rejectSucesss")}),A(O.ticketActions.setDataTicket(Object.assign({},Be,{ticketStatus:F.Status.rejected}))),H.goBack()):_.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.rejectFailed")})}else{var r={name:null==Ne?void 0:Ne.mailTemplate},i=Z.map((function(e){return x.listNoti[e.row].value})).join(","),a={ticketId:Be.id,userTaskId:null==N?void 0:N._userTaskId,recipientDetailsId:null==N?void 0:N._recipientDetailsId,fullName:oe[L.name],phoneNumber:oe[L.phone],email:oe[L.email],notifyType:i},l=yield Ge.createPersonalEkyc({personalName:oe[L.name],telephoneNumber:oe[L.phone],email:oe[L.email],messageType:i,resourceType:"internal",recipientDetailId:null==N?void 0:N._recipientDetailsId,identifierType:"2",ticketId:Be.id,userTaskId:null==N?void 0:N._userTaskId,usesContent:{},syncToPartner:"0",versionId:null==Ne?void 0:Ne.formVersion,formId:null==Le?void 0:Le.formId},r);l&&((yield Ge.createInformationOCR(a))?(_.default.show({type:"success",text1:n("CM.noti"),text2:n("RV.eid.submitSuccess")}),Ve(l.urlSuffix)):_.default.show({type:"error",text1:n("CM.noti"),text2:n("RV.eid.submitError")}))}}catch(t){"reject"===e?_.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.rejectFailed")}):_.default.show({type:"error",text1:n("CM.noti"),text2:n("RV.eid.submitError")})}})),function(e){return Ke.apply(this,arguments)}),Xe=function(){return null!==(null==Ue?void 0:Ue.recipientStatus)&&(null==Ue?void 0:Ue.recipientStatus)!==F.Status.processing},Qe=function(){return(null==Ue?void 0:Ue.recipientStatus)===F.Status.completed||(null==Ue?void 0:Ue.recipientStatus)===F.Status.accepted};return(0,B.jsxs)(o.SafeAreaView,{style:{flex:1,backgroundColor:"#fff"},edges:["bottom"],children:[(0,B.jsx)(u.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:n("RV.eid.idPerson"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,B.jsx)(s.TopNavigationAction,{onPress:function(){return ke(!0)},icon:(0,B.jsx)(c.IconWorkflow,{width:20,height:20})})}}),(0,B.jsxs)(g.KeyboardAwareScrollView,{children:[(0,B.jsx)(d.View,{style:p.default.ctnBody,children:(0,B.jsxs)(d.View,{style:p.default.ctnSubBody,children:[(0,B.jsxs)(d.Pressable,{style:p.default.ctnHeader,onPress:function(){return G(!$)},children:[(0,B.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:$?"arrow-circle-down":"arrow-circle-right"}),(0,B.jsx)(f.default,{style:p.default.textTitle,children:n("CM.infoCommon")})]}),$&&(0,B.jsx)(d.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,B.jsx)(j.default,{dataInfo:Ye})})]})}),(0,B.jsx)(d.View,{style:p.default.ctnBody,children:(0,B.jsxs)(d.View,{style:[p.default.ctnSubBody,Xe()&&{marginBottom:16}],children:[(0,B.jsxs)(d.Pressable,{style:[p.default.ctnHeader],onPress:function(){return J(!q)},children:[(0,B.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:q?"arrow-circle-down":"arrow-circle-right"}),(0,B.jsxs)(f.default,{style:p.default.textTitle,children:[n("RV.eid.infoPerson")," ",(0,B.jsx)(f.default,{style:p.default.redDot,children:"*"})]})]}),q&&(0,B.jsxs)(d.View,{style:p.default.ctnInput,children:[!Xe()&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(v.default,{isRequired:!0,label:n("RV.eid.name"),placeholder:n("RV.eid.fillName"),value:oe[`${L.name}`],onChangeText:function(e){return qe(L.name,e)},captionText:n(re[`${L.name}`]),status:re[`${L.name}`]?"danger":"basic",type:L.name}),(0,B.jsx)(v.default,{isRequired:!0,label:n("RV.eid.phone"),placeholder:n("RV.eid.fillPhone"),value:oe[`${L.phone}`],onChangeText:function(e){return qe(L.phone,e)},captionText:n(re[L.phone]),status:re[`${L.phone}`]?"danger":"basic",type:L.phone,keyBoardType:"numeric"}),(0,B.jsx)(v.default,{isRequired:!0,label:"Email",placeholder:n("RV.eid.fillEmail"),value:oe[`${L.email}`],onChangeText:function(e){return qe(L.email,e)},captionText:n(re[`${L.email}`]),status:re[`${L.email}`]?"danger":"basic",type:L.email}),(0,B.jsx)(S.default,{onSelect:ee,valueSelect:Z,placeholder:n("RV.eid.fill-notify-type"),label:n("RV.eid.notify-type"),isRequired:!0,size:"medium",listData:x.listNoti,multiple:!0,caption:n(re[`${L.notiType}`]),status:re[`${L.notiType}`]?"danger":"primary"}),Re&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(f.default,{style:p.default.title,children:n("RV.eid.qr")}),(0,B.jsx)(d.View,{style:p.default.ctnQr,children:(0,B.jsx)(M.default,{onError:function(e){return console.log(e)},value:(0,z.getConfig)().BASE_URL_EKYC+Re})})]})]}),Qe()&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(s.Divider,{style:{height:3}}),(0,B.jsx)(E.default,{ticketId:Be.id,userTaskId:null==Ue?void 0:Ue.userTaskId,versionForm:null==Ue?void 0:Ue.versionFormId})]})]})]})}),Qe()&&(0,B.jsx)(R.default,{ticketId:Be.id,userTaskId:null==Ue?void 0:Ue.userTaskId}),!Xe()&&(0,B.jsx)(d.View,{style:p.default.ctnBody,children:(0,B.jsxs)(d.View,{style:[p.default.ctnSubBody,{marginBottom:16}],children:[(0,B.jsxs)(d.Pressable,{style:p.default.ctnHeader,onPress:function(){return Fe(!Me)},children:[(0,B.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:Me?"arrow-circle-down":"arrow-circle-right"}),(0,B.jsx)(f.default,{style:p.default.textTitle,children:n("CM.note")})]}),Me&&(0,B.jsx)(d.View,{style:{paddingHorizontal:10,paddingBottom:10,rowGap:4},children:(0,B.jsx)(b.default,{isRequired:!0,label:n("CM.fillNote"),value:Se,onChangeText:function(e){xe(e),De("")},multiline:!0,maxLength:400,errorMessage:n(we)})})]})})]}),(0,B.jsx)(d.View,{style:p.default.ctnFooter,children:!Xe()&&Be.ticketStatus!==F.Status.voided&&Be.ticketStatus!==F.Status.rejected&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(d.TouchableOpacity,{onPress:function(){return Je("reject")},children:(0,B.jsx)(c.IconRejectReview,{width:36,height:36})}),(0,B.jsx)(y.default,{disabled:!(0,w.isEmpty)(re)||!de,style:{flex:1},label:n("CM.confirm"),onPress:function(){return Je("finish")}})]})}),(0,B.jsx)(D.default,{isVisible:Ie,children:(0,B.jsx)(C.default,{onClose:function(){return ke(!1)}})}),(0,B.jsx)(D.default,{isVisible:me,children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(d.View,{style:{flex:1},children:(0,B.jsx)(V.default,{})}),(0,B.jsx)(y.default,{style:{backgroundColor:"#f2ecfd",marginHorizontal:16},styleLabel:{color:"#6d1fad"},label:n("CM.back"),onPress:function(){return he(!1)}})]})})]})}},12398:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:i.Font.InterMedium500},redDot:{color:"#E14337"},ctnFooter:{flexDirection:"row",paddingHorizontal:16,columnGap:16,marginTop:8},ctnInput:{gap:10,padding:10},title:{fontSize:12,fontFamily:i.Font.InterMedium500,color:"#00204DF2"},ctnQr:{alignItems:"center",justifyContent:"center"}})},92552:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(7005),u=r(n(43184)),s=n(87841),c=r(n(94516)),d=n(46317),f=r(n(89052)),p=n(21527),y=n(41995),m=n(14740),h=n(12638),v=n(19867),g=n(2884),S=n(40851),x=n(32207),j=r(n(76644)),b=r(n(46542)),w=n(35708),D=n(60596),C=n(26878),T=r(n(24541)),I=r(n(94196)),k=r(n(27163)),P=r(n(27747)),_=n(31004),M=r(n(77389)),F=n(97427),O=r(n(93183)),E=r(n(85077)),R=n(11671),V=r(n(55529)),z=n(47671);t.default=function(){var e,t,n=(0,m.useRoute)(),r=(0,g.useTranslation)().t,B=(0,h.useAppDispatch)(),A=(0,m.useNavigation)(),L=null!=(e=null==n||null==(t=n.params)?void 0:t.dataUserTask)?e:{},N=(0,p.useState)(),H=(0,l.default)(N,2),U=H[0],W=H[1],$=(0,p.useState)(!1),G=(0,l.default)($,2),Y=G[0],K=G[1],q=(0,p.useState)(!1),J=(0,l.default)(q,2),X=J[0],Q=J[1],Z=(0,p.useState)(!0),ee=(0,l.default)(Z,2),te=ee[0],ne=ee[1],re=(0,p.useState)(!1),ie=(0,l.default)(re,2),ae=ie[0],le=ie[1],oe=(0,p.useState)(!0),ue=(0,l.default)(oe,2),se=ue[0],ce=ue[1],de=(0,p.useState)(!0),fe=(0,l.default)(de,2),pe=fe[0],ye=fe[1],me=(0,p.useState)(!1),he=(0,l.default)(me,2),ve=he[0],ge=he[1],Se=(0,p.useState)(!0),xe=(0,l.default)(Se,2),je=xe[0],be=xe[1],we=(0,p.useState)(""),De=(0,l.default)(we,2),Ce=De[0],Te=De[1],Ie=(0,p.useState)(""),ke=(0,l.default)(Ie,2),Pe=ke[0],_e=ke[1],Me=(0,p.useState)([]),Fe=(0,l.default)(Me,2),Oe=Fe[0],Ee=Fe[1],Re=(0,p.useState)([]),Ve=(0,l.default)(Re,2),ze=Ve[0],Be=Ve[1],Ae=(0,h.useAppSelector)((function(e){return e.common})).accessToken,Le=(0,h.useAppSelector)((function(e){return e.ticket})),Ne=Le.dataTicketRedux,He=Le.formData,Ue=Le.modeler,We=Le.recipientDetaiImpl,$e=(0,h.useAppSelector)((function(e){return e.account})).dataAccount,Ge=(0,S.useReviewServices)(),Ye=(0,_.useReviewEcontractServices)(),Ke=(0,R.useTicketServices)(),qe=(0,p.useState)(null==We?void 0:We.find((function(e){return e.userTaskId===(null==L?void 0:L._userTaskId)}))),Je=(0,l.default)(qe,1)[0],Xe=(0,p.useMemo)((function(){return[{key:"RV.createBy",type:"avatar",value:{name:$e.firstName+" "+$e.lastName||"---",email:Ne.createdBy||"---",avatarUrl:null==$e?void 0:$e.imageUrl}},{key:"RV.ticketName",type:"normal",value:{name:(null==Ne?void 0:Ne.title)||"---"}},{key:"RV.process",type:"normal",value:{name:(null==Ne?void 0:Ne.jsonXml)&&JSON.parse(null==Ne?void 0:Ne.jsonXml).properties.name||"---"}},{key:"RV.createDate",type:"normal",value:{name:w.DateUtils.convertDateToDDMMYYYY_H_M(null==Ne?void 0:Ne.createdDate)}},{key:"RV.infoForm",type:"form",value:{name:null==He?void 0:He.formName,funcViewFrom:function(){return Q(!0)}}},{key:"RV.status",type:"status",value:{status:Ne.ticketStatus===D.Status.voided?D.Status.voided:(null==Je?void 0:Je.recipientStatus)||D.Status.processing}}]}),[Ne,He,Ue]);(0,p.useEffect)((function(){it(),ut()}),[]);var Qe,Ze,et,tt,nt,rt,it=(Qe=(0,a.default)((function*(){try{var e=yield Ye.getDataFormFill({versionId:Je.versionFormId});e&&W(e)}catch(e){}})),function(){return Qe.apply(this,arguments)}),at=(Ze=(0,a.default)((function*(e){if(e||null==U||!U.versionId){if(Oe.length>0&&!(yield lt(Oe)))return;var t=Object.assign({},Je.recipient,{reason:Ce});(yield Ge.actionTicket(Je.id,Je.ticketId,Je.userTaskId,t,Ae,"finish"))?(M.default.show({type:"success",text1:r("CM.noti"),text2:r("CM.actionUserStaskSuccess")}),A.goBack()):M.default.show({type:"error",text1:r("CM.noti"),text2:r("CM.actionUserStaskFailure")})}else le(!0)})),function(e){return Ze.apply(this,arguments)}),lt=(et=(0,a.default)((function*(e){if(e){var t=e.map((function(e){return e.taskId}));return!(yield Ge.getListTaskByListId(t)).find((function(e){return"completed"!==e.statusType}))||(s.Alert.alert(r("CM.needDoneTask")),!1)}return!0})),function(e){return et.apply(this,arguments)}),ot=(tt=(0,a.default)((function*(){if(!Ce)return be(!0),void _e("CM.empty");_e("");var e=Object.assign({},null==Je?void 0:Je.recipient,{reason:Ce});(yield Ge.actionTicket(null==Je?void 0:Je.id,null==Je?void 0:Je.ticketId,null==Je?void 0:Je.userTaskId,e,Ae,"reject"))?(M.default.show({type:"success",text1:r("CM.noti"),text2:r("CM.rejectSucesss")}),B(F.ticketActions.setDataTicket(Object.assign({},Ne,{ticketStatus:D.Status.rejected}))),A.goBack()):M.default.show({type:"error",text1:r("CM.noti"),text2:r("CM.rejectFailed")})})),function(){return tt.apply(this,arguments)}),ut=(nt=(0,a.default)((function*(){var e=yield Ge.getListTaskByTicketIdAndUsertaskId(Ne.id,L._userTaskId);if(e){var t=e.map((function(e){return e.owner})),n=e.map((function(e){return e.taskId})),r=yield Ke.getMultiLoginAccount((0,i.default)(new Set(t))),a=e.map((function(e){var t,n;return Object.assign({},e,{avatar:null==r||null==(t=r.find((function(t){return t.email===e.owner})))?void 0:t.imageUrl,name:""+(null==r||null==(n=r.find((function(t){return t.email===e.owner})))?void 0:n.personalName)})}));Ee(a);var l=yield Ge.getListTaskByListId(n);if(l){var o=l.map((function(e){var t,n,r;return Object.assign({},e,{owner:null==(t=a.find((function(t){return t.listTaskId==e.listTaskId})))?void 0:t.owner,fullName:null==(n=a.find((function(t){return t.listTaskId==e.listTaskId})))?void 0:n.name,avatar:null==(r=a.find((function(t){return t.listTaskId==e.listTaskId})))?void 0:r.avatar,attrJson:JSON.parse(e.attr)})}));yield st(o)}}})),function(){return nt.apply(this,arguments)}),st=(rt=(0,a.default)((function*(e){var t=e.flatMap((function(e){return e.assignTaskList.map((function(e){return e.userId}))})),n=yield Ge.findUserByOrgIn(0,1e4,"",null,t);if(n){var r=e.map((function(e){return e.assignTaskList.length&&(e.assignTaskList=e.assignTaskList.map((function(e){var t,r,i,a,l,o;return Object.assign({},e,{avatar:null==(t=n.data)||null==(r=t.find((function(t){return t.resourceId==e.userId})))?void 0:r.imageUrl,email:null==(i=n.data)||null==(a=i.find((function(t){return t.resourceId==e.userId})))?void 0:a.email,name:null==(l=n.data)||null==(o=l.find((function(t){return t.resourceId==e.userId})))?void 0:o.personalName})}))),e}));Be(r)}})),function(e){return rt.apply(this,arguments)});return(0,z.jsxs)(o.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:[(0,z.jsx)(u.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",title:r("RV.infoDoc"),contentStyle:{backgroundColor:"#fff"},renderContentRight:function(){return(0,z.jsx)(x.TopNavigationAction,{onPress:function(){return K(!0)},icon:(0,z.jsx)(d.IconWorkflow,{width:20,height:20})})}}),(0,z.jsxs)(C.KeyboardAwareScrollView,{children:[(0,z.jsx)(s.View,{style:f.default.ctnBody,children:(0,z.jsxs)(s.View,{style:f.default.ctnSubBody,children:[(0,z.jsxs)(s.Pressable,{style:f.default.ctnHeader,onPress:function(){return ge(!ve)},children:[(0,z.jsx)(x.Icon,{fill:"#6F2CED",width:16,height:16,name:ve?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(T.default,{style:f.default.textTitle,children:r("CM.infoCommon")})]}),ve&&(0,z.jsx)(s.View,{style:{paddingHorizontal:10,paddingBottom:10},children:(0,z.jsx)(I.default,{dataInfo:Xe})})]})}),Oe.length>0&&(0,z.jsx)(s.View,{style:f.default.ctnBody,children:(0,z.jsxs)(s.View,{style:[f.default.ctnSubBody],children:[(0,z.jsxs)(s.Pressable,{style:f.default.ctnHeader,onPress:function(){return ye(!pe)},children:[(0,z.jsx)(x.Icon,{fill:"#6F2CED",width:16,height:16,name:pe?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(T.default,{style:f.default.textTitle,children:r("RV.taskNeedDone")})]}),pe&&(0,z.jsx)(x.List,{contentContainerStyle:{rowGap:10,backgroundColor:"#fff",paddingBottom:10},scrollEnabled:!1,data:ze,renderItem:function(e){var t=e.item,n=e.index;return(0,z.jsx)(E.default,{dataTask:t},n)}})]})}),U&&(0,z.jsx)(s.View,{style:f.default.ctnBody,children:(0,z.jsxs)(s.View,{style:[f.default.ctnSubBody],children:[(0,z.jsxs)(s.Pressable,{style:f.default.ctnHeader,onPress:function(){return ne(!te)},children:[(0,z.jsx)(x.Icon,{fill:"#6F2CED",width:16,height:16,name:te?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(T.default,{style:f.default.textTitle,children:r("RV.econtract.formNeedAction")})]}),te&&(0,z.jsxs)(s.View,{style:f.default.ctnFormName,children:[(0,z.jsxs)(T.default,{style:f.default.textTitle,children:[r("RV.econtract.fillForm")," "]}),(0,z.jsx)(s.TouchableOpacity,{onPress:function(){le(!0)},children:(0,z.jsx)(T.default,{style:f.default.formName,children:null==U?void 0:U.formName})})]})]})}),(0,z.jsx)(s.View,{style:f.default.ctnBody,children:(0,z.jsxs)(s.View,{style:[f.default.ctnSubBody],children:[(0,z.jsxs)(s.Pressable,{style:f.default.ctnHeader,onPress:function(){return ce(!se)},children:[(0,z.jsx)(x.Icon,{fill:"#6F2CED",width:16,height:16,name:se?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(T.default,{style:f.default.textTitle,children:r("RV.fileRelative")})]}),se&&(0,z.jsx)(O.default,{dataUserTask:L})]})}),L._status===v.STATUS_TASK.TASK_SEARCH&&(0,z.jsx)(s.View,{style:f.default.ctnBody,children:(0,z.jsxs)(s.View,{style:[f.default.ctnSubBody,{marginBottom:16}],children:[(0,z.jsxs)(s.Pressable,{style:f.default.ctnHeader,onPress:function(){return be(!je)},children:[(0,z.jsx)(x.Icon,{fill:"#6F2CED",width:16,height:16,name:je?"arrow-circle-down":"arrow-circle-right"}),(0,z.jsx)(T.default,{style:f.default.textTitle,children:r("CM.note")})]}),je&&(0,z.jsx)(s.View,{style:{paddingHorizontal:10,paddingBottom:10,rowGap:4},children:(0,z.jsx)(P.default,{isRequired:!0,label:r("CM.fillNote"),value:Ce,onChangeText:function(e){Te(e),_e("")},multiline:!0,maxLength:400,errorMessage:r(Pe)})})]})})]}),(0,z.jsx)(s.View,{style:f.default.ctnFooter,children:L._status===v.STATUS_TASK.TASK_SEARCH&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(s.TouchableOpacity,{onPress:ot,children:(0,z.jsx)(d.IconRejectReview,{width:(0,y.SizeDP)(36),height:(0,y.SizeDP)(36)})}),(0,z.jsx)(c.default,{style:{flex:1},label:r("CM.confirm"),onPress:function(){return at(!1)}})]})}),(0,z.jsx)(j.default,{isVisible:Y,children:(0,z.jsx)(b.default,{onClose:function(){return K(!1)}})}),(0,z.jsx)(j.default,{isVisible:ae,children:(0,z.jsx)(V.default,{versionId:null==U?void 0:U.versionId,readOnly:L._status!==v.STATUS_TASK.TASK_SEARCH,data:{_userTaskId:null==L?void 0:L._userTaskId,_ticketId:null==Ne?void 0:Ne.id,formId:null==U?void 0:U.formId},isOnlyView:L._status!==v.STATUS_TASK.TASK_SEARCH,handleSubmit:function(){return at(!0)},onClose:function(){return le(!1)},nameHeader:null==U?void 0:U.formName})}),(0,z.jsx)(j.default,{isVisible:X,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(s.View,{style:{flex:1},children:(0,z.jsx)(k.default,{})}),(0,z.jsx)(c.default,{style:{backgroundColor:"#f2ecfd",marginHorizontal:16},styleLabel:{color:"#6d1fad"},label:r("CM.back"),onPress:function(){return Q(!1)}})]})})]})}},19867:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_TASK=t.ACTION_TYPES=void 0;t.ACTION_TYPES=function(e){return e.SHOW_EXECUTOR_USER="SHOW_EXECUTOR_USER",e.SHOW_EID_INFO="SHOW_EID_INFO",e.SHOW_ELMS_INFO="SHOW_ELMS_INFO",e.SHOW_ECONTRACT_INFO="SHOW_ECONTRACT_INFO",e.CREATE_ECONTRACT_ENV="CREATE_ECONTRACT_ENV",e.SHOW_USERTASK_INFO="SHOW_USERTASK_INFO",e.SHOW_COLLABO_INFO="SHOW_COLLABO_INFO",e}({}),t.STATUS_TASK=function(e){return e.TASK_SEARCH="task-search",e.TASK_SUCCESS="task-success",e.TASK_REJECTED="task-reject",e}({})},89052:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995),a=n(20880);t.default=r.StyleSheet.create({ctnFooter:{flexDirection:"row",paddingHorizontal:(0,i.SizeDP)(16),columnGap:(0,i.SizeDP)(16),marginTop:(0,i.SizeDP)(8)},ctnBody:{backgroundColor:"#F8FAFE",paddingHorizontal:16,paddingTop:16},ctnSubBody:{backgroundColor:"#fff",borderRadius:10},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:10,padding:10},textTitle:{color:"#00204D",fontSize:14,fontFamily:a.Font.InterMedium500},redDot:{color:"#E14337"},formName:{fontSize:14,color:"#366ae2",textDecorationLine:"underline",fontFamily:a.Font.InterRegular400},ctnFormName:{paddingHorizontal:10,paddingBottom:10,rowGap:4}})},93183:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),o=n(87841),u=r(n(14507)),s=n(12638),c=n(19867),d=r(n(75672)),f=n(41995),p=r(n(24541)),y=n(46317),m=r(n(81924)),h=n(14740),v=n(35708),g=r(n(77389)),S=n(2884),x=n(40851),j=r(n(41778)),b=r(n(99746)),w=r(n(76644)),D=r(n(7006)),C=n(88e3),T=n(47671);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}t.default=function(e){var t=e.dataUserTask,n=(0,S.useTranslation)().t,r=((0,h.useNavigation)(),(0,l.useState)(1)),I=(0,a.default)(r,2),k=I[0],P=I[1],_=(0,l.useState)(0),M=(0,a.default)(_,2),F=M[0],O=M[1],E=(0,l.useState)([]),R=(0,a.default)(E,2),V=R[0],z=R[1],B=(0,l.useState)(!1),A=(0,a.default)(B,2),L=A[0],N=A[1],H=(0,l.useState)(""),U=(0,a.default)(H,2),W=U[0],$=U[1],G=(0,l.useState)(""),Y=(0,a.default)(G,2),K=Y[0],q=Y[1],J=(0,s.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,X=(0,s.useAppSelector)((function(e){return e.common})).accessToken,Q=(0,x.useReviewServices)();(0,l.useEffect)((function(){ue(k)}),[k]);var Z,ee,te,ne,re,ie,ae,le,oe,ue=(Z=(0,i.default)((function*(e){try{var n={page:e-1,size:3,sort:"createdDate,desc"},r=yield Q.getListAttachmentsUserTask(J.id,t._userTaskId,n,X);if(r){var i=null==r?void 0:r.data.filter((function(e){return!("eform"==e.resource&&"upload_img"==e.type)}));if(0===(null==i?void 0:i.length))return void(e>1?P(e-1):(z([]),O(0)));O(null==r?void 0:r.totalRecords),he(i)}}catch(e){}})),function(e){return Z.apply(this,arguments)}),se=(ee=(0,i.default)((function*(){try{yield Q.getListFileReview(J.id,t._userTaskId,X)}catch(e){}})),function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0;return(0,T.jsxs)(o.View,{style:u.default.ctnAction,children:[(0,T.jsx)(o.TouchableOpacity,{onPress:function(){return ce(e,n)},hitSlop:(0,f.SizeDP)(15),children:(0,T.jsx)(y.IconView,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})}),(0,T.jsx)(o.TouchableOpacity,{onPress:function(){return pe(n,e)},hitSlop:(0,f.SizeDP)(15),children:(0,T.jsx)(y.IconDownload,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})}),!e&&n.allowDeleted&&t._status===c.STATUS_TASK.TASK_SEARCH&&(0,T.jsx)(o.TouchableOpacity,{onPress:function(){var e;return fe(null==n||null==(e=n.id)?void 0:e.toString())},hitSlop:(0,f.SizeDP)(15),children:(0,T.jsx)(y.IconTrash,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})})]})}),ce=(te=(0,i.default)((function*(){var e,t,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1?arguments[1]:void 0;q(null==(e=i.fileName)||null==(t=e.split("."))?void 0:t[0]);try{g.default.show({type:"info",text1:n("CM.info"),text2:n("TK.viewFile")});var a=new FormData;if(!r&&"ewriter"===i.resource){var l=yield de(i.userTaskId,null==i?void 0:i.fileRepositoryId,null==i?void 0:i.fileName);if(l){a.append("file",l);var o=yield Q.viewFile(a,X);1==(null==o?void 0:o.code)?(N(!0),$(o.message)):g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.error")})}else g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.error")});return}var u=i.name;u=r?i.keyName:i.name;var s=i.bucketName;if(!i.bucketName){var c,d,f,p=null==i||null==(c=i.name)||null==(d=c.split("https://"))?void 0:d[1],y=null==p?void 0:p.split("/");u=`/${null==y||null==(f=y.slice(2))?void 0:f.join("/")}`,s=null==y?void 0:y[1]}a.append("keyName",u),a.append("bucketName",s);var m=yield Q.viewFile(a,X);1==(null==m?void 0:m.code)?(N(!0),$(m.message)):g.default.show({type:"error",text1:n("CM.info"),text2:n("CM.error")})}catch(e){g.default.show({type:"error",text1:n("CM.info"),text2:n("CM.error")})}})),function(){return te.apply(this,arguments)}),de=(ne=(0,i.default)((function*(e,t,n){try{var r,i=null==n||null==(r=n.split("."))?void 0:r[1],a=`${b.default.fs.dirs.DocumentDir}/${(new Date).getTime().toString()}.${i}`,l=yield b.default.config({path:a}).fetch("GET",`${(0,C.getConfig)().BASE_URL}/services/erequest/api/tickets/${J.id}/userTaskId/${e}/fileId/${t}`).then((function(e){return 200==e.info().status?e.path():null})).catch((function(){return null}));return l?{uri:"ios"===o.Platform.OS?l:"file://"+l,name:`${(new Date).getTime().toString()}.${i}`,type:v.CommonUtils.getMimeType(n)}:null}catch(e){return null}})),function(e,t,n){return ne.apply(this,arguments)}),fe=(re=(0,i.default)((function*(e){try{yield Q.deleteFileRelative(e,X),yield ue(k),g.default.show({type:"success",text1:n("CM.info"),text2:n("TK.deleteFileSuccess")})}catch(e){console.log(e),g.default.show({type:"error",text1:n("CM.info"),text2:n("TK.deleteFileErr")})}})),function(e){return re.apply(this,arguments)}),pe=(ie=(0,i.default)((function*(e,t){var n=e.fileName;n=t?e.keyName.replace("/","_"):e.fileName;var r=`${"android"===o.Platform.OS?j.default.DownloadDirectoryPath:j.default.DocumentDirectoryPath}/${(new Date).getTime()}_${n}`;t||(e.bucketName?yield me(r,e.id):yield ye(r,e.name))})),function(e,t){return ie.apply(this,arguments)}),ye=(ae=(0,i.default)((function*(e,t){var r={fromUrl:t,toFile:e,background:!0,begin:function(e){console.log("Download has begun",e)},progress:function(e){e.bytesWritten,e.contentLength},connectionTimeout:5e3};try{200===(yield j.default.downloadFile(r).promise).statusCode?"ios"===o.Platform.OS&&(yield o.Share.share({url:e})).action==o.Share.dismissedAction?g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")}):g.default.show({type:"success",text1:n("CM.noti"),text2:n("CM.downloadSuccess")}):g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")})}catch(e){g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")})}})),function(e,t){return ae.apply(this,arguments)}),me=(le=(0,i.default)((function*(e,t){try{g.default.show({type:"info",text1:n("CM.noti"),text2:n("CM.pleaseWait")});var r=yield b.default.fetch("GET",`${(0,C.getConfig)().BASE_URL}/services/erequest/api/attachments/download-file?attachmentId=${t}`).then((function(e){return 200==e.info().status?e.base64():null})).catch((function(){return null}));if(r){try{yield j.default.writeFile(e,r,"base64")}catch(e){console.log(e)}"ios"===o.Platform.OS&&(yield o.Share.share({url:e})).action==o.Share.dismissedAction?g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")}):g.default.show({type:"success",text1:n("CM.noti"),text2:n("CM.downloadSuccess")})}else g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")})}catch(e){g.default.show({type:"error",text1:n("CM.noti"),text2:n("CM.downloadFail")})}})),function(e,t){return le.apply(this,arguments)}),he=function(e){var t=e.map((function(e,t){return{STT:String(3*(k-1)+1+t),keyName:(0,T.jsx)(p.default,{style:u.default.txtText,numberOfLines:1,children:(i=null==e?void 0:e.fileName,i?null==i||null==(a=i.split("."))||null==(l=a.slice(0,-1))?void 0:l.join("."):"")}),createdBy:e.createdBy,documentSize:v.CommonUtils.getSize(e.size),type:(n=null==e?void 0:e.fileName,r=e.resource,n?"docx"==n.split(".").pop()&&"ewriter"===r?"pdf":n.split(".").pop():""),lastModifiedDate:v.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate),action:se(!1,e)};var n,r,i,a,l}));z(t)},ve=(oe=(0,i.default)((function*(){try{var e=yield v.CommonUtils.handleGetFile();if(!e)return;var r=new FormData;r.append("uploadFile",e),r.append("attachmentJson",JSON.stringify({ticketId:null==J?void 0:J.id,userTaskId:t._userTaskId})),(yield Q.uploadFileRelative(r,X))?(yield ue(k),g.default.show({type:"success",text1:n("CM.info"),text2:n("TK.uploadFileSuccess")})):g.default.show({type:"error",text1:n("CM.info"),text2:n("TK.uploadFileErr")})}catch(e){console.log(e),g.default.show({type:"error",text1:n("CM.info"),text2:n("TK.uploadFileErr")})}})),function(){return oe.apply(this,arguments)});return(0,T.jsxs)(o.View,{style:u.default.ctnMain,children:[(0,T.jsx)(o.ScrollView,{style:u.default.ctnBody,children:(0,T.jsxs)(o.View,{style:u.default.ctnForm,children:[(0,T.jsxs)(o.View,{style:u.default.viewForm,children:[(0,T.jsx)(p.default,{style:u.default.txtTitle,children:n("RV.document")}),t._status===c.STATUS_TASK.TASK_SEARCH&&(0,T.jsx)(o.TouchableOpacity,{onPress:ve,hitSlop:(0,f.SizeDP)(15),children:(0,T.jsx)(y.IconUpload,{width:(0,f.SizeDP)(16),height:(0,f.SizeDP)(16)})})]}),(0,T.jsx)(d.default,{stickyLeft:!0,stickyColumnLeftIndex:1,tableHeaders:["STT","keyName","createdBy","documentSize","type","lastModifiedDate","action"],tableData:V}),F>0&&(0,T.jsx)(m.default,{collectionSize:F,currentPage:k,pageSize:3,onPageChange:function(e){return P(e)}})]})}),(0,T.jsx)(w.default,{isVisible:L,children:(0,T.jsx)(D.default,{url:W,onClose:function(){return N(!1)},name:K})})]})}},14507:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnMain:{backgroundColor:"#F8FAFE",flex:1},ctnBody:{backgroundColor:"#fff",flex:1,paddingHorizontal:(0,i.SizeDP)(16)},txtTitle:{fontSize:i.default.FontBase,fontFamily:a.Font.InterSemiBold600,color:a.Color.colorText},ctnForm:{rowGap:(0,i.SizeDP)(15),marginBottom:(0,i.SizeDP)(20)},ctnAction:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,i.SizeDP)(10)},txtText:{fontSize:i.default.FontTiny,fontFamily:a.Font.InterRegular400,color:"#00204DCC"},viewForm:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginRight:(0,i.SizeDP)(12)}})},85077:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(21527),o=n(87841),u=r(n(24541)),s=n(32207),c=n(20880),d=r(n(94196)),f=n(35708),p=n(46317),y=r(n(69290)),m=n(11671),h=n(2884),v=r(n(25517)),g=n(12638),S=n(60596),x=n(47671);t.default=function(e){var t=e.dataTask,n=(0,h.useTranslation)().t,r=(0,l.useState)(!1),j=(0,a.default)(r,2),b=j[0],w=j[1],D=(0,l.useState)(!1),C=(0,a.default)(D,2),T=C[0],I=C[1],k=(0,l.useState)(!1),P=(0,a.default)(k,2),_=P[0],M=P[1],F=(0,l.useState)([]),O=(0,a.default)(F,2),E=O[0],R=O[1],V=(0,m.useTicketServices)(),z=(0,g.useAppSelector)((function(e){return e.ticket})).dataTicketRedux;(0,l.useEffect)((function(){A()}),[]);var B,A=(B=(0,i.default)((function*(){var e,n=null==(e=t.owner)?void 0:e.split(",");if(n){var r=yield V.getMultiLoginAccount(n);r&&R(r)}})),function(){return B.apply(this,arguments)}),L=function(){return I(!T)},N=function(){return M(!_)},H=function(e,t){if(e&&t){var n=Math.floor(new Date(t).getTime())-Math.floor(new Date(e).getTime());return f.DateUtils.convertTime(n)}return"---"},U=function(e){switch(e){case"3":return(0,x.jsx)(p.Iconhigh,{width:16,height:16});case"2":return(0,x.jsx)(p.Iconmedium,{width:16,height:16});case"1":return(0,x.jsx)(p.Iconlow,{width:16,height:16});default:return(0,x.jsx)(u.default,{children:"---"})}},W=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,x.jsx)(o.Pressable,{onPress:t?L:N,style:v.default.ctnListUser,children:null==e?void 0:e.map((function(n,r){return(0,x.jsx)(x.Fragment,{children:r<=1?(0,x.jsx)(o.Image,{style:{position:"absolute",left:20*r},width:28,height:28,borderRadius:14,source:{uri:(null==n?void 0:n[t?"avatar":"imageUrl"])||c.String.DEFAULT_IMAGE}},r):(0,x.jsx)(o.View,{style:v.default.ctnAdd,children:(0,x.jsx)(u.default,{children:"+"+((null==e?void 0:e.length)-2)})},r)})}))})},$=(0,l.useMemo)((function(){return[{key:"RV.owner",type:"normal",value:{onlyIcon:W(E,!1)}},{key:"RV.userAction",type:"normal",value:{onlyIcon:W(t.assignTaskList)}},{key:"RV.status",type:"status",value:{status:(e=t,"todo"===(null==e||null==(r=e.attrJson)?void 0:r.type)?"todo":"processing"===(null==e||null==(i=e.attrJson)?void 0:i.type)?"processing":"completed"===(null==e||null==(a=e.attrJson)?void 0:a.type)?"completed":"approved"===(null==e||null==(l=e.attrJson)?void 0:l.type)?"approved":e.statusType)}},{key:"Estimate",type:"normal",value:{name:H(t.startDate,t.dueDate)}},{key:"HM.priority",type:"normal",value:{onlyIcon:U(t.priority)}},{key:"RV.listTask.startDate",type:"normal",value:{name:f.DateUtils.convertDateToDDMMYYYY_H_M(t.startDate)}},{key:"RV.listTask.endDate",type:"normal",value:{name:f.DateUtils.convertDateToDDMMYYYY_H_M(t.dueDate)}},{key:"RV.listTask.action",type:"normal",value:{onlyIcon:(0,x.jsx)(o.Pressable,{onPress:function(){z.ticketStatus!==S.Status.voided&&o.Alert.alert(n("NT.notification.inprocess_noti"))},style:{width:28,height:28,backgroundColor:"#F2ECFD",borderRadius:14,justifyContent:"center",alignItems:"center"},children:(0,x.jsx)(s.Icon,{fill:"#6F2CED",name:"edit-2",width:16,height:16})})}}];var e,r,i,a,l}),[E]);return(0,x.jsxs)(o.View,{style:{paddingHorizontal:10},children:[(0,x.jsxs)(o.Pressable,{onPress:function(){w(!b)},style:v.default.ctnHeader,children:[(0,x.jsxs)(o.View,{style:v.default.ctnBodyHeader,children:[(0,x.jsx)(o.View,{style:[b&&v.default.rotate],children:(0,x.jsx)(s.Icon,{fill:"#6F2CED",width:16,height:16,name:"play-circle-outline"})}),(0,x.jsx)(u.default,{style:v.default.textTitle,children:n("RV.listTask.title")})]}),(0,x.jsx)(u.default,{style:v.default.tastName,children:t.name})]}),b&&(0,x.jsx)(o.View,{style:{backgroundColor:"#fff",paddingHorizontal:16},children:(0,x.jsx)(d.default,{dataInfo:$})}),(0,x.jsx)(s.Divider,{style:{marginTop:10}}),(0,x.jsx)(y.default,{isVisible:T,title:n("RV.listTask.listUserAction"),onClose:L,renderContent:(0,x.jsx)(s.List,{data:t.assignTaskList,renderItem:function(e){var t=e.item;return(0,x.jsx)(s.ListItem,{children:(0,x.jsxs)(o.View,{style:v.default.listUser,children:[(0,x.jsx)(o.Image,{width:28,height:28,borderRadius:14,source:{uri:t.avatar||c.String.DEFAULT_IMAGE}}),(0,x.jsxs)(o.View,{children:[(0,x.jsx)(u.default,{style:v.default.textname,children:t.name}),(0,x.jsx)(u.default,{children:t.email})]})]})})}})}),(0,x.jsx)(y.default,{isVisible:_,title:n("RV.listTask.listOwner"),onClose:N,renderContent:(0,x.jsx)(s.List,{data:E,renderItem:function(e){var t=e.item;return(0,x.jsx)(s.ListItem,{children:(0,x.jsxs)(o.View,{style:v.default.listUser,children:[(0,x.jsx)(o.Image,{width:28,height:28,borderRadius:14,source:{uri:t.imageUrl||c.String.DEFAULT_IMAGE}}),(0,x.jsxs)(o.View,{children:[(0,x.jsx)(u.default,{style:v.default.textname,children:t.firstName+" "+t.lastName||"---"}),(0,x.jsx)(u.default,{children:t.email})]})]})})}})})]})}},25517:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnHeader:{backgroundColor:"#fff",flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",columnGap:30},ctnBodyHeader:{flexDirection:"row",alignItems:"center",columnGap:8},rotate:{transform:[{rotate:"90deg"}]},textTitle:{color:"#00204DE5",fontSize:12,fontFamily:i.Font.InterSemiBold600},tastName:{flex:1,fontSize:12,color:"#366AE2",fontFamily:i.Font.InterRegular400},listUser:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:16},textname:{fontSize:14,fontFamily:i.Font.InterSemiBold600},ctnListUser:{flexDirection:"row",position:"relative"},ctnAdd:{position:"absolute",left:40,width:28,height:28,borderRadius:14,backgroundColor:"#F4F4F4",justifyContent:"center",alignItems:"center"}})},30019:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(32207),u=n(21527),s=n(87841),c=r(n(66771)),d=r(n(24541)),f=n(2884),p=n(47671);t.default=function(e){var t=e.data,n=e.dataSelect,r=e.setDataSelect,y=e.isSearch,m=void 0!==y&&y,h=e.onRefresh,v=e.getMore,g=e.placeholder,S=e.isi18n,x=void 0!==S&&S,j=(0,f.useTranslation)().t,b=(0,u.useState)(!1),w=(0,l.default)(b,2),D=w[0],C=w[1],T=(0,u.useState)(t),I=(0,l.default)(T,2),k=I[0],P=I[1],_=(0,u.useState)(""),M=(0,l.default)(_,2),F=M[0],O=M[1],E=(0,c.default)(F,500),R=(0,u.useState)({width:s.Dimensions.get("window").width,height:s.Dimensions.get("window").height}),V=(0,l.default)(R,2),z=V[0],B=V[1];(0,u.useEffect)((function(){var e=s.Dimensions.addEventListener("change",(function(e){var t=e.window;B({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]),(0,u.useEffect)((function(){L(E)}),[E]);var A,L=function(e){P(t.filter((function(t){return t.label.toLowerCase().includes(e.toLowerCase())})))},N=(A=(0,a.default)((function*(){m&&(C(!0),null==h||h((function(){return C(!1)})))})),function(){return A.apply(this,arguments)});return(0,p.jsxs)(p.Fragment,{children:[m&&(0,p.jsx)(o.Input,{allowFontScaling:!1,value:F,onChangeText:O,placeholder:g,style:{backgroundColor:"#fff"},accessoryRight:F?(0,p.jsx)(s.TouchableOpacity,{hitSlop:15,onPress:function(){return O("")},children:(0,p.jsx)(o.Icon,{name:"close-outline"})}):void 0}),(0,p.jsx)(o.List,{showsVerticalScrollIndicator:!1,style:{backgroundColor:"#fff",height:z.height/3*2},data:k,onEndReachedThreshold:.5,onRefresh:N,refreshing:D,onEndReached:function(){m&&(null==v||v())},renderItem:function(e){var t=e.item;return(0,p.jsx)(o.ListItem,{onPress:function(){n.includes(t.value)?r(n.filter((function(e){return e!==t.value}))):r([].concat((0,i.default)(n),[t.value]))},title:function(e){return(0,p.jsx)(d.default,Object.assign({},e,{children:x?j(`${t.label}`):t.label}))},accessoryRight:n.includes(t.value)?(0,p.jsx)(o.Icon,{fill:"#06B7E8",width:14,height:14,name:"checkmark-outline"}):void 0})}})]})}},62921:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(32207),a=n(87841),l=r(n(95556)),o=r(n(24541)),u=n(2884),s=n(47671);t.default=function(e){var t=e.onClose,n=e.visible,r=e.rangeDate,c=e.onConfirm,d=(0,u.useTranslation)().t;return(0,s.jsx)(i.Modal,{backdropStyle:l.default.backdrop,onBackdropPress:t,visible:n,children:(0,s.jsx)(i.RangeCalendar,{style:{backgroundColor:"#fff"},range:r,onSelect:function(e){return c(e)},min:new Date(1900,0,0),max:new Date,renderFooter:function(){return(0,s.jsxs)(a.View,{style:{alignItems:"center",justifyContent:"flex-end",flexDirection:"row",columnGap:6,marginRight:16,marginTop:16},children:[(0,s.jsx)(i.Button,{onPress:function(){return c({})},size:"small",status:"info",appearance:"outline",children:function(e){return(0,s.jsx)(o.default,Object.assign({},e,{children:d("CM.undo")}))}}),(0,s.jsx)(i.Button,{onPress:t,size:"small",appearance:"outline",status:"primary",children:function(e){return(0,s.jsx)(o.default,Object.assign({},e,{children:d("CM.select")}))}})]})}})})}},7241:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.listFilter=void 0;t.listFilter=[{label:"Trạng thái giao dịch",value:"status"},{label:"Nhóm dịch vụ",value:"group"},{label:"Quy trình",value:"modeler"},{label:"Mức độ ưu tiên",value:"priority"},{label:"Ngày tạo",value:"created_at"},{label:"Hạn hoàn thành",value:"due_date"},{label:"Trễ hạn",value:"late"}]},81584:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(32207),u=n(7005),s=n(87841),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),d=n(14740),f=n(20880),p=n(12638),y=n(2543),m=n(72676),h=n(2884),v=r(n(69290)),g=r(n(24541)),S=n(98884),x=n(7241),j=n(60596),b=r(n(62921)),w=r(n(30019)),D=n(11595),C=n(35708),T=r(n(95556)),I=n(41995),k=n(11671),P=n(47671);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}t.default=function(){var e,t=(0,h.useTranslation)().t,n=(0,d.useRoute)(),r=null==n||null==(e=n.params)?void 0:e.type,_=(0,d.useNavigation)(),M=(0,u.useSafeAreaInsets)(),F=(0,c.useRef)(null),O=(0,c.useState)([]),E=(0,l.default)(O,2),R=E[0],V=E[1],z=(0,c.useState)(""),B=(0,l.default)(z,2),A=B[0],L=B[1],N=(0,c.useState)(0),H=(0,l.default)(N,2),U=H[0],W=H[1],$=(0,c.useState)(0),G=(0,l.default)($,2),Y=G[0],K=G[1],q=(0,c.useState)(0),J=(0,l.default)(q,2),X=J[0],Q=J[1],Z=(0,c.useState)(0),ee=(0,l.default)(Z,2),te=ee[0],ne=ee[1],re=(0,c.useState)(!1),ie=(0,l.default)(re,2),ae=ie[0],le=ie[1],oe=(0,p.useAppSelector)((function(e){return e.account})).dataAccount,ue=(0,p.useAppSelector)((function(e){return e.common})).accessToken,se=(0,c.useState)(""),ce=(0,l.default)(se,2),de=ce[0],fe=ce[1],pe=(0,k.useTicketServices)(),ye=(0,y.debounce)((function(e){fe(e)}),300),me=(0,c.useState)(""),he=(0,l.default)(me,2),ve=he[0],ge=he[1],Se=(0,c.useState)([]),xe=(0,l.default)(Se,2),je=xe[0],be=xe[1],we=(0,c.useState)([]),De=(0,l.default)(we,2),Ce=De[0],Te=De[1],Ie=(0,c.useState)([]),ke=(0,l.default)(Ie,2),Pe=ke[0],_e=ke[1],Me=(0,c.useState)([]),Fe=(0,l.default)(Me,2),Oe=Fe[0],Ee=Fe[1],Re=(0,c.useState)([]),Ve=(0,l.default)(Re,2),ze=Ve[0],Be=Ve[1],Ae=(0,c.useState)([]),Le=(0,l.default)(Ae,2),Ne=Le[0],He=Le[1],Ue=(0,c.useState)({}),We=(0,l.default)(Ue,2),$e=We[0],Ge=We[1],Ye=(0,c.useState)({}),Ke=(0,l.default)(Ye,2),qe=Ke[0],Je=Ke[1],Xe=(0,c.useState)({}),Qe=(0,l.default)(Xe,2),Ze=Qe[0],et=Qe[1],tt=(0,s.useWindowDimensions)().width;(0,c.useEffect)((function(){ft()}),[]),(0,c.useEffect)((function(){Q(0),Ee([]),Be([]),pt(0,je)}),[je]),(0,c.useEffect)((function(){return ye(A),function(){ye.cancel()}}),[A]),(0,c.useEffect)((function(){if(st())return V([]),W(0),void ne(0);"my-ticket"===r?ct(de,Ce,Ne,je,$e,Ze,qe,Oe):dt(de,Ce,$e,Oe,je),ne(0)}),[de,Ce,Ne,je,$e,Ze,qe,Oe]);var nt,rt,it,at,lt,ot,ut,st=function(){return 0==Ce.length&&0==Ne.length&&0==je.length&&0==Object.keys($e).length&&0==Object.keys(qe).length&&0==Object.keys(Ze).length&&0==Oe.length&&!de},ct=function(e,t,n,r,i,a,l,o){t.length>0||n.length>0||r.length>0||Object.keys(i).length>0||Object.keys(l).length>0||Object.keys(a).length>0||o.length>0||!(0,y.isEmpty)(e)?ht(0,e,t,n,r,i,a,l,o):V([])},dt=function(e,t,n,r,i){i.length>0||t.length>0||Object.keys(n).length>0||r.length>0||!(0,y.isEmpty)(e)?vt(0,e,t,n,r,i):V([])},ft=(nt=(0,a.default)((function*(){try{var e=(yield pe.getServiceMenu(te,1e6,"",ue)).content.map((function(e){return{label:e.serviceName,value:e.id}}));_e(e)}catch(e){}})),function(){return nt.apply(this,arguments)}),pt=(rt=(0,a.default)((function*(e,t){try{var n={page:e,size:1e3,sort:"createdDate,desc"},r={serviceId:t||[]},a=yield pe.getListModelerByListServiceId(n,r);if(a){var l;K(null==a?void 0:a.totalPages);var o=null==a||null==(l=a.content)?void 0:l.map((function(e){return{label:e.name,value:e.id}}));Be(0===e?o:[].concat((0,i.default)(ze),(0,i.default)(o)))}}catch(e){}})),function(e,t){return rt.apply(this,arguments)}),yt=(it=(0,a.default)((function*(e){Q(0),yield pt(0,Oe),e()})),function(e){return it.apply(this,arguments)}),mt=(at=(0,a.default)((function*(){X<Y&&(yield pt(X+1,Oe),Q((function(e){return e+1})))})),function(){return at.apply(this,arguments)}),ht=(lt=(0,a.default)((function*(e,t,n,r,a,l,o,u,s){try{var c,d,f={createdBy:null!=(c=null==oe?void 0:oe.email)?c:"",myTicket:!0,textSearch:t,ticketStatus:n||[],priority:r||[],service:a||[],delayDateFrom:o.startDate||null,delayDateTo:o.endDate||null,endDate:l.endDate||null,estimateDateFrom:u.startDate||null,estimateDateTo:u.endDate||null,startDate:l.startDate||null,workflow:s||[]},p=yield pe.getTicketList(e,50,"createdDate,desc",ue,f);V(0===e?null==p?void 0:p.content:[].concat((0,i.default)(R),(0,i.default)(null==p?void 0:p.content))),W(Number(null==p||null==(d=p.page)?void 0:d.totalRecords))}catch(e){}finally{le(!1)}})),function(e,t,n,r,i,a,l,o,u){return lt.apply(this,arguments)}),vt=(ot=(0,a.default)((function*(e,t,n,r,a,l){try{var o={keyWord:t,terms:{status:n.length>0?n:[j.Status.processing,j.Status.accepted,j.Status.rejected,j.Status.voided]},from:r.startDate||null,to:r.endDate||null,id:null,field:"createdDate"};a&&a.length>0&&(o.terms.modelerId=a),l&&l.length>0&&(o.terms.serviceId=l);var u,s=yield pe.getTicketListFollow(e,50,"createdDate,desc",o,ue);s&&(V(0===e?null==s?void 0:s.content:[].concat((0,i.default)(R),(0,i.default)(null==s?void 0:s.content))),W(Number(null==s||null==(u=s.page)?void 0:u.totalRecords)))}catch(e){}finally{le(!1)}})),function(e,t,n,r,i,a){return ot.apply(this,arguments)}),gt=function(e){switch(e){case"status":return 0==Ce.length?f.Color.borderColor:"#048EC7";case"group":return 0===je.length?f.Color.borderColor:"#048EC7";case"priority":return 0==Ne.length?f.Color.borderColor:"#048EC7";case"modeler":return 0==Oe.length?f.Color.borderColor:"#048EC7";case"created_at":return Object.keys($e).length>0?"#048EC7":f.Color.borderColor;case"due_date":return Object.keys(qe).length>0?"#048EC7":f.Color.borderColor;case"late":return Object.keys(Ze).length>0?"#048EC7":f.Color.borderColor;default:return f.Color.borderColor}},St=function(e){switch(e.value){case"created_at":return bt($e,e.value);case"due_date":return bt(qe,e.value);case"late":return bt(Ze,e.value);case"group":return xt(je,e.value,e.value);case"priority":return jt(Ne,e.value);case"modeler":return xt(Oe,e.value,e.value);case"status":return jt(Ce,e.value);default:return""}},xt=function(e,n,r){return 0===(null==e?void 0:e.length)?t(`SR.${n}`):1===(null==e?void 0:e.length)?"modeler"===r?null==ze||null==(i=ze.find((function(t){return t.value===e[0]})))?void 0:i.label:null==Pe||null==(a=Pe.find((function(t){return t.value===e[0]})))?void 0:a.label:(null==e?void 0:e.length)>1?"modeler"===r?`${null==(l=ze.find((function(t){return t.value===e[0]})))?void 0:l.label} + ${(e.length-1).toString()}`:`${null==Pe||null==(o=Pe.find((function(t){return t.value===e[0]})))?void 0:o.label} + ${(e.length-1).toString()}`:void 0;var i,a,l,o},jt=function(e,n){return 0===(null==e?void 0:e.length)?t(`SR.${n}`):1===(null==e?void 0:e.length)?t(`TK.${e[0]}`):(null==e?void 0:e.length)>1?t(`TK.${e[0]}`)+" + "+((null==e?void 0:e.length)-1):void 0},bt=function(e,n){return 0===Object.keys(e).length?t(`SR.${n}`):e.endDate?`${C.DateUtils.convertDateToDDMMYYYY(e.startDate)} - ${C.DateUtils.convertDateToDDMMYYYY(e.endDate)}`:`${C.DateUtils.convertDateToDDMMYYYY(e.startDate)} - now`};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(s.StatusBar,{barStyle:"dark-content",backgroundColor:f.Color.Transparent}),(0,P.jsx)(s.TouchableWithoutFeedback,{onPress:function(){return s.Keyboard.dismiss()},children:(0,P.jsx)(u.SafeAreaView,{edges:["top"],style:{backgroundColor:f.Color.BgPrimary,flex:1},children:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(o.Input,{style:{backgroundColor:f.Color.BgPrimary,borderWidth:0},textStyle:{color:"#fff"},placeholderTextColor:"#fff",ref:F,placeholder:t("SR.searchTicket"),value:A,status:"basic",autoFocus:!0,allowFontScaling:!1,onChangeText:function(e){return L(e)},accessoryLeft:(0,P.jsx)(s.TouchableOpacity,{onPress:function(){return _.goBack()},children:(0,P.jsx)(o.Icon,{name:"arrow-back",fill:"#ffffff"})}),accessoryRight:A?(0,P.jsx)(s.TouchableOpacity,{onPress:function(){return L("")},children:(0,P.jsx)(o.Icon,{name:"close-outline",fill:"#ffffff"})}):void 0}),(0,P.jsx)(o.Divider,{}),(0,P.jsxs)(o.Layout,{style:{flex:1,paddingBottom:M.bottom,backgroundColor:"#fff"},level:"1",children:[(0,P.jsx)(s.View,{children:(0,P.jsx)(s.ScrollView,{showsHorizontalScrollIndicator:!1,contentContainerStyle:{columnGap:10,padding:10},horizontal:!0,children:("my-ticket"===r?x.listFilter:x.listFilter.filter((function(e){return"status"===e.value||"created_at"===e.value||"group"===e.value||"modeler"===e.value}))).map((function(e){return(0,P.jsxs)(s.TouchableOpacity,{onPress:function(){ge(e.value)},style:[{borderColor:gt(e.value)},T.default.ctnFilter],children:[(0,P.jsx)(g.default,{children:St(e)}),(0,P.jsx)(o.Icon,{width:16,height:16,name:ve===e.value?"chevron-up-outline":"chevron-down-outline"})]},e.label)}))})}),!st()&&(0,P.jsx)(o.List,{style:{backgroundColor:"#fff",flex:1},showsVerticalScrollIndicator:!1,data:R,renderItem:function(e){var n=e.item,i=(e.index,"my-ticket"===r?m.dataListStatusTicket.find((function(e){return e.status===n.ticketStatus})):D.dataListStatusTicketFollow.find((function(e){return e.status===n.status})));return(0,P.jsx)(o.ListItem,{onPress:function(){var e;_.navigate(f.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:"my-ticket"===r?null==n?void 0:n.id:null==n||null==(e=n.resourceId)?void 0:e.substr(4),email:"my-ticket"===r?n.createdBy:n.owner,status:"my-ticket"===r?n.ticketStatus:n.status,selectTabBottom:"my-ticket"===r?1:2,recipientDetailsId:n.implementId,userTaskId:n.recipientId})},children:(0,P.jsxs)(s.View,{style:T.default.ctnMain,children:[(0,P.jsxs)(s.View,{style:T.default.ctnBody,children:[(0,P.jsx)(o.Icon,{width:30,height:30,fill:null==i?void 0:i.color,name:"credit-card-outline"}),(0,P.jsxs)(s.View,{style:{flex:1,gap:4},children:[(0,P.jsx)(g.default,{style:{fontFamily:f.Font.InterSemiBold600,fontSize:16},children:`${"my-ticket"===r?n.title:n.resourceName}`}),(0,P.jsx)(g.default,{children:""+("my-ticket"===r?`${t("SR.modeler")}: ${n.serviceName||"---"}`:`${t("TK.step")}: `+n.notionName)}),(0,P.jsxs)(s.View,{style:{flexDirection:"row",alignItems:"center",justifyContent:tt>=I.TYPE_SCREEN.mobile?"flex-start":"space-between",columnGap:tt>=I.TYPE_SCREEN.mobile?20:0},children:[(0,P.jsx)(g.default,{style:{fontStyle:"italic",fontSize:12},children:`${t("SR.created_at")}: `+C.DateUtils.convertDateToDDMMYYYY_H_M(n.createdDate)}),(0,P.jsx)(s.View,{style:{backgroundColor:null==i?void 0:i.bgColor,borderRadius:4,paddingHorizontal:4,paddingVertical:2,minWidth:100},children:(0,P.jsx)(g.default,{style:{color:null==i?void 0:i.color,fontSize:12,textAlign:"center"},children:t(`TK.${"my-ticket"===r?n.ticketStatus:n.status}`)})})]})]})]}),(0,P.jsx)(s.View,{children:(0,P.jsx)(o.Icon,{width:20,height:20,name:"chevron-right-outline"})})]})})},refreshing:ae,onRefresh:function(){ne(0),"my-ticket"===r?ht(1,de,Ce,Ne,je,$e,Ze,qe,Oe):vt(1,de,Ce,$e,Oe,je)},onEndReached:function(){R.length<U&&(ne(te+1),"my-ticket"===r?ht(te+1,de,Ce,Ne,je,$e,Ze,qe,Oe):vt(te+1,de,Ce,$e,Oe,je))},onEndReachedThreshold:.5,ListEmptyComponent:function(){return(0,P.jsx)(s.View,{style:{margin:10,flex:1},children:(0,P.jsx)(g.default,{children:t("CM.emptyData")})})}})]})]})})}),(0,P.jsx)(v.default,{isVisible:"status"===ve,title:t("SR.selectStatus"),onClose:function(){return ge("")},renderContent:(ut="my-ticket"===r?S.dataStatus:[{label:"TK.processing",value:j.Status.processing},{label:"TK.completed",value:j.Status.accepted},{label:"TK.voided",value:j.Status.voided},{label:"TK.rejected",value:j.Status.rejected},{label:"TK.overdue",value:j.Status.overdue}],(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(w.default,{isi18n:!0,data:ut,dataSelect:Ce,setDataSelect:Te})}))}),(0,P.jsx)(v.default,{isVisible:"priority"===ve,title:t("HM.priotitySelect"),onClose:function(){return ge("")},renderContent:(0,P.jsx)(w.default,{isi18n:!0,data:S.dataPrioritySelect,dataSelect:Ne,setDataSelect:He})}),(0,P.jsx)(v.default,{isVisible:"group"===ve,title:t("SR.selectGroup"),onClose:function(){return ge("")},renderContent:(0,P.jsx)(w.default,{data:Pe,dataSelect:je,setDataSelect:be})}),"modeler"===ve&&(0,P.jsx)(v.default,{isVisible:"modeler"===ve,title:t("SR.selectService"),onClose:function(){return ge("")},renderContent:(0,P.jsx)(w.default,{data:ze,dataSelect:Oe,setDataSelect:Ee,isSearch:!0,placeholder:t("SR.selectService"),onRefresh:yt,getMore:mt})}),(0,P.jsx)(b.default,{onClose:function(){return ge("")},visible:"created_at"===ve,onConfirm:Ge,rangeDate:$e}),(0,P.jsx)(b.default,{onClose:function(){return ge("")},visible:"due_date"===ve,onConfirm:Je,rangeDate:qe}),(0,P.jsx)(b.default,{onClose:function(){return ge("")},visible:"late"===ve,onConfirm:et,rangeDate:Ze})]})}},95556:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841);t.default=r.StyleSheet.create({backdrop:{backgroundColor:"rgba(0, 0, 0, 0.5)"},ctnMain:{flexDirection:"row",alignItems:"center",flex:1,gap:10},ctnBody:{flex:1,flexDirection:"row",alignItems:"center",gap:10},ctnFilter:{flexDirection:"row",columnGap:6,alignItems:"center",justifyContent:"center",borderWidth:1,paddingHorizontal:10,paddingVertical:6,borderRadius:6}})},86288:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=r(n(24541)),u=r(n(88420)),s=n(41995),c=n(35708),d=n(46317),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),p=n(32207),y=n(68289),m=n(40851),h=n(12638),v=r(n(77389)),g=n(2884),S=r(n(76644)),x=r(n(93238)),j=n(88e3),b=n(20880),w=n(47671);function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}var C=[{id:1,key:"TK.editAction",value:"edit",icon:(0,w.jsx)(d.IconEdit,{width:(0,s.SizeDP)(20),height:(0,s.SizeDP)(20)})},{id:2,key:"TK.deleteComment",value:"trash",icon:(0,w.jsx)(d.IconTrash,{width:(0,s.SizeDP)(20),height:(0,s.SizeDP)(20)})}],T=f.default.memo((function(e){var t,n,r=e.data,d=e.user,D=e.setComment,I=e.deleteComment,k=e.allComments,P=e.onReplyClick,_=e.level,M=e.listDataUser,F=(0,g.useTranslation)().t,O=(0,f.useState)(!1),E=(0,a.default)(O,2),R=E[0],V=E[1],z=(0,f.useState)(!1),B=(0,a.default)(z,2),A=B[0],L=B[1],N=(0,f.useState)(!1),H=(0,a.default)(N,2),U=H[0],W=H[1],$=(0,f.useState)(!1),G=(0,a.default)($,2),Y=G[0],K=G[1],q=(0,f.useState)(""),J=(0,a.default)(q,2),X=J[0],Q=J[1],Z=(0,f.useState)(d),ee=(0,a.default)(Z,1)[0],te=(0,m.useReviewServices)(),ne=(0,h.useAppSelector)((function(e){return e.common})).accessToken,re=(0,h.useAppSelector)((function(e){return e.account})).dataAccount,ie=k.get(r.id)||[],ae=function(){W(!U)},le=(t=(0,i.default)((function*(){try{K(!0);var e=new FormData;e.append("keyName",r.attachment),e.append("bucketName",r.bucketName);var t=yield te.viewFile(e,ne);1==(null==t?void 0:t.code)?(Q(t.message),L(!0)):l.Alert.alert(F("CM.info"),F("CM.error"))}catch(e){}finally{K(!1)}})),function(){return t.apply(this,arguments)}),oe=(n=(0,i.default)((function*(){try{K(!0);var e=`${(0,j.getConfig)().BASE_URL}/services/erequest/api/comments/download-file?commentId=${r.id}`,t=yield c.CommonUtils.downloadFile(r.fileName,e);"success"===t.status?v.default.show({type:"success",text1:F("CM.downloadSuccess")}):"error"===t.status&&v.default.show({type:"error",text1:F("CM.downloadFail")})}catch(e){v.default.show({type:"error",text1:F("CM.downloadFail")})}finally{K(!1)}})),function(){return n.apply(this,arguments)}),ue=function(){V(!R)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(l.View,{style:u.default.ctnMain,children:[(0,w.jsx)(l.View,{style:u.default.ctnImage,children:(0,w.jsx)(l.Image,{width:(0,s.SizeDP)(24),height:(0,s.SizeDP)(24),borderRadius:(0,s.SizeDP)(12),source:{uri:(null==ee?void 0:ee.imageUrl)||b.String.DEFAULT_IMAGE}})}),(0,w.jsxs)(l.View,{style:{flex:1},children:[(0,w.jsxs)(l.View,{style:u.default.ctnSecond,children:[(0,w.jsx)(o.default,{style:u.default.ctnName,children:null!=ee&&ee.personalName?(null==ee?void 0:ee.personalName)+"• ":"---"}),(0,w.jsx)(o.default,{style:u.default.ctnEmail,children:null==ee?void 0:ee.email})]}),(0,w.jsx)(o.default,{style:u.default.ctnTime,children:c.DateUtils.convertDateToDDMMYYYY_H_M(r.lastModifiedDate)}),function(e){var t=(0,y.decodeUnicodeToEmoji)(e);if(!t)return r.fileName?(0,w.jsxs)(l.View,{style:u.default.ctnViewFile,children:[(0,w.jsxs)(l.Pressable,{onPress:le,style:u.default.styleFile,children:[(0,w.jsx)(o.default,{numberOfLines:1,style:u.default.content,children:""+r.fileName}),Y&&(0,w.jsx)(p.Spinner,{size:"tiny"})]}),(0,w.jsx)(l.Pressable,{onPress:oe,children:(0,w.jsx)(p.Icon,{name:"download-outline",width:24,height:24})})]}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(o.default,{style:u.default.content,children:"'---'"})});if(!t.includes('class="user_tag"'))return r.fileName?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.default,{style:u.default.content,children:(0,y.decodeUnicodeToEmoji)(t)}),(0,w.jsxs)(l.View,{style:u.default.ctnViewFile,children:[(0,w.jsxs)(l.Pressable,{onPress:le,style:u.default.styleFile,children:[(0,w.jsx)(o.default,{numberOfLines:1,style:u.default.content,children:""+r.fileName}),Y&&(0,w.jsx)(p.Spinner,{size:"tiny"})]}),(0,w.jsx)(l.Pressable,{onPress:oe,children:(0,w.jsx)(p.Icon,{name:"download-outline",width:24,height:24})})]})]}):(0,w.jsx)(l.View,{style:u.default.bodyView,children:(0,w.jsx)(o.default,{style:u.default.content,children:(0,y.decodeUnicodeToEmoji)(t)})});if(t.includes('class="user_tag"')){var n=t.split("\n").map((function(e){return(0,y.splitStringWithSpans)(e).map((function(e){var t,n;return e.includes('class="user_tag"')?`${null==(t=(0,y.extractSpanList)(e))||null==(n=t[0])?void 0:n.textContent}`:e})).map((function(e,t){return e.startsWith("@")?(0,w.jsx)(o.default,{style:u.default.tag,children:`${e.slice(1)}`}):(0,w.jsx)(o.default,{style:u.default.content,children:`${e}`})}))}));return(0,w.jsx)(l.View,{style:u.default.bodyView,children:n.map((function(e,t){return(0,w.jsx)(l.View,{style:u.default.ctnViewGroup,children:e.map((function(e,t){return(0,w.jsx)(l.View,{children:e},t)}))},t)}))})}}(r.content),(0,w.jsxs)(l.View,{style:u.default.ctnReplyView,children:[(0,w.jsx)(l.Pressable,{onPress:function(){return function(e){P("reply",e),W(!0)}(r)},hitSlop:(0,s.SizeDP)(15),children:(0,w.jsx)(o.default,{style:u.default.ctnReply,children:F("CM.reply")})}),ie.length>0&&(0,w.jsx)(w.Fragment,{children:U?(0,w.jsx)(l.Pressable,{onPress:ae,style:u.default.ctnToggleShow,children:(0,w.jsx)(o.default,{style:{fontSize:12},children:F("CM.thugon")})}):(0,w.jsxs)(l.Pressable,{onPress:ae,style:u.default.ctnToggleShow,children:[(0,w.jsx)(p.Icon,{fill:"#00204DE5",name:"message-circle-outline",width:16,height:16}),(0,w.jsxs)(o.default,{style:{fontSize:12},children:[F("CM.view")," ",null==ie?void 0:ie.length," ",F("CM.comment")]})]})})]})]}),(null==ee?void 0:ee.email)===re.email&&(0,w.jsx)(l.View,{style:{},children:(0,w.jsx)(p.OverflowMenu,{anchor:function(){return(0,w.jsx)(l.TouchableOpacity,{onPress:ue,children:(0,w.jsx)(p.Icon,{width:20,height:20,name:"more-vertical"})})},visible:R,onBackdropPress:ue,children:C.map((function(e){return(0,w.jsx)(p.MenuItem,{accessoryLeft:(0,w.jsx)(p.Icon,{name:e.value}),title:F(e.key),onPress:function(){return function(e){switch(e.value){case"edit":ue(),P("edit",r);break;case"trash":ue(),I(r.id)}}(e)}},e.value)}))})})]}),U&&(0,w.jsx)(l.View,{style:{marginLeft:30,marginTop:10},children:null==ie?void 0:ie.map((function(e){return(0,w.jsx)(T,{data:e,user:null==M?void 0:M.find((function(t){return t.email===e.createdBy})),listDataUser:M,setComment:D,deleteComment:I,allComments:k,onReplyClick:P,level:_+1},e.id)}))}),(0,w.jsx)(S.default,{isVisible:A,children:(0,w.jsxs)(l.View,{style:u.default.ctnView,children:[(0,w.jsx)(l.View,{style:u.default.ctnBodyView,children:(0,w.jsx)(l.Pressable,{onPress:function(){return L(!1)},children:(0,w.jsx)(p.Icon,{name:"close",width:24,height:24})})}),(0,w.jsx)(l.View,{style:{flex:1},children:X&&(0,w.jsx)(x.default,{startInLoadingState:!0,source:{uri:X}})})]})})]})}));t.default=T},88420:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnImage:{width:(0,i.SizeDP)(24),height:(0,i.SizeDP)(24),borderRadius:(0,i.SizeDP)(12),overflow:"hidden",backgroundColor:a.Color.BgPrimary},ctnTime:{color:"#00204DB2",fontSize:i.default.FontTinier,fontFamily:a.Font.InterRegular400},ctnEmail:{color:"#00204DB2",fontSize:i.default.FontTiny,fontFamily:a.Font.InterSemiBold600},ctnName:{fontSize:i.default.FontTiny,color:"#00204D",fontFamily:a.Font.InterSemiBold600},ctnMain:{flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",columnGap:"ios"==r.Platform.OS?16:12,marginBottom:10},ctnSecond:{flex:1,flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",flexWrap:"wrap"},ctnReply:{color:"#366AE2",fontSize:i.default.FontTiny,fontFamily:a.Font.InterMedium500},content:{color:"#00204DE5",fontSize:i.default.FontSmallest,fontFamily:a.Font.InterRegular400},tag:{color:"#62248F",fontSize:i.default.FontSmall,fontFamily:a.Font.InterRegular400},contentTag:{color:"#00204DE5",fontSize:i.default.FontSmallest,fontFamily:a.Font.InterRegular400},bodyView:{marginVertical:8},styleFile:{paddingHorizontal:10,paddingVertical:6,backgroundColor:"#e8e5e5de",borderRadius:8,marginVertical:3,maxWidth:130,justifyContent:"space-between",alignItems:"center",flexDirection:"row"},ctnViewFile:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8},ctnReplyView:{flexDirection:"row-reverse",alignItems:"center",justifyContent:"flex-end",columnGap:10},ctnToggleShow:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:6,paddingVertical:3},ctnView:{backgroundColor:"#fff",height:"100%"},ctnBodyView:{justifyContent:"flex-end",alignItems:"flex-end",marginRight:16,marginBottom:10},ctnViewGroup:{flexDirection:"row",alignItems:"center",columnGap:8,flexWrap:"wrap"}})},68289:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.extractSpanList=t.encodeEmojiToUnicode=t.decodeUnicodeToEmoji=void 0,t.filterCommentsByParentId=function(e){var t=new Map;return e.forEach((function(e){var n=null===e.commentId?"root":e.commentId;t.has(n)||t.set(n,[]),t.get(n).push(e)})),t},t.splitStringWithSpans=void 0;t.decodeUnicodeToEmoji=function(e){return e.replace(/\\u\{([0-9A-F]{1,6})\}/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/\\u([0-9A-F]{4})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))}))},t.encodeEmojiToUnicode=function(e){return e.replace(/([\uD800-\uDBFF][\uDC00-\uDFFF])|([^\n])/g,(function(e,t,n){return t?"\\u{"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536).toString(16).toUpperCase()+"}":n?"\\u"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0"):e}))},t.extractSpanList=function(e){for(var t,n=/<span(?: [^>]*id="([^"]*)")?(?: [^>]*data-user-id="([^"]*)")?(?: [^>]*data-email="([^"]*)")?(?: [^>]*data-org-in="([^"]*)")?(?: [^>]*data-cust-id="([^"]*)")?[^>]*>(.*?)<\/span>/g,r=[];null!==(t=n.exec(e));)r.push({id:t[1],userId:t[2],email:t[3],orgIn:t[4],custId:t[5],textContent:t[6].trim()});return r},t.splitStringWithSpans=function(e){var t=/<span[^>]*>.*?<\/span>/g,n=e.match(t),r=e.split(t),i=[];return r.forEach((function(e,t){e.trim()&&i.push(e.trim()),n&&n[t]&&i.push(n[t])})),i}},55087:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),u=n(14740),s=n(41995),c=n(46317),d=n(87841),f=r(n(7259)),p=r(n(86288)),y=n(12638),m=n(68289),h=r(n(31263)),v=n(11671),g=n(32207),S=r(n(43184)),x=n(2884),j=r(n(24541)),b=n(20880),w=n(45335),D=n(47671);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}t.default=function(e){var t=e.onClose,n=(0,x.useTranslation)().t,r=(0,o.useState)([]),C=(0,l.default)(r,2),T=C[0],I=C[1],k=(0,o.useState)([]),P=(0,l.default)(k,2),_=P[0],M=P[1],F=(0,o.useState)([]),O=(0,l.default)(F,2),E=O[0],R=O[1],V=(0,o.useState)([]),z=(0,l.default)(V,2),B=z[0],A=z[1],L=(0,o.useState)(""),N=(0,l.default)(L,2),H=N[0],U=N[1],W=(0,o.useState)(!1),$=(0,l.default)(W,2),G=$[0],Y=$[1],K=(0,o.useState)(!1),q=(0,l.default)(K,2),J=q[0],X=q[1],Q=(0,o.useState)(),Z=(0,l.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,o.useState)(null),re=(0,l.default)(ne,2),ie=re[0],ae=re[1],le=(0,o.useState)(!1),oe=(0,l.default)(le,2),ue=oe[0],se=oe[1],ce=(0,o.useState)("new"),de=(0,l.default)(ce,2),fe=de[0],pe=de[1],ye=(0,o.useState)(!1),me=(0,l.default)(ye,2),he=me[0],ve=me[1],ge=(0,o.useState)("loading"),Se=(0,l.default)(ge,2),xe=Se[0],je=Se[1],be=(0,o.useState)([]),we=(0,l.default)(be,2),De=we[0],Ce=we[1],Te=(0,o.useRef)(null),Ie=(0,y.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,ke=(0,y.useAppSelector)((function(e){return e.account})).dataAccount,Pe=(0,v.useTicketServices)(),_e=function(){return se(!ue)};(0,u.useFocusEffect)((0,o.useCallback)((function(){ze()}),[]));var Me,Fe,Oe,Ee,Re,Ve,ze=(Me=(0,a.default)((function*(){try{je("loading");var e={userTaskId:"all",ticketId:Ie.id,sort:"lastModifiedDate,desc",page:0,size:1e5},t=yield Pe.getListComments(e);if(t&&t.content){I(t.content);var n=t.content.map((function(e){return e.createdBy})),r=ke.email||"",a=(0,i.default)(new Set([].concat((0,i.default)(n),[r]))).filter((function(e){return e.length>0})),l=yield Pe.getMultiLoginAccount(a);R(l||[]),yield $e()}}catch(e){console.log("Error get list comments:",e),je("error")}finally{X(!1)}})),function(){return Me.apply(this,arguments)}),Be=(0,o.useMemo)((function(){var e=new Map;return T.forEach((function(t){var n,r=null!=(n=t.commentId)?n:"root",a=e.get(r)||[];e.set(r,[].concat((0,i.default)(a),[t]))})),e}),[T]),Ae=function(e){var t=e.split(" "),n=t.filter((function(e){return!e.startsWith("@")})).join(" "),r=t.filter((function(e){return e.startsWith("@")})).map((function(e){var t,n,r;return`<span id="#${(new Date).getTime()}" class="user_tag" contenteditable="false" data-user-id="${null!=(t=ke.id)?t:5845}" data-email="${e.slice(1)}" data-org-in="${null!=(n=ke.orgIn)?n:"/1833/5390/5392"}" data-cust-id="${null!=(r=ke.custId)?r:1833}">${e}</span>`})).join(" ");return(0,m.encodeEmojiToUnicode)(`${r} ${n}`)},Le=(Fe=(0,a.default)((function*(e,t,n){try{var r={content:Ae(H),userTaskId:"all",ticketId:Ie.id,name:`${ke.firstName} ${ke.lastName}`,createdBy:ke.email,commentType:"comment",avatar:ke.imageUrl,commentId:e,userId:ke.id,orgIn:ke.orgIn,custId:ke.custId,contactDTO:De,isPrivate:n},a=new FormData;a.append("uploadFile",t?{uri:null==t?void 0:t.path,type:null==t?void 0:t.mime,name:null==t?void 0:t.path.split("/").pop()}:null),a.append("commentJson",JSON.stringify(r));var l=yield Pe.sendComment(a);l&&(Ce([]),I([l].concat((0,i.default)(T))),te(null),d.Keyboard.dismiss())}catch(e){}})),function(e,t,n){return Fe.apply(this,arguments)}),Ne=(0,o.useCallback)((0,a.default)((function*(){if("reply"===fe||"new"===fe){if(H.trim()||ee){var e=ie&&null!=ie&&ie.commentId?null==ie?void 0:ie.commentId:null==ie?void 0:ie.id;yield Le(e,ee,G)}}else"edit"===fe&&H.trim()&&ie&&(yield We(null==ie?void 0:ie.id,null==ie?void 0:ie.commentId,ee,G));U(""),pe("new"),ae(null)})),[H,fe,ie,ee,G]),He=(Oe=(0,a.default)((function*(e){try{(yield Pe.deleteComment(e))&&Ue(e)}catch(e){}})),function(e){return Oe.apply(this,arguments)}),Ue=function(e){I((function(t){return null==t?void 0:t.filter((function(t){return t.id!==e}))}))},We=(Ee=(0,a.default)((function*(e,t,n,r){try{var i=Object.assign({},ie,{content:Ae(H),isPrivate:r,lastModifiedDate:(new Date).toISOString()}),a=new FormData;a.append("uploadFile",n?{uri:null==n?void 0:n.path,type:null==n?void 0:n.mime,name:null==n?void 0:n.path.split("/").pop()}:null),a.append("commentJson",JSON.stringify(i));var l=yield Pe.updateComment(a);l&&(I((function(t){return t.map((function(t){return t.id===e?l:t}))})),d.Keyboard.dismiss())}catch(e){}})),function(e,t,n,r){return Ee.apply(this,arguments)}),$e=(Re=(0,a.default)((function*(){try{var e=yield Pe.getListAclUser(Ie.id);if(e){var t=e.map((function(e){var t;return null==e||null==(t=e.personal)?void 0:t.email}))||[],n=yield Pe.getMultiLoginAccount((0,i.default)(new Set(t)));n&&M(n)}}catch(e){console.log("Error get list users:",e)}finally{je("done")}})),function(){return Re.apply(this,arguments)}),Ge=function(e){U(e);var t,n=e.split(" ").pop();if(null!=n&&n.startsWith("@")&&n.length>0)if((null==n||null==(t=n.slice(1))?void 0:t.length)<=0)A(_),ve(!0);else{var r,i=null==n||null==(r=n.slice(1))?void 0:r.toLowerCase();A(_.filter((function(e){var t;return null==e||null==(t=e.email)?void 0:t.toLowerCase().includes(i)}))),ve(!0)}else ve(!1)},Ye=(0,o.useCallback)((function(e,t){var n;if(pe(e),"reply"===e){var r=_.find((function(e){return e.email==t.createdBy})),a={id:null==r?void 0:r.resourceId,name:null==r?void 0:r.personalName,email:null==r?void 0:r.email,orgIn:null==r?void 0:r.orgIn,custId:null==r?void 0:r.custId,haveAvatar:!(null==r||!r.imageUrl),avatar:null==r?void 0:r.imageUrl,disabled:(null==r?void 0:r.resourceId)===ke.id||De.some((function(e){return(null==e?void 0:e.id)===(null==r?void 0:r.resourceId)}))};Ce((function(e){return[].concat((0,i.default)(e),[a])})),Ge(`@${t.createdBy} `)}else Ge(Ke((0,m.decodeUnicodeToEmoji)(t.content)));ae(t),null==(n=Te.current)||n.focus()}),[]),Ke=function(e){return(0,m.splitStringWithSpans)(e).map((function(e){var t,n;return e.includes('class="user_tag"')?`${null==(t=(0,m.extractSpanList)(e))||null==(n=t[0])?void 0:n.textContent}`:e})).join(" ")},qe=(Ve=(0,a.default)((function*(){try{var e=yield h.default.ChoosePhoto({width:500,height:500});te(e)}catch(e){console.log(e)}})),function(){return Ve.apply(this,arguments)});return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(d.KeyboardAvoidingView,{keyboardVerticalOffset:50,behavior:"ios"===d.Platform.OS?"padding":"height",style:{flex:1},children:(0,D.jsx)(d.TouchableWithoutFeedback,{children:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(S.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:n("TK.comment"),onPressIconLeft:t}),(0,D.jsxs)(d.View,{style:{flex:1,padding:16},children:[(0,D.jsxs)(d.View,{style:{flex:1,position:"relative"},children:["done"===xe&&(0,D.jsx)(d.FlatList,{style:{flex:1},refreshing:J,onRefresh:function(){X(!0),je("loading"),ze()},showsVerticalScrollIndicator:!1,contentContainerStyle:{rowGap:(0,s.SizeDP)(16)},data:(null==Be?void 0:Be.get("root"))||[],renderItem:function(e){var t=e.item;return(0,D.jsx)(p.default,{data:t,user:E.find((function(e){return e.email===t.createdBy})),listDataUser:E,setComment:U,deleteComment:He,allComments:Be,onReplyClick:Ye,level:0})},ListEmptyComponent:function(){return(0,D.jsxs)(d.View,{style:f.default.emptyComment,children:[(0,D.jsx)(g.Icon,{name:"message-circle-outline",width:30,height:30}),(0,D.jsx)(j.default,{style:{textAlign:"center"},children:n("TK.commentDescription")})]})}}),"loading"===xe&&(0,D.jsx)(g.Spinner,{size:"small"}),"error"===xe&&(0,D.jsx)(d.View,{children:(0,D.jsx)(j.default,{children:n("CM.emptyData")})}),he&&B.length>0&&(0,D.jsx)(d.View,{style:f.default.ctnModalListUser,children:(0,D.jsx)(d.View,{style:f.default.bodyModalListUser,children:(0,D.jsx)(g.List,{keyboardShouldPersistTaps:"handled",data:B,renderItem:function(e){var t=e.item;return(0,D.jsx)(g.ListItem,{onPress:function(){return function(e){var t,n={id:e.resourceId,name:e.personalName,email:e.email,orgIn:e.orgIn,custId:e.custId,haveAvatar:!!e.imageUrl,avatar:e.imageUrl,disabled:e.resourceId===ke.id||De.some((function(t){return t.id===e.resourceId}))};Ce((function(e){return[].concat((0,i.default)(e),[n])}));var r=H.split(" ");r[r.length-1]=`@${e.email} `,U(r.join(" ")),ve(!1),null==(t=Te.current)||t.focus()}(t)},children:(0,D.jsxs)(d.View,{style:f.default.ctnViewTag,children:[(0,D.jsx)(d.Image,{width:24,height:24,borderRadius:12,source:{uri:(null==t?void 0:t.imageUrl)||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,D.jsxs)(d.View,{children:[(0,D.jsx)(j.default,{style:{fontSize:14,fontFamily:b.Font.InterSemiBold600},children:t.personalName}),(0,D.jsx)(j.default,{children:t.email})]})]})})}})})})]}),(0,D.jsxs)(d.View,{style:[f.default.ctnSend],children:[(0,D.jsxs)(d.View,{style:f.default.ctnImg,children:[ee&&(0,D.jsx)(D.Fragment,{children:ee.mime.includes("image")&&(0,D.jsxs)(d.View,{style:f.default.ctnImage,children:[(0,D.jsx)(d.Image,{style:f.default.image,source:{uri:ee.sourceURL}}),(0,D.jsx)(d.Pressable,{onPress:function(){return te(null)},style:f.default.closeImage,children:(0,D.jsx)(g.Icon,{width:12,height:12,name:"close-outline"})})]})}),(0,D.jsxs)(d.View,{style:f.default.ctnInput,children:[(0,D.jsx)(d.TextInput,{ref:Te,style:{padding:(0,s.SizeDP)(12),flex:1},allowFontScaling:!1,multiline:!0,placeholder:n("new"===fe?"TK.addComment":"reply"===fe?"TK.replyComment":"TK.editComment"),value:H,onChangeText:Ge,onFocus:function(e){return t=e.nativeEvent.text,void(null!=(n=null==t?void 0:t.split(" ").pop())&&n.startsWith("@")&&ve(!0));var t,n}}),(0,D.jsx)(d.TouchableOpacity,{onPress:qe,hitSlop:(0,s.SizeDP)(15),children:(0,D.jsx)(c.IconGetRelative,{width:(0,s.SizeDP)(20),height:(0,s.SizeDP)(20)})}),(0,D.jsx)(d.Pressable,{style:{marginHorizontal:12},onPress:function(){Y(!G),_e()},children:(0,D.jsx)(g.Icon,{width:20,height:20,fill:"#39AC6D",name:G?"people-outline":"globe-outline"})}),(0,D.jsx)(w.Snackbar,{style:{marginBottom:20},onDismiss:_e,visible:ue,duration:1e3,children:n(G?"TK.commentPrivate":"TK.commentPublic")})]})]}),(0,D.jsx)(d.TouchableOpacity,{onPress:Ne,hitSlop:(0,s.SizeDP)(15),children:(0,D.jsx)(c.IconSend,{width:(0,s.SizeDP)(24),height:(0,s.SizeDP)(24)})})]})]})]})})})})}},7259:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995);t.default=r.StyleSheet.create({ctnSend:{flexDirection:"row",alignItems:"center",columnGap:(0,i.SizeDP)(10),zIndex:1,backgroundColor:"#fff",paddingVertical:10},ctnImage:{marginLeft:4,marginTop:6,position:"relative",width:100,height:100},closeImage:{position:"absolute",top:-4,right:-4,padding:2,borderRadius:20,backgroundColor:"#fff",borderWidth:.5,borderColor:"#00358090"},image:{width:100,height:100,borderRadius:(0,i.SizeDP)(8)},ctnImg:{flex:1,borderWidth:(0,i.SizeDP)(.5),borderColor:"#00358026",borderRadius:(0,i.SizeDP)(8)},backdrop:{backgroundColor:"rgba(0, 0, 0, 0.5)"},menu:{width:250,maxHeight:300,position:"absolute",borderRadius:8,overflow:"hidden"},menuTitle:{padding:8,fontWeight:"bold"},ctnModalListUser:{alignItems:"center",justifyContent:"center",width:"100%",bottom:0,position:"absolute"},bodyModalListUser:{width:"90%",maxHeight:180,borderRadius:8,overflow:"hidden",borderWidth:.5,borderColor:"#a2b3cfe6"},ctnInput:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ctnViewTag:{flexDirection:"row",alignItems:"center",columnGap:10,marginLeft:10},emptyComment:{margin:10,flex:1,alignItems:"center",rowGap:5}})},84478:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(n(21527));var i=n(87841),a=n(2543),l=n(32207),o=n(14740),u=r(n(24541)),s=n(47671);t.default=function(e){var t=e.style,n=e.onPressIconLeft,r=e.viewIconLeft,c=void 0===r?"arrow-back":r,d=e.title,f=void 0===d?"quangnh39":d,p=e.contentStyle,y=e.renderContentRight,m=e.appearance,h=void 0===m?"default":m,v=e.alignment,g=void 0===v?"center":v,S=e.subtitle,x=void 0===S?"":S,j=e.fillIconBackLeft,b=(0,o.useNavigation)(),w=function(){(0,a.isUndefined)(n)?b.goBack():n()};return(0,s.jsx)(i.View,{style:[t],children:(0,s.jsx)(l.TopNavigation,{title:function(e){return(0,s.jsx)(u.default,Object.assign({},e,{children:f}))},appearance:h,accessoryLeft:function(){return(0,s.jsx)(l.TopNavigationAction,{hitSlop:15,onPress:w,icon:(0,s.jsx)(l.Icon,{name:c,fill:j})})},accessoryRight:y,alignment:g,subtitle:x,style:[p]})})}},69107:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),o=n(87841),u=n(32207),s=r(n(33489)),c=r(n(24541)),d=n(20880),f=n(35708),p=n(47671);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}t.default=function(e){var t=e.item,n=(0,l.useState)([t.id]),r=(0,a.default)(n,2),y=r[0],m=r[1],h=y.includes(t.id);return(0,p.jsxs)(o.View,{style:s.default.processContainer,children:[(0,p.jsxs)(o.TouchableOpacity,{onPress:function(){return e=t.id,void(y.includes(e)?m(y.filter((function(t){return t!==e}))):m([].concat((0,i.default)(y),[e])));var e},style:s.default.processHeader,children:[(0,p.jsx)(u.Icon,{name:h?"arrow-ios-downward-outline":"arrow-ios-forward-outline",fill:"#FC6B03",width:16,height:16}),(0,p.jsx)(c.default,{style:s.default.processTitle,children:t.notionName})]}),h&&(0,p.jsx)(p.Fragment,{children:t.reason&&(0,p.jsx)(o.View,{style:s.default.expandedContainer,children:(0,p.jsxs)(o.View,{style:s.default.userRow,children:[(0,p.jsx)(o.Image,{style:s.default.avatar,source:{uri:null!=t&&t.avatar?`${d.String.PREFIX_IMG_BASE64}${t.avatar}`:d.String.DEFAULT_IMAGE}}),(0,p.jsxs)(o.View,{style:s.default.userInfo,children:[t.userName&&t.email&&(0,p.jsxs)(o.View,{style:s.default.userDetails,children:[(0,p.jsx)(c.default,{style:s.default.commentUser,children:t.userName}),(0,p.jsx)(c.default,{style:s.default.commentEmail,children:t.email?`(${t.email.split("@")[0]})`:""}),(0,p.jsx)(c.default,{style:s.default.commentTime,children:t.signDate?` • ${f.DateUtils.convertDateToDDMMYYYY_H_M(t.signDate)}`:""})]}),(0,p.jsx)(c.default,{style:s.default.commentText,children:t.reason})]})]})})})]})}},24617:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),u=n(87841),s=n(14740),c=n(2884),d=n(32207),f=r(n(33489)),p=r(n(69107)),y=r(n(43184)),m=r(n(24541)),h=n(11671),v=n(12638),g=n(40851),S=n(31004),x=n(47671);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}t.default=function(e){var t,n=e.onClose,r=(0,c.useTranslation)().t,j=(0,v.useAppSelector)((function(e){return e.common})).accessToken,b=(0,v.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,w=(0,h.useTicketServices)(),D=(0,g.useReviewServices)(),C=(0,S.useReviewEcontractServices)(),T=(0,o.useState)("loading"),I=(0,l.default)(T,2),k=I[0],P=I[1],_=(0,o.useState)([]),M=(0,l.default)(_,2),F=M[0],O=M[1],E=(0,o.useState)([]),R=(0,l.default)(E,2),V=R[0],z=R[1],B=(0,o.useState)([]),A=(0,l.default)(B,2),L=A[0],N=A[1],H=(t=(0,a.default)((function*(e){var t=yield w.getMultiLoginAccount((0,i.default)(new Set(e)),j);t&&z(t)})),function(e){return t.apply(this,arguments)});(0,s.useFocusEffect)((0,o.useCallback)((function(){W()}),[])),(0,o.useEffect)((function(){var e=(0,i.default)(F).map((function(e){e.implementerId;var t=L.find((function(t){return t.id==e.implementerId}));if(t){var n,r,i,a,l,o=null==t||null==(n=t.recipient)||null==(r=n.contact)?void 0:r.email,u="",s=V.find((function(e){return e.email==o}));return s&&(u=s.personalName||"---",l=s.avatar),Object.assign({},e,{email:null==t||null==(i=t.recipient)||null==(a=i.contact)?void 0:a.email,userName:u,avatar:l})}return e}));O(e)}),[V]);var U,W=(U=(0,a.default)((function*(){try{var e=yield D.getStatusParty(b.id,j);if(e){var t,n,r;O(null==e||null==(t=e.party)?void 0:t.recipients);var i=yield C.getRecipientDetail((null==e||null==(n=e.party)||null==(r=n.recipients[0])?void 0:r.id)||"",(null==e?void 0:e.ticketId)||"");if(i){N(i);var a=i.map((function(e){var t,n;return(null==e||null==(t=e.recipient)||null==(n=t.contact)?void 0:n.email)||""}));yield H(a)}}}catch(e){P("error")}finally{P("done")}})),function(){return U.apply(this,arguments)});return(0,x.jsx)(u.TouchableWithoutFeedback,{children:(0,x.jsxs)(u.View,{style:f.default.indexContainer,children:[(0,x.jsx)(y.default,{titleStyle:f.default.titleContainer,fillIconBackLeft:"#00204DB2",contentStyle:f.default.backgroundContainer,title:r("CM.note"),onPressIconLeft:n}),(0,x.jsx)(d.Divider,{}),(0,x.jsxs)(u.View,{style:{flex:1},children:["loading"===k&&(0,x.jsx)(u.View,{style:f.default.wrapSpin,children:(0,x.jsx)(d.Spinner,{size:"small"})}),"done"===k&&(0,x.jsx)(u.FlatList,{data:F,renderItem:function(e){var t=e.item;return t.id&&"accepted"==t.status?(0,x.jsx)(p.default,{item:t}):null},style:f.default.container,ListEmptyComponent:function(){return(0,x.jsx)(u.View,{children:(0,x.jsx)(m.default,{style:{textAlign:"center"},children:r("TK.noteEmptyDescription")})})}}),"error"===k&&(0,x.jsx)(u.View,{children:(0,x.jsx)(m.default,{children:r("CM.emptyData")})})]})]})})}},33489:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({indexContainer:{flex:1},titleContainer:{color:"#00204D"},backgroundContainer:{backgroundColor:"#fff"},container:{flex:1,backgroundColor:"#F8FAFE"},wrapSpin:{flex:1,justifyContent:"center",alignItems:"center"},processContainer:{backgroundColor:"#fff",marginVertical:15,marginHorizontal:10,borderRadius:10,overflow:"hidden",elevation:2,padding:12},processHeader:{flexDirection:"row",alignItems:"center",padding:10},processTitle:{fontSize:14,fontFamily:i.Font.InterMedium500,color:"#FC6B03",marginLeft:8},expandedContainer:{paddingVertical:10},userRow:{flexDirection:"row",alignItems:"flex-start",marginBottom:8},avatar:{width:24,height:24,borderRadius:12,marginRight:6},userInfo:{flex:1,marginTop:4,lineHeight:20},commentUser:{fontSize:13,fontFamily:i.Font.InterMedium500,color:"#333"},userDetails:{flexDirection:"row",alignItems:"center",flexWrap:"wrap",marginBottom:5},commentFullName:{fontSize:13,fontFamily:i.Font.InterMedium500,color:"#333"},commentShortlName:{fontSize:13,fontFamily:i.Font.InterMedium500,color:"#333"},commentEmail:{fontSize:13,color:"#666",marginLeft:5},commentTime:{fontSize:12,color:"#888",marginLeft:10},commentText:{fontSize:14,color:"#333",marginTop:5,lineHeight:20},notYetText:{textAlign:"center",paddingVertical:10}})},23813:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=r(n(16861)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),s=n(46317),c=n(2884),d=n(12638),f=r(n(27747)),p=r(n(45001)),y=n(20880),m=n(32207),h=n(11671),v=n(97427),g=r(n(77389)),S=n(47671);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}t.default=function(e){var t,n=e.isVisible,r=e.toogleRateNow,x=(0,c.useTranslation)().t,j=(0,d.useAppDispatch)(),b=(0,u.useState)(""),w=(0,a.default)(b,2),D=w[0],C=w[1],T=(0,u.useState)(-1),I=(0,a.default)(T,2),k=I[0],P=I[1],_=(0,d.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,M=(0,u.useState)(!1),F=(0,a.default)(M,2),O=F[0],E=F[1],R=(0,h.useTicketServices)(),V=(t=(0,i.default)((function*(){var e={id:_.id,rate:k+1,rateNote:D,ticketStatus:"completed"};try{E(!0);var t=yield R.sendRateTicket(e);t?(j(v.ticketActions.setDataTicket(Object.assign({},_,{rate:null==t?void 0:t.rate}))),g.default.show({type:"success",text1:x("CM.noti"),text2:x("TK.rateSuccess")})):g.default.show({type:"error",text1:x("CM.noti"),text2:x("TK.rateFaile")}),r()}catch(e){}finally{E(!1)}})),function(){return t.apply(this,arguments)});return O?(0,S.jsx)(l.View,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,S.jsx)(m.Spinner,{size:"large"})}):(0,S.jsx)(p.default,{isVisible:n,onClose:r,title:`${x("TK.rate_now")}`,type:"rate",labelCancel:x("CM.labelCancel"),labelConfirm:x("TK.rate"),styleBtnRight:{backgroundColor:y.Color.completed},onConfirm:function(){return V()},renderContent:function(){return(0,S.jsxs)(l.View,{style:{marginVertical:6},children:[(0,S.jsx)(l.View,{style:o.default.starContainer,children:new Array(5).fill(1).map((function(e,t){return(0,S.jsx)(l.TouchableOpacity,{onPress:function(){return function(e){P(e)}(t)},children:t>k?(0,S.jsx)(s.IconStarOutline,{width:55,height:50,fill:y.Color.gray}):(0,S.jsx)(s.IconStar,{width:55,height:50,fill:y.Color.yellow})},t)}))}),(0,S.jsx)(f.default,{value:D,onChangeText:C,multiline:!0,isFloatingLabel:!0,label:x("TK.enter_comment"),maxLength:400})]})}})}},16861:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995),a=n(20880);t.default=r.StyleSheet.create({starContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center"},btnRate:{color:a.Color.White,backgroundColor:a.Color.rate,padding:(0,i.SizeDP)(6),borderRadius:6}})},73639:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),o=n(87841),u=r(n(93238)),s=n(12638),c=n(14740),d=n(20880),f=n(19867),p=r(n(69290)),y=n(32207),m=r(n(24541)),h=n(2884),v=n(40851),g=n(97427),S=n(11671),x=n(88e3),j=n(35708),b=n(47671);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}t.default=function(e){var t=e.selectTabBottom,n=e.userTaskId,r=e.recipientDetailsId,w=e.isRealoadWebview,D=e.notifyActionType,C=(0,h.useTranslation)().t,T=(0,c.useNavigation)(),I=(0,s.useAppDispatch)(),k=(0,s.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,P=(0,s.useAppSelector)((function(e){return e.common})),_=P.accessToken,M=(P.language,(0,l.useState)(!1)),F=(0,a.default)(M,2),O=F[0],E=F[1],R=(0,l.useState)([]),V=(0,a.default)(R,2),z=V[0],B=V[1],A=(0,l.useState)({width:o.Dimensions.get("screen").width,height:o.Dimensions.get("screen").height}),L=(0,a.default)(A,2),N=(L[0],L[1]),H=(0,l.useState)(0),U=(0,a.default)(H,2),W=U[0],$=U[1],G=(0,l.useState)(!0),Y=(0,a.default)(G,2),K=Y[0],q=Y[1],J=(0,v.useReviewServices)(),X=(0,S.useTicketServices)();(0,c.useFocusEffect)((0,l.useCallback)((function(){return"email"===D&&j.CacheUtils.getReloadWebview().then((function(e){q("first"===e)})),$((function(e){return e+1})),j.CacheUtils.clearReloadWebview()}),[w])),(0,l.useEffect)((function(){Promise.all([ne(),re(),ie(),ae()])}),[]),(0,l.useEffect)((function(){var e=o.Dimensions.addEventListener("change",(function(e){var t=e.screen,n={width:t.width,height:t.height};N(n)}));return function(){return e.remove()}}),[]);var Q,Z,ee,te,ne=(Q=(0,i.default)((function*(){try{var e=yield J.getRecipientDetaiImpl(k.id,_);e&&I(g.ticketActions.setDataRecipientDetailImpl(e))}catch(e){}})),function(){return Q.apply(this,arguments)}),re=(Z=(0,i.default)((function*(){try{var e=yield J.getListTaskSLA(k.id);e&&I(g.ticketActions.setDataListRecipientsSLA(e))}catch(e){}})),function(){return Z.apply(this,arguments)}),ie=(ee=(0,i.default)((function*(){try{if(!k.modelerId)return;var e=null==k?void 0:k.formData.find((function(e){return!e.userTaskId})),t=yield J.getFormDetailById(null==e?void 0:e.eformId,_);t&&I(g.ticketActions.setFormData(t))}catch(e){}})),function(){return ee.apply(this,arguments)}),ae=(te=(0,i.default)((function*(){try{var e=yield X.getModeler(k.modelerId,_);e&&I(g.ticketActions.setModeler(e))}catch(e){}})),function(){return te.apply(this,arguments)}),le=function(e){var t=JSON.parse(e.nativeEvent.data);switch(null==t?void 0:t.action){case f.ACTION_TYPES.SHOW_USERTASK_INFO:return j.CacheUtils.saveReloadWebview(),void T.navigate(d.NavigationName.ReviewFlow,{dataUserTask:t.data});case f.ACTION_TYPES.SHOW_ECONTRACT_INFO:return void T.navigate(d.NavigationName.ReviewEcontractFlow,{dataUserTask:t.data,isFinish:!0});case f.ACTION_TYPES.SHOW_EXECUTOR_USER:return B(t.data),void E(!0);case f.ACTION_TYPES.SHOW_EID_INFO:return void T.navigate(d.NavigationName.ReviewEIDScreen,{dataUserTask:t.data});case f.ACTION_TYPES.CREATE_ECONTRACT_ENV:return void T.navigate(d.NavigationName.ReviewEcontractFlow,{dataUserTask:t.data,isFinish:!1});case f.ACTION_TYPES.SHOW_COLLABO_INFO:return void T.navigate(d.NavigationName.ReviewEcollaboFlow,{dataUserTask:t.data});default:return}},oe=function(){return 1===t?`${null==k?void 0:k.id}?_typeView=mine&access_token=${_}`:"email"===D&&K?`${null==k?void 0:k.id}?_recipientDetailsId=${r}&_userTaskId=${n}&_typeView=required&access_token=${_}&from=${D}`:`${null==k?void 0:k.id}?_recipientDetailsId=${r}&_userTaskId=${n}&_typeView=required&access_token=${_}`};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.View,{style:{flex:1},children:1===t?(0,b.jsx)(u.default,{startInLoadingState:!0,source:{uri:(0,x.getConfig)().BASE_URL_TICKET+oe()},onMessage:le,webviewDebuggingEnabled:!0},W):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(u.default,{startInLoadingState:!0,source:{uri:(0,x.getConfig)().BASE_URL_TICKET+oe()},onMessage:le,webviewDebuggingEnabled:!0},W)})}),(0,b.jsx)(p.default,{title:C("TK.listUser"),isVisible:O,onClose:function(){return E(!1)},renderContent:(0,b.jsx)(o.FlatList,{data:z,keyExtractor:function(e){return e.id},renderItem:function(e){var t,n,r=e.item;return(0,b.jsxs)(o.View,{style:{flexDirection:"row",columnGap:10,alignItems:"center",marginBottom:20},children:[(0,b.jsx)(y.Avatar,{source:{uri:r.avatar||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,b.jsxs)(o.View,{style:{flex:1},children:[(0,b.jsx)(m.default,{style:{flex:1},children:""+r.personalName}),(0,b.jsx)(m.default,{children:(null==r||null==(t=r.recipient)||null==(n=t.contact)?void 0:n.email)||"---"})]})]})}})})]})}},7006:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(7005),a=r(n(93238)),l=n(20880),o=r(n(43184)),u=n(47671);t.default=function(e){var t=e.url,n=e.onClose,r=e.name;return(0,u.jsxs)(i.SafeAreaView,{edges:["bottom","top"],style:{flex:1,backgroundColor:"#fff"},children:[(0,u.jsx)(o.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:r,onPressIconLeft:n}),(0,u.jsx)(a.default,{startInLoadingState:!0,injectedJavaScript:l.String.SCRIPT_SCALE_WEBVIEW,source:{uri:t}})]})}},89076:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),o=n(87841),u=r(n(76456)),s=n(7005),c=n(41995),d=n(46317),f=r(n(75672)),p=n(35708),y=r(n(24541)),m=r(n(81924)),h=n(14740),v=r(n(77389)),g=n(12638),S=n(60596),x=n(2884),j=n(40851),b=r(n(41778)),w=r(n(99746)),D=r(n(76644)),C=r(n(7006)),T=n(88e3),I=r(n(55529)),k=n(37106),P=n(47671);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}t.default=function(){var e=(0,x.useTranslation)().t,t=((0,h.useNavigation)(),(0,l.useState)(1)),n=(0,a.default)(t,2),r=n[0],_=n[1],M=(0,l.useState)(0),F=(0,a.default)(M,2),O=F[0],E=F[1],R=(0,l.useState)([]),V=(0,a.default)(R,2),z=V[0],B=V[1],A=(0,l.useState)([]),L=(0,a.default)(A,2),N=L[0],H=L[1],U=(0,l.useState)([]),W=(0,a.default)(U,2),$=W[0],G=W[1],Y=(0,l.useState)(!1),K=(0,a.default)(Y,2),q=K[0],J=K[1],X=(0,l.useState)(""),Q=(0,a.default)(X,2),Z=Q[0],ee=Q[1],te=(0,l.useState)(!1),ne=(0,a.default)(te,2),re=ne[0],ie=ne[1],ae=(0,l.useState)(),le=(0,a.default)(ae,2),oe=le[0],ue=le[1],se=(0,l.useState)(""),ce=(0,a.default)(se,2),de=ce[0],fe=ce[1],pe=(0,g.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,ye=(0,g.useAppSelector)((function(e){return e.common})).accessToken,me=(0,k.useZutandStore)((function(e){return e})).statusTicketSelect,he=(0,j.useReviewServices)();(0,l.useEffect)((function(){ke(),Pe()}),[]),(0,l.useEffect)((function(){_e(r)}),[r]);var ve,ge,Se,xe,je,be,we,De,Ce,Te,Ie,ke=(ve=(0,i.default)((function*(){try{var e=yield he.getListFileByTicketId(pe.id);Me(e)}catch(e){}})),function(){return ve.apply(this,arguments)}),Pe=(ge=(0,i.default)((function*(){try{var e=yield he.getStatusParty(null==pe?void 0:pe.id,ye);if(e){var t,n=null==(t=e.party)?void 0:t.recipients,r=yield he.getListFormIdByTicketId(null==pe?void 0:pe.id);if(!r)return;Promise.all(r.map((function(e){return he.getFormERequest({versionId:e.versionId},ye)}))).then((function(e){Fe(null==e?void 0:e.map((function(e){var t,n;return Object.assign({},e,{userTaskId:null==r||null==(t=r.find((function(t){return t.formId===e.formId})))?void 0:t.userTaskId,versionId:null==r||null==(n=r.find((function(t){return t.formId===e.formId})))?void 0:n.versionId})})),n)}))}}catch(e){console.log("error",e)}})),function(){return ge.apply(this,arguments)}),_e=(Se=(0,i.default)((function*(e){try{var t={size:3,page:e-1,sort:"createdDate,desc",ticketId:null==pe?void 0:pe.id},n=yield he.getListFileRelative(t,ye);if(n){var r;if(0===(null==n||null==(r=n.data)?void 0:r.length))return void(e>1?_(e-1):(G([]),E(0)));E(null==n?void 0:n.totalRecords),Oe(null==n?void 0:n.data)}}catch(e){}})),function(e){return Se.apply(this,arguments)}),Me=function(e){var t=e.map((function(e,t){var n;return{STT:String(t+1),keyName:(0,P.jsx)(y.default,{style:u.default.txtText,numberOfLines:1,children:null==e?void 0:e.name}),notionName:(null==e?void 0:e.notionName)||"---",createdBy:e.createdBy,documentSize:p.CommonUtils.getSize(null==e?void 0:e.fileSize),type:null==e||null==(n=e.name)?void 0:n.split(".").slice(-1)[0],lastModifiedDate:p.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate),action:He(!0,e)}}));B(t)},Fe=function(e,t){var n=e.map((function(e,n){var r,i;return{STT:String(n+1),keyName:(0,P.jsx)(o.TouchableOpacity,{onPress:function(){ie(!0),ue(e)},children:(0,P.jsx)(y.default,{style:u.default.txtText,numberOfLines:1,children:null==e?void 0:e.formName})}),createdBy:e.createdBy,notionName:null!=(r=null==t||null==(i=t.find((function(t){return e.userTaskId==t.id})))?void 0:i.notionName)?r:"Form quy trình"}}));H(n)},Oe=function(e){var t=e.map((function(e,t){var n,i;return{STT:String(3*(r-1)+1+t),keyName:(0,P.jsx)(y.default,{style:u.default.txtText,numberOfLines:1,children:null==e?void 0:e.fileName}),notionName:(null==e?void 0:e.notionName)||"---",createdBy:e.createdBy,documentSize:p.CommonUtils.getSize(e.size),type:null==e||null==(n=e.fileName)||null==(i=n.split("."))?void 0:i.pop(),lastModifiedDate:p.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate),action:He(!1,e)}}));G(t)},Ee=(xe=(0,i.default)((function*(){var t,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1?arguments[1]:void 0;fe(r?i.name:null==(t=i.fileName)||null==(n=t.split("."))?void 0:n[0]);try{v.default.show({type:"info",text1:e("CM.noti"),text2:e("TK.viewFile")});var a=new FormData;if(r&&"ewriter"===i.documentType){var l=yield Le(i.notionId,i.id,null==i?void 0:i.name);if(l){a.append("file",l);var o=yield he.viewFile(a,ye);1==(null==o?void 0:o.code)?(J(!0),ee(o.message)):v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.error")})}else v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.error")});return}var u=i.name;u=r?i.keyName:i.name;var s=i.bucketName;if(!i.bucketName){var c,d,f,p=null==i||null==(c=i.name)||null==(d=c.split("https://"))?void 0:d[1],y=null==p?void 0:p.split("/");u=`/${null==y||null==(f=y.slice(2))?void 0:f.join("/")}`,s=null==y?void 0:y[1]}a.append("keyName",u),a.append("bucketName",s);var m=yield he.viewFile(a,ye);1==(null==m?void 0:m.code)?(J(!0),ee(m.message)):v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.error")})}catch(t){v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.error")})}})),function(){return xe.apply(this,arguments)}),Re=(je=(0,i.default)((function*(t){try{yield he.deleteFileRelative(t,ye),yield _e(r),v.default.show({type:"success",text1:e("CM.noti"),text2:e("TK.deleteFileSuccess")})}catch(t){console.log(t),v.default.show({type:"error",text1:e("CM.noti"),text2:e("TK.deleteFileErr")})}})),function(e){return je.apply(this,arguments)}),Ve=(be=(0,i.default)((function*(){try{var t=yield p.CommonUtils.handleGetFile();if(!t)return;var n=new FormData;n.append("uploadFile",t),n.append("attachmentJson",JSON.stringify({ticketId:null==pe?void 0:pe.id})),v.default.show({type:"info",text1:e("CM.noti"),text2:e("NT.notification.downloadingPleaseWait")}),(yield he.uploadFileRelative(n,ye))?(yield _e(r),v.default.show({type:"success",text1:e("CM.noti"),text2:e("TK.uploadFileSuccess")})):v.default.show({type:"error",text1:e("CM.noti"),text2:e("TK.uploadFileErr")})}catch(t){console.log(t),v.default.show({type:"error",text1:e("CM.noti"),text2:e("TK.uploadFileErr")})}})),function(){return be.apply(this,arguments)}),ze=(we=(0,i.default)((function*(e,t){var n=e.fileName;n=t?e.keyName.replace("/","_"):e.fileName;var r=`${"android"===o.Platform.OS?b.default.DownloadDirectoryPath:b.default.DocumentDirectoryPath}/${(new Date).getTime()}_${n}`;t?yield Ne(r,e.id,null==e?void 0:e.notionId):e.bucketName?yield Ae(r,e.id):yield Be(r,e.name)})),function(e,t){return we.apply(this,arguments)}),Be=(De=(0,i.default)((function*(t,n){var r={fromUrl:n,toFile:t,background:!0,begin:function(e){},progress:function(e){e.bytesWritten,e.contentLength},connectionTimeout:5e3};try{200===(yield b.default.downloadFile(r).promise).statusCode?"ios"===o.Platform.OS&&(yield o.Share.share({url:t})).action==o.Share.dismissedAction?v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")}):v.default.show({type:"success",text1:e("CM.noti"),text2:e("CM.downloadSuccess")}):v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}catch(t){v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}})),function(e,t){return De.apply(this,arguments)}),Ae=(Ce=(0,i.default)((function*(t,n){try{v.default.show({type:"info",text1:e("CM.noti"),text2:e("CM.pleaseWait")});var r=yield w.default.fetch("GET",`${(0,T.getConfig)().BASE_URL}/services/erequest/api/attachments/download-file?attachmentId=${n}`).then((function(e){return 200==e.info().status?e.base64():null})).catch((function(){return null}));if(r){try{yield b.default.writeFile(t,r,"base64")}catch(e){console.log(e)}"ios"===o.Platform.OS&&(yield o.Share.share({url:t})).action==o.Share.dismissedAction?v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")}):v.default.show({type:"success",text1:e("CM.noti"),text2:e("CM.downloadSuccess")})}else v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}catch(t){v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")})}})),function(e,t){return Ce.apply(this,arguments)}),Le=(Te=(0,i.default)((function*(e,t,n){try{var r,i=null==n||null==(r=n.split("."))?void 0:r[1],a=`${w.default.fs.dirs.DocumentDir}/${(new Date).getTime().toString()}.${i}`,l=yield w.default.config({path:a}).fetch("GET",`${(0,T.getConfig)().BASE_URL}/services/erequest/api/tickets/${pe.id}/userTaskId/${e}/fileId/${t}`).then((function(e){return 200==e.info().status?e.path():null})).catch((function(){return null}));return l?{uri:"ios"===o.Platform.OS?l:"file://"+l,name:`${(new Date).getTime().toString()}.${i}`,type:p.CommonUtils.getMimeType(n)}:null}catch(e){return console.log(e),null}})),function(e,t,n){return Te.apply(this,arguments)}),Ne=(Ie=(0,i.default)((function*(t,n,r){try{var i=yield w.default.fetch("GET",`${(0,T.getConfig)().BASE_URL}/services/erequest/api/tickets/${pe.id}/userTaskId/${r}/fileId/${n}/content`).then((function(e){return 200==e.info().status?e.base64():null})).catch((function(){return null}));i?(yield b.default.writeFile(t,i,"base64"),"ios"===o.Platform.OS&&(yield o.Share.share({url:t})).action==o.Share.dismissedAction?v.default.show({type:"error",text1:e("CM.noti"),text2:e("CM.downloadFail")}):v.default.show({type:"success",text1:e("CM.noti"),text2:e("CM.downloadSuccess")})):v.default.show({type:"error",text2:e("CM.downloadFail")})}catch(t){v.default.show({type:"error",text2:e("CM.downloadFail")})}})),function(e,t,n){return Ie.apply(this,arguments)}),He=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return(0,P.jsxs)(o.View,{style:u.default.ctnAction,children:[(0,P.jsx)(o.TouchableOpacity,{onPress:function(){return Ee(e,t)},hitSlop:(0,c.SizeDP)(15),children:(0,P.jsx)(d.IconView,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)})}),(0,P.jsx)(o.TouchableOpacity,{onPress:function(){return ze(t,e)},hitSlop:(0,c.SizeDP)(15),children:(0,P.jsx)(d.IconDownload,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)})}),!e&&t.allowDeleted&&(null==pe?void 0:pe.ticketStatus)!==S.Status.voided&&(null==pe?void 0:pe.ticketStatus)!==S.Status.rejected&&(0,P.jsx)(o.TouchableOpacity,{onPress:function(){var e;return Re(null==t||null==(e=t.id)?void 0:e.toString())},hitSlop:(0,c.SizeDP)(15),children:(0,P.jsx)(d.IconTrash,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)})})]})};return(0,P.jsxs)(s.SafeAreaView,{style:{flex:1},edges:[],children:[(0,P.jsxs)(o.ScrollView,{showsVerticalScrollIndicator:!1,children:[(0,P.jsxs)(o.View,{style:u.default.ctnForm,children:[(0,P.jsxs)(o.View,{style:u.default.ctnView,children:[(0,P.jsx)(y.default,{style:u.default.txtTitle,children:e("TK.docRelative")}),me===S.Status.processing&&(0,P.jsx)(o.TouchableOpacity,{onPress:Ve,hitSlop:(0,c.SizeDP)(15),children:(0,P.jsx)(d.IconUpload,{width:(0,c.SizeDP)(24),height:(0,c.SizeDP)(24)})})]}),(0,P.jsx)(f.default,{stickyLeft:!0,stickyColumnLeftIndex:1,tableHeaders:["STT","keyName","notionName","createdBy","documentSize","type","lastModifiedDate","action"],tableData:$}),O>0&&(0,P.jsx)(m.default,{collectionSize:O,currentPage:r,pageSize:3,onPageChange:function(e){return _(e)}})]}),(0,P.jsxs)(o.View,{style:u.default.ctnForm,children:[(0,P.jsx)(y.default,{style:u.default.txtTitle,children:e("TK.templateInfo")}),(0,P.jsx)(f.default,{stickyLeft:!0,stickyColumnLeftIndex:1,tableHeaders:["STT","keyName","notionName","createdBy","documentSize","type","lastModifiedDate","action"],tableData:z})]}),(0,P.jsxs)(o.View,{style:u.default.ctnForm,children:[(0,P.jsx)(y.default,{style:u.default.txtTitle,children:e("TK.templateForm")}),(0,P.jsx)(f.default,{stickyLeft:!1,tableHeaders:["STT","keyName","createdBy","notionName"],tableData:N})]})]}),(0,P.jsx)(D.default,{isVisible:q,children:(0,P.jsx)(C.default,{url:Z,onClose:function(){return J(!1)},name:de})}),(0,P.jsx)(D.default,{isVisible:re,children:(0,P.jsx)(I.default,{onClose:function(){return ie(!1)},isOnlyView:!0,readOnly:!0,versionId:null==oe?void 0:oe.versionId,data:{_userTaskId:null==oe?void 0:oe.userTaskId,_ticketId:null==pe?void 0:pe.id,formId:null==oe?void 0:oe.formId},nameHeader:null==oe?void 0:oe.formName})})]})}},76456:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=n(41995);t.default=r.StyleSheet.create({container:{justifyContent:"center",alignItems:"center"},txtTitle:{fontSize:i.FontSize.FontBase,fontFamily:i.Font.InterSemiBold600,color:i.Color.colorText},ctnForm:{marginLeft:(0,a.SizeDP)(8),marginTop:(0,a.SizeDP)(8),rowGap:(0,a.SizeDP)(15)},ctnAction:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,a.SizeDP)(10)},txtText:{fontSize:i.FontSize.FontTiny,fontFamily:i.Font.InterRegular400,color:"#366ae2"},ctnView:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginRight:(0,a.SizeDP)(12)}})},27163:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),o=r(n(93238)),u=n(12638),s=n(7005),c=n(20880),d=n(88e3),f=n(40851),p=n(87841),y=r(n(24541)),m=n(32207),h=n(2884),v=n(75463),g=r(n(98327)),S=n(47671);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}t.default=function(){var e=(0,h.useTranslation)().t,t=(0,l.useRef)(null),n=(0,u.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,r=(0,u.useAppSelector)((function(e){return e.common})).accessToken,x=(0,l.useState)(),j=(0,a.default)(x,2),b=j[0],w=j[1],D=(0,l.useState)([]),C=(0,a.default)(D,2),T=C[0],I=C[1],k=(0,l.useState)(),P=(0,a.default)(k,2),_=P[0],M=P[1],F=(0,l.useState)(),O=(0,a.default)(F,2),E=O[0],R=O[1],V=(0,l.useState)(!1),z=(0,a.default)(V,2),B=z[0],A=z[1],L=(0,l.useState)(!1),N=(0,a.default)(L,2),H=N[0],U=N[1],W=(0,f.useReviewServices)();(0,l.useEffect)((function(){Y(null)}),[]);var $,G,Y=($=(0,i.default)((function*(t){var i={ticketId:null==n?void 0:n.id,userTaskId:null,version:t};try{var a=yield W.getFormVersionByTicketAndUserTaskId(i,r);if(a&&null===t){var l=Array.from(Array(Math.ceil(a.versionUserTask))).map((function(e,t){return t+1})).map((function(t,n){return{id:t,key:`${e("CM.version")} `+t,value:`${e("CM.version")} `+t}}));I(l),R(l[l.length-1]),M(new m.IndexPath(l.length-1))}return w(a),a}catch(e){console.log("error getSubFromData",e)}})),function(e){return $.apply(this,arguments)}),K=(G=(0,i.default)((function*(e){try{A(!0);var n=yield Y(e);if(n){var r=null==n?void 0:n.formData,i=`window.postMessage('${JSON.stringify({type:"postFormEdit",isReadonly:!0,data:r}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;setTimeout((function(){var e;null==t||null==(e=t.current)||e.injectJavaScript(i),A(!1)}),800)}}catch(e){}finally{U(!1)}})),function(e){return G.apply(this,arguments)});return(0,S.jsxs)(s.SafeAreaView,{style:{flex:1},edges:[],children:[T.length>0&&(0,S.jsxs)(p.View,{style:g.default.selectForm,children:[(0,S.jsx)(y.default,{children:e("CM.selectVersion")}),(0,S.jsx)(v.OverflowMenuCM,{selectedIndex:_,listData:T,setSelectedIndex:function(e){var t;e&&(M(e),R(T[null==e?void 0:e.row]),K(null==(t=T[null==e?void 0:e.row])?void 0:t.id))},selectedTitle:(0,S.jsxs)(p.View,{style:g.default.version,children:[(0,S.jsx)(y.default,{children:null==E?void 0:E.value}),B&&(0,S.jsx)(m.Spinner,{size:"small"})]})})]}),(0,S.jsx)(p.ScrollView,{refreshControl:(0,S.jsx)(p.RefreshControl,{refreshing:H,onRefresh:function(){U(!0),K(null==E?void 0:E.id)}}),contentContainerStyle:{flex:1},style:{flex:1},children:(0,S.jsx)(o.default,{style:{flex:1},containerStyle:{flex:1},nestedScrollEnabled:!0,ref:t,startInLoadingState:!0,onMessage:function(e){var t=JSON.parse(e.nativeEvent.data);"e-from"===(null==t?void 0:t.result)&&K(null)},javaScriptEnabled:!0,injectedJavaScript:c.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,webviewDebuggingEnabled:!0,source:{uri:(0,d.getConfig)().BASE_URL_FORM+(null==b?void 0:b.version)}})})]})}},98327:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841);t.default=r.StyleSheet.create({version:{borderWidth:1,borderColor:"rgba(0, 53, 128, .35)",borderRadius:8,paddingHorizontal:8,paddingVertical:5,flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:4},selectForm:{padding:16,alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:16}})},96237:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HISTORY_ACTION=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),u=n(87841),s=r(n(24997)),c=r(n(24541)),d=n(12638),f=n(35708),p=n(7005),y=n(41995),m=n(2884),h=n(2543),v=n(11671),g=n(32207),S=n(47671);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}var j=t.HISTORY_ACTION={CREATE:"add",PUBLIC:"public",UNPUBLIC:"unpublic",ACTIVE:"active",INACTIVE:"inactive",UPDATE:"edit",DELETE:"delete",ASSIGN:"assign",REQUEST_APP:"request_approve",COMMENT:"comment",REJECT:"reject_approve",REJECT_CONSIDER:"reject_consider",AUTHORITY:"authority",REQUEST_UPDATE:"request_update",SIGNING:"signing",UPLOAD:"upload",CANCEL:"cancel",EDIT_COMMENT:"edit_comment",REJECT_APPROVE:"reject_approve",REVIEW_CONDUCT:"review_conduct"};t.default=function(){var e=(0,m.useTranslation)().t,t=(0,d.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,n=(0,o.useState)(0),r=(0,l.default)(n,2),x=r[0],b=r[1],w=(0,o.useState)(0),D=(0,l.default)(w,2),C=D[0],T=D[1],I=(0,o.useState)(!1),k=(0,l.default)(I,2),P=k[0],_=k[1],M=(0,o.useState)([]),F=(0,l.default)(M,2),O=F[0],E=F[1],R=(0,d.useAppSelector)((function(e){return e.common})).accessToken,V=(0,v.useTicketServices)();(0,o.useEffect)((function(){(0,a.default)((function*(){yield B(x)}))()}),[x]);var z,B=(z=(0,a.default)((function*(e){try{var n=yield V.getTicketHistories(e,t.id,R);E(0===e?null==n?void 0:n.data:[].concat((0,i.default)(O),(0,i.default)(null==n?void 0:n.data))),T(n.totalRecords)}catch(e){console.error(e)}})),function(e){return z.apply(this,arguments)}),A=function(e,t,n){return(0,S.jsx)(u.View,{style:[{backgroundColor:e},s.default.ctnViewIcon],children:(0,S.jsx)(g.Icon,{fill:n,name:t,width:15,height:15})})},L=function(e){switch(e){case j.CREATE:return A("#F2ECFD","plus","#6F2CED");case j.REQUEST_APP:return A("#E8F7EF","file","#39AC6D");case j.COMMENT:return A("#f3f5f8","message-circle","");case j.REJECT:return A("#FCEEED","close","#E14337");case j.REJECT_CONSIDER:return A("#FCEEED","minus","#E14337");case j.AUTHORITY:return A("#F2ECFD","swap","#6F2CED");case j.REQUEST_UPDATE:return A("#FFF3EB","arrow-circle-left","#FC6B03");case j.SIGNING:return A("#E8F7EF","edit","#39AC6D");case j.UPLOAD:return A("#FFF3EB","cloud-upload-outline","#FC6B03");case j.CANCEL:return A("#FCEEED","minus","#E14337");case j.EDIT_COMMENT:return A("#f3f5f8","edit-2-outline","");case j.REJECT_APPROVE:return A("#FCEEED","close","#E14337");case j.REVIEW_CONDUCT:return A("#E8F7EF","checkmark","#39AC6D");default:return(0,S.jsx)(u.View,{style:s.default.ctnViewIcon})}};return(0,S.jsx)(p.SafeAreaView,{style:s.default.container,edges:["bottom"],children:O.length>0&&(0,S.jsx)(u.View,{children:(0,S.jsx)(u.FlatList,{keyExtractor:function(e){return e.id},refreshing:P,onRefresh:function(){0!==x&&_(!0),b(0)},data:O,onEndReached:function(){O.length<C&&b(x+1)},onEndReachedThreshold:.5,renderItem:function(t){var n=t.item,r=t.index;return(0,S.jsx)(S.Fragment,{children:!(0,h.isNull)(n.createdBy)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(u.View,{style:s.default.ctnItem,children:[L(n.action),(0,S.jsxs)(u.View,{style:{rowGap:(0,y.SizeDP)(4),flex:1},children:[(0,S.jsx)(c.default,{style:s.default.title,children:e(`TK.transaction-history.action.${n.action}`)}),(0,S.jsx)(u.View,{style:s.default.ctnDes,children:(0,S.jsx)(c.default,{style:s.default.Des,children:`${f.DateUtils.convertDateToDDMMYYYY_H_M(n.createdDate)} ${e("TK.by")} ${n.createdBy}`})})]})]}),O.length-1!==r&&(0,S.jsx)(u.View,{style:s.default.tabHoz})]})})}})})})}},24997:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({container:{flex:1},ctnItem:{paddingHorizontal:(0,i.SizeDP)(16),paddingVertical:(0,i.SizeDP)(8),flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:(0,i.SizeDP)(16)},ctnDes:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:(0,i.SizeDP)(10),flex:1},ctnAction:{width:(0,i.SizeDP)(24),height:(0,i.SizeDP)(24),backgroundColor:"blue",borderRadius:(0,i.SizeDP)(12),justifyContent:"center",alignItems:"center"},tabHoz:{width:(0,i.SizeDP)(2),height:(0,i.SizeDP)(26),backgroundColor:"rgba(0, 53, 128, 0.15)",marginLeft:(0,i.SizeDP)(28)},title:{fontSize:i.default.FontSmall,fontFamily:a.Font.InterSemiBold600,color:a.Color.colorText},Des:{fontSize:i.default.FontTiny,fontFamily:a.Font.InterRegular400,color:a.Color.Text07,flex:1},ctnViewIcon:{width:24,height:24,borderRadius:12,alignItems:"center",justifyContent:"center"}})},32251:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),o=n(87841),u=n(12638),s=r(n(75672)),c=n(35708),d=n(2884),f=n(32207),p=r(n(24541)),y=r(n(19767)),m=n(60596),h=n(11671),v=n(47671);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}t.default=function(){var e=(0,d.useTranslation)().t,t=(0,l.useState)(),n=(0,a.default)(t,2),r=n[0],g=n[1],S=(0,l.useState)(0),x=(0,a.default)(S,2),j=x[0],b=x[1],w=(0,u.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,D=(0,h.useTicketServices)(),C=(0,o.useWindowDimensions)(),T=C.width;C.height;(0,l.useEffect)((function(){k()}),[]);var I,k=(I=(0,i.default)((function*(){var e=yield D.getSla(w.id);e&&_(e)})),function(){return I.apply(this,arguments)}),P=function(e){switch(M(e)){case m.Status.processing:return{color:"#7F43EF",bgColor:"#F2ECFD"};case m.Status.accepted:case m.Status.completed:case"onTime":return{color:"#39AC6D",bgColor:"#E8F7EF"};case m.Status.voided:case m.Status.rejected:case"late":return{color:"#F05959",bgColor:"rgba(251, 213, 213, 1)"};default:return{}}},_=function(t){var n=t.map((function(t,n){var r,i,a;return{STT:String(n+1),notionName:t.notionName||"---",createdBy:t.owner,status:(0,v.jsx)(o.View,{style:{backgroundColor:null==(r=P(t))?void 0:r.bgColor,borderRadius:4,paddingHorizontal:4,paddingVertical:2},children:(0,v.jsx)(p.default,{style:{color:null==(i=P(t))?void 0:i.color,fontSize:12},children:e(`TK.${M(t)}`)})}),actualStartSate:t.estimateDate?c.DateUtils.convertDateToDDMMYYYY_H_M(t.estimateDate):"---",eventStartDate:t.startDate?c.DateUtils.convertDateToDDMMYYYY_H_M(t.startDate):"---",executionTime:t.totalTime?t.totalTime:"---",sla:(0,v.jsx)(p.default,{style:{color:null==(a=P(t))?void 0:a.color,fontSize:12},children:E(null==t?void 0:t.estimateDate,null==t?void 0:t.startDate,null==t?void 0:t.finishDate)})}}));g(n)},M=function(e){return w.ticketStatus===m.Status.voided&&e.status===m.Status.processing?m.Status.voided:"accepted"!=e.status&&"rejected"==w.status?"rejected":"accepted"==e.status&&e.delayTime?"late":"accepted"==e.status&&e.estimateDate?"onTime":e.status},F=function(){if(new Date(w.finishDate)<new Date(w.estimateDate)){var e=O(w.finishDate,w.createdDate)/O(w.estimateDate,w.createdDate);return{positionOfEstimateDate:{top:-20,right:.1*T/2-10},positionOfPopupEstimateDate:{top:-58,right:.1*T/2-10},positionOfFinishDate:{bottom:-20,right:.95*T-.1*T/2-e*T*.85-10},positionOfPopupFinishDate:{bottom:-58,right:e<.6?.95*T-.1*T/2-e*T*.85-10-j+30:.95*T-.1*T/2-e*T*.85-10},width:e*T*.85,bgColor:"completed"===w.ticketStatus?"#d9f2e4":"#40bf79",typeOfArrow:{estimateDate:"arrow-down",finishDate:"arrow-up"}}}var t=O(w.estimateDate,w.createdDate)/O(w.finishDate,w.createdDate);return{positionOfEstimateDate:{bottom:-20,right:(null==w?void 0:w.ticketStatus)!==m.Status.voided?.95*T-.1*T/2-t*T*.85-10:T-.95*T-10},positionOfPopupEstimateDate:{bottom:-58,right:(null==w?void 0:w.ticketStatus)!==m.Status.voided?t<.6?.95*T-.1*T/2-t*T*.85-10-j+30:.95*T-.1*T/2-t*T*.85-10:T-.95*T-10},positionOfFinishDate:{top:-20,right:.1*T/2-10},positionOfPopupFinishDate:{top:-58,right:.1*T/2-10},width:t*T*.85,bgColor:"completed"===w.ticketStatus?"#d9f2e4":"#40bf79",typeOfArrow:{estimateDate:"arrow-up",finishDate:"arrow-down"}}},O=function(e,t){var n=0;if(e&&t){var r=new Date(e);n=new Date(t).getTime()-r.getTime()}return n},E=function(e,t,n){var r,i=O(t,n),a=O(t,e);r=Math.abs(a-i);var l=Math.floor(r/864e5),o=Math.floor((r-24*l*60*60*1e3)/36e5),u=Math.floor((r-24*l*60*60*1e3-60*o*60*1e3)/6e4),s=Math.floor((r-24*l*60*60*1e3-60*o*60*1e3-60*u*1e3)/1e3);return r?l+"d"+o%60+"h"+u%60+"m"+s+"s":"---"};return(0,v.jsx)(o.View,{style:{flex:1},children:(0,v.jsx)(o.ScrollView,{children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.View,{style:y.default.ctnSLA,children:(0,v.jsxs)(o.View,{style:[{width:.95*T},y.default.ctnBody],children:[(0,v.jsx)(o.TouchableOpacity,{style:{position:"absolute",top:-20,left:.1*T/2-10,zIndex:1},children:(0,v.jsx)(f.Icon,{width:20,height:20,name:"arrow-down"})}),(0,v.jsxs)(o.View,{style:[{top:-58,left:.1*T/2-20},y.default.ctnDate],children:[(0,v.jsxs)(p.default,{style:y.default.size,children:[e("SR.created_at"),": "]}),(0,v.jsx)(p.default,{style:y.default.size,children:c.DateUtils.convertDateToDDMMYYYY_H_M(w.createdDate)})]}),(0,v.jsx)(o.TouchableOpacity,{style:[{position:"absolute",zIndex:1},F().positionOfEstimateDate],children:(0,v.jsx)(f.Icon,{width:20,height:20,name:F().typeOfArrow.estimateDate})}),(0,v.jsxs)(o.View,{style:[F().positionOfPopupEstimateDate,y.default.ctnDate],children:[(0,v.jsxs)(p.default,{style:y.default.size,children:[e("TK.estimateDate"),": "]}),(0,v.jsx)(p.default,{style:y.default.size,children:c.DateUtils.convertDateToDDMMYYYY_H_M(w.estimateDate)})]}),"completed"===w.ticketStatus&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.TouchableOpacity,{style:[{position:"absolute",zIndex:1},F().positionOfFinishDate],children:(0,v.jsx)(f.Icon,{width:20,height:20,name:F().typeOfArrow.finishDate})}),(0,v.jsxs)(o.View,{onLayout:function(e){b(e.nativeEvent.layout.width)},style:[F().positionOfPopupFinishDate,y.default.ctnDate],children:[(0,v.jsxs)(p.default,{style:y.default.size,children:[e("TK.finishDate"),": "]}),(0,v.jsx)(p.default,{style:y.default.size,children:c.DateUtils.convertDateToDDMMYYYY_H_M(w.finishDate)})]})]}),(0,v.jsx)(o.View,{style:y.default.line}),(0,v.jsx)(o.View,{style:{height:30,backgroundColor:"#40bf79",width:.85*T},children:(0,v.jsx)(o.View,{style:{height:30,backgroundColor:F().bgColor,width:F().width}})}),(0,v.jsx)(o.View,{style:y.default.line})]})}),(0,v.jsx)(f.Divider,{style:{marginVertical:10}}),(0,v.jsx)(s.default,{tableHeaders:["STT","notionName","createdBy","status","actualStartSate","eventStartDate","executionTime","sla"],tableData:r||[],stickyLeft:!0,stickyColumnLeftIndex:1})]})})})}},19767:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841);t.default=r.StyleSheet.create({container:{justifyContent:"center",alignItems:"center",backgroundColor:"#2c3e50"},line:{height:30,backgroundColor:"#fff",width:3},ctnSLA:{alignItems:"center",justifyContent:"center",marginTop:80,marginBottom:80},ctnBody:{height:30,backgroundColor:"#d9d9d9",borderRadius:8,alignItems:"center",justifyContent:"center",flexDirection:"row",position:"relative"},ctnDate:{position:"absolute",zIndex:1,borderRadius:8,borderWidth:1,borderColor:"#cfb9f9",paddingHorizontal:6,paddingVertical:8,backgroundColor:"#f2ecfd"},size:{fontSize:11}})},90487:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),o=n(87841),u=n(35708),s=n(12638),c=n(46317),d=n(41995),f=r(n(75672)),p=r(n(81924)),y=n(2884),m=n(11671),h=r(n(24541)),v=r(n(37899)),g=n(60596),S=r(n(97667)),x=n(47671);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}t.default=function(){var e=(0,y.useTranslation)().t,t=(0,l.useState)([]),n=(0,a.default)(t,2),r=n[0],j=n[1],b=(0,l.useState)(1),w=(0,a.default)(b,2),D=w[0],C=w[1],T=(0,s.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,I=(0,m.useTicketServices)(),k=(0,l.useState)(1),P=(0,a.default)(k,2),_=P[0],M=P[1],F=(0,s.useAppSelector)((function(e){return e.common})).accessToken;(0,l.useEffect)((function(){E(_)}),[_]);var O,E=(O=(0,i.default)((function*(e){try{var t=yield I.getTicketRelatives(T.id,e-1,8,F);z(t.content),C(t.totalElements)}catch(e){}})),function(e){return O.apply(this,arguments)}),R=function(e){switch(e){case g.Status.completed:return V(v.default.completed,v.default.completed01,g.Status.completed);case g.Status.draft:return V(v.default.draft,v.default.draft01,g.Status.draft);case g.Status.voided:return V(v.default.voided,v.default.voided01,g.Status.voided);case g.Status.rejected:return V(v.default.rejected,v.default.rejected01,g.Status.rejected);case g.Status.processing:return V(v.default.processing,v.default.processing01,g.Status.processing)}},V=function(t,n,r){return(0,x.jsx)(o.View,{style:[{backgroundColor:n},S.default.ctnContent],children:(0,x.jsx)(h.default,{style:{color:t},children:e(`TK.${r}`)})})},z=function(e){var t=e.map((function(e,t){return{STT:String(8*(_-1)+1+t),title:null==e?void 0:e.title,serviceName:e.serviceName,ticketStatus:R(e.ticketStatus),createdBy:null==e?void 0:e.createdBy,createdDate:u.DateUtils.convertDateToDDMMYYYY_H_M(e.createdDate),lastModifiedDate:u.DateUtils.convertDateToDDMMYYYY_H_M(e.lastModifiedDate)}}));j(t)};return(0,x.jsx)(o.View,{style:{flex:1},children:r.length>0?(0,x.jsx)(o.ScrollView,{children:(0,x.jsxs)(o.View,{style:{flex:1},children:[(0,x.jsx)(o.View,{style:{flex:1,paddingVertical:(0,d.SizeDP)(10),marginLeft:(0,d.SizeDP)(10)},children:(0,x.jsx)(f.default,{tableData:r,tableHeaders:["STT","title","serviceName","ticketStatus","createdBy","createdDate","lastModifiedDate"]})}),D>0&&(0,x.jsx)(p.default,{collectionSize:D,currentPage:_,pageSize:8,onPageChange:function(e){return M(e)}})]})}):(0,x.jsxs)(o.View,{style:{alignItems:"center",justifyContent:"center",flex:1},children:[(0,x.jsx)(c.IconEmpty,{width:(0,d.SizeDP)(200),height:(0,d.SizeDP)(150)}),(0,x.jsx)(h.default,{children:e("CM.emptyData")})]})})}},97667:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841);t.default=r.StyleSheet.create({ctnContent:{paddingHorizontal:8,paddingVertical:4,borderRadius:4,alignItems:"center",justifyContent:"center"}})},36913:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85715)),a=n(21527),l=r(n(73639)),o=r(n(27163)),u=r(n(96237)),s=r(n(90487)),c=r(n(97433)),d=r(n(89076)),f=r(n(32251)),p=r(n(24541)),y=n(87841),m=n(41995),h=n(2884),v=n(47671);t.default=function(e){var t=e.selectTabBottom,n=e.userTaskId,r=e.recipientDetailsId,g=e.isRealoadWebview,S=e.notifyActionType,x=(0,a.useState)({key:"background",title:"Tổng quan"}),j=(0,i.default)(x,2),b=j[0],w=j[1],D=(0,a.useRef)(null),C=(0,a.useState)({width:y.Dimensions.get("screen").width,height:y.Dimensions.get("screen").height}),T=(0,i.default)(C,2),I=T[0],k=T[1];(0,a.useEffect)((function(){var e=y.Dimensions.addEventListener("change",(function(e){var t=e.screen;k({width:t.width,height:t.height})}));return function(){return e.remove()}}),[]);var P=(0,h.useTranslation)().t,_=(0,a.useState)([{key:"background",title:"Tổng quan"},{key:"flow",title:"Thông tin giao dịch"},{key:"hsitoryTicket",title:"Lịch sử giao dịch"},{key:"ticketRelative",title:"Giao dịch liên quan"},{key:"sla",title:"Thông tin SLA"},{key:"document",title:"Tài liệu đính kèm"}]),M=(0,i.default)(_,1)[0],F=function(e){var t,n=Math.floor(e);null==D||null==(t=D.current)||t.scrollToIndex({animated:!0,index:""+n,viewOffset:I.width/3})};return(0,v.jsxs)(y.View,{style:{flex:1},children:[(0,v.jsx)(y.View,{children:(0,v.jsx)(y.FlatList,{ref:D,horizontal:!0,data:M,keyExtractor:function(e,t){return String(e.key)},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,initialScrollIndex:0,renderItem:function(e){var t=e.item,n=e.index;return(0,v.jsx)(y.TouchableOpacity,{style:[c.default.ctnMainTab,b.key===t.key&&c.default.activeTab],onPress:function(){w(t),F(n)},children:(0,v.jsx)(p.default,{style:[c.default.tabBar,b.key===t.key&&c.default.colorActive],children:P(`TK.${t.key}`)})})}})}),(0,v.jsx)(y.View,{style:{height:(0,m.SizeDP)(6),backgroundColor:"#F8FAFE"}}),(0,v.jsx)(y.View,{style:{flex:1},children:function(e){switch(e.key){case"background":return(0,v.jsx)(l.default,{userTaskId:n,recipientDetailsId:r,selectTabBottom:t,isRealoadWebview:g,notifyActionType:S});case"flow":return(0,v.jsx)(o.default,{});case"document":return(0,v.jsx)(d.default,{});case"hsitoryTicket":return(0,v.jsx)(u.default,{});case"ticketRelative":return(0,v.jsx)(s.default,{});case"sla":return(0,v.jsx)(f.default,{});default:return(0,v.jsx)(y.View,{})}}(b)})]})}},97433:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=n(41995);t.default=r.StyleSheet.create({tabBar:{fontSize:i.FontSize.FontSmall,fontFamily:i.Font.InterRegular400,textAlign:"center",lineHeight:(0,a.SizeDP)(16)},ctnMainTab:{paddingHorizontal:(0,a.SizeDP)(16),paddingVertical:(0,a.SizeDP)(12)},activeTab:{borderBottomWidth:(0,a.SizeDP)(4),borderBottomColor:i.Color.BgPrimary},colorActive:{color:i.Color.BgPrimary}})},74821:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(7005),a=r(n(93238)),l=n(12638),o=n(20880),u=n(14740),s=n(88e3),c=n(47671);t.default=function(){var e,t,n,r,d,f,p=(0,u.useRoute)(),y=null!=(e=null==p||null==(t=p.params)?void 0:t.selectTabBottom)?e:1,m=null!=(n=null==p||null==(r=p.params)?void 0:r.dataTicket)?n:{},h=(0,l.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,v=(0,l.useAppSelector)((function(e){return e.common})).accessToken;return(0,c.jsx)(i.SafeAreaView,{edges:["bottom"],style:{flex:1,backgroundColor:"#fff"},children:(0,c.jsx)(a.default,{startInLoadingState:!0,injectedJavaScript:o.String.SCRIPT_SCALE_WEBVIEW,source:{uri:(0,s.getConfig)().BASE_URL_TICKET+(1===y?`${h.id}?_typeView=mine&access_token=${v}`:`${h.id}?_recipientDetailsId=${null==m?void 0:m.implementId}&_userTaskId=${null==m||null==(d=m.recipients)||null==(f=d[0])?void 0:f.id}&_typeView=required&access_token=${v}`)}})})}},35648:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),u=n(87841),s=n(2884),c=n(40851),d=r(n(66771)),f=r(n(6663)),p=n(32207),y=r(n(24541)),m=n(12638),h=n(47671);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}t.default=function(e){var t=e.onSelect,n=e.placeholder,r=void 0===n?"TK.select":n,v=(0,s.useTranslation)().t,g=(0,o.useState)(!1),S=(0,l.default)(g,2),x=S[0],j=S[1],b=(0,o.useState)(null),w=(0,l.default)(b,2),D=w[0],C=w[1],T=(0,o.useState)(""),I=(0,l.default)(T,2),k=I[0],P=I[1],_=(0,o.useState)([]),M=(0,l.default)(_,2),F=M[0],O=M[1],E=(0,o.useState)(0),R=(0,l.default)(E,2),V=R[0],z=R[1],B=(0,o.useState)(0),A=(0,l.default)(B,2),L=A[0],N=A[1],H=(0,o.useState)(!1),U=(0,l.default)(H,2),W=U[0],$=U[1],G=(0,m.useAppSelector)((function(e){return e.account})).dataAccount,Y=(0,d.default)(k,500),K=(0,c.useReviewServices)();(0,o.useEffect)((function(){J(0,Y)}),[Y]);var q,J=(q=(0,a.default)((function*(e,t){try{var n={page:e,size:20},r={advanced:!0,orgIn:"/1833/5390/5392/5943",q:t.trim().toLowerCase(),resource:"table_user"},a=yield K.getUserInfoModel(n,r);a&&(O(0===e?a.data.filter((function(e){return e.email!==G.email})):[].concat((0,i.default)(F),(0,i.default)(a.data)).filter((function(e){return e.email!==G.email}))),N(a.totalRecords))}catch(e){}finally{$(!1)}})),function(e,t){return q.apply(this,arguments)});return(0,h.jsxs)(u.View,{style:f.default.container,children:[(0,h.jsxs)(u.View,{style:f.default.selectContainer,children:[(0,h.jsx)(u.TouchableOpacity,{style:f.default.select,onPress:function(){j(!0),P("")},children:(0,h.jsx)(u.Text,{style:f.default.selectText,children:(null==D?void 0:D.email)||v(r)})}),D&&(0,h.jsx)(u.TouchableOpacity,{style:f.default.clearButton,onPress:function(){C(null),t(null)},children:(0,h.jsx)(p.Icon,{name:"close",width:20,height:20})})]}),(0,h.jsx)(u.Modal,{visible:x,animationType:"slide",transparent:!0,children:(0,h.jsx)(u.SafeAreaView,{style:f.default.modalContainer,children:(0,h.jsxs)(u.View,{style:f.default.modalContent,children:[(0,h.jsx)(u.TextInput,{style:f.default.searchInput,placeholder:v("CM.search"),value:k,onChangeText:P}),(0,h.jsx)(u.FlatList,{refreshing:W,onRefresh:function(){$(!0),z(0),J(0,Y)},data:F,renderItem:function(e){var n=e.item;return(0,h.jsxs)(u.TouchableOpacity,{style:f.default.item,onPress:function(){return function(e){C(e),t(e),j(!1)}(n)},children:[(0,h.jsx)(u.Image,{width:32,height:32,borderRadius:16,source:{uri:n.imageUrl||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,h.jsxs)(u.View,{children:[(0,h.jsx)(y.default,{style:f.default.textname,children:n.personalName}),(0,h.jsx)(y.default,{style:f.default.textEmail,children:n.email})]})]})},keyExtractor:function(e){return e.email},onEndReached:function(){F.length<L&&(J(V+1,Y),z(V+1))},onEndReachedThreshold:.5,initialNumToRender:20}),(0,h.jsx)(u.TouchableOpacity,{style:f.default.closeButton,onPress:function(){return j(!1)},children:(0,h.jsx)(u.Text,{style:f.default.closeButtonText,children:v("CM.close")})})]})})})]})}},6859:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(87841),o=r(n(43184)),u=n(2884),s=r(n(54813)),c=r(n(24541)),d=n(12638),f=r(n(94516)),p=r(n(35648)),y=n(11671),m=n(21527),h=r(n(6663)),v=r(n(77389)),g=n(47671);t.default=function(e){var t=e.onClose,n=e.userTaskId,r=e.recipientDetailsId,S=(0,u.useTranslation)().t,x=(0,m.useState)(null),j=(0,a.default)(x,2),b=j[0],w=j[1],D=(0,d.useAppSelector)((function(e){return e.account})).dataAccount,C=(0,d.useAppSelector)((function(e){return e.ticket})).dataTicketRedux,T=(0,y.useTicketServices)(),I=(0,m.useState)(),k=(0,a.default)(I,2),P=k[0],_=k[1];(0,m.useEffect)((function(){O()}),[]);var M,F,O=(M=(0,i.default)((function*(){var e=yield T.getSla(C.id);if(e){var t=e.find((function(e){return e.recipientId==n}));_(t)}})),function(){return M.apply(this,arguments)}),E=(F=(0,i.default)((function*(){var e={ticketId:C.id,recipientId:null,contactId:null,email:null==b?void 0:b.email,name:null==b?void 0:b.personalName,phone:null==b?void 0:b.phone,reason:"null"};(yield T.forwardActionUser(C.id,n,r,e))?(t(),v.default.show({type:"success",text1:S("CM.info"),text2:S("CM.forwardSuccessfully")})):v.default.show({type:"error",text1:S("CM.info"),text2:S("CM.forwardFail")})})),function(){return F.apply(this,arguments)});return(0,g.jsxs)(l.View,{style:{flex:1},children:[(0,g.jsx)(o.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:S("CM.authority"),onPressIconLeft:t}),(0,g.jsxs)(l.View,{style:h.default.ctnBody,children:[(0,g.jsx)(s.default,{label:S("TK.nameJob"),value:null==P?void 0:P.notionName,onChangeText:function(){},disabled:!0}),(0,g.jsxs)(l.View,{style:h.default.group,children:[(0,g.jsx)(c.default,{style:h.default.textTitle,children:S("TK.userAction")}),(0,g.jsxs)(l.View,{style:h.default.ctnImage,children:[(0,g.jsx)(l.Image,{width:32,height:32,borderRadius:16,source:{uri:(null==D?void 0:D.imageUrl)||"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,g.jsxs)(l.View,{style:{flex:1},children:[(0,g.jsx)(c.default,{style:h.default.textname,children:`${D.firstName} ${D.lastName}`}),(0,g.jsx)(c.default,{style:h.default.textEmail,children:D.email})]})]})]}),(0,g.jsxs)(l.View,{style:h.default.group,children:[(0,g.jsxs)(c.default,{style:h.default.textTitle,children:[S("TK.selectUserAuthor")," ",(0,g.jsx)(c.default,{style:{color:"#e14337"},children:"*"})]}),(0,g.jsx)(p.default,{onSelect:function(e){w(e)}})]})]}),(0,g.jsxs)(l.View,{style:h.default.ctnFooter,children:[(0,g.jsx)(f.default,{style:{flex:1,backgroundColor:"#F2F5F8"},label:S("CM.labelCancel"),styleLabel:{color:"#00204DB2"},onPress:t}),(0,g.jsx)(f.default,{style:{flex:1},label:S("CM.confirm"),onPress:E})]})]})}},6663:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({ctnBody:{padding:10,flex:1},ctnFooter:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:8,paddingHorizontal:10},group:{rowGap:8,paddingVertical:8},textTitle:{fontSize:12,fontFamily:i.Font.InterMedium500,color:"#00204DF2"},ctnImage:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",columnGap:8,paddingHorizontal:16,paddingVertical:10,backgroundColor:"#e6eaf0",borderRadius:8},textname:{color:"#0b2b55",fontSize:14,fontFamily:i.Font.InterRegular400},textEmail:{color:"#465d7e",fontSize:12,fontFamily:i.Font.InterRegular400},container:{width:"100%"},selectContainer:{flexDirection:"row",alignItems:"center"},select:{flex:1,borderWidth:1,borderColor:"#ccc",borderRadius:8,padding:10,backgroundColor:"#fff"},selectText:{fontSize:14,fontFamily:i.Font.InterRegular400},clearButton:{marginLeft:10,padding:5,backgroundColor:"#f0f0f0",borderRadius:15,width:30,height:30,justifyContent:"center",alignItems:"center"},clearButtonText:{fontSize:16,color:"#333"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalContent:{backgroundColor:"#fff",borderRadius:10,padding:20,width:"90%",maxHeight:"80%"},searchInput:{borderWidth:1,borderColor:"#ccc",borderRadius:5,padding:10,marginBottom:10},item:{padding:10,borderBottomWidth:1,borderBottomColor:"#eee",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",columnGap:10},closeButton:{marginTop:10,padding:10,backgroundColor:"#f0f0f0",borderRadius:5,alignItems:"center"},closeButtonText:{fontSize:14,color:"#333",fontFamily:i.Font.InterSemiBold600}})},7037:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ListAction=void 0;t.ListAction=[{title:"comments",description:"Description for Item",iconName:"message-circle",navigationName:"comments"},{title:"note",description:"Description for Item",iconName:"edit-2-outline",navigationName:"note"},{title:"authority",description:"Description for Item",iconName:"swap",navigationName:"authority"}]},19691:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(14740),o=n(87841),u=r(n(64455)),s=r(n(24541)),c=V(n(41995)),d=V(n(21527)),f=n(46317),p=r(n(84478)),y=r(n(36913)),m=n(20880),h=n(12638),v=n(97427),g=n(7005),S=(n(60596),n(2884)),x=n(32207),j=r(n(69290)),b=n(7037),w=n(72676),D=n(11595),C=n(45335),T=r(n(55087)),I=n(85653),k=n(11671),P=n(40851),_=r(n(76644)),M=r(n(6859)),F=r(n(23813)),O=r(n(24617)),E=n(47671);function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function V(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}t.default=function(){var e,t,n,r,R,V,z=(0,l.useNavigation)(),B=(0,l.useRoute)(),A=(0,S.useTranslation)().t,L=(0,h.useAppDispatch)(),N=null==B?void 0:B.params,H=N.dataTicketId,U=(N.email,N.status),W=N.selectTabBottom,$=null!=(e=null==B||null==(t=B.params)?void 0:t.recipientDetailsId)?e:"",G=null!=(n=null==B||null==(r=B.params)?void 0:r.userTaskId)?n:"",Y=null!=(R=null==B||null==(V=B.params)?void 0:V.notifyActionType)?R:"",K=(0,d.useState)(!1),q=(0,a.default)(K,2),J=q[0],X=q[1],Q=(0,d.useState)(1===W?w.dataListStatusTicket.find((function(e){return e.status===U})):D.dataListStatusTicketFollowNoti.find((function(e){return e.status===U}))),Z=(0,a.default)(Q,2),ee=Z[0],te=Z[1],ne=(0,d.useState)(""),re=(0,a.default)(ne,2),ie=re[0],ae=re[1],le=(0,d.useState)(!1),oe=(0,a.default)(le,2),ue=oe[0],se=oe[1],ce=(0,d.useState)(!1),de=(0,a.default)(ce,2),fe=de[0],pe=de[1],ye=(0,d.useState)(),me=(0,a.default)(ye,2),he=me[0],ve=me[1],ge=(0,d.useState)(!1),Se=(0,a.default)(ge,2),xe=Se[0],je=Se[1],be=(0,d.useState)(!1),we=(0,a.default)(be,2),De=we[0],Ce=we[1],Te=(0,l.useIsFocused)(),Ie=(0,h.useAppSelector)((function(e){return e.ticket})),ke=Ie.dataTicketRedux,Pe=Ie.dataUserTicket,_e=Ie.dataOrgin,Me=(0,h.useAppSelector)((function(e){return e.account})).dataAccount,Fe=(0,h.useAppSelector)((function(e){return e.common})).accessToken,Oe=(0,I.useOriginServices)(),Ee=(0,k.useTicketServices)(),Re=(0,P.useReviewServices)(),Ve=(0,o.useWindowDimensions)().width,ze=function(){je((function(e){return!e})),X(!1)};(0,d.useEffect)((function(){(0,i.default)((function*(){yield Le()}))()}),[W]);var Be,Ae,Le=(Be=(0,i.default)((function*(){try{Ce(!0),yield Promise.all([Ee.getTicketById(H,Fe),Re.getStatusParty(H,Fe)]).then((e=(0,i.default)((function*(e){var t,n,r,i,a,l,o;if(!ee){var u=1===W?w.dataListStatusTicket.find((function(t){var n;return t.status===(null==(n=e[0])?void 0:n.ticketStatus)})):D.dataListStatusTicketFollowNoti.find((function(t){var n;return t.status===(null==(n=e[0])?void 0:n.ticketStatus)}));te(u)}var s,c,d=null==(t=e[0])||null==(n=t.orgIn)?void 0:n.split("/")[(null==(r=e[0])||null==(i=r.orgIn)||null==(a=i.split("/"))?void 0:a.length)-1],f=yield Ee.getMultiLoginAccount([null==e||null==(l=e[0])?void 0:l.createdBy],Fe);try{s=yield Oe.getOrigin(d,Fe)}catch(e){}try{c=yield Ee.getImplementByModelerId(e[0].modelerId)}catch(e){}ve(null==(o=c)?void 0:o.data.filter((function(e){return e.userTaskId==G})).find((function(e){return e.email==Me.email}))),L(v.ticketActions.setDataTicket(e[0])),L(v.ticketActions.setDataUserTicket(f[0])),L(v.ticketActions.setDataOrgin(s)),L(v.ticketActions.setStatusPartyRaw(e[1])),"ticket_tag_comment"===Y&&ae("comments")})),function(t){return e.apply(this,arguments)})).catch((function(e){}))}catch(e){console.log(e)}finally{Ce(!1)}var e})),function(){return Be.apply(this,arguments)}),Ne=function(){X(!0)};return De?(0,E.jsx)(g.SafeAreaView,{style:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"},children:(0,E.jsx)(o.ActivityIndicator,{color:m.Color.BgPrimary,size:"large"})}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(g.SafeAreaView,{style:{backgroundColor:"#fff",flex:1},children:[(0,E.jsx)(o.StatusBar,{barStyle:"dark-content",backgroundColor:m.Color.Transparent}),(0,E.jsx)(p.default,{onPressIconLeft:function(){z.navigate(m.NavigationName.BottomTabs)},contentStyle:{backgroundColor:"#fff"},title:null!=ke&&ke.title?null==ke?void 0:ke.title:"---",renderContentRight:function(){return(0,E.jsx)(o.View,{style:{alignItems:"center",flexDirection:"row"},children:(0,E.jsx)(x.TopNavigationAction,{hitSlop:15,onPress:Ne,icon:(0,E.jsx)(x.Icon,{fill:"#00204D",name:"more-vertical"})})})},alignment:"start"}),(0,E.jsx)(x.Divider,{}),(0,E.jsx)(o.View,{style:{flex:1},children:(null==ke?void 0:ke.id)===H&&(0,E.jsx)(y.default,{userTaskId:G,recipientDetailsId:$,selectTabBottom:W,isRealoadWebview:fe,notifyActionType:Y})}),Te&&(0,E.jsx)(o.View,{children:(0,E.jsx)(C.Portal,{children:(0,E.jsx)(C.FAB.Group,{open:ue,visible:!0,variant:"primary",style:{paddingRight:Ve-100},fabStyle:u.default.fabStyle,icon:ue?function(){return(0,E.jsx)(x.Icon,{fill:"#fff",name:"close-outline"})}:function(){return(0,E.jsx)(x.Icon,{fill:"#fff",name:"plus-outline"})},actions:function(e){if(1===W||!e)return b.ListAction.filter((function(e){return"authority"!==e.navigationName})).map((function(e){return{icon:function(){return(0,E.jsx)(x.Icon,{fill:"#985FF4",name:e.iconName})},label:A(`CM.${e.title}`),labelStyle:u.default.iconStyle,onPress:function(){return ae(e.navigationName)}}}));var t=JSON.parse(null==e?void 0:e.authorizationType),n=b.ListAction;return(null==t?void 0:t.length)>0||(n=b.ListAction.filter((function(e){return"authority"!==e.navigationName}))),n.map((function(e){return{icon:function(){return(0,E.jsx)(x.Icon,{fill:"#985FF4",name:e.iconName})},label:A(`CM.${e.title}`),labelStyle:u.default.iconStyle,onPress:function(){return ae(e.navigationName)}}}))}(he),onStateChange:function(){return se(!ue)},onPress:function(){}})})})]}),(0,E.jsx)(j.default,{isVisible:J,onClose:function(){return X(!1)},title:A("CM.info"),renderContent:(Ae=null==ke?void 0:ke.rate,(0,E.jsxs)(o.View,{style:{rowGap:10},children:[(0,E.jsxs)(o.View,{style:[u.default.columnCenter],children:[(0,E.jsxs)(o.View,{style:[u.default.columnSubCenter],children:[(0,E.jsx)(x.Icon,{fill:"#00204D",width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16),name:"person"}),(0,E.jsx)(s.default,{style:u.default.textTit,children:A("TK.staff")})]}),(0,E.jsxs)(o.View,{style:[{columnGap:10,flexDirection:"row",alignItems:"center",justifyContent:"flex-start",flex:1}],children:[(0,E.jsx)(o.Image,{width:(0,c.SizeDP)(24),height:(0,c.SizeDP)(24),borderRadius:(0,c.SizeDP)(12),source:{uri:null!=Me&&Me.imageUrl?null==Me?void 0:Me.imageUrl:"https://static.vecteezy.com/system/resources/previews/009/292/244/original/default-avatar-icon-of-social-media-user-vector.jpg"}}),(0,E.jsx)(s.default,{style:u.default.textDes,children:""+(null==Pe?void 0:Pe.personalName)})]})]}),(0,E.jsxs)(o.View,{style:[u.default.columnCenter],children:[(0,E.jsxs)(o.View,{style:[u.default.columnSubCenter],children:[(0,E.jsx)(f.IconMailFill,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)}),(0,E.jsx)(s.default,{style:u.default.textTit,children:A("CM.email")})]}),(0,E.jsx)(s.default,{style:u.default.textDes,children:null==Pe?void 0:Pe.email})]}),(0,E.jsxs)(o.View,{style:[u.default.columnCenter],children:[(0,E.jsxs)(o.View,{style:[u.default.columnSubCenter],children:[(0,E.jsx)(f.IconPeople,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)}),(0,E.jsx)(s.default,{style:u.default.textTit,children:A("CM.orgIn")})]}),(0,E.jsx)(s.default,{style:u.default.textDes,children:null==_e?void 0:_e.name})]}),(0,E.jsxs)(o.View,{style:[u.default.columnCenter],children:[(0,E.jsxs)(o.View,{style:[u.default.columnSubCenter],children:[(0,E.jsx)(x.Icon,{name:"bookmark",width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)}),(0,E.jsx)(s.default,{style:u.default.textTit,children:A("CM.status")})]}),(0,E.jsxs)(o.View,{style:[{flex:1,flexDirection:"row"}],children:[(0,E.jsx)(o.View,{style:{backgroundColor:null==ee?void 0:ee.bgColor,paddingHorizontal:5,paddingVertical:3,borderRadius:4},children:(0,E.jsx)(s.default,{style:[{color:null==ee?void 0:ee.color,textAlign:"center",fontSize:c.default.FontTinier,fontFamily:m.Font.InterMedium500}],children:A(`TK.${null==ke?void 0:ke.ticketStatus}`)})}),(0,E.jsx)(o.View,{style:{flex:1}})]})]}),"completed"==(null==ke?void 0:ke.ticketStatus)&&(0,E.jsxs)(o.View,{style:[u.default.columnCenter],children:[(0,E.jsxs)(o.View,{style:[u.default.columnSubCenter],children:[(0,E.jsx)(f.IconCheckmarkCircle,{fill:m.Color.gray,width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16)}),(0,E.jsx)(s.default,{style:u.default.textTit,children:A("TK.rate")})]}),(0,E.jsxs)(o.View,{style:{flex:1,flexDirection:"row"},children:[null==Ae||null==Ae?(0,E.jsx)(o.TouchableOpacity,{style:u.default.btnRate,onPress:function(){return ze()},children:(0,E.jsx)(s.default,{style:u.default.btnRate,children:A("TK.rate_now")})}):(0,E.jsx)(E.Fragment,{children:new Array(5).fill(1).map((function(e,t){return t>=Ae?(0,E.jsx)(f.IconStarOutline,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16),fill:"#D3D3D3"},t):(0,E.jsx)(f.IconStar,{width:(0,c.SizeDP)(16),height:(0,c.SizeDP)(16),fill:m.Color.yellow},t)}))}),(0,E.jsx)(o.View,{style:{flex:1}})]})]})]}))}),xe&&(0,E.jsx)(F.default,{isVisible:xe,toogleRateNow:ze}),(0,E.jsx)(_.default,{isVisible:"comments"===ie,children:(0,E.jsx)(T.default,{onClose:function(){return ae("")}})}),(0,E.jsx)(_.default,{isVisible:"authority"===ie,children:(0,E.jsx)(M.default,{userTaskId:G,recipientDetailsId:$,onClose:function(){ae(""),pe(!fe)}})}),(0,E.jsx)(_.default,{isVisible:"note"===ie,children:(0,E.jsx)(O.default,{onClose:function(){return ae("")}})})]})}},64455:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnMain:{backgroundColor:a.Color.White},ctnBody:{backgroundColor:a.Color.White},ctnbodyDetail:{margin:(0,i.SizeDP)(16),position:"relative",backgroundColor:a.Color.White,borderRadius:(0,i.SizeDP)(16),padding:(0,i.SizeDP)(16),shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:5,elevation:2},textTitle:{textAlign:"center",fontFamily:a.Font.InterSemiBold600,fontSize:i.default.FontBase,color:a.Color.Text},priority:{alignItems:"center",justifyContent:"center",paddingVertical:(0,i.SizeDP)(16)},priorityDetail:{borderRadius:(0,i.SizeDP)(16),paddingHorizontal:(0,i.SizeDP)(8),paddingVertical:(0,i.SizeDP)(4),backgroundColor:"#FCEEED"},priorityText:{fontFamily:a.Font.InterRegular400,fontSize:i.default.FontTiny},rowCenterStart:{flexDirection:"row",justifyContent:"center",alignItems:"flex-start",columnGap:(0,i.SizeDP)(10),marginTop:(0,i.SizeDP)(10),borderTopWidth:(0,i.SizeDP)(.5),borderTopColor:a.Color.borderColor,paddingTop:(0,i.SizeDP)(10)},columnCenter:{justifyContent:"space-around",alignItems:"center",gap:(0,i.SizeDP)(6),flexDirection:"row"},columnSubCenter:{justifyContent:"flex-start",alignItems:"center",gap:(0,i.SizeDP)(10),flexDirection:"row",flex:.5},textDes:{fontSize:i.default.FontTiny,fontFamily:a.Font.InterMedium500,color:a.Color.colorText,flex:1},ctnImage:{width:(0,i.SizeDP)(24),height:(0,i.SizeDP)(24),borderRadius:(0,i.SizeDP)(12),overflow:"hidden",backgroundColor:a.Color.BgPrimary},borderStyle:{height:"100%",width:(0,i.SizeDP)(1),backgroundColor:a.Color.borderColor},textTit:{fontFamily:a.Font.InterRegular400,fontSize:i.default.FontTinier,color:a.Color.Text07},ctnStatus:{borderRadius:(0,i.SizeDP)(4),paddingHorizontal:(0,i.SizeDP)(8),flex:1},fabStyle:{borderRadius:25,width:50,height:50,alignItems:"center",justifyContent:"center",backgroundColor:"#6F2CED"},iconStyle:{left:100,position:"absolute",top:-10,fontFamily:a.Font.InterMedium500},btnRate:{color:a.Color.White,backgroundColor:a.Color.rate,padding:(0,i.SizeDP)(6),borderRadius:6}})},84556:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(41132)),a=r(n(29293)),l=r(n(85715)),o=n(87841),u=n(7005),s=r(n(24541)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),d=r(n(87456)),f=r(n(12845)),p=n(20880),y=n(12638),m=r(n(77389)),h=n(2884),v=n(11671),g=r(n(45001)),S=r(n(27747)),x=n(14740),j=n(60596),b=r(n(67903)),w=n(32207),D=r(n(79445)),C=n(41995),T=n(47671);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}t.default=function(e){var t=e.dataListStatus,n=(0,h.useTranslation)().t,r=(0,c.useState)([]),I=(0,l.default)(r,2),k=I[0],P=I[1],_=(0,c.useState)(0),M=(0,l.default)(_,2),F=M[0],O=M[1],E=(0,c.useState)(0),R=(0,l.default)(E,2),V=R[0],z=R[1],B=(0,c.useState)(!1),A=(0,l.default)(B,2),L=A[0],N=A[1],H=(0,c.useState)(!1),U=(0,l.default)(H,2),W=U[0],$=U[1],G=(0,c.useState)(""),Y=(0,l.default)(G,2),K=Y[0],q=Y[1],J=(0,c.useState)(""),X=(0,l.default)(J,2),Q=X[0],Z=X[1],ee=(0,c.useState)(!1),te=(0,l.default)(ee,2),ne=te[0],re=te[1],ie=(0,c.useState)(!1),ae=(0,l.default)(ie,2),le=ae[0],oe=ae[1],ue=(0,c.useState)(),se=(0,l.default)(ue,2),ce=se[0],de=se[1],fe=(0,y.useAppSelector)((function(e){return e.common})).accessToken,pe=(0,v.useTicketServices)(),ye=(0,o.useWindowDimensions)().width,me=function(){q(""),$(!W)},he=function(e){de(e),me()};(0,x.useFocusEffect)((0,c.useCallback)((function(){Se(0,!1)}),[]));var ve,ge,Se=(ve=(0,a.default)((function*(e,n){try{var r;n?oe(!0):re(!0);var a={keyWord:"",terms:(o={},t.status===j.Status.processing?(o.status=t.status,o.resourceStatus=t.status):t.status===j.Status.overdue?(o.status=j.Status.processing,o.resourceStatus=j.Status.overdue):t.status===j.Status.voided?(o.resourceStatus=t.status,o.status=j.Status.processing):o.status=t.status,o),id:null},l=yield pe.getTicketListFollow(e,20,t.status===j.Status.processing?"createdDate,desc":"lastModifiedDate,desc",a,fe);P(0===e?null==l?void 0:l.content:[].concat((0,i.default)(k),(0,i.default)(null==l?void 0:l.content))),O(Number(null==l||null==(r=l.page)?void 0:r.totalRecords))}catch(e){}finally{N(!1),oe(!1),re(!1)}var o})),function(e,t){return ve.apply(this,arguments)}),xe=(ge=(0,a.default)((function*(e){try{var t,r;if(0===(null==e?void 0:e.length))return void Z("CM.requireFillReason");var i={ticketId:null!=(t=null==ce||null==(r=ce.resourceId)?void 0:r.split("sid_")[1])?t:"",reason:e},a=yield pe.cancelTicket(i,fe);if(a.data)m.default.show({text1:n("CM.noti"),type:"success",text2:n("TK.rejectSuccess")});else{var l,o=null==a||null==(l=a.error)?void 0:l.message;m.default.show({text1:n("CM.noti"),type:"error",text2:n(`TK.${o||"rejectFailure"}`)})}me()}catch(e){}})),function(e){return ge.apply(this,arguments)});return ne&&!le?(0,T.jsx)(w.List,{data:Array(8).fill({}),horizontal:!0,pagingEnabled:!0,snapToAlignment:"start",showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,snapToInterval:ye-40,decelerationRate:"fast",contentContainerStyle:[{backgroundColor:"#fff",paddingRight:40,flex:1}],style:{width:ye>C.TYPE_SCREEN.mobile?(ye-40)/2:ye-40},renderItem:function(){return(0,T.jsx)(D.default,{})},ItemSeparatorComponent:w.Divider}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(u.SafeAreaView,{style:[d.default.ctnMain,{width:ye>C.TYPE_SCREEN.mobile?(ye-40)/2:ye-40}],edges:["left","right"],children:[(0,T.jsxs)(o.View,{style:d.default.ctnHeader,children:[(0,T.jsx)(o.View,{style:[d.default.ctnNumber,{backgroundColor:t.color}],children:(0,T.jsx)(s.default,{style:d.default.text,children:F})}),(0,T.jsx)(o.View,{style:[d.default.ctnText,{backgroundColor:t.color}],children:(0,T.jsx)(s.default,{style:d.default.text,children:n(`TK.name_${t.status}`)})})]}),k&&(0,T.jsx)(o.FlatList,{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,data:k,refreshing:L,onRefresh:function(){N(!0),z(0),Se(0,!1)},onEndReached:function(){k.length<F&&(Se(V+1,!0),z(V+1))},onEndReachedThreshold:.5,keyExtractor:function(e){return""+e.id},renderItem:function(e){var n=e.item;return(0,T.jsx)(f.default,{item:n,dataListStatus:t,handleCancelTicket:he})},ListEmptyComponent:function(){return(0,T.jsx)(o.View,{style:{alignItems:"center",justifyContent:"center",flex:1},children:(0,T.jsx)(s.default,{children:n("CM.emptyData")})})},ListFooterComponent:function(){return le&&(0,T.jsx)(b.default,{})}})]}),W&&(0,T.jsx)(g.default,{isVisible:W,onClose:me,title:`${n("TK.confirmClear")} ${null==ce?void 0:ce.resourceName}`,type:"cancel",labelCancel:n("HM.cancel"),labelConfirm:n("CM.labelCancel"),styleBtnRight:{backgroundColor:p.Color.RedE14337},onConfirm:function(){return xe(K)},renderContent:function(){return(0,T.jsx)(o.View,{style:{width:"100%",marginVertical:6},children:(0,T.jsx)(S.default,{value:K,onChangeText:q,errorMessage:n(Q),isRequired:!0,multiline:!0,isFloatingLabel:!0,label:n("CM.fillReason"),maxLength:400})})}})]})}},87456:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnMain:{flex:1},ctnHeader:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",marginTop:(0,i.SizeDP)(12),marginLeft:(0,i.SizeDP)(16),columnGap:(0,i.SizeDP)(8),paddingBottom:(0,i.SizeDP)(10)},ctnNumber:{paddingHorizontal:(0,i.SizeDP)(4),height:(0,i.SizeDP)(24),minWidth:(0,i.SizeDP)(24),borderRadius:(0,i.SizeDP)(4),justifyContent:"center",alignItems:"center"},ctnText:{height:(0,i.SizeDP)(24),justifyContent:"center",alignItems:"center",paddingHorizontal:(0,i.SizeDP)(4),borderRadius:(0,i.SizeDP)(5)},text:{fontFamily:a.Font.InterSemiBold600,fontSize:i.default.FontSmall,color:a.Color.White},ctnIcon:{transform:[{rotate:"90deg"}],width:(0,i.SizeDP)(16),height:(0,i.SizeDP)(16),alignItems:"center",justifyContent:"center",marginLeft:(0,i.SizeDP)(8)}})},83629:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getListAction=void 0;var r=n(46317),i=n(41995),a=n(60596),l=n(47671);t.getListAction=function(e,t){return e===a.Status.processing?t?[{id:1,key:"TK.review",value:"review",icon:(0,l.jsx)(r.IconPerson,{width:(0,i.SizeDP)(18),height:(0,i.SizeDP)(18)})},{id:2,key:"TK.cancel",value:"cancel",icon:(0,l.jsx)(r.IconTrash,{width:(0,i.SizeDP)(18),height:(0,i.SizeDP)(18)})}]:[{id:1,key:"TK.review",value:"review",icon:(0,l.jsx)(r.IconPerson,{width:(0,i.SizeDP)(18),height:(0,i.SizeDP)(18)})}]:[]}},12845:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=r(n(24541)),l=r(n(82949)),o=n(46317),u=n(41995),s=r(n(21527)),c=n(35708),d=n(2543),f=n(14740),p=n(20880),y=n(2884),m=r(n(85555)),h=n(83629),v=n(60596),g=n(45335),S=n(12638),x=n(37106),j=n(47671),b=s.default.memo((function(e){var t=e.item,n=e.dataListStatus,r=e.handleCancelTicket,s=(0,f.useNavigation)(),b=(0,y.useTranslation)().t,w=(0,S.useAppSelector)((function(e){return e.account})).dataAccount,D=(0,x.useZutandStore)((function(e){return e})).setStatusTicketSelect,C=function(){var e;D(n.status),s.navigate(p.NavigationName.BottomTabNavigationTicketDetail,{dataTicketId:null==t||null==(e=t.resourceId)?void 0:e.substr(4),email:t.sendFrom,status:n.status,selectTabBottom:2,recipientDetailsId:t.implementId,userTaskId:t.recipientId})},T=function(){if(t.status===v.Status.overdue){if(I(t.remindTime,t.estimateDate))return`${b("TK.before")} `+_(null==t?void 0:t.remindTime,null==t?void 0:t.estimateDate);if(k(t.estimateDate,null))return`${b("TK.late")} `+P(null==t?void 0:t.estimateDate,null)}return t.status!==v.Status.completed&&t.status!==v.Status.accepted||!k(t.estimateDate,t.finishDate)?"":`${b("TK.late")} `+P(null==t?void 0:t.estimateDate,null==t?void 0:t.finishDate)},I=function(e,t){if(!e)return!1;if(Number(e)>0){var n=Math.floor(new Date(t).getTime()/1e3),r=n-60*Number(e),i=Math.floor((new Date).getTime()/1e3);return r<i&&i<n}},k=function(e,t){if(e){if(t){var n=Math.floor(new Date(e).getTime()/1e3);return Math.floor(new Date(t).getTime()/1e3)>n}var r=Math.floor(new Date(e).getTime()/1e3);return Math.floor((new Date).getTime()/1e3)>r}return!1},P=function(e,t){if(t){var n=Math.floor(new Date(e).getTime()),r=Math.floor(new Date(t).getTime());return M(r-n)}var i=Math.floor(new Date(e).getTime()),a=Math.floor((new Date).getTime());return M(a-i)},_=function(e,t){if(Number(e)>0){var n=Math.floor(new Date(t).getTime()),r=Math.floor((new Date).getTime());return M(n-r)}},M=function(e){var t=Math.floor(e/1e3),n=t%86400,r=n%3600;return`${Math.floor(t/86400)}d${Math.floor(n/3600)}h${Math.floor(r/60)}m`},F=function(e){switch(e.value){case"review":return void C();case"cancel":return void r(t)}};return(0,j.jsxs)(i.TouchableOpacity,{onPress:C,style:l.default.ctnMain,children:[(0,j.jsxs)(i.View,{style:l.default.ctnHeader,children:[(0,j.jsx)(a.default,{style:[l.default.title,{flex:1,marginRight:(0,u.SizeDP)(12)}],children:(0,d.isEmpty)(t.resourceName)?"---":t.resourceName}),(0,j.jsx)(i.View,{style:l.default.time,children:(0,j.jsxs)(i.View,{style:l.default.center,children:[!(0,d.isEmpty)(T())&&n.status===v.Status.processing&&(0,j.jsx)(g.Tooltip,{title:T(),children:(0,j.jsx)(o.IconClock,{width:(0,u.SizeDP)(16),height:(0,u.SizeDP)(16)})}),n.status===v.Status.processing&&(0,j.jsx)(m.default,{listDropdown:(0,h.getListAction)(t.status,!t.sendFrom||t.sendFrom===w.email),onChangeItem:function(e){return F(e)},containerStyle:{width:(0,u.SizeDP)(12)}})]})})]}),(0,j.jsxs)(a.default,{style:{marginBottom:(0,u.SizeDP)(10),color:"#6f2ced"},children:[b("TK.step"),": ",t.notionName]}),(0,j.jsxs)(a.default,{children:[b("TK.createDate"),":"," ",c.DateUtils.convertDateToDDMMYYYY_H_M(t.createdDate)]}),!(0,d.isEmpty)(T())&&n.status===v.Status.processing&&(0,j.jsx)(a.default,{style:l.default.styleClock,children:T()}),(0,j.jsx)(i.View,{style:l.default.ctnFooter,children:(0,j.jsx)(i.View,{style:[l.default.rowCenter],children:(0,j.jsx)(i.View,{style:[l.default.viewStatus,{backgroundColor:n.bgColor,borderColor:"#fff"}],children:(0,j.jsx)(a.default,{style:[{color:n.color}],children:b(`TK.${n.status}`)})})})})]})}));t.default=b},82949:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995)),a=n(20880);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnMain:{padding:(0,i.SizeDP)(16),borderRadius:(0,i.SizeDP)(8),shadowColor:"#51459F",shadowOffset:{width:0,height:3},shadowOpacity:.1,shadowRadius:(0,i.SizeDP)(3),elevation:4,marginVertical:(0,i.SizeDP)(8),backgroundColor:a.Color.White,marginHorizontal:(0,i.SizeDP)(3),minHeight:180},title:{fontSize:i.default.FontSmall,color:a.Color.color1F2633,fontFamily:a.Font.InterSemiBold600},ctnFooter:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:(0,i.SizeDP)(16)},ctnHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:(0,i.SizeDP)(16)},rowCenter:{flexDirection:"row",justifyContent:"center",alignItems:"center",columnGap:(0,i.SizeDP)(4)},viewId:{borderWidth:(0,i.SizeDP)(1),borderColor:"#EBEEF2",borderRadius:(0,i.SizeDP)(16),paddingHorizontal:(0,i.SizeDP)(8),paddingVertical:(0,i.SizeDP)(5)},viewStatus:{borderWidth:(0,i.SizeDP)(1),borderColor:"#EBEEF2",borderRadius:(0,i.SizeDP)(16),paddingHorizontal:(0,i.SizeDP)(8),paddingVertical:(0,i.SizeDP)(5)},time:{flexDirection:"row",alignItems:"center",justifyContent:"center",columnGap:(0,i.SizeDP)(6)},center:{alignItems:"center",justifyContent:"center",flexDirection:"row",columnGap:(0,i.SizeDP)(8)},styleClock:{marginTop:(0,i.SizeDP)(6),color:a.Color.RedE14337}})},11595:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.dataListStatusTicketFollowNoti=t.dataListStatusTicketFollow=void 0;var r=n(60596);t.dataListStatusTicketFollow=[{id:1,name:"TK.name_processing",status:r.Status.processing,color:"#7F43EF",bgColor:"#F2ECFD"},{id:2,name:"TK.overdue",status:r.Status.overdue,color:"#F05959",bgColor:"#e1433780"},{id:3,name:"TK.name_completed",status:r.Status.accepted,color:"#22C55E",bgColor:"rgba(34, 197, 94, 0.1)"},{id:6,name:"TK.name_forwarded",status:r.Status.forwarded,color:"rgb(222,168,33)",bgColor:"#fbf5e4"},{id:4,name:"TK.name_voided",status:r.Status.voided,color:"#F05959",bgColor:"rgba(251, 213, 213, 1)"},{id:5,name:"TK.name_rejected",status:r.Status.rejected,color:"#6496e4",bgColor:"#6496e45c"}],t.dataListStatusTicketFollowNoti=[{id:1,name:"TK.name_processing",status:r.Status.processing,color:"#7F43EF",bgColor:"#F2ECFD"},{id:2,name:"TK.name_overdue",status:r.Status.overdue,color:"#F05959",bgColor:"rgba(251, 213, 213, 1)"},{id:3,name:"TK.name_accepted",status:r.Status.accepted,color:"#22C55E",bgColor:"rgba(34, 197, 94, 0.1)"},{id:4,name:"TK.name_accepted",status:r.Status.completed,color:"#22C55E",bgColor:"rgba(34, 197, 94, 0.1)"},{id:5,name:"TK.name_voided",status:r.Status.voided,color:"#F05959",bgColor:"rgba(251, 213, 213, 1)"},{id:6,name:"TK.name_rejected",status:r.Status.rejected,color:"#6496e4",bgColor:"#6496e45c"}]},25055:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),a=r(n(43184)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(21527)),o=r(n(84556)),u=n(11595),s=n(14740),c=n(12638),d=n(97427),f=r(n(7499)),p=n(32207),y=n(20880),m=n(2884),h=n(47671);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}t.default=function(){var e=(0,m.useTranslation)().t,t=(0,s.useNavigation)(),n=(0,c.useAppDispatch)(),r=(0,s.useNavigationState)((function(e){return e})),v=(0,i.useWindowDimensions)().width;(0,l.useEffect)((function(){n(d.ticketActions.setSelectTabBottom(r.index))}),[r.index]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.default,{title:e("TK.ticketFollow"),renderContentRight:function(){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(p.TopNavigationAction,{icon:(0,h.jsx)(p.Icon,{fill:"#ffffff",name:"search"}),onPress:function(){t.navigate(y.NavigationName.SearchTicketScreen,{type:"ticket-follow"})}})})}}),(0,h.jsx)(i.FlatList,{style:{backgroundColor:"#fff"},data:u.dataListStatusTicketFollow,horizontal:!0,pagingEnabled:!0,snapToAlignment:"start",showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,snapToInterval:v-40,decelerationRate:"fast",contentContainerStyle:[f.default.flatListContainer,{paddingRight:40}],renderItem:function(e){var t=e.item;return(0,h.jsx)(o.default,{dataListStatus:t})}})]})}},7499:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880);t.default=r.StyleSheet.create({flatListContainer:{backgroundColor:i.Color.White}})},33139:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useDashboardServices=void 0;var r=n(98814),i=n(97300);t.useDashboardServices=function(){var e=(0,i.useFetchRequest)();return(0,r.createDashboardServices)(e)}},43790:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useNotificationServices=void 0;var r=n(15876),i=n(97300);t.useNotificationServices=function(){var e=(0,i.useFetchRequest)();return(0,r.createNotificationServices)(e)}},85653:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useOriginServices=void 0;var r=n(67102),i=n(97300);t.useOriginServices=function(){var e=(0,i.useFetchRequest)();return(0,r.createOriginServices)(e)}},84093:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReviewCollaboServices=void 0;var r=n(12387),i=n(97300);t.useReviewCollaboServices=function(){var e=(0,i.useFetchRequest)();return(0,r.createEcollaboServices)(e)}},31004:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReviewEcontractServices=void 0;var r=n(47188),i=n(97300);t.useReviewEcontractServices=function(){var e=(0,i.useFetchRequest)();return(0,r.createReviewEcontractServices)(e)}},40851:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReviewServices=void 0;var r=n(38416),i=n(97300);t.useReviewServices=function(){var e=(0,i.useFetchRequest)();return(0,r.createReviewServices)(e)}},66771:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85715)),a=n(21527);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=(0,a.useState)(""),r=(0,i.default)(n,2),l=r[0],o=r[1],u=(0,a.useRef)();return(0,a.useEffect)((function(){return u.current=setTimeout((function(){return o(e)}),t),function(){clearTimeout(u.current)}}),[e,t]),l}},58526:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.listBottomTab=t.TabName=void 0;var i=r(n(91510)),a=r(n(16702)),l=r(n(50570)),o=r(n(25055)),u=t.TabName={Home:"Home",MyTicket:"MyTicket",FollowTicket:"FollowTicket",Notification:"Notification"};t.listBottomTab=[{name:u.Home,component:i.default,permission:["sidebar.admin.dashboard","erequest.sidebar.home"]},{name:u.MyTicket,component:a.default,permission:"sidebar.manageTicket.myTicket"},{name:u.FollowTicket,component:o.default,permission:"sidebar.manageTicket.requiredFollowTicket"},{name:u.Notification,component:l.default,permission:null}]},29756:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(25874),o=n(7005),u=r(n(34704)),s=n(87841),c=n(41995),d=n(46317),f=r(n(24541)),p=n(2884),y=n(21527),m=n(12638),h=n(97427),v=n(43790),g=n(37106),S=n(58526),x=n(35708),j=n(47671),b=(0,l.createBottomTabNavigator)(),w=function(e){var t=e.state,n=e.navigation,r=e.t,i=e.totalRecoders;return(0,j.jsx)(o.SafeAreaView,{edges:["bottom","left","right"],style:u.default.ctnSafeTabBottom,children:(0,j.jsx)(s.View,{style:u.default.ctnTabBottom,children:t.routes.map((function(e,a){var l="",o=t.index===a;return(0,j.jsxs)(s.TouchableOpacity,{accessibilityRole:"button",style:u.default.ctnItemTabBottom,accessibilityState:o?{selected:!0}:{},onPress:function(){var t=n.emit({type:"tabPress",target:e.key,canPreventDefault:!0});o||t.defaultPrevented||n.navigate(e.name,e.params)},children:[function(){switch(e.name){case S.TabName.Home:return l=r("CM.Home"),(0,j.jsx)(j.Fragment,{children:o?(0,j.jsx)(d.IconHomeSelect,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)}):(0,j.jsx)(d.IconHome,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)})});case S.TabName.MyTicket:return l=r("CM.MyTicket"),(0,j.jsx)(j.Fragment,{children:o?(0,j.jsx)(d.IconMyTicketSelect,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)}):(0,j.jsx)(d.IconMyTicket,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)})});case S.TabName.FollowTicket:return l=r("CM.FollowTicket"),(0,j.jsx)(j.Fragment,{children:o?(0,j.jsx)(d.IconFollowTicketSelect,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)}):(0,j.jsx)(d.IconFollowTicket,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)})});case S.TabName.Notification:return l=r("CM.Notification"),(0,j.jsxs)(s.View,{style:{position:"relative"},children:[i>0&&(0,j.jsx)(s.View,{style:{position:"absolute",backgroundColor:"#e14337",borderRadius:100,paddingHorizontal:4,paddingVertical:2,top:-5,right:i>100?-20:-12},children:(0,j.jsx)(f.default,{style:{fontSize:10,color:"#fff"},children:i<100?i:"99+"})}),o?(0,j.jsx)(d.IconNotiSelect,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)}):(0,j.jsx)(d.IconNoti,{width:(0,c.SizeDP)(23),height:(0,c.SizeDP)(20)})]})}}(),(0,j.jsx)(f.default,{style:o?u.default.txtLabelSelect:u.default.txtLabel,children:l})]},a)}))})})};t.default=function(){var e=(0,g.useZutandStore)().listMenuViewERequest,t=(0,p.useTranslation)().t,n=(0,m.useAppDispatch)(),r=(0,y.useState)(0),l=(0,a.default)(r,2),o=l[0],u=l[1],c=(0,v.useNotificationServices)(),d=(0,y.useState)([]),f=(0,a.default)(d,2),D=f[0],C=f[1];(0,y.useEffect)((function(){I()}),[]);var T,I=(T=(0,i.default)((function*(){var e=yield c.getNumberOfNotiUnread();e&&(n(h.commonActions.setTotalNumberNotiUnread(e)),u(e))})),function(){return T.apply(this,arguments)});return(0,y.useEffect)((function(){(null==e?void 0:e.length)>0&&C(S.listBottomTab.filter((function(t){return x.PermissionUtils.hasPermission(e,t.permission)})))}),[e]),(0,j.jsx)(j.Fragment,{children:D.length>0?(0,j.jsx)(b.Navigator,{tabBar:function(e){return(0,j.jsx)(w,Object.assign({},e,{t:t,totalRecoders:o}))},screenOptions:{headerShown:!1},children:null==D?void 0:D.map((function(e){return(0,j.jsx)(b.Screen,{name:e.name,component:e.component},e.name)}))}):(0,j.jsx)(s.View,{})})}},34704:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(41995));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=r.StyleSheet.create({ctnSafeTabBottom:{backgroundColor:i.Color.White,shadowColor:"#002766",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3,elevation:5},ctnTabBottom:{flexDirection:"row",height:(0,a.SizeDP)(56),backgroundColor:i.Color.White,justifyContent:"space-around",paddingHorizontal:(0,a.SizeDP)(20)},ctnItemTabBottom:{gap:(0,a.SizeDP)(4),justifyContent:"center",alignItems:"center"},txtLabel:{fontSize:a.default.FontTiniest,fontFamily:i.Font.InterRegular400,color:"rgba(0, 32, 77, 0.7)",textAlign:"center"},txtLabelSelect:{fontSize:a.default.FontTiniest,fontFamily:i.Font.InterSemiBold600,color:"#6F2CED",textAlign:"center"},ctnLine:{height:(0,a.SizeDP)(3),width:(0,a.SizeDP)(70),backgroundColor:"#396961",position:"absolute",bottom:0}})},9968:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),a=r(n(85715)),l=n(80380),o=r(n(80671)),u=r(n(29756)),s=r(n(91510)),c=r(n(77410)),d=r(n(37377)),f=r(n(77134)),p=r(n(82894)),y=r(n(74821)),m=r(n(92552)),h=r(n(77389)),v=n(45335),g=r(n(78935)),S=n(32207),x=W(n(8333)),j=n(17604),b=r(n(54153)),w=r(n(62856)),D=r(n(19691)),C=r(n(81584)),T=r(n(94149)),I=n(12638),k=W(n(21527)),P=r(n(166)),_=r(n(77664)),M=r(n(3614)),F=r(n(21758)),O=n(2884),E=n(14740),R=n(87841),V=n(20880),z=r(n(16571)),B=n(37106),A=n(60596),L=n(5690),N=r(n(662)),H=n(47671);function U(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(U=function(e){return e?n:t})(e)}function W(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=U(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var $=(0,l.createNativeStackNavigator)();t.default=function(){var e,t,n=(0,L.useAccountSettingService)(),r=(0,O.useTranslation)().i18n,l=(0,k.useState)(!0),U=(0,a.default)(l,2),W=U[0],G=U[1],Y=(0,E.useRoute)(),K=(0,E.useNavigation)(),q=(null==Y||null==(e=Y.params)?void 0:e.type)||"",J=(0,I.useAppSelector)((function(e){return e.common})).language,X=(0,B.useZutandStore)().setListMenuViewERequest,Q=(t=(0,i.default)((function*(){var e=yield n.getMenuView(A.ServiceIdApp.EREQUEST);X(e)})),function(){return t.apply(this,arguments)});(0,k.useEffect)((function(){Q(),r.changeLanguage(J),G(!1)}),[]),(0,k.useEffect)((function(){q&&!W&&Z()}),[q,W]);var Z=function(){if(null!=Y&&Y.params){var e=null==Y?void 0:Y.params;K.navigate(o.default.BottomTabNavigationTicketDetail,{dataTicketId:e.dataTicketId,status:e.status,selectTabBottom:Number(e.selectTabBottom),recipientDetailsId:e.recipientDetailsId,userTaskId:e.userTaskId,notifyActionType:e.notifyActionType})}};return W?(0,H.jsx)(R.View,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,H.jsx)(R.ActivityIndicator,{size:"large",color:V.Color.BgPrimary})}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(S.IconRegistry,{icons:[j.EvaIconsPack]}),(0,H.jsx)(S.ApplicationProvider,Object.assign({customMapping:w.default},x,{theme:Object.assign({},x.light,b.default),children:(0,H.jsxs)(v.PaperProvider,{children:[(0,H.jsxs)($.Navigator,{screenOptions:{headerShown:!1},children:[(0,H.jsx)($.Screen,{name:o.default.BottomTabs,component:u.default}),(0,H.jsx)($.Screen,{name:o.default.HomeScreen,component:s.default}),(0,H.jsx)($.Screen,{name:o.default.ServiceDetail,component:c.default}),(0,H.jsx)($.Screen,{name:o.default.CreateTicket,component:d.default}),(0,H.jsx)($.Screen,{name:o.default.CreateTicketSuccess,component:f.default}),(0,H.jsx)($.Screen,{name:o.default.AddTicketRelativeS,component:p.default}),(0,H.jsx)($.Screen,{name:o.default.BottomTabNavigationTicketDetail,component:D.default}),(0,H.jsx)($.Group,{screenOptions:{headerShown:!1,presentation:"modal"},children:(0,H.jsx)($.Screen,{name:o.default.ViewFlowDetail,component:y.default})}),(0,H.jsx)($.Screen,{name:o.default.ReviewFlow,component:m.default}),(0,H.jsx)($.Screen,{name:o.default.ReviewEcontractFlow,component:_.default}),(0,H.jsx)($.Screen,{name:o.default.ViewFileScreenEcontract,component:g.default}),(0,H.jsx)($.Screen,{name:o.default.SearchTicketScreen,component:C.default}),(0,H.jsx)($.Screen,{name:o.default.SearchHomeScreen,component:T.default}),(0,H.jsx)($.Screen,{name:o.default.ReviewEIDScreen,component:P.default}),(0,H.jsx)($.Screen,{name:o.default.CreateContractScreen,component:M.default}),(0,H.jsx)($.Screen,{name:o.default.ReviewEcollaboFlow,component:F.default}),(0,H.jsx)($.Screen,{name:o.default.HomeListService,component:N.default})]}),(0,H.jsx)(h.default,{config:z.default})]})}))]})}},98814:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createDashboardServices=void 0;var i=r(n(29293)),a=n(88e3);t.createDashboardServices=function(e){return{getCountByService:(u=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/tickets/count-by-service",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("getCountByService: ",e),Promise.reject(e)}})),function(e){return u.apply(this,arguments)}),getCountByStatus:(o=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/tickets/count-by-ticket-status",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("getCountByStatus: ",e),Promise.reject(e)}})),function(e){return o.apply(this,arguments)}),getRecentTicket:(l=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/tickets/most-recent-ticket",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("getRecentTicket: ",e),Promise.reject(e)}})),function(e){return l.apply(this,arguments)}),countByServiceRate:(r=(0,i.default)((function*(){try{var t=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/tickets/count-by-service-rate",method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==t?void 0:t.data)}catch(e){return console.log("countByServiceRate: ",e),Promise.reject(e)}})),function(){return r.apply(this,arguments)}),countByTicketRate:(n=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/tickets/count-by-ticket-rate",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("countByTicketRate: ",e),Promise.reject(e)}})),function(e){return n.apply(this,arguments)}),ticketDelay:(t=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/tickets/count-ticket-delay-by-service",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("ticketDelay: ",e),Promise.reject(e)}})),function(e){return t.apply(this,arguments)})};var t,n,r,l,o,u}},15876:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createNotificationServices=void 0;var i=r(n(29293)),a=n(88e3);t.createNotificationServices=function(e){return{getListNotifications:(r=(0,i.default)((function*(t,n){try{var r,i=yield e({url:(0,a.getConfig)().BASE_URL+"/services/notify-central/api/idaas-notifies/v2/filter",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),params:t}),l=null==i||null==(r=i.headers)?void 0:r.get("x-total-count");return Promise.resolve({data:null==i?void 0:i.data,totalRecords:l?Number(l):0})}catch(e){}})),function(e,t){return r.apply(this,arguments)}),updateNotifications:(n=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/notify-central/api/idaas-notifies",method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),typeOfResponse:"text"});return Promise.resolve(null==n?void 0:n.data)}catch(e){console.log("error",e)}})),function(e){return n.apply(this,arguments)}),getNumberOfNotiUnread:(t=(0,i.default)((function*(){try{var t=yield e({url:(0,a.getConfig)().BASE_URL+"/services/notify-central/api/notification-reports/E_REQUEST",method:"GET",headers:{},typeOfResponse:"text"});return Promise.resolve(null==t?void 0:t.data)}catch(e){console.log("error-get-number-noti",e)}})),function(){return t.apply(this,arguments)})};var t,n,r}},67102:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createOriginServices=void 0;var i=r(n(29293)),a=n(88e3);t.createOriginServices=function(e){return{getOrigin:(t=(0,i.default)((function*(t,n){var r=`/services/uaa/api/organizations/${t}`;try{var i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e,n){return t.apply(this,arguments)})};var t}},12387:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createEcollaboServices=void 0;var i=r(n(29293)),a=n(88e3);t.createEcollaboServices=function(e){return{getFileById:(n=(0,i.default)((function*(t){try{var n="/services/collabora/api/files/"+t,r=yield e({url:(0,a.getConfig)().BASE_URL_ECOLLABO+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){return console.log("getFileById",e),Promise.reject(e)}})),function(e){return n.apply(this,arguments)}),changeStatusFile:(t=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL_ECOLLABO+"/services/collabora/api/files",method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("changeStatusFile",e),Promise.reject(e)}})),function(e){return t.apply(this,arguments)})};var t,n}},47188:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createReviewEcontractServices=void 0;var i=r(n(29293)),a=n(88e3);t.createReviewEcontractServices=function(e){return{getEnvelopeById:(D=(0,i.default)((function*(t,n){try{var r=yield e({url:(0,a.getConfig)().BASE_URL+"/services/excall/api/excall",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(t)});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return D.apply(this,arguments)}),getRecipientDetail:(w=(0,i.default)((function*(t,n){try{var r=`/services/erequest/api/recipient-details/${n}/${t}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return w.apply(this,arguments)}),getEWriterDocByUserTaskIdAndTicketId:(b=(0,i.default)((function*(t,n){try{var r=`/services/erequest/api/file-repositories/getFileIdNotionEContract/${n}/userTask/${t}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return b.apply(this,arguments)}),getEcontractDocInfo:(j=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/ewriter/api/documents/details",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return j.apply(this,arguments)}),getStructureOfData:(x=(0,i.default)((function*(t,n){try{var r=`/services/erequest/api/envelope/get-template-structure/${t}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return x.apply(this,arguments)}),getDataFormFill:(S=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/eform/api/share/form-erequest",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return S.apply(this,arguments)}),createContract:(g=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/envelope/create-envelope",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),typeOfResponse:"text"});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return g.apply(this,arguments)}),getEkycRepositoryDetailIdCard:(v=(0,i.default)((function*(t,n){try{var r=`/services/common/api/p/ekyc/${t}/ekycRepositoryDetails/detailss/idCard`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json"},params:n});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return v.apply(this,arguments)}),getTicketForms:(h=(0,i.default)((function*(t){try{var n="/services/erequest/api/ticket-form-data/findByTicketId/"+t,r=yield e({url:(0,a.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e){return h.apply(this,arguments)}),getListCollaboDocs:(m=(0,i.default)((function*(t,n){try{var r=`/services/erequest/api/file-repositories/getFileIdFromCollabor/${t}/userTask/${n}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return m.apply(this,arguments)}),getDetailCollabora:(y=(0,i.default)((function*(t){try{var n=`/services/collabora/api/files/${t}/info`,r=yield e({url:(0,a.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e){return y.apply(this,arguments)}),getTicketModelerFlowStatusRaw:(p=(0,i.default)((function*(t){try{var n="/services/erequest/api/ticket-modeler-flows/statusRaw/"+t,r=yield e({url:(0,a.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){return Promise.reject(e)}})),function(e){return p.apply(this,arguments)}),getLinkIframeEcollabo:(f=(0,i.default)((function*(t){try{var n=`/services/collabora/wopi/iframe-info/${t}`,r=yield e({url:(0,a.getConfig)().BASE_URL_ECOLLABO+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){return Promise.reject(e)}})),function(e){return f.apply(this,arguments)}),deleteFile:(d=(0,i.default)((function*(t){try{var n="/services/erequest/api/file-repositories/deleteFileUploadCollaboration/"+t,r=yield e({url:(0,a.getConfig)().BASE_URL+n,method:"DELETE",headers:{"Content-Type":"application/json"},typeOfResponse:"text"});return Promise.resolve(null==r?void 0:r.data)}catch(e){return Promise.reject(e)}})),function(e){return d.apply(this,arguments)}),getListOrgin:(c=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/uaa/api/organizations/child/find-organization-like-orgin",method:"GET",params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return Promise.reject(e)}})),function(e){return c.apply(this,arguments)}),uploadFiles:(s=(0,i.default)((function*(t,n,r){try{var i=`/services/erequest/api/file-repositories/uploadFileToCollaboration/${t}/userTask/${n}`,l=yield e({url:(0,a.getConfig)().BASE_URL+i,method:"POST",headers:{"Content-Type":"multipart/form-data"},body:r});return Promise.resolve(null==l?void 0:l.data)}catch(e){return Promise.reject(e)}})),function(e,t,n){return s.apply(this,arguments)}),getAllFileInNotion:(u=(0,i.default)((function*(t,n){try{var r=`/services/erequest/api/file-repositories/getFileDTOCreateEcontract/${t}/${n}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return Promise.reject(e)}})),function(e,t){return u.apply(this,arguments)}),getExecutorByTicketIdAndUsertaskId:(o=(0,i.default)((function*(t,n){var r=`/services/erequest/api/recipient-details/implement-accepted/${t}/${n}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)})),function(e,t){return o.apply(this,arguments)}),generateEnvNo:(l=(0,i.default)((function*(t){var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/excall/api/excall",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Promise.resolve(null==n?void 0:n.data)})),function(e){return l.apply(this,arguments)}),generateEnvNoNew:(r=(0,i.default)((function*(t,n){var r=`/services/eform/api/incr?key=${t}&promotional=${n}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)})),function(e,t){return r.apply(this,arguments)}),confirmGenerateEnvNo:(n=(0,i.default)((function*(t,n){var r=`/services/eform/api/confirm?key=${t}&value=${n}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",typeOfResponse:"text"});return Promise.resolve(null==i?void 0:i.data)})),function(e,t){return n.apply(this,arguments)}),reuseGenerateEnvNo:(t=(0,i.default)((function*(t,n){var r=`/services/eform/api/reuse?key=${t}&value=${n}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",typeOfResponse:"text"});return Promise.resolve(null==i?void 0:i.data)})),function(e,n){return t.apply(this,arguments)})};var t,n,r,l,o,u,s,c,d,f,p,y,m,h,v,g,S,x,j,b,w,D}},38416:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.createReviewServices=void 0;var i=r(n(29293)),a=n(88e3);t.createReviewServices=function(e){return{getListFileByTicketId:(z=(0,i.default)((function*(t){try{var n=`/services/erequest/api/tickets/${t}/listFile`,r=yield e({url:(0,a.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e){return z.apply(this,arguments)}),getInfoFile:(V=(0,i.default)((function*(t,n){try{var r=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/file-repositories/getInformationFile",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(t)});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return V.apply(this,arguments)}),getListFormModelerById:(R=(0,i.default)((function*(t,n){try{var r="/services/idaas-eflow/api/forms/modeler/"+t,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return R.apply(this,arguments)}),getFormDetailById:(E=(0,i.default)((function*(t,n){try{var r="/services/eform/api/forms/"+t,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return E.apply(this,arguments)}),getStatusParty:(O=(0,i.default)((function*(t,n){try{var r="/services/erequest/api/ticket-recipients/statusRaw/"+t,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==i?void 0:i.data)}catch(e){console.log("errorgetStatusParty",e),Promise.reject(e)}})),function(e,t){return O.apply(this,arguments)}),getListFileRelative:(F=(0,i.default)((function*(t,n){try{var r,i="/services/erequest/api/attachments/get-by-ticketId?"+new URLSearchParams(t).toString(),l=yield e({url:(0,a.getConfig)().BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer"+n}}),o=null!=(r=null==l?void 0:l.headers.get("x-total-count"))?r:0,u=null==l?void 0:l.data;return Promise.resolve({data:u,totalRecords:Number(o)})}catch(e){Promise.reject(e)}})),function(e,t){return F.apply(this,arguments)}),viewFile:(M=(0,i.default)((function*(t,n){try{var r=yield e({url:(0,a.getConfig)().BASE_URL+"/services/s3service/api/view",method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+n},body:t});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return M.apply(this,arguments)}),deleteFileRelative:(_=(0,i.default)((function*(t,n){try{var r=`/services/erequest/api/attachments/${t}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer"+n}});return Promise.resolve(null==i?void 0:i.status)}catch(e){Promise.reject(e)}})),function(e,t){return _.apply(this,arguments)}),uploadFileRelative:(P=(0,i.default)((function*(t,n){try{var r=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/attachments",method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer"+n},body:t});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return P.apply(this,arguments)}),getFormERequest:(k=(0,i.default)((function*(t,n){try{var r="/services/eform/api/share/form-erequest?"+new URLSearchParams(t).toString(),i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return k.apply(this,arguments)}),getRecipientDetaiImpl:(I=(0,i.default)((function*(t,n){try{var r=`/services/erequest/api/recipient-details/implement/${t}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return I.apply(this,arguments)}),getFromByUserTaskId:(T=(0,i.default)((function*(t,n){try{var r=`/services/idaas-eflow/api/forms/${t}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});return Promise.resolve(null==i?void 0:i.data)}catch(e){Promise.reject(e)}})),function(e,t){return T.apply(this,arguments)}),getListAttachmentsUserTask:(C=(0,i.default)((function*(t,n,r,i){try{var l,o=`/services/erequest/api/attachments/get-attachment-userTask/${t}/${n}`,u=yield e({url:(0,a.getConfig)().BASE_URL+o,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i},params:r}),s=null!=(l=null==u?void 0:u.headers.get("x-total-count"))?l:0,c=null==u?void 0:u.data;return Promise.resolve({data:c,totalRecords:Number(s)})}catch(e){Promise.reject(e)}})),function(e,t,n,r){return C.apply(this,arguments)}),getListFileReview:(D=(0,i.default)((function*(t,n,r){try{var i=`/services/erequest/api/tickets/${t}/userTaskId/${n}/listFile`,l=yield e({url:(0,a.getConfig)().BASE_URL+i,method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}});return Promise.resolve(null==l?void 0:l.data)}catch(e){Promise.reject(e)}})),function(e,t,n){return D.apply(this,arguments)}),actionTicket:(w=(0,i.default)((function*(t,n,r,i,l,o){try{var u=`/services/erequest/api/tickets/recipient/${o}/${n}/${r}/${t}`,s=yield e({url:(0,a.getConfig)().BASE_URL+u,method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+l},body:JSON.stringify(i)});return Promise.resolve(null==s?void 0:s.data)}catch(e){Promise.reject(e)}})),function(e,t,n,r,i,a){return w.apply(this,arguments)}),getFormVersionByTicketAndUserTaskId:(b=(0,i.default)((function*(t,n){try{var r=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/ticket-sub-form-data/get-sub-form-data",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer"+n},body:JSON.stringify(t)});if(r)return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(!1)}})),function(e,t){return b.apply(this,arguments)}),updateFormData:(j=(0,i.default)((function*(t,n){try{var r=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/ticket-sub-form-data",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer"+n},body:JSON.stringify(t)});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return j.apply(this,arguments)}),finishTicketRecipient:(x=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/tickets/finish-recipient",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer"+t}});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return x.apply(this,arguments)}),getFormDataByUserTaskId:(S=(0,i.default)((function*(t,n){try{var r=yield e({url:(0,a.getConfig)().BASE_URL+"/services/idaas-eflow/api/forms/attached-user-task",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},params:t});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return S.apply(this,arguments)}),createPersonalEkyc:(g=(0,i.default)((function*(t,n){try{var r=yield e({url:(0,a.getConfig)().BASE_URL+"/services/eid/api/personal-kyc-detail-profiles-history/create",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),params:n});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e,t){return g.apply(this,arguments)}),createInformationOCR:(v=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/erequest/api/receiver-histories",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return v.apply(this,arguments)}),getListTaskSLA:(h=(0,i.default)((function*(t){try{var n="/services/workboard/api/notifications/tasks-sla/"+t,r=yield e({url:(0,a.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e){return h.apply(this,arguments)}),getHistoryEkycDetail:(m=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/eid/api/ekyc-history/detail",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){Promise.reject(e)}})),function(e){return m.apply(this,arguments)}),getEkycRepoById:(y=(0,i.default)((function*(t){try{var n="/services/common/api/p/ekyc/ekycRepository/"+t,r=yield e({url:(0,a.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e){return y.apply(this,arguments)}),getAllTypesOfEkyc:(p=(0,i.default)((function*(t){try{var n=`/services/common/api/p/ekyc/${t.id}/ekycRepositoryDetails/allTypee`,r=yield e({url:(0,a.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e){return p.apply(this,arguments)}),getDataEkycByType:(f=(0,i.default)((function*(t){try{var n=`/services/common/api/p/ekyc/${t.id}/ekycRepositoryDetails/type/detailss`,r=yield e({url:(0,a.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==r?void 0:r.data)}catch(e){Promise.reject(e)}})),function(e){return f.apply(this,arguments)}),getResourceById:(d=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/collabora/api/acls/resource",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return Promise.reject(e)}})),function(e){return d.apply(this,arguments)}),getUserInfoModel:(c=(0,i.default)((function*(t,n){try{var r,i=yield e({url:(0,a.getConfig)().BASE_URL+"/services/uaa/api/search/userInfoModel",method:"POST",headers:{"Content-Type":"application/json"},params:t,body:JSON.stringify(n)}),l=null!=(r=null==i?void 0:i.headers.get("x-total-count"))?r:0,o=null==i?void 0:i.data;return Promise.resolve({data:o,totalRecords:Number(l)})}catch(e){return console.log("getUserInfoModel",e),Promise.reject(e)}})),function(e,t){return c.apply(this,arguments)}),getDataOrgByOrgin:(s=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/uaa/api/organizations/child/find-organization-like-orgin",method:"GET",headers:{"Content-Type":"application/json"},params:t});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("getDataOrgByOrgin",e),Promise.reject(e)}})),function(e){return s.apply(this,arguments)}),updatePermissionOrg:(u=(0,i.default)((function*(t,n){try{var r=yield e({url:(0,a.getConfig)().BASE_URL+"/services/collabora/api/acls",method:"POST",headers:{"Content-Type":"application/json"},params:t,body:JSON.stringify(n)});return Promise.resolve(null==r?void 0:r.data)}catch(e){return console.log("updatePermissionOrg",e),Promise.reject(e)}})),function(e,t){return u.apply(this,arguments)}),getListTaskByTicketIdAndUsertaskId:(o=(0,i.default)((function*(t,n){try{var r=`/services/erequest/api/tasks/get-task-by/ticket/${t}/userTaskId/${n}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)}catch(e){return console.log("getListTaskByTicketIdAndUsertaskId",e),Promise.reject(e)}})),function(e,t){return o.apply(this,arguments)}),getListTaskByListId:(l=(0,i.default)((function*(t){try{var n=yield e({url:(0,a.getConfig)().BASE_URL+"/services/etask/api/tasks/listId",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listId:t})});return Promise.resolve(null==n?void 0:n.data)}catch(e){return console.log("getListTaskByListId",e),Promise.reject(e)}})),function(e){return l.apply(this,arguments)}),getListFormIdByTicketId:(r=(0,i.default)((function*(t){try{var n="/services/erequest/api/tickets/get-list-formId-by-ticketId/"+t,r=yield e({url:(0,a.getConfig)().BASE_URL+n,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==r?void 0:r.data)}catch(e){return console.log("getListFormIdByTicketId",e),Promise.reject(e)}})),function(e){return r.apply(this,arguments)}),findUserByOrgIn:(n=(0,i.default)((function*(t,n,r,i){var l=arguments.length>5?arguments[5]:void 0,o={advanced:!0,contactId:"",custId:null!=l?l:null,resourceIds:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,field:"",from:"",ids:[],keyWord:"",orgIn:i,owner:"",q:r,recipientId:"",recipientRole:[],refId:"",resource:"table_user",terms:{},to:""},u={page:t,size:n};l&&(u=Object.assign({},u,{isPublic:!0}));try{var s,c=yield e({url:(0,a.getConfig)().BASE_URL+"/services/uaa/api/search/user-info/role",method:"POST",headers:{"Content-Type":"application/json"},params:u,body:JSON.stringify(o)}),d=null!=(s=null==c?void 0:c.headers.get("x-total-count"))?s:0,f=null==c?void 0:c.data;return Promise.resolve({data:f,totalRecords:Number(d)})}catch(e){return console.log("findUserByOrgIn",e),Promise.reject(e)}})),function(e,t,r,i){return n.apply(this,arguments)}),getFormByUserTaskIdAndTicketId:(t=(0,i.default)((function*(t,n){var r=`/services/erequest/api/recipient-details/get-form/${t}/${n}`,i=yield e({url:(0,a.getConfig)().BASE_URL+r,method:"GET",headers:{"Content-Type":"application/json"}});return Promise.resolve(null==i?void 0:i.data)})),function(e,n){return t.apply(this,arguments)})};var t,n,r,l,o,u,s,c,d,f,p,y,m,h,v,g,S,x,j,b,w,D,C,T,I,k,P,_,M,F,O,E,R,V,z}}}]);//# sourceMappingURL=src_navigation_Request_tsx-webpack_sharing_consume_default_react-native_package_json_react-na-ee400a.chunk.bundle.map?platform=ios/* RCSSB */eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJoYXNoIjoiNjRjMTlmZmVlMmY5ZmI4MDgzYmNhZmI0MDY5YmU4M2ViNTMyMjYyZTlkZDgzMzM0NTI4ZWVmNDQzY2Q2MjExOCIsImlhdCI6MTc0ODg4MTY4OH0.ELCwG0ulGOeVPPftMuU1p9mROOES-9RxyWozNsmHW8Xuo42Ry_lALZl35wn9YcZJrsxKXpbuNcliUI2hB3mqblIHfX_Ji9OqFWsPViJHQch-QdIDiGqtTzDGo6TJRJpU_CXlD0eQaCkiWAwn5BQ5q9Jt_pPzfg3eCQZPTSoJd3eGO44W9h7KqsShNuf4MCf96J_yI52IFt1FDrq0HzO99mDBu7skf0DiO6o_Ec-DbI-D0yBuvG2q1Tjz0iLOUupYC7PESIsK9CDMDNinpneoONrFcMpGNCxk4ETPh88hdsd65tH2yh2zIn3tMne_v2VW6irH0oUUA9-sjHavgsUirOGzk31lXQsvSwQJvwjNA2rMdIro3shDrUZTWjtCZznPWuSbkm-lDK81dD5TwlNk2y_Dz8SR1YpllBZa0HKaHrYhVTvNa2YjioAyfKHmzfja2rdgwbMgYPfB8RwxyNGE3sJm10jYIb6yXPaK3-PcIM4qwdu0OX6gVcCVRFHyXuh7TTgHPwKY3QXbZjn5cGph5YyQCtnzX8qx0dAX1MCk-Q_niZSABtdjmOc5-TupuNtCqkgKJoBOAhIKxKF5Qof1AVR_H_o5nGDdT7DfA-CTFiTM3XSnHEjxEIDWAHRI7Xy4SGPnQWfGUUBDHjstAeSgiusbp4nXNZnv51DXlQS-SFE                                                                                                                                                                                                                                                                                                                                                                                                                                         