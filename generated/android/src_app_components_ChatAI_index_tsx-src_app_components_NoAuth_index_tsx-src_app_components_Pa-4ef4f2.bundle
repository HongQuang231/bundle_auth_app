var self=self||this||new Function("return this")()||{};(self.webpackChunkerequestApp=self.webpackChunkerequestApp||[]).push([["src_app_components_ChatAI_index_tsx-src_app_components_NoAuth_index_tsx-src_app_components_Pa-4ef4f2"],{25764:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(87841),o=r(n(24541)),a=r(n(2927)),l=n(47671);t.default=function(e){var t=e.itemChat,n=e.handleSendChat;return(0,l.jsxs)(i.View,{style:{marginBottom:10,backgroundColor:-1===t.userId?"#e6eaf0":"#6f2ced",borderRadius:8,paddingHorizontal:16,paddingVertical:12,maxWidth:"75%",alignSelf:-1===t.userId?"flex-start":"flex-end",justifyContent:"center"},children:[-1===t.userId&&(0,l.jsx)(a.default,{children:t.message}),-1!==t.userId&&-2!==t.userId&&(0,l.jsx)(o.default,{style:[-1!==t.userId&&{color:"#fff"}],children:t.message}),-2===t.userId&&(0,l.jsx)(i.Pressable,{onPress:function(){return null==n?void 0:n(t.message)},children:(0,l.jsx)(o.default,{style:{color:"#fff"},children:t.message})})]})}},92565:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.listQuestion=t.IAIResponseClass=void 0;var i=r(n(34579)),o=r(n(17383));t.listQuestion=["Tóm tắt thông tin lưu ý của giao dịch","Các thông tin cần lưu ý khi thực hiện công việc này là gì ?","Có deadline cần chú ý cho công việc này không ?"],t.IAIResponseClass=(0,i.default)((function e(t){(0,o.default)(this,e),this.id=Date.now()+Math.floor(1e4*Math.random()),this.conversationId="",this.message="",this.reply=null,this.sequence=null,this.pushNotify=null,this.status=null,this.userId=0,this.custId=0,this.orgIn="",this.createdDate=(new Date).toISOString(),this.createdBy="",this.lastModifiedDate=null,this.lastModifiedBy=null,this.feedback=!1,this.voteValue=null,this.idResponseAi=null,Object.assign(this,t)}))},87957:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatMessage=function(e){var t=e.onClose,n=e.userTaskId,r=e.ticketId,S=(0,l.useState)(""),j=(0,a.default)(S,2),I=j[0],w=j[1],_=(0,l.useState)(""),P=(0,a.default)(_,2),k=P[0],M=P[1],C=(0,l.useState)([]),D=(0,a.default)(C,2),O=D[0],T=D[1],z=(0,l.useState)(!1),A=(0,a.default)(z,2),R=A[0],F=A[1],V=(0,l.useState)(!1),E=(0,a.default)(V,2),W=E[0],L=E[1],B=(0,l.useState)(0),H=(0,a.default)(B,2),Y=H[0],N=H[1],J=(0,l.useState)(0),G=(0,a.default)(J,2),K=G[0],$=G[1],q=(0,h.useAIStore)(),U=q.listAIResponse,Q=q.addListAIResponse,Z=q.setListAIResponse,X=q.getListAIResponse,ee=(0,g.useAppSelector)((function(e){return e.account})).dataAccount,te=(0,p.useAIServices)(),ne=(0,l.useRef)(null);(0,l.useEffect)((function(){re(0)}),[]),(0,l.useEffect)((function(){U.length>0&&ne.current&&setTimeout((function(){var e;null==(e=ne.current)||e.scrollToEnd({animated:!0})}),1e3)}),[U,ne.current]);var re=(le=(0,o.default)((function*(e){try{var t,o={ticketId:r,userTaskId:n,page:e,size:b},a=yield te.getMessage(o);a&&(null==a?void 0:a.data.length)>0?(Z(0===e?a.data:[].concat((0,i.default)(X()),(0,i.default)(a.data))),M(null==(t=a.data[0])?void 0:t.conversationId),$(Math.ceil((null==a?void 0:a.totalData)/b))):T(v.listQuestion.map((function(e){return new v.IAIResponseClass({message:e,userId:-2,createdBy:ee.email,orgIn:ee.orgIn,custId:ee.custId})})))}catch(e){}finally{L(!1)}})),function(e){return le.apply(this,arguments)}),ie=(ae=(0,o.default)((function*(e){if(e.trim()){oe(e),F(!0);try{var t,i={question:e,conversationId:k,ticketId:r,userTaskId:n},o=yield te.sendMessage(i);o&&(M(o.conversationId),Q(o),null==(t=ne.current)||t.scrollToEnd({animated:!0}))}catch(e){}finally{w(""),c.Keyboard.dismiss(),F(!1)}}})),function(e){return ae.apply(this,arguments)}),oe=function(e){var t=new v.IAIResponseClass({message:e,userId:ee.id,createdBy:ee.email,orgIn:ee.orgIn,custId:ee.custId});Q(t),c.Keyboard.dismiss()};var ae;var le;return(0,m.jsx)(c.KeyboardAvoidingView,{keyboardVerticalOffset:60,behavior:"ios"===c.Platform.OS?"padding":"height",style:{flex:1},children:(0,m.jsx)(c.TouchableWithoutFeedback,{onPress:c.Keyboard.dismiss,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(s.default,{style:{backgroundColor:"#fff"},contentStyle:{backgroundColor:"#fff"},titleStyle:{color:"#000810"},fillIconBackLeft:"#000810",onPressIconLeft:function(){Z([]),null==t||t()},title:"Trợ lý số Kyta Intelligent"}),(0,m.jsx)(u.Divider,{}),(0,m.jsx)(c.View,{style:x.default.body,children:U.length>0?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.FlatList,{ref:ne,showsVerticalScrollIndicator:!1,style:{flex:1},data:U,keyExtractor:function(e){return""+e.id},renderItem:function(e){var t=e.item;return(0,m.jsx)(y.default,{itemChat:t})},onEndReachedThreshold:.5,onRefresh:function(){L(!0),N(0),re(0)},refreshing:W,onEndReached:function(){Y<K&&(N(Y+1),re(Y+1))}}),R&&(0,m.jsx)(u.Spinner,{})]}):(0,m.jsx)(c.FlatList,{showsVerticalScrollIndicator:!1,style:{flex:1},data:O,keyExtractor:function(e){return""+e.id},renderItem:function(e){var t=e.item;return(0,m.jsx)(y.default,{itemChat:t,handleSendChat:ie})}})}),(0,m.jsxs)(c.View,{style:x.default.footer,children:[(0,m.jsx)(d.default,{value:I,onChangeText:w,placeholder:"Đặt câu hỏi cho AI",onFocus:function(){setTimeout((function(){var e;null==(e=ne.current)||e.scrollToIndex({index:X().length-1,animated:!0})}),100)}}),(0,m.jsx)(c.TouchableOpacity,{onPress:function(){return ie(I)},hitSlop:15,children:(0,m.jsx)(f.IconSend,{width:24,height:24})})]})]})})})};var i=r(n(41132)),o=r(n(29293)),a=r(n(85715)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(21527)),s=r(n(43184)),u=n(32207),d=r(n(54813)),c=n(87841),f=n(46317),h=n(48435),p=n(33139),y=r(n(25764)),v=n(92565),g=n(12638),x=r(n(70989)),m=n(47671);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}var b=50},70989:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841);t.default=r.StyleSheet.create({footer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:16,paddingVertical:8,columnGap:8},body:{flex:1,paddingHorizontal:16,paddingTop:16}})},48435:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.useAIStore=void 0;var i=r(n(41132)),o=n(42341),a={listAIResponse:[]};t.useAIStore=(0,o.create)((function(e,t){return Object.assign({},a,{setListAIResponse:function(t){e({listAIResponse:t})},addListAIResponse:function(n){var r=[].concat((0,i.default)(t().listAIResponse),[n]);e({listAIResponse:r})},getListAIResponse:function(){return t().listAIResponse}})}))},39284:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.ticketId,n=e.userTaskId,r=(0,l.useSharedValue)(0),y=(0,l.useSharedValue)(0),v=(0,d.useSafeAreaInsets)(),b=(0,a.useWindowDimensions)().height,j=(0,o.useState)(!1),I=(0,i.default)(j,2),w=I[0],_=I[1],P=s.Gesture.Pan().onChange((M=function(e){r.value+=e.changeY},M.__closure={offsetY:r},M.__workletHash=8757107868020,M.__initData=x,M)).onFinalize(function(){var e=function(e){r.value=(0,l.withDecay)({velocity:e.velocityY,rubberBandEffect:!0,deceleration:.1,velocityFactor:.5,rubberBandFactor:1,reduceMotion:l.ReduceMotion.System,clamp:[-y.value/2+g/2+v.top,Math.min(y.value/2,r.value+v.top)]})};return e.__closure={offsetY:r,withDecay:l.withDecay,ReduceMotion:l.ReduceMotion,height:y,SIZE:g,insets:v},e.__workletHash=4915333147964,e.__initData=m,e}()),k=(0,l.useAnimatedStyle)(function(){var e=function(){return{transform:[{translateY:r.value}]}};return e.__closure={offsetY:r},e.__workletHash=0x92f05087bec,e.__initData=S,e}());var M;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.GestureHandlerRootView,{style:[u.default.container,{bottom:b/4}],children:(0,p.jsx)(a.View,{onLayout:function(e){y.value=e.nativeEvent.layout.height},style:u.default.wrapper,children:(0,p.jsx)(s.GestureDetector,{gesture:P,children:(0,p.jsx)(l.default.View,{style:[u.default.box,k],children:(0,p.jsx)(a.Pressable,{onPress:function(){return _(!0)},children:(0,p.jsx)(c.default,{style:{color:"#fff",fontSize:12},children:"AI Chat"})})})})})}),(0,p.jsx)(f.default,{isVisible:w,children:(0,p.jsx)(h.ChatMessage,{ticketId:t,userTaskId:n,onClose:function(){return _(!1)}})})]})};var i=r(n(85715)),o=v(n(21527)),a=n(87841),l=v(n(69644)),s=n(64516),u=r(n(14920)),d=n(7005),c=r(n(24541)),f=r(n(76644)),h=n(87957),p=n(47671);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}var g=30,x={code:"function anonymous(event){const{offsetY}=this.__closure;offsetY.value+=event.changeY;}"},m={code:"function anonymous(event){const{offsetY,withDecay,ReduceMotion,height,SIZE,insets}=this.__closure;offsetY.value=withDecay({velocity:event.velocityY,rubberBandEffect:true,deceleration:0.1,velocityFactor:0.5,rubberBandFactor:1,reduceMotion:ReduceMotion.System,clamp:[-height.value/2+SIZE/2+insets.top,Math.min(height.value/2,offsetY.value+insets.top)]});}"},S={code:"function anonymous(){const{offsetY}=this.__closure;return{transform:[{translateY:offsetY.value}]};}"}},14920:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841);t.default=r.StyleSheet.create({container:{position:"absolute",right:0},wrapper:{alignItems:"flex-end",justifyContent:"flex-end"},box:{backgroundColor:"#2f45ff",alignItems:"center",justifyContent:"center",borderTopLeftRadius:15,borderBottomLeftRadius:15,padding:8}})},57755:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(7005),o=r(n(43184)),a=r(n(24541)),l=n(47671);t.default=function(){return(0,l.jsxs)(i.SafeAreaView,{edges:["bottom"],children:[(0,l.jsx)(o.default,{}),(0,l.jsx)(a.default,{children:"Bạn không có quyền truy cập"})]})}},75463:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.OverflowMenuCM=void 0;var i=r(n(85715)),o=n(21527),a=n(32207),l=n(2884),s=n(87841),u=r(n(24541)),d=n(47671);t.OverflowMenuCM=function(e){var t=e.listData,n=void 0===t?[]:t,r=e.selectedIndex,c=void 0===r?void 0:r,f=e.selectedTitle,h=void 0===f?"Toggle Menu":f,p=e.setSelectedIndex,y=e.renderSelected,v=(0,l.useTranslation)().t,g=(0,o.useState)(!1),x=(0,i.default)(g,2),m=x[0],S=x[1];return(0,d.jsx)(a.OverflowMenu,{anchor:function(){return y?(0,d.jsx)(s.TouchableOpacity,{onPress:function(){return S(!0)},children:y}):(0,d.jsx)(s.TouchableOpacity,{onPress:function(){return S(!0)},children:(0,d.jsx)(u.default,{children:h})})},visible:m,selectedIndex:c,onSelect:function(e){p(e),S(!1)},onBackdropPress:function(){return S(!1)},children:n.map((function(e){return(0,d.jsx)(a.MenuItem,{title:v(e.value),accessoryLeft:null==e?void 0:e.icon},e.id)}))})}},81924:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85715)),o=n(87841),a=r(n(24541)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(21527)),s=r(n(83128)),u=n(41995),d=n(46317),c=n(47671);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}t.default=function(e){var t=e.collectionSize,n=e.pageSize,r=e.currentPage,f=e.onPageChange,h=(0,l.useState)(Array.from(Array(Math.ceil(t/n))).map((function(e,t){return t+1}))),p=(0,i.default)(h,2),y=p[0],v=p[1];(0,l.useEffect)((function(){v(Array.from(Array(Math.ceil(t/n))).map((function(e,t){return t+1})))}),[t]);var g=function(){for(var e=[],t=Math.max(1,r-1),n=Math.min(y.length,r+1),i=t;i<=n;i++)i>y.length||(0===i&&(i+=1),e.push(i));return e},x=function(e){f(e),g()};return(0,c.jsxs)(o.View,{style:s.default.ctnMain,children:[(0,c.jsx)(o.TouchableOpacity,{onPress:function(){var e=r-1;e<=0||e>=1&&x(e)},style:[s.default.ctnText,{transform:[{rotate:"90deg"}]}],hitSlop:(0,u.SizeDP)(15),children:(0,c.jsx)(d.IconArrowGrey,{width:(0,u.SizeDP)(16),height:(0,u.SizeDP)(16)})}),y.length>5?(0,c.jsxs)(c.Fragment,{children:[r>2&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.TouchableOpacity,{hitSlop:(0,u.SizeDP)(15),onPress:function(){return x(1)},style:[s.default.ctnText,1===r&&s.default.ctnSelect],children:(0,c.jsx)(a.default,{children:"1"})}),r>3&&(0,c.jsx)(a.default,{children:"..."})]}),g().map((function(e){return(0,c.jsx)(o.TouchableOpacity,{hitSlop:(0,u.SizeDP)(15),onPress:function(){return x(e)},style:[s.default.ctnText,r===e&&s.default.ctnSelect],children:(0,c.jsx)(a.default,{children:e})},e)})),r<y.length-1&&(0,c.jsxs)(c.Fragment,{children:[r<y.length-2&&(0,c.jsx)(a.default,{children:"..."}),(0,c.jsx)(o.TouchableOpacity,{hitSlop:(0,u.SizeDP)(15),style:[s.default.ctnText,r===y.length&&s.default.ctnSelect],onPress:function(){return x(y.length)},children:(0,c.jsx)(a.default,{children:y.length})})]})]}):(0,c.jsx)(c.Fragment,{children:g().map((function(e){return(0,c.jsx)(o.TouchableOpacity,{hitSlop:(0,u.SizeDP)(15),onPress:function(){return x(e)},style:[s.default.ctnText,r===e&&s.default.ctnSelect],children:(0,c.jsx)(a.default,{children:e})},e)}))}),(0,c.jsx)(o.TouchableOpacity,{onPress:function(){var e=r+1;e>y.length||e<=y.length&&x(e)},style:[s.default.ctnText,{transform:[{rotate:"-90deg"}]}],hitSlop:(0,u.SizeDP)(15),children:(0,c.jsx)(d.IconArrowGrey,{width:(0,u.SizeDP)(16),height:(0,u.SizeDP)(16)})})]})}},83128:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995);t.default=r.StyleSheet.create({ctnMain:{flexDirection:"row",alignItems:"center",justifyContent:"center"},ctnText:{alignItems:"center",justifyContent:"center",padding:(0,i.SizeDP)(4),borderRadius:(0,i.SizeDP)(10),marginHorizontal:(0,i.SizeDP)(5),minWidth:(0,i.SizeDP)(30)},ctnSelect:{backgroundColor:"#f2ecfd",color:"#6f2ced"}})},75672:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85715)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(21527)),a=n(87841),l=r(n(14892)),s=n(2884),u=r(n(24541)),d=n(47671);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}t.default=function(e){var t=e.tableHeaders,n=e.tableData,r=e.stickyColumnLeftIndex,c=void 0===r?0:r,f=(e.stickyColumnRightIndex,e.stickyLeft),h=(e.stickyRight,e.isPaging,(0,s.useTranslation)().t),p=(0,a.useWindowDimensions)().width,y=(0,o.useState)(0),v=(0,i.default)(y,2),g=v[0],x=v[1];return(0,d.jsx)(a.View,{style:l.default.container,children:(0,d.jsxs)(a.View,{style:l.default.tableBody,children:[f&&c&&t.slice(-c).reverse().map((function(e,t){return(0,d.jsxs)(a.View,{onLayout:function(e){x(e.nativeEvent.layout.width)},style:[l.default.stickyColumnScroll,{right:t*g},1===c&&l.default.box],children:[(0,d.jsx)(a.View,{style:[l.default.stickyHeader,"action"===e&&{alignItems:"center"}],children:(0,d.jsx)(u.default,{style:l.default.headerText,children:h(`TK.${e}`)})}),null==n?void 0:n.map((function(t,n){return(0,d.jsx)(a.View,{style:[l.default.stickyColumn,"action"===e&&{alignItems:"center"}],children:"object"!=typeof t[e]?(0,d.jsx)(u.default,{style:l.default.cellText,children:t[e]}):t[e]},n)}))]},e)})),(0,d.jsx)(a.ScrollView,{horizontal:!0,children:(0,d.jsx)(a.View,{style:[l.default.row,!f&&{marginRight:0}],children:t.slice(0,t.length-c).map((function(e,r){return(0,d.jsxs)(a.View,{children:[(0,d.jsx)(a.View,{style:[l.default.stickyHeader,"action"===e&&{alignItems:"center"},{minWidth:"STT"===e?30:(p-30)/(t.length-c-1)}],children:(0,d.jsx)(u.default,{style:l.default.headerText,children:h(`TK.${e}`)})}),null==n?void 0:n.map((function(n,r){return(0,d.jsx)(a.View,{style:[l.default.stickyColumn,"action"===e&&{alignItems:"center"},{minWidth:"STT"===e?30:(p-30)/(t.length-c-1)}],children:"object"!=typeof n[e]?(0,d.jsx)(u.default,{style:l.default.cellText,children:n[e]}):n[e]},r)}))]},r)}))})})]})})}},14892:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(20880),o=n(41995);t.default=r.StyleSheet.create({container:{flex:1},tableBody:{flexDirection:"row",flex:1},stickyColumnScroll:{position:"absolute",right:0,zIndex:10,minWidth:(0,o.SizeDP)(100),flex:1},stickyHeader:{minWidth:(0,o.SizeDP)(100),padding:(0,o.SizeDP)(10),justifyContent:"center",alignItems:"flex-start",backgroundColor:"#F2ECFD",borderTopWidth:1,borderBottomWidth:1,borderColor:"#00358014"},stickyColumn:{minWidth:(0,o.SizeDP)(100),flex:1,justifyContent:"center",alignItems:"flex-start",backgroundColor:"#fff",padding:(0,o.SizeDP)(10),minHeight:(0,o.SizeDP)(50)},headerRow:{flexDirection:"row",marginRight:(0,o.SizeDP)(100)},headerCell:{minWidth:(0,o.SizeDP)(100),padding:(0,o.SizeDP)(10),justifyContent:"center",alignItems:"flex-start",backgroundColor:"#F2ECFD",borderTopWidth:1,borderBottomWidth:1,borderColor:"#00358014"},headerText:{fontSize:i.FontSize.FontTiny,fontFamily:i.Font.InterMedium500,color:"#00204DB2"},row:{flexDirection:"row",marginRight:(0,o.SizeDP)(100)},cell:{minWidth:(0,o.SizeDP)(100),padding:(0,o.SizeDP)(10),justifyContent:"center",alignItems:"flex-start"},cellText:{textAlign:"left",fontSize:i.FontSize.FontTiny,fontFamily:i.Font.InterRegular400,color:"#00204DCC"},box:{shadowColor:"#2D3239",shadowOffset:{width:-1,height:0},shadowOpacity:.1,shadowRadius:6,elevation:3}})},55529:function(e,t,n){var r=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(29293)),o=r(n(85715)),a=n(7005),l=r(n(93238)),s=n(20880),u=n(87841),d=r(n(94516)),c=r(n(48049)),f=n(21527),h=n(12638),p=r(n(24541)),y=n(41995),v=r(n(77389)),g=n(40851),x=n(2884),m=n(88e3),S=r(n(43184)),b=n(75463),j=n(32207),I=n(47671);t.default=function(e){var t=e.versionId,n=e.isShowNoti,r=void 0!==n&&n,w=e.data,_=e.readOnly,P=e.isOnlyView,k=e.viewFromDoc,M=void 0!==k&&k,C=e.onClose,D=e.handleSubmit,O=e.nameHeader,T=e.envelopeEnvNo,z=(0,x.useTranslation)().t,A=(0,f.useRef)(null),R=(0,h.useAppSelector)((function(e){return e.common})).accessToken,F=(0,f.useState)(),V=(0,o.default)(F,2),E=V[0],W=V[1],L=(0,f.useState)([]),B=(0,o.default)(L,2),H=B[0],Y=B[1],N=(0,f.useState)(!0),J=(0,o.default)(N,2),G=J[0],K=J[1],$=(0,f.useState)(),q=(0,o.default)($,2),U=q[0],Q=q[1],Z=(0,f.useState)(!1),X=(0,o.default)(Z,2),ee=X[0],te=X[1],ne=(0,f.useState)(!1),re=(0,o.default)(ne,2),ie=re[0],oe=re[1],ae=(0,f.useState)(!1),le=(0,o.default)(ae,2),se=le[0],ue=le[1],de=(0,f.useState)(),ce=(0,o.default)(de,2),fe=ce[0],he=ce[1],pe=(0,g.useReviewServices)();(0,f.useEffect)((function(){r&&u.Alert.alert(z("CM.noti"),z("CM.pleaseFillForm"))}),[]);var ye,ve,ge,xe=(ye=(0,i.default)((function*(e){var t={userTaskId:w._userTaskId,ticketId:w._ticketId,version:e},n=yield pe.getFormVersionByTicketAndUserTaskId(t,R);if(n&&null===e){var r=Array.from(Array(Math.ceil(n.versionUserTask))).map((function(e,t){return t+1})).map((function(e,t){return{id:e,key:`${z("CM.version")} `+e,value:`${z("CM.version")} `+e}}));Y(r),W(r[r.length-1])}return n})),function(e){return ye.apply(this,arguments)}),me=(ve=(0,i.default)((function*(e){if(!M){var n=e.nativeEvent.data;if(n&&"string"==typeof n){var r=JSON.parse(n);if("e-from"===(null==r?void 0:r.result))be(null);else if("result"===(null==r?void 0:r.result))try{"save"===fe?oe(!0):ue(!0);var i={formData:null==r?void 0:r.data.map((function(e){return Object.assign({},e,{dataType:Se(e),typeForm:e.type,value:e.value})})),ticketId:w._ticketId,userTaskId:w._userTaskId,version:t,eformId:w.formId};(yield pe.updateFormData(i,R))?(v.default.show({type:"success",text1:z("CM.noti"),text2:z("CM.fillFormSuccess")}),ee||D&&D(),C()):v.default.show({type:"error",text1:z("CM.noti"),text2:z("CM.fillFormFailure")})}catch(e){}finally{oe(!1),ue(!1)}}}})),function(e){return ve.apply(this,arguments)}),Se=function(e){return["textField","textArea","password","email","phone_number","radio_button","upload_file","upload_img","hyperlink","datepicker","signature"].includes(e.type)?"String":"number"===e.type?"Number":["check_box","dropdown"].includes(e.type)?"dropdown"===e.type&&e.validate.mutilChoose||"check_box"===e.type?"List":"String":null},be=(ge=(0,i.default)((function*(e){var t=yield xe(e);if(t){var n,r,i=null==t?void 0:t.formData;i&&T&&i.forEach((function(e){"eContractEnvelopEnvNo"===e.code&&(e.value=T)})),i=null==(n=i)?void 0:n.filter((function(e){return e.value}));var o=`window.postMessage('${JSON.stringify({type:"postFormEdit",isReadonly:_,data:i}).replace(/\\/g,"\\\\").replace(/'/g,"\\'")}', '*');`;null==A||null==(r=A.current)||r.injectJavaScript(o)}})),function(e){return ge.apply(this,arguments)});return(0,I.jsxs)(a.SafeAreaView,{edges:["bottom","top"],style:{flex:1,backgroundColor:"#fff"},children:[(0,I.jsx)(S.default,{style:{backgroundColor:"#fff"},titleStyle:{color:"#00204D"},fillIconBackLeft:"#00204DB2",contentStyle:{backgroundColor:"#fff"},title:O,onPressIconLeft:C}),(0,I.jsx)(j.Divider,{}),H.length>0&&!P&&!_&&(0,I.jsxs)(u.View,{style:{padding:16,alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:(0,y.SizeDP)(16)},children:[(0,I.jsx)(p.default,{children:z("CM.selectVersion")}),(0,I.jsx)(b.OverflowMenuCM,{selectedIndex:U,listData:H,setSelectedIndex:function(e){var t;e&&(Q(e),W(H[null==e?void 0:e.row]),be(null==(t=H[null==e?void 0:e.row])?void 0:t.id))},selectedTitle:(0,I.jsx)(u.View,{style:c.default.version,children:(0,I.jsx)(p.default,{children:null==E?void 0:E.value})})})]}),(0,I.jsx)(l.default,{nestedScrollEnabled:!0,ref:A,onMessage:me,startInLoadingState:!0,injectedJavaScript:s.String.SCRIPT_SCALE_WEBVIEW,allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!1,domStorageEnabled:!0,javaScriptEnabled:!0,thirdPartyCookiesEnabled:!0,source:{uri:(0,m.getConfig)().BASE_URL_FORM+t},onLoadEnd:function(){return K(!1)},webviewDebuggingEnabled:!0}),(0,I.jsxs)(u.View,{style:c.default.ctnFooter,children:[!P&&!_&&(0,I.jsx)(d.default,{disabled:G,style:{flex:1,backgroundColor:"#f2ecfd"},styleLabel:{color:"#6d1fad"},label:z("CM.save"),loading:ie,onPress:function(){var e;te(!0),he("save");var t=`window.postMessage('${JSON.stringify({result:"submit"})}', '*');`;null==A||null==(e=A.current)||e.injectJavaScript(t)}}),!P&&!_&&(0,I.jsx)(d.default,{label:z("CM.confirm"),style:{flex:1},styleLabel:{color:"#fff"},loading:se,onPress:function(){var e;te(!1),he("submit");var t=`window.postMessage('${JSON.stringify({result:"submit"})}', '*');`;null==A||null==(e=A.current)||e.injectJavaScript(t)}})]})]})}},48049:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(87841),i=n(41995);t.default=r.StyleSheet.create({ctnFooter:{flexDirection:"row",paddingHorizontal:(0,i.SizeDP)(16),columnGap:(0,i.SizeDP)(16),marginTop:(0,i.SizeDP)(8)},version:{borderWidth:(0,i.SizeDP)(1),borderColor:"rgba(0, 53, 128, .35)",borderRadius:(0,i.SizeDP)(8),paddingHorizontal:(0,i.SizeDP)(8),paddingVertical:(0,i.SizeDP)(5)}})}}]);//# sourceMappingURL=src_app_components_ChatAI_index_tsx-src_app_components_NoAuth_index_tsx-src_app_components_Pa-4ef4f2.bundle.map?platform=android/* RCSSB */eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJoYXNoIjoiMzcwMDU5Y2I3M2VlNzIzMzIxMmZmNDNjY2QzMDA1M2VkOTAwNzI5ZWMwMTJlOWUyM2M2NzdhYjU0NGJlNmYxOCIsImlhdCI6MTc0OTYzNTUyM30.U7InN7llvJWfooTNUKMTnUoWqkB9xbPUtyoD1KXkh3QKJCMlTLYQwpKE6Mpz7YoS89FPli07ClBhPLYrahZbEGc5z9tSQAMcHjNItxJKgUAlNB4njq0qV3JKwB7R3FG1r2HkUZiGUyxGqUv8_L-XuLNZ6IafCHSbrCF5UoJoZxhErCh0jS29O-PY6f14SvUWNuyXUVqsVc6aprHAaZontsOAgskL6T-Hmtq20U035ZLiAG4kRLJnkT6mdXcRUvHzAqN0iMkhpiZjOKpDzkU0IjhFSLtk2sIttyJCu0ZjPkU4F3uwhjOEIbPpac0ddgBoLk9h1oHKNCyCR9YfeXMxcXzSWxjzntFcZ-ZtYLR9BK41larh7MO7r7MD16QsD7wigRnJyEF1T0tLyjOhKd62woHsUhuKVqlJ7xqDDc9CGASCIRjAfGFqvmlUWrUyauliC8lHWgyzystg7y-HWeETBqQB9J1u73mLirIFPfPBCppFsPhVe4VY59gfiUweDOb9qQkRgX_rZlyCVpyKtUObwYtrkeJZgJxzdjrB1yj9_5TSv2p3AUv8gNuF-V9dIK7VIcYpWtYvpoYT3wf2NmO4tLscycIv7S1W7MRIIBxW64J8ZhMOGM09QKyB_ENxH9Nzh8_gYmNf_mrFcWNhhgv6t-zh4oM75saRUM39YGMdE5c                                                                                                                                                                                                                                                                                                                                                                                                                                         